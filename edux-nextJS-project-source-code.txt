├── .gitignore
├── Review the process of how the default tenant admin user is created when the tenant first sig up.docx
├── app
    ├── (dashboard)
    │   └── dashboard
    │   │   ├── (billing)
    │   │       └── billing
    │   │       │   └── page.tsx
    │   │   ├── (integrations)
    │   │       └── integrations
    │   │       │   └── page.tsx
    │   │   ├── (people)
    │   │       └── people
    │   │       │   ├── columns.tsx
    │   │       │   ├── data-table.tsx
    │   │       │   ├── page.tsx
    │   │       │   └── person-form-dialog.tsx
    │   │   ├── (schools)
    │   │       └── schools
    │   │       │   ├── SchoolsClientActions.tsx
    │   │       │   ├── [schoolId]
    │   │       │       ├── (academics)
    │   │       │       │   └── academics
    │   │       │       │   │   └── page.tsx
    │   │       │       ├── (classes)
    │   │       │       │   └── classes
    │   │       │       │   │   └── page.tsx
    │   │       │       ├── (overview)
    │   │       │       │   └── page.tsx
    │   │       │       ├── (people)
    │   │       │       │   └── people
    │   │       │       │   │   ├── [personId]
    │   │       │       │   │       ├── page.tsx
    │   │       │       │   │       └── settings
    │   │       │       │   │       │   └── page.tsx
    │   │       │       │   │   └── page.tsx
    │   │       │       ├── (students)
    │   │       │       │   ├── [studentId]
    │   │       │       │   │   └── profile
    │   │       │       │   │   │   └── page.tsx
    │   │       │       │   └── students
    │   │       │       │   │   └── page.tsx
    │   │       │       ├── _components
    │   │       │       │   ├── academic-performance-chart.tsx
    │   │       │       │   ├── alerts-panel.tsx
    │   │       │       │   ├── attendance-chart.tsx
    │   │       │       │   ├── enrollment-chart.tsx
    │   │       │       │   ├── financial-overview.tsx
    │   │       │       │   ├── quick-actions.tsx
    │   │       │       │   ├── recent-activity.tsx
    │   │       │       │   ├── staff-metrics.tsx
    │   │       │       │   ├── stats-cards.tsx
    │   │       │       │   └── upcoming-events.tsx
    │   │       │       ├── calendar
    │   │       │       │   └── page.tsx
    │   │       │       ├── layout.tsx
    │   │       │       ├── school-provider.tsx
    │   │       │       └── settings
    │   │       │       │   ├── _components
    │   │       │       │       └── school-settings-form.tsx
    │   │       │       │   └── page.tsx
    │   │       │   ├── _components
    │   │       │       ├── empty-state.tsx
    │   │       │       ├── enhanced-school-card.tsx
    │   │       │       ├── forms
    │   │       │       │   ├── academic-information-form.tsx
    │   │       │       │   ├── basic-information-form.tsx
    │   │       │       │   ├── departments-form.tsx
    │   │       │       │   └── grade-levels-form.tsx
    │   │       │       ├── school-card-skeleton.tsx
    │   │       │       ├── school-card.tsx
    │   │       │       ├── school-setup.tsx
    │   │       │       └── types
    │   │       │       │   └── school-forms.ts
    │   │       │   ├── columns.tsx
    │   │       │   ├── data-table.tsx
    │   │       │   ├── page.tsx
    │   │       │   └── school-form-dialog.tsx
    │   │   ├── (tenant)
    │   │       └── layout.tsx
    │   │   ├── layout.tsx
    │   │   ├── page.tsx
    │   │   ├── roles
    │   │       ├── columns.tsx
    │   │       ├── data-table.tsx
    │   │       ├── page.tsx
    │   │       └── role-form-dialog.tsx
    │   │   ├── settings
    │   │       ├── _components
    │   │       │   ├── delete-account-form.tsx
    │   │       │   ├── update-password-form.tsx
    │   │       │   └── update-profile-form.tsx
    │   │       └── page.tsx
    │   │   └── tenant-provider.tsx
    ├── _components
    │   ├── call-to-action-section.tsx
    │   ├── features-section.tsx
    │   ├── footer.tsx
    │   ├── header.tsx
    │   ├── hero-section.tsx
    │   ├── loading.tsx
    │   └── security-section.tsx
    ├── api
    │   ├── auth
    │   │   └── login
    │   │   │   └── route.ts
    │   └── tenants
    │   │   └── route.ts
    ├── favicon.ico
    ├── globals.css
    ├── layout.tsx
    ├── login
    │   └── page.tsx
    ├── page.tsx
    └── signup
    │   └── page.tsx
├── components.json
├── components
    ├── app-sidebar.tsx
    ├── breadcrumbs.tsx
    ├── logout-button.tsx
    ├── mobile-nav.tsx
    ├── navigation-provider.tsx
    ├── sidebar-nav.tsx
    ├── tenant-provider.tsx
    ├── theme-provider.tsx
    ├── theme-toggle.tsx
    ├── ui
    │   ├── alert.tsx
    │   ├── avatar.tsx
    │   ├── badge.tsx
    │   ├── breadcrumb.tsx
    │   ├── button.tsx
    │   ├── card.tsx
    │   ├── checkbox.tsx
    │   ├── collapsible.tsx
    │   ├── command.tsx
    │   ├── dialog.tsx
    │   ├── dropdown-menu.tsx
    │   ├── form.tsx
    │   ├── input.tsx
    │   ├── label.tsx
    │   ├── multi-select.tsx
    │   ├── progress.tsx
    │   ├── select.tsx
    │   ├── separator.tsx
    │   ├── sheet.tsx
    │   ├── sidebar.tsx
    │   ├── skeleton.tsx
    │   ├── sonner.tsx
    │   ├── switch.tsx
    │   ├── table.tsx
    │   ├── tabs.tsx
    │   ├── textarea.tsx
    │   └── tooltip.tsx
    └── user-nav.tsx
├── drizzle.config.ts
├── drizzle.tenant.config.ts
├── drizzle
    ├── main-migrations
    │   ├── 0000_medical_captain_universe.sql
    │   └── meta
    │   │   ├── 0000_snapshot.json
    │   │   └── _journal.json
    └── tenant
    │   ├── 0000_sleepy_doctor_spectrum.sql
    │   └── meta
    │       ├── 0000_snapshot.json
    │       └── _journal.json
├── env.mjs
├── eslint.config.mjs
├── hooks
    └── use-mobile.ts
├── lib
    ├── actions
    │   ├── auth.ts
    │   ├── person.ts
    │   ├── role.ts
    │   ├── schools.ts
    │   ├── settings.ts
    │   └── user.ts
    ├── constants
    │   └── rbac.ts
    ├── crypto.ts
    ├── db
    │   ├── index.ts
    │   ├── migrate.ts
    │   └── schema
    │   │   ├── shared.ts
    │   │   └── tenant.ts
    ├── dto
    │   ├── department.ts
    │   ├── person.ts
    │   ├── role.ts
    │   ├── school.ts
    │   ├── settings.ts
    │   ├── tenant.ts
    │   └── user.ts
    ├── logger.ts
    ├── navigation.ts
    ├── neon
    │   └── api.ts
    ├── server
    │   └── tenant.ts
    ├── session.ts
    └── utils.ts
├── middleware.ts
├── next.config.mjs
├── package-lock.json
├── package.json
├── postcss.config.mjs
├── public
    ├── file.svg
    ├── globe.svg
    ├── next.svg
    ├── notion-avatar-1753323104262.png
    ├── vercel.svg
    └── window.svg
├── scripts
    ├── migrate-tenant.ts
    └── seed-tenant-data.ts
└── tsconfig.json


/.gitignore:
--------------------------------------------------------------------------------
 1 | # See https://help.github.com/articles/ignoring-files/ for more about ignoring files.
 2 | 
 3 | # dependencies
 4 | /node_modules
 5 | /.pnp
 6 | .pnp.*
 7 | .yarn/*
 8 | !.yarn/patches
 9 | !.yarn/plugins
10 | !.yarn/releases
11 | !.yarn/versions
12 | 
13 | # testing
14 | /coverage
15 | 
16 | # next.js
17 | /.next/
18 | /out/
19 | 
20 | /.idea/
21 | # production
22 | /build
23 | 
24 | # misc
25 | .DS_Store
26 | *.pem
27 | eduX-project-source-code.txt
28 | Review the process of how the default tenant admin user is created when the tenant first sig up.docx
29 | # debug
30 | npm-debug.log*
31 | yarn-debug.log*
32 | yarn-error.log*
33 | .pnpm-debug.log*
34 | 
35 | # env files (can opt-in for committing if needed)
36 | .env*
37 | 
38 | # vercel
39 | .vercel
40 | 
41 | # typescript
42 | *.tsbuildinfo
43 | next-env.d.ts
44 | 


--------------------------------------------------------------------------------
/Review the process of how the default tenant admin user is created when the tenant first sig up.docx:
--------------------------------------------------------------------------------
https://raw.githubusercontent.com/shoaibrain/edux/Calendar/Review the process of how the default tenant admin user is created when the tenant first sig up.docx


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(billing)/billing/page.tsx:
--------------------------------------------------------------------------------
 1 | import { enforcePermission } from "@/lib/session";
 2 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
 3 | 
 4 | export default async function BillingPage() {
 5 |   await enforcePermission('tenant:view_billing'); 
 6 | 
 7 |   return (
 8 |     <div className="space-y-4">
 9 |         <h1 className="text-2xl font-bold">Billing & Subscriptions</h1>
10 |         <p className="text-muted-foreground">Manage your plan, payment methods, and view invoices.</p>
11 |         <Card>
12 |             <CardHeader>
13 |                 <CardTitle>Current Plan</CardTitle>
14 |                 <CardDescription>This is a placeholder for billing information.</CardDescription>
15 |             </CardHeader>
16 |             <CardContent>
17 |                 <p className="text-muted-foreground">Integration with a payment provider like Stripe would be implemented here.</p>
18 |             </CardContent>
19 |         </Card>
20 |     </div>
21 |   );
22 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(integrations)/integrations/page.tsx:
--------------------------------------------------------------------------------
 1 | import { enforcePermission } from "@/lib/session";
 2 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
 3 | 
 4 | export default async function IntegrationsPage() {
 5 |   await enforcePermission('tenant:manage'); 
 6 | 
 7 |   return (
 8 |     <div className="space-y-4">
 9 |         <h1 className="text-2xl font-bold">Integrations</h1>
10 |         <p className="text-muted-foreground">Connect Scholian with your favorite tools.</p>
11 |         <Card>
12 |             <CardHeader>
13 |                 <CardTitle>Available Integrations</CardTitle>
14 |                 <CardDescription>This is a placeholder for integration management.</CardDescription>
15 |             </CardHeader>
16 |             <CardContent>
17 |                 <p className="text-muted-foreground">A marketplace or list of available integrations would be displayed here.</p>
18 |             </CardContent>
19 |         </Card>
20 |     </div>
21 |   );
22 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(people)/people/columns.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import { ColumnDef } from "@tanstack/react-table"
  4 | import { MoreHorizontal } from "lucide-react"
  5 | import { Button } from "@/components/ui/button"
  6 | import {
  7 |   DropdownMenu,
  8 |   DropdownMenuContent,
  9 |   DropdownMenuItem,
 10 |   DropdownMenuLabel,
 11 |   DropdownMenuSeparator,
 12 |   DropdownMenuTrigger,
 13 | } from "@/components/ui/dropdown-menu"
 14 | import { toast } from "sonner"
 15 | import { deletePersonAction } from "@/lib/actions/person" 
 16 | import type { people, users, schools, usersToRoles } from "@/lib/db/schema/tenant"; 
 17 | 
 18 | // Definitive Person type: extending Drizzle's inferred type with eager-loaded relations
 19 | export type Person = (typeof people.$inferSelect) & {
 20 |     user?: (typeof users.$inferSelect & { usersToRoles?: (typeof usersToRoles.$inferSelect)[] }) | null; 
 21 |     school?: typeof schools.$inferSelect | null; 
 22 | };
 23 | 
 24 | export const getColumns = (
 25 |     onEdit: (person: Person) => void, // onEdit strictly expects a Person object (database type)
 26 |     canEditPerson: boolean,
 27 |     canDeletePerson: boolean,
 28 |     canGrantAccess: boolean 
 29 | ): ColumnDef<Person>[] => [
 30 |     {
 31 |         accessorKey: "firstName",
 32 |         header: "First Name",
 33 |     },
 34 |     {
 35 |         accessorKey: "lastName",
 36 |         header: "Last Name",
 37 |     },
 38 |     {
 39 |         accessorKey: "personType",
 40 |         header: "Type",
 41 |     },
 42 |     {
 43 |         accessorKey: "school.name", 
 44 |         header: "School",
 45 |         cell: ({ row }) => {
 46 |             const person = row.original;
 47 |             return person.school ? person.school.name : "N/A";
 48 |         }
 49 |     },
 50 |     {
 51 |         accessorKey: "contactEmail",
 52 |         header: "Contact Email",
 53 |         cell: ({ row }) => {
 54 |             const person = row.original;
 55 |             return person.contactEmail || "-";
 56 |         }
 57 |     },
 58 |     {
 59 |         accessorKey: "user.email", 
 60 |         header: "System User",
 61 |         cell: ({ row }) => {
 62 |             const person = row.original;
 63 |             return person.user ? (
 64 |                 <span className="font-medium text-green-600">Yes ({person.user.email})</span>
 65 |             ) : (
 66 |                 <span className="text-muted-foreground">No</span>
 67 |             );
 68 |         }
 69 |     },
 70 |     {
 71 |         id: "actions",
 72 |         cell: ({ row }) => {
 73 |             const person = row.original;
 74 |             
 75 |             const handleDelete = async () => {
 76 |                 if (window.confirm(`Are you sure you want to delete ${person.firstName} ${person.lastName}? This will also delete their associated system user account (if any), student, employee, and guardian records.`)) {
 77 |                   const result = await deletePersonAction(person.id);
 78 |                   if (result.success) {
 79 |                     toast.success(result.message);
 80 |                   } else {
 81 |                     toast.error(result.message);
 82 |                   }
 83 |                 }
 84 |             };
 85 | 
 86 |             if (!canEditPerson && !canDeletePerson && !canGrantAccess) {
 87 |                 return null;
 88 |             }
 89 | 
 90 |             return (
 91 |                 <DropdownMenu>
 92 |                     <DropdownMenuTrigger asChild>
 93 |                         <Button variant="ghost" className="h-8 w-8 p-0">
 94 |                             <span className="sr-only">Open menu</span>
 95 |                             <MoreHorizontal className="h-4 w-4" />
 96 |                         </Button>
 97 |                     </DropdownMenuTrigger>
 98 |                     <DropdownMenuContent align="end">
 99 |                         <DropdownMenuLabel>Actions</DropdownMenuLabel>
100 |                         {canEditPerson && (
101 |                             <DropdownMenuItem onClick={() => onEdit(person)}> {/* Pass person directly */}
102 |                                 Edit Person
103 |                             </DropdownMenuItem>
104 |                         )}
105 |                         {/* Option to grant system access only if person doesn't have one and user has permission */}
106 |                         {canGrantAccess && !person.user && (
107 |                             <DropdownMenuItem onClick={() => onEdit(person)}> {/* Pass person directly */}
108 |                                 Grant System Access
109 |                             </DropdownMenuItem>
110 |                         )}
111 |                         {(canEditPerson || (canGrantAccess && !person.user)) && canDeletePerson && <DropdownMenuSeparator />}
112 |                         {canDeletePerson && (
113 |                             <DropdownMenuItem onClick={handleDelete} className="text-red-500 focus:text-red-500">
114 |                                 Delete Person
115 |                             </DropdownMenuItem>
116 |                         )}
117 |                     </DropdownMenuContent>
118 |                 </DropdownMenu>
119 |             );
120 |         },
121 |     },
122 | ];
123 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(people)/people/data-table.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import {
  5 |   flexRender,
  6 |   getCoreRowModel,
  7 |   useReactTable,
  8 |   getPaginationRowModel,
  9 |   getSortedRowModel,
 10 |   getFilteredRowModel,
 11 |   SortingState,
 12 |   ColumnFiltersState,
 13 | } from "@tanstack/react-table"
 14 | 
 15 | import {
 16 |   Table,
 17 |   TableBody,
 18 |   TableCell,
 19 |   TableHead,
 20 |   TableHeader,
 21 |   TableRow,
 22 | } from "@/components/ui/table"
 23 | import { Button } from "@/components/ui/button"
 24 | import { Input } from "@/components/ui/input"
 25 | 
 26 | import { getColumns, Person } from "./columns"; 
 27 | import { useTenant } from "@/components/tenant-provider";
 28 | import { toast } from "sonner";
 29 | import type { schools, roles } from "@/lib/db/schema/tenant"; 
 30 | import { PersonFormDialog } from "./person-form-dialog"
 31 | 
 32 | interface PeopleDataTableProps {
 33 |   data: Person[];
 34 |   allSchools: (typeof schools.$inferSelect)[];
 35 |   allRoles: (typeof roles.$inferSelect)[];
 36 | }
 37 | 
 38 | export function PeopleDataTable({ data, allSchools, allRoles }: PeopleDataTableProps) {
 39 |   const [isDialogOpen, setIsDialogOpen] = React.useState(false);
 40 |   const [editingPerson, setEditingPerson] = React.useState<Person | null>(null);
 41 |   const [sorting, setSorting] = React.useState<SortingState>([]);
 42 |   const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([]);
 43 | 
 44 |   const { user } = useTenant();
 45 | 
 46 |   // Permissions for UI rendering
 47 |   const canCreatePerson = user.permissions.includes('person:create');
 48 |   const canEditPerson = user.permissions.includes('person:update');
 49 |   const canDeletePerson = user.permissions.includes('person:delete');
 50 |   const canGrantAccess = user.permissions.includes('user:grant_access'); 
 51 |   const canAssignRoles = user.permissions.includes('user:assign_roles'); 
 52 | 
 53 |   const handleEdit = React.useCallback((person: Person) => {
 54 |     if (!canEditPerson) {
 55 |       toast.error("You do not have permission to edit people records.");
 56 |       return;
 57 |     }
 58 |     setEditingPerson(person);
 59 |     setIsDialogOpen(true);
 60 |   }, [canEditPerson]);
 61 | 
 62 |   const handleCreate = React.useCallback(() => {
 63 |     if (!canCreatePerson) {
 64 |       toast.error("You do not have permission to create people records.");
 65 |       return;
 66 |     }
 67 |     setEditingPerson(null);
 68 |     setIsDialogOpen(true);
 69 |   }, [canCreatePerson]);
 70 |   
 71 |   const columns = React.useMemo(() => getColumns(handleEdit, canEditPerson, canDeletePerson, canGrantAccess), [handleEdit, canEditPerson, canDeletePerson, canGrantAccess]);
 72 | 
 73 |   const table = useReactTable({
 74 |     data,
 75 |     columns,
 76 |     getCoreRowModel: getCoreRowModel(),
 77 |     getPaginationRowModel: getPaginationRowModel(),
 78 |     onSortingChange: setSorting,
 79 |     getSortedRowModel: getSortedRowModel(),
 80 |     onColumnFiltersChange: setColumnFilters,
 81 |     getFilteredRowModel: getFilteredRowModel(),
 82 |     state: {
 83 |         sorting,
 84 |         columnFilters,
 85 |     },
 86 |   });
 87 | 
 88 |   return (
 89 |     <div>
 90 |         <div className="flex items-center justify-between py-4">
 91 |             <Input
 92 |                 placeholder="Filter by first name..."
 93 |                 value={(table.getColumn("firstName")?.getFilterValue() as string) ?? ""}
 94 |                 onChange={(event) =>
 95 |                     table.getColumn("firstName")?.setFilterValue(event.target.value)
 96 |                 }
 97 |                 className="max-w-sm"
 98 |             />
 99 |             {canCreatePerson && <Button onClick={handleCreate}>Add Person</Button>}
100 |         </div>
101 |         <div className="rounded-md border">
102 |             <Table>
103 |                 <TableHeader>
104 |                 {table.getHeaderGroups().map((headerGroup) => (
105 |                     <TableRow key={headerGroup.id}>
106 |                     {headerGroup.headers.map((header) => (
107 |                         <TableHead key={header.id}>
108 |                             {flexRender(header.column.columnDef.header, header.getContext())}
109 |                         </TableHead>
110 |                     ))}
111 |                     </TableRow>
112 |                 ))}
113 |                 </TableHeader>
114 |                 <TableBody>
115 |                 {table.getRowModel().rows?.length ? (
116 |                     table.getRowModel().rows.map((row) => (
117 |                     <TableRow key={row.id}>
118 |                         {row.getVisibleCells().map((cell) => (
119 |                         <TableCell key={cell.id}>
120 |                             {flexRender(cell.column.columnDef.cell, cell.getContext())}
121 |                         </TableCell>
122 |                         ))}
123 |                     </TableRow>
124 |                     ))
125 |                 ) : (
126 |                     <TableRow>
127 |                     <TableCell colSpan={columns.length} className="h-24 text-center">
128 |                         No people found.
129 |                     </TableCell>
130 |                     </TableRow>
131 |                 )}
132 |                 </TableBody>
133 |             </Table>
134 |         </div>
135 |         <div className="flex items-center justify-end space-x-2 py-4">
136 |             <Button
137 |                 variant="outline"
138 |                 size="sm"
139 |                 onClick={() => table.previousPage()}
140 |                 disabled={!table.getCanPreviousPage()}
141 |             >
142 |             Previous
143 |             </Button>
144 |             <Button
145 |                 variant="outline"
146 |                 size="sm"
147 |                 onClick={() => table.nextPage()}
148 |                 disabled={!table.getCanNextPage()}
149 |             >
150 |             Next
151 |             </Button>
152 |         </div>
153 |         {(canCreatePerson || canEditPerson) && ( 
154 |             <PersonFormDialog
155 |                 key={editingPerson?.id}
156 |                 isOpen={isDialogOpen}
157 |                 setIsOpen={setIsDialogOpen}
158 |                 person={editingPerson}
159 |                 allSchools={allSchools}
160 |                 allRoles={allRoles}
161 |                 canGrantAccess={canGrantAccess}
162 |                 canAssignRoles={canAssignRoles}
163 |             />
164 |         )}
165 |     </div>
166 |   );
167 | }
168 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(people)/people/page.tsx:
--------------------------------------------------------------------------------
 1 | import { enforcePermission } from "@/lib/session";
 2 | import { getPeople } from "@/lib/actions/person";
 3 | 
 4 | import { getRoles } from "@/lib/actions/role";
 5 | import { getSchools } from "@/lib/actions/schools";
 6 | import { PeopleDataTable } from "./data-table";
 7 | 
 8 | 
 9 | export default async function PeoplePage() {
10 |   await enforcePermission('person:read');
11 | 
12 |   const [people, schools, roles] = await Promise.all([
13 |     getPeople(),
14 |     getSchools(),
15 |     getRoles(),
16 |   ]);
17 | 
18 |   return (
19 |     <div className="space-y-4">
20 |       <h1 className="text-2xl font-bold">People Management</h1>
21 |       <p className="text-muted-foreground">Manage your system users.</p>
22 |       <PeopleDataTable data={people} allSchools={schools} allRoles={roles} />
23 |     </div>
24 |   );
25 | }
26 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(people)/people/person-form-dialog.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import React from 'react';
  4 | import { useForm } from 'react-hook-form';
  5 | import { zodResolver } from '@hookform/resolvers/zod';
  6 | import {
  7 |   Dialog,
  8 |   DialogContent,
  9 |   DialogHeader,
 10 |   DialogTitle,
 11 |   DialogFooter,
 12 |   DialogDescription,
 13 | } from '@/components/ui/dialog';
 14 | import { Button } from '@/components/ui/button';
 15 | import { Input } from '@/components/ui/input';
 16 | import { toast } from 'sonner';
 17 | import { MultiSelect } from '@/components/ui/multi-select';
 18 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
 19 | import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
 20 | import { Switch } from '@/components/ui/switch';
 21 | import { PersonFormSchema, PersonFormInput } from '@/lib/dto/person';
 22 | import { upsertPersonAction } from '@/lib/actions/person';
 23 | import type { schools, roles, people, usersToRoles, users } from "@/lib/db/schema/tenant";
 24 | import { useTenant } from '@/components/tenant-provider';
 25 | 
 26 | export type Person = (typeof people.$inferSelect) & {
 27 |     user?: (typeof users.$inferSelect & { usersToRoles?: (typeof usersToRoles.$inferSelect)[] }) | null;
 28 |     school?: typeof schools.$inferSelect | null;
 29 | };
 30 | 
 31 | interface PersonFormDialogProps {
 32 |   isOpen: boolean;
 33 |   setIsOpen: (open: boolean) => void;
 34 |   person: Person | null;
 35 |   allSchools: (typeof schools.$inferSelect)[];
 36 |   allRoles: (typeof roles.$inferSelect)[];
 37 |   canGrantAccess: boolean;
 38 |   canAssignRoles: boolean;
 39 | }
 40 | 
 41 | export function PersonFormDialog({ isOpen, setIsOpen, person, allSchools, allRoles, canGrantAccess, canAssignRoles }: PersonFormDialogProps) {
 42 |   const isEditMode = !!person;
 43 |   const { user: currentUserSession } = useTenant();
 44 | 
 45 |   const roleOptions = allRoles.map(role => ({
 46 |     value: role.id.toString(),
 47 |     label: role.name,
 48 |   }));
 49 | 
 50 |   const defaultUserRoles = person?.user?.usersToRoles?.map(ur => ur.roleId.toString()) || [];
 51 | 
 52 |   const form = useForm<PersonFormInput>({
 53 |     resolver: zodResolver(PersonFormSchema),
 54 |     defaultValues: {
 55 |       id: person?.id,
 56 |       schoolId: person?.schoolId,
 57 |       firstName: person?.firstName || '',
 58 |       lastName: person?.lastName || '',
 59 |       middleName: person?.middleName,
 60 |       dateOfBirth: person?.dateOfBirth ? new Date(person.dateOfBirth).toISOString().split('T')[0] : '',
 61 |       gender: person?.gender,
 62 |       contactEmail: person?.contactEmail,
 63 |       contactPhone: person?.contactPhone,
 64 |       address: person?.address,
 65 |       personType: person?.personType || 'staff',
 66 |       profilePictureUrl: person?.profilePictureUrl,
 67 |       createUserAccount: !!person?.user,
 68 |       userEmail: person?.user?.email || '',
 69 |       userPassword: '',
 70 |       userRoles: defaultUserRoles,
 71 |     },
 72 |   });
 73 | 
 74 |   const onSubmit = async (values: PersonFormInput) => {
 75 |     const result = await upsertPersonAction(values);
 76 |     if (result.success) {
 77 |       toast.success(result.message);
 78 |       setIsOpen(false);
 79 |     } else {
 80 |       toast.error(result.message);
 81 |       if (result.errors) {
 82 |         Object.keys(result.errors).forEach((key) => {
 83 |           const field = key as keyof PersonFormInput;
 84 |           const message = result.errors?.[field]?.[0];
 85 |           if (message) {
 86 |             form.setError(field, { type: 'server', message });
 87 |           }
 88 |         });
 89 |       }
 90 |     }
 91 |   };
 92 | 
 93 |   const createUserAccount = form.watch('createUserAccount');
 94 | 
 95 |   return (
 96 |     <Dialog open={isOpen} onOpenChange={setIsOpen}>
 97 |       <DialogContent className="sm:max-w-2xl">
 98 |         <DialogHeader>
 99 |           <DialogTitle>{isEditMode ? 'Edit Person' : 'Add New Person'}</DialogTitle>
100 |           <DialogDescription>
101 |             {isEditMode ? "Update the person's details below." : "Fill in the details for the new person."}
102 |           </DialogDescription>
103 |         </DialogHeader>
104 |         <Form {...form}>
105 |           <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
106 |             <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
107 |               <FormField
108 |                 control={form.control}
109 |                 name="firstName"
110 |                 render={({ field }) => (
111 |                   <FormItem>
112 |                     <FormLabel>First Name</FormLabel>
113 |                     <FormControl><Input {...field} /></FormControl>
114 |                     <FormMessage />
115 |                   </FormItem>
116 |                 )}
117 |               />
118 |               <FormField
119 |                 control={form.control}
120 |                 name="lastName"
121 |                 render={({ field }) => (
122 |                   <FormItem>
123 |                     <FormLabel>Last Name</FormLabel>
124 |                     <FormControl><Input {...field} /></FormControl>
125 |                     <FormMessage />
126 |                   </FormItem>
127 |                 )}
128 |               />
129 |               <FormField
130 |                 control={form.control}
131 |                 name="personType"
132 |                 render={({ field }) => (
133 |                   <FormItem>
134 |                     <FormLabel>Person Type</FormLabel>
135 |                     <Select onValueChange={field.onChange} defaultValue={field.value}>
136 |                         <FormControl>
137 |                             <SelectTrigger>
138 |                                 <SelectValue placeholder="Select a person type" />
139 |                             </SelectTrigger>
140 |                         </FormControl>
141 |                         <SelectContent>
142 |                             <SelectItem value="staff">Staff</SelectItem>
143 |                             <SelectItem value="student">Student</SelectItem>
144 |                             <SelectItem value="guardian">Guardian</SelectItem>
145 |                         </SelectContent>
146 |                     </Select>
147 |                     <FormMessage />
148 |                   </FormItem>
149 |                 )}
150 |               />
151 |               <FormField
152 |                 control={form.control}
153 |                 name="schoolId"
154 |                 render={({ field }) => (
155 |                   <FormItem>
156 |                     <FormLabel>School</FormLabel>
157 |                     <Select onValueChange={(value) => field.onChange(parseInt(value))} defaultValue={field.value?.toString()}>
158 |                         <FormControl>
159 |                             <SelectTrigger>
160 |                                 <SelectValue placeholder="Select a school" />
161 |                             </SelectTrigger>
162 |                         </FormControl>
163 |                         <SelectContent>
164 |                             {allSchools.map(school => (
165 |                                 <SelectItem key={school.id} value={school.id.toString()}>{school.name}</SelectItem>
166 |                             ))}
167 |                         </SelectContent>
168 |                     </Select>
169 |                     <FormMessage />
170 |                   </FormItem>
171 |                 )}
172 |               />
173 |               <FormField
174 |                 control={form.control}
175 |                 name="contactEmail"
176 |                 render={({ field }) => (
177 |                   <FormItem>
178 |                     <FormLabel>Contact Email</FormLabel>
179 |                     <FormControl><Input type="email" {...field} value={field.value ?? ''} /></FormControl>
180 |                     <FormMessage />
181 |                   </FormItem>
182 |                 )}
183 |               />
184 |             </div>
185 |             
186 |             {canGrantAccess && (
187 |                 <div className="space-y-4 pt-4 border-t">
188 |                     <FormField
189 |                         control={form.control}
190 |                         name="createUserAccount"
191 |                         render={({ field }) => (
192 |                             <FormItem className="flex flex-row items-center justify-between rounded-lg border p-4">
193 |                                 <div className="space-y-0.5">
194 |                                     <FormLabel className="text-base">Grant System Access</FormLabel>
195 |                                     <DialogDescription>
196 |                                         Create a user account for this person to allow them to log in.
197 |                                     </DialogDescription>
198 |                                 </div>
199 |                                 <FormControl>
200 |                                     <Switch
201 |                                     checked={field.value}
202 |                                     onCheckedChange={field.onChange}
203 |                                     />
204 |                                 </FormControl>
205 |                             </FormItem>
206 |                         )}
207 |                     />
208 |                     {createUserAccount && (
209 |                         <div className="grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg">
210 |                              <FormField
211 |                                 control={form.control}
212 |                                 name="userEmail"
213 |                                 render={({ field }) => (
214 |                                     <FormItem>
215 |                                     <FormLabel>User Email</FormLabel>
216 |                                     <FormControl><Input type="email" {...field} value={field.value ?? ''} /></FormControl>
217 |                                     <FormMessage />
218 |                                     </FormItem>
219 |                                 )}
220 |                             />
221 |                             <FormField
222 |                                 control={form.control}
223 |                                 name="userPassword"
224 |                                 render={({ field }) => (
225 |                                     <FormItem>
226 |                                     <FormLabel>Password</FormLabel>
227 |                                     <FormControl><Input type="password" placeholder={isEditMode ? "Leave blank to keep current" : ""} {...field} value={field.value ?? ''} /></FormControl>
228 |                                     <FormMessage />
229 |                                     </FormItem>
230 |                                 )}
231 |                             />
232 |                             {canAssignRoles && (
233 |                                 <div className="md:col-span-2">
234 |                                     <FormField
235 |                                         control={form.control}
236 |                                         name="userRoles"
237 |                                         render={({ field }) => (
238 |                                             <FormItem>
239 |                                             <FormLabel>Roles</FormLabel>
240 |                                             <FormControl>
241 |                                                 <MultiSelect
242 |                                                     options={roleOptions}
243 |                                                     defaultValue={field.value || []}
244 |                                                     onValueChange={field.onChange}
245 |                                                     placeholder="Select roles..."
246 |                                                 />
247 |                                             </FormControl>
248 |                                             <FormMessage />
249 |                                             </FormItem>
250 |                                         )}
251 |                                     />
252 |                                 </div>
253 |                             )}
254 |                         </div>
255 |                     )}
256 |                 </div>
257 |             )}
258 | 
259 | 
260 |             <DialogFooter>
261 |               <Button type="submit" disabled={form.formState.isSubmitting}>
262 |                 {form.formState.isSubmitting ? 'Saving...' : isEditMode ? 'Save Changes' : 'Create Person'}
263 |               </Button>
264 |             </DialogFooter>
265 |           </form>
266 |         </Form>
267 |       </DialogContent>
268 |     </Dialog>
269 |   );
270 | }
271 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/SchoolsClientActions.tsx:
--------------------------------------------------------------------------------
 1 | // app/dashboard/schools/SchoolsClientActions.tsx
 2 | "use client";
 3 | 
 4 | import React, { useState, useCallback } from 'react';
 5 | import { useRouter } from "next/navigation";
 6 | import { toast } from "sonner";
 7 | import { Button } from '@/components/ui/button';
 8 | import { PlusCircle } from 'lucide-react';
 9 | import { SchoolFormDialog } from "./school-form-dialog";
10 | 
11 | interface SchoolsClientActionsProps {
12 |   canCreateSchool: boolean;
13 |   canEditSchool: boolean;
14 |   canDeleteSchool: boolean;
15 |   showCreateButton?: boolean;
16 | }
17 | 
18 | export function SchoolsClientActions({ 
19 |   canCreateSchool, 
20 |   canEditSchool, 
21 |   canDeleteSchool,
22 |   showCreateButton = false 
23 | }: SchoolsClientActionsProps) {
24 |   const router = useRouter();
25 |   const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);
26 | 
27 |   const handleCreate = useCallback(() => {
28 |     if (!canCreateSchool) {
29 |       toast.error("You do not have permission to create schools.");
30 |       return;
31 |     }
32 |     setIsCreateDialogOpen(true);
33 |   }, [canCreateSchool]);
34 | 
35 |   if (showCreateButton) {
36 |     return (
37 |       <>
38 |         <Button onClick={handleCreate} className="mt-4">
39 |           <PlusCircle className="mr-2 h-4 w-4" />
40 |           Create School
41 |         </Button>
42 |         {canCreateSchool && (
43 |           <SchoolFormDialog
44 |             isOpen={isCreateDialogOpen}
45 |             setIsOpen={setIsCreateDialogOpen}
46 |           />
47 |         )}
48 |       </>
49 |     );
50 |   }
51 | 
52 |   return (
53 |     <>
54 |       <Button onClick={handleCreate}>
55 |         <PlusCircle className="mr-2 h-4 w-4" />
56 |         Create School
57 |       </Button>
58 |       {canCreateSchool && (
59 |         <SchoolFormDialog
60 |           isOpen={isCreateDialogOpen}
61 |           setIsOpen={setIsCreateDialogOpen}
62 |         />
63 |       )}
64 |     </>
65 |   );
66 | }
67 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(academics)/academics/page.tsx:
--------------------------------------------------------------------------------
 1 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
 2 | 
 3 | export default function SchoolAcademicsPage() {
 4 |   return (
 5 |     <Card>
 6 |       <CardHeader>
 7 |         <CardTitle>Academics</CardTitle>
 8 |         <CardDescription>
 9 |           Manage academic years, terms, departments, courses, and class schedules.
10 |         </CardDescription>
11 |       </CardHeader>
12 |       <CardContent>
13 |         <div className="grid gap-4 md:grid-cols-2">
14 |             <Card className="hover:bg-muted/50 transition-colors cursor-pointer">
15 |                 <CardHeader>
16 |                     <CardTitle>Academic Years & Terms</CardTitle>
17 |                     <CardDescription>Define the schools calendar and grading periods.</CardDescription>
18 |                 </CardHeader>
19 |             </Card>
20 |             <Card className="hover:bg-muted/50 transition-colors cursor-pointer">
21 |                 <CardHeader>
22 |                     <CardTitle>Departments & Courses</CardTitle>
23 |                     <CardDescription>Manage the course catalog and subject areas.</CardDescription>
24 |                 </CardHeader>
25 |             </Card>
26 |         </div>
27 |       </CardContent>
28 |     </Card>
29 |   );
30 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(classes)/classes/page.tsx:
--------------------------------------------------------------------------------
 1 | import { getSession } from "@/lib/session";
 2 | import { notFound } from "next/navigation";
 3 | 
 4 | 
 5 | type SchoolClassesPageProps = {
 6 |   params: Promise<{
 7 |     schoolId: string;
 8 |   }>;
 9 | };
10 | 
11 | export default async function SchoolClassesPage({
12 |   params,
13 | }: SchoolClassesPageProps) {
14 |     const { schoolId: schoolIdParam } = await params;
15 |     const session = await getSession()
16 |     const schoolId = parseInt(schoolIdParam, 10)
17 | 
18 |         if (isNaN(schoolId)) {
19 |         notFound()
20 |       }
21 |   // Fetch classes for the school using the schoolId
22 |   // ...
23 | 
24 |   return (
25 |     <div>
26 |       <h1>Classes for School ID: {schoolId}</h1>
27 |       {/* Render the list of classes */}
28 |     </div>
29 |   );
30 | }
31 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(overview)/page.tsx:
--------------------------------------------------------------------------------
  1 | import { Suspense } from "react"
  2 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
  3 | import { Badge } from "@/components/ui/badge"
  4 | import { Button } from "@/components/ui/button"
  5 | import { TrendingUp, Clock, Award, UserCheck, BarChart3, Activity } from "lucide-react"
  6 | import { StatsCards } from "../_components/stats-cards"
  7 | import { EnrollmentChart } from "../_components/enrollment-chart"
  8 | import { AcademicPerformanceChart } from "../_components/academic-performance-chart"
  9 | import { AttendanceChart } from "../_components/attendance-chart"
 10 | import { FinancialOverview } from "../_components/financial-overview"
 11 | import { StaffMetrics } from "../_components/staff-metrics"
 12 | import { AlertsPanel } from "../_components/alerts-panel"
 13 | import { QuickActions } from "../_components/quick-actions"
 14 | import { UpcomingEvents } from "../_components/upcoming-events"
 15 | import { RecentActivity } from "../_components/recent-activity"
 16 | import { getSession } from "@/lib/session"
 17 | import { getTenantDb } from "@/lib/db"
 18 | import { eq } from "drizzle-orm"
 19 | import {schools} from "@/lib/db/schema/tenant";
 20 | import {notFound} from "next/navigation";
 21 | 
 22 | // Type definition for Next.js 15 page props
 23 | type SchoolDashboardPageProps = {
 24 |   params: Promise<{
 25 |     schoolId: string;
 26 |   }>;
 27 | };
 28 | 
 29 | 
 30 | export default async function SchoolDashboardPage({
 31 |   params,
 32 | }: SchoolDashboardPageProps) {
 33 |   const { schoolId: schoolIdParam } = await params;
 34 |   const session = await getSession()
 35 |   const schoolId = parseInt(schoolIdParam, 10)
 36 | 
 37 |     if (isNaN(schoolId)) {
 38 |     notFound()
 39 |   }
 40 | 
 41 |     const db = await getTenantDb(session.tenantId)
 42 |   const school = await db.query.schools.findFirst({
 43 |     where: eq(schools.id, schoolId),
 44 |   })
 45 | 
 46 |   if (!school) {
 47 |     notFound()
 48 |   }
 49 | 
 50 |   return (
 51 |     <div className="min-h-screen">
 52 |       <div className="max-w-7.5xl mx-auto space-y-6">
 53 |         {/* Header */}
 54 |         <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
 55 |           <div>
 56 |             <h1 className="text-3xl font-bold tracking-tight">{school.name} Dashboard</h1>
 57 |             <p className=" mt-1">Welcome back! Heres whats happening at {school.name} today.</p>
 58 |           </div>
 59 |           <div className="flex items-center space-x-3">
 60 |             <Badge variant="outline" className="px-3 py-1">
 61 |               <Clock className="h-3 w-3 mr-1" />
 62 |               Last updated: 2 min ago
 63 |             </Badge>
 64 |             <Button variant="outline" size="sm">
 65 |               <Activity className="h-4 w-4 mr-2" />
 66 |               View Reports
 67 |             </Button>
 68 |           </div>
 69 |         </div>
 70 | 
 71 |         {/* Key Stats Cards */}
 72 |         <Suspense fallback={<div>Loading stats...</div>}>
 73 |           <StatsCards />
 74 |         </Suspense>
 75 | 
 76 |         {/* Main Dashboard Grid */}
 77 |         <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
 78 |           {/* Left Column - Charts and Analytics */}
 79 |           <div className="lg:col-span-2 space-y-6">
 80 |             {/* Enrollment Trends */}
 81 |             <Card className="shadow-lg border-0">
 82 |               <CardHeader className="pb-4">
 83 |                 <div className="flex items-center justify-between">
 84 |                   <CardTitle className="text-lg font-semibold flex items-center">
 85 |                     <TrendingUp className="h-5 w-5 mr-2 text-blue-600" />
 86 |                     Enrollment Trends
 87 |                   </CardTitle>
 88 |                   <Button variant="ghost" size="sm">
 89 |                     <BarChart3 className="h-4 w-4" />
 90 |                   </Button>
 91 |                 </div>
 92 |               </CardHeader>
 93 |               <CardContent>
 94 |                 <EnrollmentChart />
 95 |               </CardContent>
 96 |             </Card>
 97 | 
 98 |             {/* Academic Performance & Attendance */}
 99 |             <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
100 |               <Card className="shadow-lg border-0">
101 |                 <CardHeader className="pb-4">
102 |                   <CardTitle className="text-lg font-semibold flex items-center">
103 |                     <Award className="h-5 w-5 mr-2 text-green-600" />
104 |                     Academic Performance
105 |                   </CardTitle>
106 |                 </CardHeader>
107 |                 <CardContent>
108 |                   <AcademicPerformanceChart />
109 |                 </CardContent>
110 |               </Card>
111 | 
112 |               <Card className="shadow-lg border-0">
113 |                 <CardHeader className="pb-4">
114 |                   <CardTitle className="text-lg font-semibold flex items-center">
115 |                     <UserCheck className="h-5 w-5 mr-2 text-purple-600" />
116 |                     Attendance Overview
117 |                   </CardTitle>
118 |                 </CardHeader>
119 |                 <CardContent>
120 |                   <AttendanceChart />
121 |                 </CardContent>
122 |               </Card>
123 |             </div>
124 | 
125 |             {/* Financial Overview */}
126 |             <FinancialOverview />
127 | 
128 |             {/* Staff Metrics */}
129 |             <StaffMetrics />
130 |           </div>
131 | 
132 |           {/* Right Column - Activities and Quick Actions */}
133 |           <div className="space-y-6">
134 |             {/* Alerts Panel */}
135 |             <AlertsPanel />
136 | 
137 |             {/* Quick Actions */}
138 |             <QuickActions />
139 | 
140 |             {/* Upcoming Events */}
141 |             <UpcomingEvents />
142 | 
143 |             {/* Recent Activity */}
144 |             <RecentActivity />
145 |           </div>
146 |         </div>
147 |       </div>
148 |     </div>
149 |   )
150 | }
151 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(people)/people/[personId]/page.tsx:
--------------------------------------------------------------------------------
  1 | // app/dashboard/schools/[schoolId]/staff/[staffId]/profile/page.tsx
  2 | import { getSession, hasPermission } from '@/lib/session';
  3 | import { getTenantDb } from '@/lib/db';
  4 | import { eq } from 'drizzle-orm';
  5 | import { people } from '@/lib/db/schema/tenant';
  6 | import { notFound } from 'next/navigation';
  7 | import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
  8 | import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
  9 | import { Badge } from '@/components/ui/badge';
 10 | import { Metadata } from 'next';
 11 | 
 12 | // --- CORRECT NEXT.JS 15 TYPE DEFINITION ---
 13 | type StaffProfilePageProps = {
 14 |   params: Promise<{
 15 |     schoolId: string;
 16 |     personId: string;
 17 |   }>;
 18 |   searchParams?: Promise<{ [key: string]: string | string[] | undefined }>;
 19 | };
 20 | 
 21 | // --- Data Fetching Function ---
 22 | async function getStaffProfile(personIdParam: string, tenantId: string) {
 23 |   const personId = parseInt(personIdParam, 10);
 24 |   if (isNaN(personId)) return null;
 25 | 
 26 |   const db = await getTenantDb(tenantId);
 27 |   const staffProfile = await db.query.people.findFirst({
 28 |     where: eq(people.id, personId),
 29 |     with: {
 30 |       employee: {
 31 |         with: {
 32 |           department: true,
 33 |         },
 34 |       },
 35 |     },
 36 |   });
 37 | 
 38 |   if (!staffProfile || !staffProfile.employee) {
 39 |     return null;
 40 |   }
 41 | 
 42 |   return staffProfile;
 43 | }
 44 | 
 45 | // --- GENERATE METADATA FUNCTION (FIXED) ---
 46 | export async function generateMetadata(
 47 |   { params }: StaffProfilePageProps
 48 | ): Promise<Metadata> {
 49 |   // Await the params Promise
 50 |   const { schoolId, personId } = await params;
 51 |   
 52 |   const session = await getSession();
 53 |   const profile = await getStaffProfile(personId, session.tenantId);
 54 |   
 55 |   if (!profile) {
 56 |     return {
 57 |       title: 'Staff Not Found',
 58 |       description: 'The requested staff profile could not be found.',
 59 |     };
 60 |   }
 61 | 
 62 |   const staffName = `${profile.firstName} ${profile.lastName}`;
 63 |   
 64 |   return {
 65 |     title: `${staffName} - Staff Profile`,
 66 |     description: `Profile page for ${staffName}, ${profile.employee.position || 'Staff Member'} at ${profile.employee.department?.name || 'our organization'}.`,
 67 |   };
 68 | }
 69 | 
 70 | // --- PAGE COMPONENT (FIXED) ---
 71 | export default async function StaffProfilePage({ params }: StaffProfilePageProps) {
 72 |   // Await the params Promise
 73 |   const { schoolId, personId } = await params;
 74 |   
 75 |   const session = await getSession();
 76 |   
 77 |   const profile = await getStaffProfile(personId, session.tenantId);
 78 | 
 79 |   if (!profile) {
 80 |     notFound();
 81 |   }
 82 | 
 83 |   const staffName = `${profile.firstName} ${profile.lastName}`;
 84 | 
 85 |   return (
 86 |     <div className="space-y-6">
 87 |       <div className="flex items-center space-x-4">
 88 |         <Avatar className="h-20 w-20 border">
 89 |           <AvatarImage src={profile.profilePictureUrl ?? undefined} alt={staffName} />
 90 |           <AvatarFallback className="text-2xl">
 91 |             {profile.firstName?.[0]}{profile.lastName?.[0]}
 92 |           </AvatarFallback>
 93 |         </Avatar>
 94 |         <div>
 95 |           <h1 className="text-3xl font-bold">{staffName}</h1>
 96 |           <div className="flex items-center space-x-2 text-muted-foreground">
 97 |             <span>{profile.employee.position || 'Staff Member'}</span>
 98 |             <Badge variant="outline">
 99 |               {profile.employee.department?.name || 'N/A'}
100 |             </Badge>
101 |           </div>
102 |         </div>
103 |       </div>
104 | 
105 |       <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
106 |         <Card>
107 |           <CardHeader>
108 |             <CardTitle>Contact Information</CardTitle>
109 |           </CardHeader>
110 |           <CardContent className="space-y-2 text-sm">
111 |             <p><strong>Email:</strong> {profile.contactEmail || 'N/A'}</p>
112 |             <p><strong>Phone:</strong> {profile.contactPhone || 'N/A'}</p>
113 |             <p><strong>Address:</strong> {profile.address || 'N/A'}</p>
114 |           </CardContent>
115 |         </Card>
116 |         <Card>
117 |           <CardHeader>
118 |             <CardTitle>Employment Details</CardTitle>
119 |           </CardHeader>
120 |           <CardContent className="space-y-2 text-sm">
121 |             <p><strong>Employee ID:</strong> {profile.employee.employeeId}</p>
122 |             <p><strong>Hire Date:</strong> {profile.employee.hireDate ? new Date(profile.employee.hireDate).toLocaleDateString() : 'N/A'}</p>
123 |             <p><strong>Notes:</strong> {profile.employee.notes || 'None'}</p>
124 |           </CardContent>
125 |         </Card>
126 |       </div>
127 |     </div>
128 |   );
129 | }
130 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(people)/people/[personId]/settings/page.tsx:
--------------------------------------------------------------------------------
  1 | import { notFound } from "next/navigation";
  2 | import { getRoles } from "@/lib/actions/role";
  3 | import { getSchools } from "@/lib/actions/schools";
  4 | import { Separator } from "@/components/ui/separator";
  5 | import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";
  6 | import { Badge } from "@/components/ui/badge";
  7 | import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
  8 | import { Metadata } from "next";
  9 | import { getSession } from "@/lib/session";
 10 | import { getTenantDb } from "@/lib/db";
 11 | import { eq } from "drizzle-orm";
 12 | import { people } from "@/lib/db/schema/tenant";
 13 | 
 14 | // Import modular form components (to be created in the next section)
 15 | // import { PersonBasicInfoForm } from "./_components/person-basic-info-form";
 16 | // import { UserAccountForm } from "./_components/user-account-form";
 17 | // import { StudentEnrollmentForm } from "./_components/student-enrollment-form";
 18 | // import { EmployeeDetailsForm } from "./_components/employee-details-form";
 19 | 
 20 | type PersonSettingsPageProps = {
 21 |   params: Promise<{
 22 |     schoolId: string;
 23 |     personId: string;
 24 |   }>;
 25 |   searchParams?: Promise<{ [key: string]: string | string[] | undefined }>;
 26 | };
 27 | 
 28 | 
 29 | async function getStaffProfile(personIdParam: string, tenantId: string) {
 30 |   const personId = parseInt(personIdParam, 10);
 31 |   if (isNaN(personId)) return null;
 32 | 
 33 |   const db = await getTenantDb(tenantId);
 34 |   const staffProfile = await db.query.people.findFirst({
 35 |     where: eq(people.id, personId),
 36 |     with: {
 37 |       employee: {
 38 |         with: {
 39 |           department: true,
 40 |         },
 41 |       },
 42 |     },
 43 |   });
 44 | 
 45 |   if (!staffProfile || !staffProfile.employee) {
 46 |     return null;
 47 |   }
 48 | 
 49 |   return staffProfile;
 50 | }
 51 | 
 52 | 
 53 | // --- GENERATE METADATA FUNCTION (FIXED) ---
 54 | export async function generateMetadata(
 55 |   { params }: PersonSettingsPageProps
 56 | ): Promise<Metadata> {
 57 |   // Await the params Promise
 58 |   const { schoolId, personId } = await params;
 59 |   
 60 |   const session = await getSession();
 61 |   const profile = await getStaffProfile(personId, session.tenantId);
 62 |   
 63 |   if (!profile) {
 64 |     return {
 65 |       title: 'Staff Not Found',
 66 |       description: 'The requested staff profile could not be found.',
 67 |     };
 68 |   }
 69 | 
 70 |   const staffName = `${profile.firstName} ${profile.lastName}`;
 71 |   
 72 |   return {
 73 |     title: `${staffName} - Staff Profile`,
 74 |     description: `Profile page for ${staffName}, ${profile.employee.position || 'Staff Member'} at ${profile.employee.department?.name || 'our organization'}.`,
 75 |   };
 76 | }
 77 | 
 78 | export default async function PersonSettingsPage({params}: PersonSettingsPageProps) {
 79 |   const { schoolId, personId } = await params;
 80 |   console.log(`[PersonSettingsPage] personId: ${personId}, tenantId: ${schoolId}`);
 81 | 
 82 |   return (
 83 |     <div className="space-y-6">
 84 |       <header className="flex items-center space-x-4">
 85 |         <Avatar className="h-16 w-16 border">
 86 |           {/* <AvatarImage src={person.profilePictureUrl?? undefined} alt={personName} /> */}
 87 |             <p>Person Avatar</p>
 88 |           {/* <AvatarFallback className="text-xl">{userInitial}</AvatarFallback> */}
 89 |         </Avatar>
 90 |         <div>
 91 |           {/* <h1 className="text-2xl font-bold">{personName}</h1> */}
 92 |           <div className="flex items-center space-x-2 text-muted-foreground">
 93 |             {/* <Badge variant="outline">{person.personType}</Badge> */}
 94 |             {/* {person.school && <span>at {person.school.name}</span>} */}
 95 |             <p>Person Details</p>
 96 |           </div>
 97 |         </div>
 98 |       </header>
 99 |       <Separator />
100 | 
101 |       <Tabs defaultValue="basic-info" className="w-full">
102 |         <TabsList className="grid w-full grid-cols-4">
103 |           <TabsTrigger value="basic-info">Basic Info</TabsTrigger>
104 |           {/* {isStaff(person.personType) && <TabsTrigger value="employment">Employment</TabsTrigger>} */}
105 |           {/* {person.personType === 'Student' && <TabsTrigger value="academics">Academics</TabsTrigger>} */}
106 |           {/* {isStaff(person.personType) && <TabsTrigger value="account-access">Account & Access</TabsTrigger>} */}
107 |           <TabsTrigger value="account-access">Account & Access</TabsTrigger>
108 |         </TabsList>
109 |         
110 |         <TabsContent value="basic-info" className="mt-4">
111 |           {/* <PersonBasicInfoForm person={person} /> */}
112 |           <p>Placeholder for Basic Information Form</p>
113 |         </TabsContent>
114 |         
115 |         {/* {isStaff(person.personType) && ( */}
116 |           {/* <TabsContent value="employment" className="mt-4"> */}
117 |             {/* <EmployeeDetailsForm person={person} /> */}
118 |             {/* <p>Placeholder for Employment Details Form</p> */}
119 |           {/* </TabsContent> */}
120 |         {/* )} */}
121 |         {/* {person.personType === 'Student' && ( */}
122 |           {/* <TabsContent value="academics" className="mt-4"> */}
123 |             {/* <StudentEnrollmentForm person={person} /> */}
124 |             {/* <p>Placeholder for Student Academics & Enrollment Form</p> */}
125 |           {/* </TabsContent> */}
126 |         {/* )} */}  
127 | 
128 |       
129 |       </Tabs>
130 |     </div>
131 |   );
132 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(people)/people/page.tsx:
--------------------------------------------------------------------------------
 1 | // app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(people)/people/page.tsx
 2 | import { getSession } from '@/lib/session';
 3 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
 4 | import { Button } from '@/components/ui/button';
 5 | import { PlusCircle } from 'lucide-react';
 6 | 
 7 | export default async function SchoolPeoplePage() {
 8 |   const session = await getSession();
 9 |   const canOnboardEmployee = session.permissions.includes('employee:onboard');
10 | 
11 |   return (
12 |     <Card>
13 |       <CardHeader className="flex flex-row items-center justify-between">
14 |         <div>
15 |             <CardTitle>Staff Management</CardTitle>
16 |             <CardDescription>
17 |             View, add, and manage all staff members for this school.
18 |             </CardDescription>
19 |         </div>
20 |         {canOnboardEmployee && (
21 |             <Button>
22 |                 <PlusCircle className="mr-2 h-4 w-4" />
23 |                 Onboard Employee
24 |             </Button>
25 |         )}
26 |       </CardHeader>
27 |       <CardContent>
28 |         <p className="text-muted-foreground">A data table listing all staff for this school will be displayed here.</p>
29 |       </CardContent>
30 |     </Card>
31 |   );
32 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(students)/[studentId]/profile/page.tsx:
--------------------------------------------------------------------------------
  1 | // app/dashboard/schools/[schoolId]/students/[studentId]/profile/page.tsx
  2 | import { getSession, hasPermission } from '@/lib/session';
  3 | import { getTenantDb } from '@/lib/db';
  4 | import { eq } from 'drizzle-orm';
  5 | import { people } from '@/lib/db/schema/tenant';
  6 | import { notFound } from 'next/navigation';
  7 | import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
  8 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
  9 | import { Badge } from '@/components/ui/badge';
 10 | import { Metadata } from 'next';
 11 | 
 12 | // --- CORRECT NEXT.JS 15 TYPE DEFINITION ---
 13 | type StudentProfilePageProps = {
 14 |   params: Promise<{
 15 |     schoolId: string;
 16 |     studentId: string;
 17 |   }>;
 18 |   searchParams?: Promise<{ [key: string]: string | string[] | undefined }>;
 19 | };
 20 | 
 21 | // --- Data Fetching Function ---
 22 | async function getStudentProfile(personIdParam: string, tenantId: string) {
 23 |   const personId = parseInt(personIdParam, 10);
 24 |   if (isNaN(personId)) return null;
 25 | 
 26 |   const db = await getTenantDb(tenantId);
 27 |   const studentProfile = await db.query.people.findFirst({
 28 |     where: eq(people.id, personId),
 29 |     with: {
 30 |       student: {
 31 |         with: {
 32 |           currentGradeLevel: true,
 33 |         },
 34 |       },
 35 |     },
 36 |   });
 37 | 
 38 |   if (!studentProfile || !studentProfile.student) {
 39 |     return null;
 40 |   }
 41 | 
 42 |   return studentProfile;
 43 | }
 44 | 
 45 | // --- GENERATE METADATA FUNCTION (FIXED) ---
 46 | export async function generateMetadata(
 47 |   { params }: StudentProfilePageProps
 48 | ): Promise<Metadata> {
 49 |   // Await the params Promise
 50 |   const { schoolId, studentId } = await params;
 51 |   
 52 |   const session = await getSession();
 53 |   const profile = await getStudentProfile(studentId, session.tenantId);
 54 |   
 55 |   if (!profile) {
 56 |     return {
 57 |       title: 'Student Not Found',
 58 |       description: 'The requested student profile could not be found.',
 59 |     };
 60 |   }
 61 | 
 62 |   const studentName = `${profile.firstName} ${profile.lastName}`;
 63 |   const gradeLevel = profile.student.currentGradeLevel?.name || 'N/A';
 64 |   
 65 |   return {
 66 |     title: `${studentName} - Student Profile`,
 67 |     description: `Profile page for ${studentName}, ${gradeLevel} student with ID ${profile.student.studentId}.`,
 68 |   };
 69 | }
 70 | 
 71 | // --- PAGE COMPONENT (FIXED) ---
 72 | export default async function StudentProfilePage({ params }: StudentProfilePageProps) {
 73 |   // Await the params Promise  
 74 |   const { schoolId, studentId } = await params;
 75 |   
 76 |   const session = await getSession();
 77 |   
 78 |   const profile = await getStudentProfile(studentId, session.tenantId);
 79 | 
 80 |   if (!profile) {
 81 |     notFound();
 82 |   }
 83 | 
 84 |   const studentName = `${profile.firstName} ${profile.lastName}`;
 85 | 
 86 |   return (
 87 |     <div className="space-y-6">
 88 |       <div className="flex items-center space-x-4">
 89 |         <Avatar className="h-20 w-20 border">
 90 |           <AvatarImage src={profile.profilePictureUrl ?? undefined} alt={studentName} />
 91 |           <AvatarFallback className="text-2xl">
 92 |             {profile.firstName?.[0]}{profile.lastName?.[0]}
 93 |           </AvatarFallback>
 94 |         </Avatar>
 95 |         <div>
 96 |           <h1 className="text-3xl font-bold">{studentName}</h1>
 97 |           <div className="flex items-center space-x-2 text-muted-foreground">
 98 |             <span>Student ID: {profile.student.studentId}</span>
 99 |             <Badge variant="outline">
100 |               {profile.student.currentGradeLevel?.name || 'N/A'}
101 |             </Badge>
102 |           </div>
103 |         </div>
104 |       </div>
105 | 
106 |       <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
107 |         <Card>
108 |           <CardHeader>
109 |             <CardTitle>Contact Information</CardTitle>
110 |           </CardHeader>
111 |           <CardContent className="space-y-2 text-sm">
112 |             <p><strong>Email:</strong> {profile.contactEmail || 'N/A'}</p>
113 |             <p><strong>Phone:</strong> {profile.contactPhone || 'N/A'}</p>
114 |             <p><strong>Address:</strong> {profile.address || 'N/A'}</p>
115 |           </CardContent>
116 |         </Card>
117 |         <Card>
118 |           <CardHeader>
119 |             <CardTitle>Academic Details</CardTitle>
120 |           </CardHeader>
121 |           <CardContent className="space-y-2 text-sm">
122 |             <p><strong>Enrollment Date:</strong> {profile.student.enrollmentDate ? new Date(profile.student.enrollmentDate).toLocaleDateString() : 'N/A'}</p>
123 |             <p><strong>Notes:</strong> {profile.student.notes || 'None'}</p>
124 |           </CardContent>
125 |         </Card>
126 |       </div>
127 |     </div>
128 |   );
129 | }
130 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(students)/students/page.tsx:
--------------------------------------------------------------------------------
 1 | // app/(dashboard)/dashboard/(schools)/schools/[schoolId]/(students)/students/page.tsx
 2 | import { getSession } from '@/lib/session';
 3 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
 4 | import { Button } from '@/components/ui/button';
 5 | import { PlusCircle } from 'lucide-react';
 6 | 
 7 | // This Server Component will eventually fetch a list of students for the specific school.
 8 | export default async function SchoolStudentsPage() {
 9 |   const session = await getSession();
10 |   const canAdmitStudent = session.permissions.includes('student:admit');
11 | 
12 |   return (
13 |     <Card>
14 |       <CardHeader className="flex flex-row items-center justify-between">
15 |         <div>
16 |             <CardTitle>Student Management</CardTitle>
17 |             <CardDescription>
18 |             View, add, and manage all students for this school.
19 |             </CardDescription>
20 |         </div>
21 |         {canAdmitStudent && (
22 |             <Button>
23 |                 <PlusCircle className="mr-2 h-4 w-4" />
24 |                 Admit Student
25 |             </Button>
26 |         )}
27 |       </CardHeader>
28 |       <CardContent>
29 |         <p className="text-muted-foreground">A data table listing all students for this school will be displayed here.</p>
30 |       </CardContent>
31 |     </Card>
32 |   );
33 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/academic-performance-chart.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { Badge } from "@/components/ui/badge"
 4 | 
 5 | const performanceData = [
 6 |   { grade: "A", percentage: 25, count: 308 },
 7 |   { grade: "B", percentage: 35, count: 432 },
 8 |   { grade: "C", percentage: 28, count: 346 },
 9 |   { grade: "D", percentage: 8, count: 99 },
10 |   { grade: "F", percentage: 4, count: 49 },
11 | ]
12 | 
13 | const gradeColors = {
14 |   A: "bg-green-500",
15 |   B: "bg-blue-500",
16 |   C: "bg-yellow-500",
17 |   D: "bg-orange-500",
18 |   F: "bg-red-500",
19 | }
20 | 
21 | export function AcademicPerformanceChart() {
22 |   return (
23 |     <div className="space-y-4">
24 |       <div className="flex items-center justify-between">
25 |         <Badge variant="outline" className="bg-green-50 text-green-700 border-green-200">
26 |           Overall GPA: 3.2
27 |         </Badge>
28 |       </div>
29 | 
30 |       <div className="space-y-3">
31 |         {performanceData.map((data, index) => (
32 |           <div key={index} className="space-y-2">
33 |             <div className="flex items-center justify-between text-sm">
34 |               <span className="font-medium text-gray-700">Grade {data.grade}</span>
35 |               <span className="">
36 |                 {data.count} students ({data.percentage}%)
37 |               </span>
38 |             </div>
39 |             <div className="w-full bg-gray-200 rounded-full h-2">
40 |               <div
41 |                 className={`h-2 rounded-full transition-all duration-500 ${gradeColors[data.grade as keyof typeof gradeColors]}`}
42 |                 style={{ width: `${data.percentage}%` }}
43 |               ></div>
44 |             </div>
45 |           </div>
46 |         ))}
47 |       </div>
48 | 
49 |       <div className="pt-2 border-t border-gray-100">
50 |         <div className="text-xs text-gray-500 text-center">
51 |           Based on current semester performance across all subjects
52 |         </div>
53 |       </div>
54 |     </div>
55 |   )
56 | }
57 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/alerts-panel.tsx:
--------------------------------------------------------------------------------
 1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
 2 | import { Badge } from "@/components/ui/badge"
 3 | import { AlertTriangle, Info, CheckCircle, XCircle } from "lucide-react"
 4 | 
 5 | const alerts = [
 6 |   {
 7 |     type: "warning",
 8 |     title: "Low Attendance Alert",
 9 |     message: "Grade 10-B has 78% attendance this week",
10 |     time: "2 hours ago",
11 |     priority: "medium",
12 |   },
13 |   {
14 |     type: "info",
15 |     title: "Parent-Teacher Conference",
16 |     message: "Scheduled for next Friday at 2:00 PM",
17 |     time: "4 hours ago",
18 |     priority: "low",
19 |   },
20 |   {
21 |     type: "error",
22 |     title: "System Maintenance",
23 |     message: "Student portal will be down tonight 11 PM - 2 AM",
24 |     time: "6 hours ago",
25 |     priority: "high",
26 |   },
27 |   {
28 |     type: "success",
29 |     title: "Budget Approved",
30 |     message: "Q2 budget has been approved by the board",
31 |     time: "1 day ago",
32 |     priority: "low",
33 |   },
34 | ]
35 | 
36 | const getAlertIcon = (type: string) => {
37 |   switch (type) {
38 |     case "warning":
39 |       return <AlertTriangle className="h-4 w-4 text-yellow-600" />
40 |     case "error":
41 |       return <XCircle className="h-4 w-4 text-red-600" />
42 |     case "info":
43 |       return <Info className="h-4 w-4 text-blue-600" />
44 |     case "success":
45 |       return <CheckCircle className="h-4 w-4 text-green-600" />
46 |     default:
47 |       return <Info className="h-4 w-4 text-gray-600" />
48 |   }
49 | }
50 | 
51 | const getPriorityColor = (priority: string) => {
52 |   switch (priority) {
53 |     case "high":
54 |       return "bg-red-100 text-red-800 border-red-200"
55 |     case "medium":
56 |       return "bg-yellow-100 text-yellow-800 border-yellow-200"
57 |     case "low":
58 |       return "bg-green-100 text-green-800 border-green-200"
59 |     default:
60 |       return "bg-gray-100 text-gray-800 border-gray-200"
61 |   }
62 | }
63 | 
64 | export function AlertsPanel() {
65 |   return (
66 |     <Card className="shadow-lg border-0">
67 |       <CardHeader className="pb-4">
68 |         <CardTitle className="text-lg font-semibold flex items-center">
69 |           <AlertTriangle className="h-5 w-5 mr-2 text-orange-600" />
70 |           Alerts & Notifications
71 |         </CardTitle>
72 |       </CardHeader>
73 |       <CardContent>
74 |         <div className="space-y-3">
75 |           {alerts.map((alert, index) => (
76 |             <div key={index} className="p-3 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors">
77 |               <div className="flex items-start space-x-3">
78 |                 <div className="flex-shrink-0 mt-0.5">{getAlertIcon(alert.type)}</div>
79 |                 <div className="flex-1 min-w-0">
80 |                   <div className="flex items-center justify-between mb-1">
81 |                     <h4 className="text-sm font-medium text-gray-900 truncate">{alert.title}</h4>
82 |                     <Badge variant="outline" className={`text-xs ${getPriorityColor(alert.priority)}`}>
83 |                       {alert.priority}
84 |                     </Badge>
85 |                   </div>
86 |                   <p className="text-sm text-gray-600 mb-2">{alert.message}</p>
87 |                   <p className="text-xs text-gray-400">{alert.time}</p>
88 |                 </div>
89 |               </div>
90 |             </div>
91 |           ))}
92 |         </div>
93 |       </CardContent>
94 |     </Card>
95 |   )
96 | }
97 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/attendance-chart.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { Badge } from "@/components/ui/badge"
 4 | 
 5 | const attendanceData = [
 6 |   { day: "Mon", rate: 96 },
 7 |   { day: "Tue", rate: 94 },
 8 |   { day: "Wed", rate: 92 },
 9 |   { day: "Thu", rate: 95 },
10 |   { day: "Fri", rate: 89 },
11 |   { day: "Sat", rate: 87 },
12 |   { day: "Sun", rate: 0 },
13 | ]
14 | 
15 | export function AttendanceChart() {
16 |   const weeklyAverage = Math.round(attendanceData.slice(0, 6).reduce((sum, day) => sum + day.rate, 0) / 6)
17 | 
18 |   return (
19 |     <div className="space-y-4">
20 |       <div className="flex items-center justify-between">
21 |         <Badge variant="outline" className="bg-purple-50 text-purple-700 border-purple-200">
22 |           Weekly Avg: {weeklyAverage}%
23 |         </Badge>
24 |       </div>
25 | 
26 |       <div className="h-32 flex items-end justify-between space-x-1">
27 |         {attendanceData.slice(0, 6).map((data, index) => {
28 |           const height = data.rate
29 |           const color = data.rate >= 95 ? "bg-green-500" : data.rate >= 90 ? "bg-yellow-500" : "bg-red-500"
30 | 
31 |           return (
32 |             <div key={index} className="flex-1 flex flex-col items-center space-y-2">
33 |               <div className="w-full h-24 flex items-end">
34 |                 <div
35 |                   className={`w-full rounded-t-md min-h-[4px] relative group hover:opacity-80 transition-opacity ${color}`}
36 |                   style={{ height: `${height}%` }}
37 |                 >
38 |                   <div className="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity">
39 |                     {data.rate}%
40 |                   </div>
41 |                 </div>
42 |               </div>
43 |               <span className="text-xs font-medium">{data.day}</span>
44 |             </div>
45 |           )
46 |         })}
47 |       </div>
48 | 
49 |       <div className="flex items-center justify-center space-x-4 text-xs">
50 |         <div className="flex items-center space-x-1">
51 |           <div className="w-2 h-2 bg-green-500 rounded"></div>
52 |           <span className="text-gray-600">95%+</span>
53 |         </div>
54 |         <div className="flex items-center space-x-1">
55 |           <div className="w-2 h-2 bg-yellow-500 rounded"></div>
56 |           <span className="text-gray-600">90-94%</span>
57 |         </div>
58 |         <div className="flex items-center space-x-1">
59 |           <div className="w-2 h-2 bg-red-500 rounded"></div>
60 |           <span className="text-gray-600">&lt;90%</span>
61 |         </div>
62 |       </div>
63 |     </div>
64 |   )
65 | }
66 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/enrollment-chart.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | import { Badge } from "@/components/ui/badge"
 3 | 
 4 | const enrollmentData = [
 5 |   { month: "Jan", students: 1180, target: 1200 },
 6 |   { month: "Feb", students: 1195, target: 1200 },
 7 |   { month: "Mar", students: 1210, target: 1220 },
 8 |   { month: "Apr", students: 1225, target: 1240 },
 9 |   { month: "May", students: 1234, target: 1250 },
10 |   { month: "Jun", students: 1240, target: 1260 },
11 | ]
12 | 
13 | export function EnrollmentChart() {
14 |   const maxValue = Math.max(...enrollmentData.map((d) => Math.max(d.students, d.target)))
15 | 
16 |   return (
17 |     <div className="space-y-4">
18 |       <div className="flex items-center justify-between">
19 |         <div className="flex items-center space-x-4">
20 |           <Badge variant="outline" className="bg-blue-50 text-blue-700 border-blue-200">
21 |             Current: 1,234 students
22 |           </Badge>
23 |           <Badge variant="outline" className="bg-green-50 text-green-700 border-green-200">
24 |             Target: 1,260 students
25 |           </Badge>
26 |         </div>
27 |       </div>
28 | 
29 |       <div className="h-64 flex items-end justify-between space-x-2">
30 |         {enrollmentData.map((data, index) => {
31 |           const studentHeight = (data.students / maxValue) * 100
32 |           const targetHeight = (data.target / maxValue) * 100
33 | 
34 |           return (
35 |             <div key={index} className="flex-1 flex flex-col items-center space-y-2">
36 |               <div className="w-full flex justify-center space-x-1 h-48 items-end">
37 |                 <div
38 |                   className="bg-blue-500 rounded-t-md flex-1 min-h-[4px] relative group hover:bg-blue-600 transition-colors"
39 |                   style={{ height: `${studentHeight}%` }}
40 |                 >
41 |                   <div className="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity">
42 |                     {data.students}
43 |                   </div>
44 |                 </div>
45 |                 <div
46 |                   className="bg-green-300 rounded-t-md flex-1 min-h-[4px] relative group hover:bg-green-400 transition-colors"
47 |                   style={{ height: `${targetHeight}%` }}
48 |                 >
49 |                   <div className="absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity">
50 |                     {data.target}
51 |                   </div>
52 |                 </div>
53 |               </div>
54 |               <span className="text-xs text-gray-600 font-medium">{data.month}</span>
55 |             </div>
56 |           )
57 |         })}
58 |       </div>
59 | 
60 |       <div className="flex items-center justify-center space-x-6 text-sm">
61 |         <div className="flex items-center space-x-2">
62 |           <div className="w-3 h-3 bg-blue-500 rounded"></div>
63 |           <span className="text-gray-600">Actual Enrollment</span>
64 |         </div>
65 |         <div className="flex items-center space-x-2">
66 |           <div className="w-3 h-3 bg-green-300 rounded"></div>
67 |           <span className="text-gray-600">Target Enrollment</span>
68 |         </div>
69 |       </div>
70 |     </div>
71 |   )
72 | }
73 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/financial-overview.tsx:
--------------------------------------------------------------------------------
  1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
  2 | import { Badge } from "@/components/ui/badge"
  3 | import { DollarSign, TrendingUp, TrendingDown, CreditCard, Wallet } from "lucide-react"
  4 | 
  5 | const financialData = [
  6 |   {
  7 |     category: "Tuition Revenue",
  8 |     amount: "$89,500",
  9 |     change: "+12.5%",
 10 |     changeType: "increase",
 11 |     percentage: 72,
 12 |   },
 13 |   {
 14 |     category: "Government Funding",
 15 |     amount: "$25,000",
 16 |     change: "+5.2%",
 17 |     changeType: "increase",
 18 |     percentage: 20,
 19 |   },
 20 |   {
 21 |     category: "Other Income",
 22 |     amount: "$10,000",
 23 |     change: "-2.1%",
 24 |     changeType: "decrease",
 25 |     percentage: 8,
 26 |   },
 27 | ]
 28 | 
 29 | const expenses = [
 30 |   { category: "Staff Salaries", amount: "$65,000", percentage: 65 },
 31 |   { category: "Facilities", amount: "$15,000", percentage: 15 },
 32 |   { category: "Resources", amount: "$12,000", percentage: 12 },
 33 |   { category: "Other", amount: "$8,000", percentage: 8 },
 34 | ]
 35 | 
 36 | export function FinancialOverview() {
 37 |   return (
 38 |     <Card className="shadow-lg border-0">
 39 |       <CardHeader className="pb-4">
 40 |         <CardTitle className="text-lg font-semibold flex items-center">
 41 |           <DollarSign className="h-5 w-5 mr-2 text-green-600" />
 42 |           Financial Overview
 43 |         </CardTitle>
 44 |       </CardHeader>
 45 |       <CardContent>
 46 |         <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
 47 |           {/* Revenue Breakdown */}
 48 |           <div className="space-y-4">
 49 |             <h4 className="font-medium text-gray-900 flex items-center">
 50 |               <Wallet className="h-4 w-4 mr-2 text-green-500" />
 51 |               Revenue Sources
 52 |             </h4>
 53 |             <div className="space-y-3">
 54 |               {financialData.map((item, index) => (
 55 |                 <div key={index} className="space-y-2">
 56 |                   <div className="flex items-center justify-between text-sm">
 57 |                     <span className="text-gray-700">{item.category}</span>
 58 |                     <div className="flex items-center space-x-2">
 59 |                       <span className="font-medium">{item.amount}</span>
 60 |                       <Badge variant={item.changeType === "increase" ? "default" : "destructive"} className="text-xs">
 61 |                         {item.changeType === "increase" ? (
 62 |                           <TrendingUp className="h-3 w-3 mr-1" />
 63 |                         ) : (
 64 |                           <TrendingDown className="h-3 w-3 mr-1" />
 65 |                         )}
 66 |                         {item.change}
 67 |                       </Badge>
 68 |                     </div>
 69 |                   </div>
 70 |                   <div className="w-full bg-gray-200 rounded-full h-2">
 71 |                     <div
 72 |                       className="bg-green-500 h-2 rounded-full transition-all duration-500"
 73 |                       style={{ width: `${item.percentage}%` }}
 74 |                     ></div>
 75 |                   </div>
 76 |                 </div>
 77 |               ))}
 78 |             </div>
 79 |           </div>
 80 | 
 81 |           {/* Expense Breakdown */}
 82 |           <div className="space-y-4">
 83 |             <h4 className="font-medium text-gray-900 flex items-center">
 84 |               <CreditCard className="h-4 w-4 mr-2 text-red-500" />
 85 |               Expense Categories
 86 |             </h4>
 87 |             <div className="space-y-3">
 88 |               {expenses.map((item, index) => (
 89 |                 <div key={index} className="space-y-2">
 90 |                   <div className="flex items-center justify-between text-sm">
 91 |                     <span className="text-gray-700">{item.category}</span>
 92 |                     <span className="font-medium">{item.amount}</span>
 93 |                   </div>
 94 |                   <div className="w-full bg-gray-200 rounded-full h-2">
 95 |                     <div
 96 |                       className="bg-red-500 h-2 rounded-full transition-all duration-500"
 97 |                       style={{ width: `${item.percentage}%` }}
 98 |                     ></div>
 99 |                   </div>
100 |                 </div>
101 |               ))}
102 |             </div>
103 |           </div>
104 |         </div>
105 | 
106 |         <div className="mt-6 pt-4 border-t border-gray-100">
107 |           <div className="flex items-center justify-between">
108 |             <div className="text-sm">
109 |               <span className="text-gray-600">Net Income: </span>
110 |               <span className="font-semibold text-green-600">$24,500</span>
111 |             </div>
112 |             <Badge variant="outline" className="bg-green-50 text-green-700 border-green-200">
113 |               Profit Margin: 19.7%
114 |             </Badge>
115 |           </div>
116 |         </div>
117 |       </CardContent>
118 |     </Card>
119 |   )
120 | }
121 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/quick-actions.tsx:
--------------------------------------------------------------------------------
 1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
 2 | import { Button } from "@/components/ui/button"
 3 | import { UserPlus, FileText, Calendar, Settings, Download, Bell, Users } from "lucide-react"
 4 | 
 5 | const quickActions = [
 6 |   {
 7 |     title: "Add Student",
 8 |     icon: UserPlus,
 9 |     color: "bg-blue-500 hover:bg-blue-600",
10 |     description: "Enroll new student",
11 |   },
12 |   {
13 |     title: "Generate Report",
14 |     icon: FileText,
15 |     color: "bg-green-500 hover:bg-green-600",
16 |     description: "Academic reports",
17 |   },
18 |   {
19 |     title: "Schedule Event",
20 |     icon: Calendar,
21 |     color: "bg-purple-500 hover:bg-purple-600",
22 |     description: "Add to calendar",
23 |   },
24 |   {
25 |     title: "Send Notice",
26 |     icon: Bell,
27 |     color: "bg-orange-500 hover:bg-orange-600",
28 |     description: "Notify parents/staff",
29 |   },
30 |   {
31 |     title: "Staff Meeting",
32 |     icon: Users,
33 |     color: "bg-indigo-500 hover:bg-indigo-600",
34 |     description: "Schedule meeting",
35 |   },
36 |   {
37 |     title: "Export Data",
38 |     icon: Download,
39 |     color: "bg-teal-500 hover:bg-teal-600",
40 |     description: "Download reports",
41 |   },
42 | ]
43 | 
44 | export function QuickActions() {
45 |   return (
46 |     <Card className="shadow-lg border-0">
47 |       <CardHeader className="pb-4">
48 |         <CardTitle className="text-lg font-semibold flex items-center">
49 |           <Settings className="h-5 w-5 mr-2 text-gray-600" />
50 |           Quick Actions
51 |         </CardTitle>
52 |       </CardHeader>
53 |       <CardContent>
54 |         <div className="grid grid-cols-2 gap-3">
55 |           {quickActions.map((action, index) => {
56 |             const Icon = action.icon
57 |             return (
58 |               <Button
59 |                 key={index}
60 |                 variant="outline"
61 |                 className="h-auto p-4 flex flex-col items-center space-y-2 hover:shadow-md transition-all duration-200 border-gray-200 bg-transparent"
62 |               >
63 |                 <div className={`p-2 rounded-lg text-white ${action.color} transition-colors`}>
64 |                   <Icon className="h-4 w-4" />
65 |                 </div>
66 |                 <div className="text-center">
67 |                   <div className="text-sm font-medium text-gray-900">{action.title}</div>
68 |                   <div className="text-xs text-gray-500">{action.description}</div>
69 |                 </div>
70 |               </Button>
71 |             )
72 |           })}
73 |         </div>
74 |       </CardContent>
75 |     </Card>
76 |   )
77 | }
78 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/recent-activity.tsx:
--------------------------------------------------------------------------------
 1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
 2 | import { Activity, UserPlus, FileText, AlertCircle, CheckCircle } from "lucide-react"
 3 | 
 4 | const recentActivities = [
 5 |   {
 6 |     type: "enrollment",
 7 |     title: "New Student Enrolled",
 8 |     description: "Sarah Johnson enrolled in Grade 10-A",
 9 |     time: "2 hours ago",
10 |     icon: UserPlus,
11 |     color: "text-green-600",
12 |   },
13 |   {
14 |     type: "report",
15 |     title: "Monthly Report Generated",
16 |     description: "Academic performance report for December",
17 |     time: "4 hours ago",
18 |     icon: FileText,
19 |     color: "text-blue-600",
20 |   },
21 |   {
22 |     type: "alert",
23 |     title: "Attendance Alert",
24 |     description: "Grade 9-C attendance below threshold",
25 |     time: "6 hours ago",
26 |     icon: AlertCircle,
27 |     color: "text-orange-600",
28 |   },
29 |   {
30 |     type: "completion",
31 |     title: "Staff Training Completed",
32 |     description: "Digital literacy training session finished",
33 |     time: "1 day ago",
34 |     icon: CheckCircle,
35 |     color: "text-green-600",
36 |   },
37 |   {
38 |     type: "enrollment",
39 |     title: "Student Transfer",
40 |     description: "Mike Chen transferred to Grade 11-B",
41 |     time: "1 day ago",
42 |     icon: UserPlus,
43 |     color: "text-blue-600",
44 |   },
45 | ]
46 | 
47 | export function RecentActivity() {
48 |   return (
49 |     <Card className="shadow-lg border-0">
50 |       <CardHeader className="pb-4">
51 |         <CardTitle className="text-lg font-semibold flex items-center">
52 |           <Activity className="h-5 w-5 mr-2 text-gray-600" />
53 |           Recent Activity
54 |         </CardTitle>
55 |       </CardHeader>
56 |       <CardContent>
57 |         <div className="space-y-4">
58 |           {recentActivities.map((activity, index) => {
59 |             const Icon = activity.icon
60 |             return (
61 |               <div key={index} className="flex items-start space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors">
62 |                 <div className={`flex-shrink-0 mt-1 ${activity.color}`}>
63 |                   <Icon className="h-4 w-4" />
64 |                 </div>
65 |                 <div className="flex-1 min-w-0">
66 |                   <h4 className="text-sm font-medium text-gray-900 mb-1">{activity.title}</h4>
67 |                   <p className="text-sm text-gray-600 mb-2">{activity.description}</p>
68 |                   <p className="text-xs text-gray-400">{activity.time}</p>
69 |                 </div>
70 |               </div>
71 |             )
72 |           })}
73 |         </div>
74 |       </CardContent>
75 |     </Card>
76 |   )
77 | }
78 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/staff-metrics.tsx:
--------------------------------------------------------------------------------
  1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
  2 | import { Badge } from "@/components/ui/badge"
  3 | import { Users, Award, BookOpen } from "lucide-react"
  4 | 
  5 | const staffData = [
  6 |   {
  7 |     department: "Mathematics",
  8 |     teachers: 12,
  9 |     ratio: "1:18",
 10 |     performance: 4.2,
 11 |     status: "optimal",
 12 |   },
 13 |   {
 14 |     department: "Science",
 15 |     teachers: 10,
 16 |     ratio: "1:20",
 17 |     performance: 4.5,
 18 |     status: "excellent",
 19 |   },
 20 |   {
 21 |     department: "English",
 22 |     teachers: 8,
 23 |     ratio: "1:22",
 24 |     performance: 4.1,
 25 |     status: "good",
 26 |   },
 27 |   {
 28 |     department: "History",
 29 |     teachers: 6,
 30 |     ratio: "1:25",
 31 |     performance: 3.9,
 32 |     status: "needs_attention",
 33 |   },
 34 |   {
 35 |     department: "Arts",
 36 |     teachers: 5,
 37 |     ratio: "1:15",
 38 |     performance: 4.3,
 39 |     status: "excellent",
 40 |   },
 41 | ]
 42 | 
 43 | const getStatusColor = (status: string) => {
 44 |   switch (status) {
 45 |     case "excellent":
 46 |       return "bg-green-100 text-green-800 border-green-200"
 47 |     case "optimal":
 48 |       return "bg-blue-100 text-blue-800 border-blue-200"
 49 |     case "good":
 50 |       return "bg-yellow-100 text-yellow-800 border-yellow-200"
 51 |     case "needs_attention":
 52 |       return "bg-red-100 text-red-800 border-red-200"
 53 |     default:
 54 |       return "bg-gray-100 text-gray-800 border-gray-200"
 55 |   }
 56 | }
 57 | 
 58 | export function StaffMetrics() {
 59 |   return (
 60 |     <Card className="shadow-lg border-0">
 61 |       <CardHeader className="pb-4">
 62 |         <CardTitle className="text-lg font-semibold flex items-center">
 63 |           <Users className="h-5 w-5 mr-2 text-blue-600" />
 64 |           Staff Performance & Metrics
 65 |         </CardTitle>
 66 |       </CardHeader>
 67 |       <CardContent>
 68 |         <div className="space-y-4">
 69 |           {staffData.map((dept, index) => (
 70 |             <div key={index} className="p-4 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors">
 71 |               <div className="flex items-center justify-between mb-3">
 72 |                 <h4 className="font-medium text-gray-900">{dept.department}</h4>
 73 |                 <Badge variant="outline" className={getStatusColor(dept.status)}>
 74 |                   {dept.status.replace("_", " ")}
 75 |                 </Badge>
 76 |               </div>
 77 | 
 78 |               <div className="grid grid-cols-3 gap-4 text-sm">
 79 |                 <div className="flex items-center space-x-2">
 80 |                   <Users className="h-4 w-4 text-gray-400" />
 81 |                   <div>
 82 |                     <div className="font-medium">{dept.teachers}</div>
 83 |                     <div className="text-gray-500">Teachers</div>
 84 |                   </div>
 85 |                 </div>
 86 | 
 87 |                 <div className="flex items-center space-x-2">
 88 |                   <BookOpen className="h-4 w-4 text-gray-400" />
 89 |                   <div>
 90 |                     <div className="font-medium">{dept.ratio}</div>
 91 |                     <div className="text-gray-500">Student Ratio</div>
 92 |                   </div>
 93 |                 </div>
 94 | 
 95 |                 <div className="flex items-center space-x-2">
 96 |                   <Award className="h-4 w-4 text-gray-400" />
 97 |                   <div>
 98 |                     <div className="font-medium">{dept.performance}/5.0</div>
 99 |                     <div className="text-gray-500">Rating</div>
100 |                   </div>
101 |                 </div>
102 |               </div>
103 |             </div>
104 |           ))}
105 |         </div>
106 | 
107 |         <div className="mt-6 pt-4 border-t border-gray-100">
108 |           <div className="grid grid-cols-2 gap-4 text-sm">
109 |             <div className="text-center">
110 |               <div className="text-2xl font-bold text-gray-900">87</div>
111 |               <div className="text-gray-500">Total Staff</div>
112 |             </div>
113 |             <div className="text-center">
114 |               <div className="text-2xl font-bold text-gray-900">4.2</div>
115 |               <div className="text-gray-500">Avg Rating</div>
116 |             </div>
117 |           </div>
118 |         </div>
119 |       </CardContent>
120 |     </Card>
121 |   )
122 | }
123 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/stats-cards.tsx:
--------------------------------------------------------------------------------
  1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
  2 | import { Badge } from "@/components/ui/badge"
  3 | import { Users, GraduationCap, TrendingUp, TrendingDown, DollarSign, BookOpen, Building, UserCheck } from "lucide-react"
  4 | 
  5 | const statsData = [
  6 |   {
  7 |     title: "Total Students",
  8 |     value: "1,234",
  9 |     change: "+5.2%",
 10 |     changeType: "increase",
 11 |     icon: Users,
 12 |     iconBgClass: "bg-blue-100",
 13 |     iconTextClass: "text-blue-600",
 14 |     badgeBgClass: "bg-gray-900",
 15 |     badgeTextClass: "text-white",
 16 |     description: "from last month",
 17 |   },
 18 |   {
 19 |     title: "Active Staff",
 20 |     value: "87",
 21 |     change: "+2",
 22 |     changeType: "increase",
 23 |     icon: UserCheck,
 24 |     iconBgClass: "bg-green-100",
 25 |     iconTextClass: "text-green-600",
 26 |     badgeBgClass: "bg-gray-900",
 27 |     badgeTextClass: "text-white",
 28 |     description: "since last month",
 29 |   },
 30 |   {
 31 |     title: "Average Attendance",
 32 |     value: "94.2%",
 33 |     change: "+1.8%",
 34 |     changeType: "increase",
 35 |     icon: GraduationCap,
 36 |     iconBgClass: "bg-purple-100",
 37 |     iconTextClass: "text-purple-600",
 38 |     badgeBgClass: "bg-gray-900",
 39 |     badgeTextClass: "text-white",
 40 |     description: "this week",
 41 |   },
 42 |   {
 43 |     title: "Monthly Revenue",
 44 |     value: "$124,500",
 45 |     change: "-2.1%",
 46 |     changeType: "decrease",
 47 |     icon: DollarSign,
 48 |     iconBgClass: "bg-orange-100",
 49 |     iconTextClass: "text-orange-600",
 50 |     badgeBgClass: "bg-red-600", // Red for decrease
 51 |     badgeTextClass: "text-white",
 52 |     description: "from last month",
 53 |   },
 54 |   {
 55 |     title: "Active Courses",
 56 |     value: "42",
 57 |     change: "+3",
 58 |     changeType: "increase",
 59 |     icon: BookOpen,
 60 |     iconBgClass: "bg-indigo-100",
 61 |     iconTextClass: "text-indigo-600",
 62 |     badgeBgClass: "bg-gray-900",
 63 |     badgeTextClass: "text-white",
 64 |     description: "this semester",
 65 |   },
 66 |   {
 67 |     title: "Facility Utilization",
 68 |     value: "78%",
 69 |     change: "+5.2%",
 70 |     changeType: "increase",
 71 |     icon: Building,
 72 |     iconBgClass: "bg-teal-100",
 73 |     iconTextClass: "text-teal-600",
 74 |     badgeBgClass: "bg-gray-900",
 75 |     badgeTextClass: "text-white",
 76 |     description: "capacity used",
 77 |   },
 78 | ]
 79 | 
 80 | export function StatsCards() {
 81 |   return (
 82 |     <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4">
 83 |       {statsData.map((stat, index) => {
 84 |         const Icon = stat.icon
 85 |         const isIncrease = stat.changeType === "increase"
 86 | 
 87 |         return (
 88 |           <Card key={index} className="shadow-lg border-0 rounded-xl hover:shadow-xl transition-all duration-300 group">
 89 |             <CardHeader className="pb-2">
 90 |               <div className="flex items-center justify-between">
 91 |                 <CardTitle className="text-sm font-medium text-gray-600">{stat.title}</CardTitle>
 92 |                 <div className={`p-2 rounded-lg ${stat.iconBgClass} group-hover:scale-110 transition-transform`}>
 93 |                   <Icon className={`h-4 w-4 ${stat.iconTextClass}`} />
 94 |                 </div>
 95 |               </div>
 96 |             </CardHeader>
 97 |             <CardContent className="pt-0">
 98 |               <div className="space-y-2">
 99 |                 <div className="text-3xl font-bold text-gray-900">{stat.value}</div>
100 |                 <div className="flex items-center space-x-2">
101 |                   <Badge className={`text-xs px-2 py-0.5 rounded-full ${stat.badgeBgClass} ${stat.badgeTextClass}`}>
102 |                     {isIncrease ? <TrendingUp className="h-3 w-3 mr-1" /> : <TrendingDown className="h-3 w-3 mr-1" />}
103 |                     {stat.change}
104 |                   </Badge>
105 |                   <span className="text-sm text-gray-500">{stat.description}</span>
106 |                 </div>
107 |               </div>
108 |             </CardContent>
109 |           </Card>
110 |         )
111 |       })}
112 |     </div>
113 |   )
114 | }
115 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/_components/upcoming-events.tsx:
--------------------------------------------------------------------------------
 1 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
 2 | import { Badge } from "@/components/ui/badge"
 3 | import { Calendar, Clock, MapPin } from "lucide-react"
 4 | 
 5 | const upcomingEvents = [
 6 |   {
 7 |     title: "Parent-Teacher Conference",
 8 |     date: "Jan 15, 2025",
 9 |     time: "2:00 PM - 6:00 PM",
10 |     location: "Main Hall",
11 |     type: "meeting",
12 |     priority: "high",
13 |   },
14 |   {
15 |     title: "Science Fair",
16 |     date: "Jan 18, 2025",
17 |     time: "9:00 AM - 3:00 PM",
18 |     location: "Gymnasium",
19 |     type: "event",
20 |     priority: "medium",
21 |   },
22 |   {
23 |     title: "Staff Development Day",
24 |     date: "Jan 22, 2025",
25 |     time: "8:00 AM - 4:00 PM",
26 |     location: "Conference Room",
27 |     type: "training",
28 |     priority: "medium",
29 |   },
30 |   {
31 |     title: "Board Meeting",
32 |     date: "Jan 25, 2025",
33 |     time: "7:00 PM - 9:00 PM",
34 |     location: "Board Room",
35 |     type: "meeting",
36 |     priority: "high",
37 |   },
38 | ]
39 | 
40 | const getTypeColor = (type: string) => {
41 |   switch (type) {
42 |     case "meeting":
43 |       return "bg-blue-100 text-blue-800 border-blue-200"
44 |     case "event":
45 |       return "bg-green-100 text-green-800 border-green-200"
46 |     case "training":
47 |       return "bg-purple-100 text-purple-800 border-purple-200"
48 |     default:
49 |       return "bg-gray-100 text-gray-800 border-gray-200"
50 |   }
51 | }
52 | 
53 | export function UpcomingEvents() {
54 |   return (
55 |     <Card className="shadow-lg border-0">
56 |       <CardHeader className="pb-4">
57 |         <CardTitle className="text-lg font-semibold flex items-center">
58 |           <Calendar className="h-5 w-5 mr-2 text-indigo-600" />
59 |           Upcoming Events
60 |         </CardTitle>
61 |       </CardHeader>
62 |       <CardContent>
63 |         <div className="space-y-4">
64 |           {upcomingEvents.map((event, index) => (
65 |             <div key={index} className="p-3 rounded-lg border border-gray-100 hover:border-gray-200 transition-colors">
66 |               <div className="flex items-start justify-between mb-2">
67 |                 <h4 className="font-medium text-gray-900 text-sm">{event.title}</h4>
68 |                 <Badge variant="outline" className={`text-xs ${getTypeColor(event.type)}`}>
69 |                   {event.type}
70 |                 </Badge>
71 |               </div>
72 | 
73 |               <div className="space-y-1 text-xs text-gray-600">
74 |                 <div className="flex items-center space-x-2">
75 |                   <Calendar className="h-3 w-3" />
76 |                   <span>{event.date}</span>
77 |                 </div>
78 |                 <div className="flex items-center space-x-2">
79 |                   <Clock className="h-3 w-3" />
80 |                   <span>{event.time}</span>
81 |                 </div>
82 |                 <div className="flex items-center space-x-2">
83 |                   <MapPin className="h-3 w-3" />
84 |                   <span>{event.location}</span>
85 |                 </div>
86 |               </div>
87 |             </div>
88 |           ))}
89 |         </div>
90 |       </CardContent>
91 |     </Card>
92 |   )
93 | }
94 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/calendar/page.tsx:
--------------------------------------------------------------------------------
 1 | 'use client';
 2 | 
 3 | import React from 'react';
 4 | // Import the necessary types from FullCalendar
 5 | import { EventClickArg, DateSelectArg } from '@fullcalendar/core';
 6 | import FullCalendar from '@fullcalendar/react';
 7 | import dayGridPlugin from '@fullcalendar/daygrid';
 8 | import timeGridPlugin from '@fullcalendar/timegrid';
 9 | import interactionPlugin from '@fullcalendar/interaction';
10 | import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
11 | import { Button } from '@/components/ui/button';
12 | import { PlusCircle } from 'lucide-react';
13 | 
14 | // Hardcoded data for initial testing and validation
15 | const hardcodedEvents = [
16 |   {
17 |     title: 'First Term Begins',
18 |     start: '2025-09-01',
19 |     end: '2025-09-02',
20 |     allDay: true,
21 |     backgroundColor: '#2563eb',
22 |     borderColor: '#2563eb'
23 |   },
24 |   {
25 |     title: 'Mid-term Exams',
26 |     start: '2025-10-20',
27 |     end: '2025-10-25',
28 |     allDay: true,
29 |     backgroundColor: '#dc2626',
30 |     borderColor: '#dc2626'
31 |   },
32 |   {
33 |     title: 'Parent-Teacher Conference',
34 |     start: '2025-11-15T16:00:00',
35 |     backgroundColor: '#7c3aed',
36 |     borderColor: '#7c3aed'
37 |   },
38 | ];
39 | 
40 | export default function SchoolCalendarPage() {
41 |   // Correctly type the event handler's argument
42 |   const handleEventClick = (clickInfo: EventClickArg) => {
43 |     alert(`Event clicked: ${clickInfo.event.title}`);
44 |   };
45 | 
46 |   // Correctly type the date selection handler's argument
47 |   const handleDateSelect = (selectInfo: DateSelectArg) => {
48 |     const title = prompt('Please enter a new title for your event');
49 |     const calendarApi = selectInfo.view.calendar;
50 |     calendarApi.unselect(); // clear date selection
51 | 
52 |     if (title) {
53 |       calendarApi.addEvent({
54 |         title,
55 |         start: selectInfo.startStr,
56 |         end: selectInfo.endStr,
57 |         allDay: selectInfo.allDay,
58 |       });
59 |     }
60 |   };
61 | 
62 |   return (
63 |     <Card>
64 |       <CardHeader className="flex flex-row items-center justify-between">
65 |         <div>
66 |           <CardTitle>School Calendar</CardTitle>
67 |           <CardDescription>
68 |             Manage academic schedules, holidays, and school-wide events.
69 |           </CardDescription>
70 |         </div>
71 |         <Button>
72 |           <PlusCircle className="mr-2 h-4 w-4" />
73 |           New Event
74 |         </Button>
75 |       </CardHeader>
76 |       <CardContent>
77 |         <FullCalendar
78 |           plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}
79 |           headerToolbar={{
80 |             left: 'prev,next today',
81 |             center: 'title',
82 |             right: 'dayGridMonth,timeGridWeek,timeGridDay'
83 |           }}
84 |           initialView="dayGridMonth"
85 |           editable={true}
86 |           selectable={true}
87 |           selectMirror={true}
88 |           dayMaxEvents={true}
89 |           weekends={true}
90 |           events={hardcodedEvents}
91 |           select={handleDateSelect}
92 |           eventClick={handleEventClick}
93 |         />
94 |       </CardContent>
95 |     </Card>
96 |   );
97 | }
98 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/layout.tsx:
--------------------------------------------------------------------------------
  1 | import * as React from 'react';
  2 | import { notFound } from 'next/navigation';
  3 | import { eq } from 'drizzle-orm';
  4 | 
  5 | import { getSession, hasPermission } from '@/lib/session';
  6 | import { getTenantDb } from '@/lib/db';
  7 | import { schools } from '@/lib/db/schema/tenant';
  8 | import { NavigationProvider, NavItem } from '@/components/navigation-provider';
  9 | 
 10 | interface SchoolLayoutProps {
 11 |   children: React.ReactNode;
 12 |   params: Promise<{ // `params` must be a Promise for dynamic layouts in Next.js 15
 13 |     schoolId: string;
 14 |   }>;
 15 | }
 16 | 
 17 | /**
 18 |  * Generates the navigation items specific to the school context.
 19 |  * @param schoolId - The ID of the current school.
 20 |  * @returns An array of NavItem objects for the school sidebar.
 21 |  */
 22 | const getSchoolNavItems = (schoolId: string): NavItem[] => [
 23 |     {
 24 |         title: "School Dashboard",
 25 |         url: `/dashboard/schools/${schoolId}`,
 26 |         iconName: "Home",
 27 |         requiredPermission: "school:read",
 28 |     },
 29 |     {
 30 |         title: "Students",
 31 |         url: `/dashboard/schools/${schoolId}/students`,
 32 |         iconName: "GraduationCap",
 33 |         requiredPermission: "student:read",
 34 |     },
 35 |     {
 36 |         title: "Staff",
 37 |         url: `/dashboard/schools/${schoolId}/staff`,
 38 |         iconName: "UserCheck",
 39 |         requiredPermission: "staff:read",
 40 |     },
 41 |     {
 42 |         title: "Academics",
 43 |         url: `/dashboard/schools/${schoolId}/academics`,
 44 |         iconName: "BookOpen",
 45 |         requiredPermission: "academics:read",
 46 |     },
 47 |     {
 48 |         title: "School Settings",
 49 |         url: `/dashboard/schools/${schoolId}/settings`,
 50 |         iconName: "Settings",
 51 |         requiredPermission: "school:manage_settings",
 52 |     },
 53 | ];
 54 | 
 55 | 
 56 | // This is a shared data-fetching and authorization function for the school context.
 57 | async function getSchoolData(schoolIdParam: string, tenantId: string) {
 58 |   console.log("Fetching school data for schoolId:", schoolIdParam, "and tenantId:", tenantId);
 59 |   const schoolId = parseInt(schoolIdParam, 10);
 60 |   if (isNaN(schoolId)) {
 61 |     return null;
 62 |   }
 63 | 
 64 |   const db = await getTenantDb(tenantId);
 65 |   const school = await db.query.schools.findFirst({
 66 |     where: eq(schools.id, schoolId),
 67 |   });
 68 |   console.log(`[SchoolLayout] Fetched school:`, school);
 69 |   return school;
 70 | }
 71 | 
 72 | export default async function SchoolLayout({ children, params }: SchoolLayoutProps) {
 73 |   const { schoolId } = await params;
 74 |   const session = await getSession();
 75 | 
 76 |   // RBAC check: User must have general permission to view any school.
 77 |   // if (!session || !hasPermission(session, 'school:read')) {
 78 |   //   // In a real app, you might redirect to an access-denied page
 79 |   //   notFound();
 80 |   // }
 81 |   
 82 |   const school = await getSchoolData(schoolId, session.tenantId);
 83 | 
 84 |   if (!school) {
 85 |     notFound();
 86 |   }
 87 |   
 88 |   // TODO: Add fine-grained authorization.
 89 |   // e.g., A SCHOOL_ADMIN should only be able to access schools they are assigned to.
 90 |   // This would involve checking the usersToRoles table for an entry matching
 91 |   // session.userId and school.id.
 92 | 
 93 |   const schoolNavItems = getSchoolNavItems(schoolId);
 94 |   console.log("[SchoolLayout] Navigation items:", schoolNavItems);
 95 | 
 96 |   // This provider overrides the parent layout's navigation items,
 97 |   // making the sidebar context-aware for the school section.
 98 |   return (
 99 |     <NavigationProvider initialItems={schoolNavItems}>
100 |       {children}
101 |     </NavigationProvider>
102 |   );
103 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/school-provider.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import * as React from "react";
 4 | import { type schools } from "@/lib/db/schema/tenant";
 5 | 
 6 | // Infer the 'School' type directly from the Drizzle schema.
 7 | // This creates a precise type based on your 'schools' table columns.
 8 | type School = typeof schools.$inferSelect;
 9 | 
10 | // Update the context to expect a 'School' object or 'null'.
11 | export const SchoolContext = React.createContext<School | null>(null);
12 | 
13 | // Use the specific 'School' type for the prop instead of 'any'.
14 | export function SchoolProvider({ school, children }: { school: School, children: React.ReactNode }) {
15 |   return (
16 |     <SchoolContext.Provider value={school}>
17 |       {children}
18 |     </SchoolContext.Provider>
19 |   );
20 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/settings/_components/school-settings-form.tsx:
--------------------------------------------------------------------------------
  1 | "use client";
  2 | 
  3 | import { useState } from "react";
  4 | import { toast } from "sonner";
  5 | import { SchoolFormData } from "../../../_components/types/school-forms";
  6 | import {
  7 |   upsertSchoolBasicInfo,
  8 |   upsertAcademicYears,
  9 |   upsertDepartments,
 10 |   upsertGradeLevels,
 11 | } from "@/lib/actions/schools";
 12 | import { Separator } from "@/components/ui/separator";
 13 | import { Button } from "@/components/ui/button";
 14 | import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
 15 | import { BasicInformationForm } from "../../../_components/forms/basic-information-form";
 16 | import { AcademicInformationForm } from "../../../_components/forms/academic-information-form";
 17 | import { DepartmentsForm } from "../../../_components/forms/departments-form";
 18 | import { GradeLevelsForm } from "../../../_components/forms/grade-levels-form";
 19 | 
 20 | interface SchoolSettingsFormProps {
 21 |   initialSchoolData: SchoolFormData;
 22 | }
 23 | 
 24 | export function SchoolSettingsForm({ initialSchoolData }: SchoolSettingsFormProps) {
 25 |   const [school, setSchool] = useState<SchoolFormData>(initialSchoolData);
 26 |   const [errors, setErrors] = useState<Record<string, string[] | undefined>>({});
 27 | 
 28 |   const updateData = (updates: Partial<SchoolFormData>) => {
 29 |     setSchool((prev) => ({ ...prev, ...updates }));
 30 |     setErrors({});
 31 |   };
 32 | 
 33 |   const handleSave = async (section: 'basic' | 'academics' | 'departments' | 'grades') => {
 34 |     if (!school?.id) return;
 35 | 
 36 |     let result;
 37 |     switch (section) {
 38 |       case 'basic':
 39 |         const basicInfoData = {
 40 |             id: school.id,
 41 |             name: school.name,
 42 |             email: school.email,
 43 |             address: school.address,
 44 |             phone: school.phone,
 45 |         };
 46 |         result = await upsertSchoolBasicInfo(basicInfoData);
 47 |         break;
 48 |       case 'academics':
 49 |         result = await upsertAcademicYears(school.id, school.academicYears);
 50 |         break;
 51 |       case 'departments':
 52 |         result = await upsertDepartments(school.id, school.departments);
 53 |         break;
 54 |       case 'grades':
 55 |         result = await upsertGradeLevels(school.id, school.gradeLevels);
 56 |         break;
 57 |     }
 58 | 
 59 |     if (result.success) {
 60 |       toast.success(`${section.charAt(0).toUpperCase() + section.slice(1)} settings saved successfully.`);
 61 |     } else {
 62 |       toast.error(result.message || `Failed to save ${section} settings.`);
 63 |       if (result.errors) {
 64 |         setErrors(result.errors);
 65 |       }
 66 |     }
 67 |   };
 68 | 
 69 |   return (
 70 |     <div className="space-y-6">
 71 |       <Card>
 72 |         <CardHeader>
 73 |           <CardTitle>Basic Information</CardTitle>
 74 |           <CardDescription>Update the basic details of the school.</CardDescription>
 75 |         </CardHeader>
 76 |         <CardContent>
 77 |           <BasicInformationForm data={school} updateData={updateData} errors={errors} />
 78 |         </CardContent>
 79 |         <div className="flex justify-end p-6">
 80 |           <Button onClick={() => handleSave('basic')}>Save Basic Information</Button>
 81 |         </div>
 82 |       </Card>
 83 | 
 84 |       <Separator />
 85 | 
 86 |       <Card>
 87 |         <CardHeader>
 88 |           <CardTitle>Academic Information</CardTitle>
 89 |           <CardDescription>Define academic years and terms.</CardDescription>
 90 |         </CardHeader>
 91 |         <CardContent>
 92 |           <AcademicInformationForm data={school} updateData={updateData} errors={errors} />
 93 |         </CardContent>
 94 |         <div className="flex justify-end p-6">
 95 |           <Button onClick={() => handleSave('academics')}>Save Academic Information</Button>
 96 |         </div>
 97 |       </Card>
 98 | 
 99 |       <Separator />
100 | 
101 |       <Card>
102 |         <CardHeader>
103 |           <CardTitle>Departments</CardTitle>
104 |           <CardDescription>Manage the departments in the school.</CardDescription>
105 |         </CardHeader>
106 |         <CardContent>
107 |           <DepartmentsForm data={school} updateData={updateData} errors={errors} />
108 |         </CardContent>
109 |         <div className="flex justify-end p-6">
110 |           <Button onClick={() => handleSave('departments')}>Save Departments</Button>
111 |         </div>
112 |       </Card>
113 | 
114 |       <Separator />
115 | 
116 |       <Card>
117 |         <CardHeader>
118 |           <CardTitle>Grade Levels</CardTitle>
119 |           <CardDescription>Define the grade levels for the school.</CardDescription>
120 |         </CardHeader>
121 |         <CardContent>
122 |           <GradeLevelsForm data={school} updateData={updateData} errors={errors} />
123 |         </CardContent>
124 |         <div className="flex justify-end p-6">
125 |           <Button onClick={() => handleSave('grades')}>Save Grade Levels</Button>
126 |         </div>
127 |       </Card>
128 |     </div>
129 |   );
130 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/[schoolId]/settings/page.tsx:
--------------------------------------------------------------------------------
 1 | import { getSchoolById } from "@/lib/actions/schools";
 2 | import { notFound } from "next/navigation";
 3 | import { SchoolSettingsForm } from "./_components/school-settings-form";
 4 | 
 5 | 
 6 | // Step 1: Update the interface to reflect that 'params' is a Promise.
 7 | interface SchoolSettingspageProps {
 8 |   params: Promise<{
 9 |     schoolId: string;
10 |   }>;
11 | }
12 | 
13 | export default async function SchoolSettingspage({ params }: SchoolSettingspageProps) {
14 |   // Step 2: Await the 'params' promise to resolve its value.
15 |   const { schoolId: schoolIdString } = await params;
16 |   
17 |   const schoolId = Number(schoolIdString);
18 |   if (isNaN(schoolId)) notFound();
19 | 
20 |   const schoolData = await getSchoolById(schoolId);
21 |   if (!schoolData) notFound();
22 |   console.log("School Data:", schoolData);
23 | 
24 |   return (
25 |     <div className="space-y-6">
26 |         <div>
27 |             <h1 className="text-3xl font-bold">School Settings</h1>
28 |             <p className="text-muted-foreground">Manage settings for {schoolData.name}.</p>
29 |         </div>
30 |         <SchoolSettingsForm initialSchoolData={schoolData} />
31 |     </div>
32 |   );
33 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/empty-state.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { Card, CardContent } from "@/components/ui/card"
 4 | import { Building2, BookOpen, Users, ArrowUp } from "lucide-react"
 5 | 
 6 | interface EmptyStateProps {
 7 |   canCreateSchool: boolean
 8 | }
 9 | 
10 | export function EmptyState({ canCreateSchool }: EmptyStateProps) {
11 |   return (
12 |     <div className="flex flex-col items-center justify-center py-16 px-4">
13 |       <div className="relative mb-8">
14 |         <div className="absolute inset-0 rounded-full animate-pulse" />
15 |         <div className="relative p-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-full">
16 |           <Building2 className="h-12 w-12 text-blue-600" />
17 |         </div>
18 |       </div>
19 | 
20 |       <div className="text-center max-w-md">
21 |         <h3 className="text-2xl font-semibold  mb-2">No Schools Yet</h3>
22 |         <p className="mb-8">
23 |           Get started by creating your first school. You will be able to manage students, teachers, and all academic
24 |           activities from a centralized dashboard.
25 |         </p>
26 |       </div>
27 | 
28 |       <div className="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8 w-full max-w-2xl">
29 |         <Card className="text-center p-4 border-dashed border-2 border-gray-200 hover:border-blue-300 transition-colors">
30 |           <CardContent className="p-0">
31 |             <Users className="h-8 w-8 text-blue-500 mx-auto mb-2" />
32 |             <p className="text-sm font-medium">Manage Students</p>
33 |             <p className="text-xs">Track enrollment & progress</p>
34 |           </CardContent>
35 |         </Card>
36 | 
37 |         <Card className="text-center p-4 border-dashed border-2 border-gray-200 hover:border-green-300 transition-colors">
38 |           <CardContent className="p-0">
39 |             <BookOpen className="h-8 w-8 text-green-500 mx-auto mb-2" />
40 |             <p className="text-sm font-medium">Course Management</p>
41 |             <p className="text-xs">Organize curriculum</p>
42 |           </CardContent>
43 |         </Card>
44 | 
45 |         <Card className="text-center p-4 border-dashed border-2 border-gray-200 hover:border-purple-300 transition-colors">
46 |           <CardContent className="p-0">
47 |             <Building2 className="h-8 w-8 text-purple-500 mx-auto mb-2" />
48 |             <p className="text-sm font-medium">School Operations</p>
49 |             <p className="text-xs">Administrative tools</p>
50 |           </CardContent>
51 |         </Card>
52 |       </div>
53 | 
54 |       {/* Point users to the existing create button */}
55 |       {canCreateSchool && (
56 |         <div className="text-center">
57 |           <div className="flex items-center justify-center space-x-2 text-blue-600 mb-2">
58 |             <ArrowUp className="h-4 w-4" />
59 |             <p className="text-sm font-medium">Ready to get started?</p>
60 |           </div>
61 |           <p className="text-sm">Use the Create School button in the top right corner to begin.</p>
62 |         </div>
63 |       )}
64 |     </div>
65 |   )
66 | }
67 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/enhanced-school-card.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import type React from "react"
  4 | 
  5 | import Link from "next/link"
  6 | import { Card, CardContent, CardHeader } from "@/components/ui/card"
  7 | import { Badge } from "@/components/ui/badge"
  8 | import { Button } from "@/components/ui/button"
  9 | import { Building2, MapPin, MoreVertical, Settings, Eye, Globe, Mail, Phone, Calendar, LayoutDashboard, TrashIcon } from "lucide-react"
 10 | import {
 11 |   DropdownMenu,
 12 |   DropdownMenuContent,
 13 |   DropdownMenuItem,
 14 |   DropdownMenuSeparator,
 15 |   DropdownMenuTrigger,
 16 | } from "@/components/ui/dropdown-menu"
 17 | 
 18 | // Match your existing School type exactly
 19 | interface School {
 20 |   id: number
 21 |   name: string
 22 |   address: string | null
 23 |   email: string | null
 24 |   phone: string | null
 25 |   website: string | null
 26 |   logoUrl: string | null
 27 |   brandingJson: unknown
 28 |   createdAt: Date
 29 |   updatedAt: Date
 30 |   // Optional fields that might be added later
 31 |   studentCount?: number
 32 |   teacherCount?: number
 33 |   status?: "active" | "inactive"
 34 |   type?: string
 35 | }
 36 | 
 37 | interface EnhancedSchoolCardProps {
 38 |   school: School
 39 |   canEditSchool: boolean
 40 |   canDeleteSchool?: boolean
 41 | }
 42 | 
 43 | export function EnhancedSchoolCard({ school, canEditSchool, canDeleteSchool = false }: EnhancedSchoolCardProps) {
 44 |   const handleDashboardClick = (e: React.MouseEvent) => {
 45 |     e.preventDefault()
 46 |     window.location.href = `/dashboard/schools/${school.id}`
 47 |   }
 48 | 
 49 |   const handleSettingsClick = (e: React.MouseEvent) => {
 50 |     e.preventDefault()
 51 |     window.location.href = `/dashboard/schools/${school.id}/settings`
 52 |   }
 53 | 
 54 |   const cardContent = (
 55 |     <Card className="group relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:-translate-y-2 border-0 shadow-lg h-full">
 56 |       {/* Gradient overlay on hover */}
 57 |       <div className="absolute inset-0 bg-gradient-to-br from-orange-50/80 via-blue-50/50 to-purple-50/80 opacity-0 group-hover:opacity-100 transition-all duration-500" />
 58 | 
 59 |       {/* Top accent bar */}
 60 |       <div className="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
 61 | 
 62 |       <CardHeader className="relative pb-4 pt-6">
 63 |         <div className="flex items-start justify-between mb-4">
 64 |           <div className="flex items-center space-x-4 flex-1 min-w-0">
 65 |             {school.logoUrl ? (
 66 |               <div className="flex-shrink-0 p-2 rounded-xl bg-gradient-to-br from-blue-50 to-purple-50 border border-blue-100 group-hover:border-blue-200 transition-colors">
 67 |                 <img
 68 |                   src={school.logoUrl || "/placeholder.svg"}
 69 |                   alt={`${school.name} logo`}
 70 |                   className="h-10 w-10 object-contain"
 71 |                 />
 72 |               </div>
 73 |             ) : (
 74 |               <div className="flex-shrink-0 p-3 rounded-xl bg-gradient-to-br from-blue-100 to-purple-100 text-blue-600 group-hover:from-blue-200 group-hover:to-purple-200 transition-all duration-300">
 75 |                 <Building2 className="h-6 w-6" />
 76 |               </div>
 77 |             )}
 78 |             <div className="min-w-0 flex-1">
 79 |               <h3 className="text-xl font-bold group-hover:text-blue-700 transition-colors duration-300 line-clamp-2 leading-tight">
 80 |                 {school.name}
 81 |               </h3>
 82 |               <div className="flex items-center space-x-2 mt-2">
 83 |                 <Badge
 84 |                   variant={school.status === "active" ? "default" : "secondary"}
 85 |                   className="text-xs font-medium px-2 py-1"
 86 |                 >
 87 |                   {school.status || "Active"}
 88 |                 </Badge>
 89 |                 {school.type && (
 90 |                   <Badge variant="outline" className="text-xs px-2 py-1">
 91 |                     {school.type}
 92 |                   </Badge>
 93 |                 )}
 94 |               </div>
 95 |             </div>
 96 |           </div>
 97 | 
 98 |           {(canEditSchool || canDeleteSchool) && (
 99 |             <DropdownMenu>
100 |               <DropdownMenuTrigger asChild onClick={(e) => e.preventDefault()}>
101 |                 <Button
102 |                   variant="ghost"
103 |                   size="sm"
104 |                   className="flex-shrink-0 opacity-0 group-hover:opacity-100 transition-all duration-300 hover:bg-blue-50 h-8 w-8 p-0"
105 |                 >
106 |                   <MoreVertical className="h-4 w-4" />
107 |                 </Button>
108 |               </DropdownMenuTrigger>
109 |               <DropdownMenuContent align="end" className="w-48">
110 |                 <DropdownMenuItem onClick={handleDashboardClick} className="cursor-pointer">
111 |                   <LayoutDashboard className="h-4 w-4 mr-2" />
112 |                   Dashboard
113 |                 </DropdownMenuItem>
114 |                 {canEditSchool && (
115 |                   <DropdownMenuItem onClick={handleSettingsClick} className="cursor-pointer">
116 |                     <Settings className="h-4 w-4 mr-2" />
117 |                     Settings
118 |                   </DropdownMenuItem>
119 |                 )}
120 |                 {canDeleteSchool && (
121 |                   <>
122 |                     <DropdownMenuSeparator />
123 |                     <DropdownMenuItem className="text-red-600 cursor-pointer">
124 |                       <TrashIcon className="h-4 w-4 mr-2" />
125 |                       Delete School
126 |                     </DropdownMenuItem>
127 |                   </>
128 |                 )}
129 |               </DropdownMenuContent>
130 |             </DropdownMenu>
131 |           )}
132 |         </div>
133 |       </CardHeader>
134 | 
135 |       <CardContent className="relative pt-0 pb-6">
136 |         {/* Contact Information - Fixed height container */}
137 |         <div className="space-y-3 mb-6 min-h-[120px]">
138 |           {school.address && (
139 |             <div className="flex items-start space-x-3">
140 |               <MapPin className="h-4 w-4 mt-0.5 flex-shrink-0" />
141 |               <span className="text-sm line-clamp-2 leading-relaxed">{school.address}</span>
142 |             </div>
143 |           )}
144 | 
145 |           {school.email && (
146 |             <div className="flex items-center space-x-3">
147 |               <Mail className="h-4 w-4 flex-shrink-0" />
148 |               <span className="text-sm truncate">{school.email}</span>
149 |             </div>
150 |           )}
151 | 
152 |           {school.phone && (
153 |             <div className="flex items-center space-x-3">
154 |               <Phone className="h-4 w-4 flex-shrink-0" />
155 |               <span className="text-sm">{school.phone}</span>
156 |             </div>
157 |           )}
158 | 
159 |           {school.website && (
160 |             <div className="flex items-center space-x-3">
161 |               <Globe className="h-4 w-4 flex-shrink-0" />
162 |               <span className="text-sm truncate">{school.website}</span>
163 |             </div>
164 |           )}
165 |         </div>
166 | 
167 |         {/* Bottom section - Fixed position */}
168 |         <div className="border-t border-gray-100 pt-4">
169 |           <div className="flex items-center justify-between">
170 |             <div className="flex items-center space-x-2 text-xs">
171 |               <Calendar className="h-3 w-3" />
172 |               <span>Created {school.createdAt.toLocaleDateString()}</span>
173 |             </div>
174 | 
175 |             {canEditSchool && (
176 |               <Button
177 |                 size="sm"
178 |                 variant="ghost"
179 |                 className="opacity-0 group-hover:opacity-100 transition-all duration-300 text-blue-600 hover:text-blue-700 hover:bg-blue-50 px-3 py-1 text-xs font-medium"
180 |               >
181 |                 Manage →
182 |               </Button>
183 |             )}
184 |           </div>
185 | 
186 |           {!canEditSchool && <p className="text-xs mt-2">No permission to manage this school.</p>}
187 |         </div>
188 |       </CardContent>
189 |     </Card>
190 |   )
191 | 
192 |   // Use conditional rendering for navigation
193 |   if (canEditSchool) {
194 |     return <Link href={`/dashboard/schools/${school.id}`}>{cardContent}</Link>
195 |   }
196 | 
197 |   return cardContent
198 | }
199 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/forms/academic-information-form.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import { Badge } from "@/components/ui/badge"
  4 | import { Button } from "@/components/ui/button"
  5 | import { Card, CardContent } from "@/components/ui/card"
  6 | import { Input } from "@/components/ui/input"
  7 | import { Label } from "@/components/ui/label"
  8 | import { Switch } from "@/components/ui/switch"
  9 | import { BookOpen, Calendar, Plus, Trash2 } from "lucide-react"
 10 | import { useState } from "react"
 11 | import { AcademicTerm, AcademicYear, SchoolFormData } from "../types/school-forms"
 12 | 
 13 | interface AcademicInformationFormProps {
 14 |   data: SchoolFormData
 15 |   updateData: (updates: Partial<SchoolFormData>) => void
 16 |   errors: Record<string, string[] | undefined>
 17 | }
 18 | 
 19 | export function AcademicInformationForm({ data, updateData, errors }: AcademicInformationFormProps) {
 20 |   const [expandedYear, setExpandedYear] = useState<string | null>(null)
 21 | 
 22 |   const addAcademicYear = () => {
 23 |     const newYear: AcademicYear = {
 24 |       id: Date.now().toString(),
 25 |       yearName: "",
 26 |       startDate: "",
 27 |       endDate: "",
 28 |       isCurrent: false,
 29 |       terms: [],
 30 |     }
 31 |     updateData({ academicYears: [...data.academicYears, newYear] })
 32 |   }
 33 | 
 34 |   const updateAcademicYear = (yearId: string, updates: Partial<AcademicYear>) => {
 35 |     const updatedYears = data.academicYears.map((year) => (year.id === yearId ? { ...year, ...updates } : year))
 36 |     updateData({ academicYears: updatedYears })
 37 |   }
 38 | 
 39 |   const removeAcademicYear = (yearId: string) => {
 40 |     const updatedYears = data.academicYears.filter((year) => year.id !== yearId)
 41 |     updateData({ academicYears: updatedYears })
 42 |   }
 43 | 
 44 |   const addTerm = (yearId: string) => {
 45 |     const newTerm: AcademicTerm = {
 46 |       id: Date.now().toString(),
 47 |       termName: "",
 48 |       startDate: "",
 49 |       endDate: "",
 50 |       isCurrent: false,
 51 |     }
 52 |     const updatedYears = data.academicYears.map((year) =>
 53 |       year.id === yearId ? { ...year, terms: [...year.terms, newTerm] } : year,
 54 |     )
 55 |     updateData({ academicYears: updatedYears })
 56 |   }
 57 | 
 58 |   const updateTerm = (yearId: string, termId: string, updates: Partial<AcademicTerm>) => {
 59 |     const updatedYears = data.academicYears.map((year) =>
 60 |       year.id === yearId
 61 |         ? {
 62 |             ...year,
 63 |             terms: year.terms.map((term) => (term.id === termId ? { ...term, ...updates } : term)),
 64 |           }
 65 |         : year,
 66 |     )
 67 |     updateData({ academicYears: updatedYears })
 68 |   }
 69 | 
 70 |   const removeTerm = (yearId: string, termId: string) => {
 71 |     const updatedYears = data.academicYears.map((year) =>
 72 |       year.id === yearId ? { ...year, terms: year.terms.filter((term) => term.id !== termId) } : year,
 73 |     )
 74 |     updateData({ academicYears: updatedYears })
 75 |   }
 76 | 
 77 |   return (
 78 |     <div className="space-y-6">
 79 |       <div className="flex items-center justify-between">
 80 |         <div>
 81 |           <h3 className="text-lg font-semibold flex items-center gap-2">
 82 |             <Calendar className="h-5 w-5" />
 83 |             Academic Years
 84 |           </h3>
 85 |           <p className="text-sm text-gray-600">Define your schools academic calendar structure</p>
 86 |         </div>
 87 |         <Button onClick={addAcademicYear} className="flex items-center gap-2">
 88 |           <Plus className="h-4 w-4" />
 89 |           Add Academic Year
 90 |         </Button>
 91 |       </div>
 92 | 
 93 |       {data.academicYears.length === 0 && (
 94 |         <Card className="border-dashed">
 95 |           <CardContent className="flex flex-col items-center justify-center py-12">
 96 |             <Calendar className="h-12 w-12 text-gray-400 mb-4" />
 97 |             <p className="text-gray-500 text-center">
 98 |               No academic years defined yet.
 99 |               <br />
100 |               Click Add Academic Year to get started.
101 |             </p>
102 |           </CardContent>
103 |         </Card>
104 |       )}
105 | 
106 |       <div className="space-y-4">
107 |         {data.academicYears.map((year, yearIndex) => (
108 |           <div
109 |             key={year.id}
110 |             className="group border border-gray-200 rounded-lg overflow-hidden hover:border-gray-300 hover:shadow-sm transition-all"
111 |           >
112 |             <div className="p-4">
113 |               <div className="flex items-center justify-between mb-4">
114 |                 <div className="flex items-center gap-3">
115 |                   <h3 className="font-medium text-gray-900">{year.yearName || "Untitled Academic Year"}</h3>
116 |                   {year.isCurrent && (
117 |                     <Badge variant="default" className="bg-green-100 text-green-800 text-xs">
118 |                       Current
119 |                     </Badge>
120 |                   )}
121 |                 </div>
122 |                 <div className="flex items-center gap-2">
123 |                   <Button
124 |                     variant="ghost"
125 |                     size="sm"
126 |                     onClick={() => setExpandedYear(expandedYear === year.id ? null : year.id ?? null)}
127 |                     className="text-gray-500 hover:text-gray-700"
128 |                   >
129 |                     {expandedYear === year.id ? "Collapse" : "Expand"}
130 |                   </Button>
131 |                   <Button
132 |                     variant="ghost"
133 |                     size="sm"
134 |                     onClick={() => removeAcademicYear(year.id!)}
135 |                     className="text-red-600 hover:text-red-700 hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity"
136 |                   >
137 |                     <Trash2 className="h-4 w-4" />
138 |                   </Button>
139 |                 </div>
140 |               </div>
141 | 
142 |               <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
143 |                 <div>
144 |                   <Label htmlFor={`year-name-${year.id}`} className="text-sm font-medium text-gray-700">
145 |                     Year Name *
146 |                   </Label>
147 |                   <Input
148 |                     id={`year-name-${year.id}`}
149 |                     value={year.yearName}
150 |                     onChange={(e) => updateAcademicYear(year.id!, { yearName: e.target.value })}
151 |                     placeholder="2024-2025"
152 |                     className={`mt-1 h-9 ${errors[`academicYears[${yearIndex}].yearName`] ? "border-red-500" : ""}`}
153 |                   />
154 |                   {errors[`academicYears[${yearIndex}].yearName`] && <p className="mt-1 text-xs text-red-600">{errors[`academicYears[${yearIndex}].yearName`]?.[0]}</p>}
155 |                 </div>
156 |                 <div>
157 |                   <Label htmlFor={`start-date-${year.id}`} className="text-sm font-medium text-gray-700">
158 |                     Start Date *
159 |                   </Label>
160 |                   <Input
161 |                     id={`start-date-${year.id}`}
162 |                     type="date"
163 |                     value={year.startDate}
164 |                     onChange={(e) => updateAcademicYear(year.id!, { startDate: e.target.value })}
165 |                     className={`mt-1 h-9 ${errors[`academicYears[${yearIndex}].startDate`] ? "border-red-500" : ""}`}
166 |                   />
167 |                   {errors[`academicYears[${yearIndex}].startDate`] && <p className="mt-1 text-xs text-red-600">{errors[`academicYears[${yearIndex}].startDate`]?.[0]}</p>}
168 |                 </div>
169 |                 <div>
170 |                   <Label htmlFor={`end-date-${year.id}`} className="text-sm font-medium text-gray-700">
171 |                     End Date *
172 |                   </Label>
173 |                   <Input
174 |                     id={`end-date-${year.id}`}
175 |                     type="date"
176 |                     value={year.endDate}
177 |                     onChange={(e) => updateAcademicYear(year.id!, { endDate: e.target.value })}
178 |                     className={`mt-1 h-9 ${errors[`academicYears[${yearIndex}].endDate`] ? "border-red-500" : ""}`}
179 |                   />
180 |                   {errors[`academicYears[${yearIndex}].endDate`] && <p className="mt-1 text-xs text-red-600">{errors[`academicYears[${yearIndex}].endDate`]?.[0]}</p>}
181 |                 </div>
182 |                 <div className="flex items-end">
183 |                   <div className="flex items-center space-x-2">
184 |                     <Switch
185 |                       id={`current-year-${year.id}`}
186 |                       checked={year.isCurrent}
187 |                       onCheckedChange={(checked) => updateAcademicYear(year.id!, { isCurrent: checked })}
188 |                     />
189 |                     <Label htmlFor={`current-year-${year.id}`} className="text-sm text-gray-700">
190 |                       Current
191 |                     </Label>
192 |                   </div>
193 |                 </div>
194 |               </div>
195 | 
196 |               {expandedYear === year.id && (
197 |                 <div className="border-t mt-4 pt-4">
198 |                   <div className="flex items-center justify-between mb-3">
199 |                     <h4 className="text-sm font-medium text-gray-700 flex items-center gap-2">
200 |                       <BookOpen className="h-4 w-4" />
201 |                       Academic Terms
202 |                     </h4>
203 |                     <Button variant="outline" size="sm" onClick={() => addTerm(year.id!)} className="h-8 text-xs">
204 |                       <Plus className="h-3 w-3 mr-1" />
205 |                       Add Term
206 |                     </Button>
207 |                   </div>
208 | 
209 |                   {year.terms.length === 0 ? (
210 |                     <>
211 |                       <p className="text-sm text-gray-500 text-center py-3 rounded">
212 |                         No terms defined for this academic year
213 |                       </p>
214 |                       {errors[`academicYears[${yearIndex}].terms`] && <p className="mt-1 text-xs text-red-600 text-center">{errors[`academicYears[${yearIndex}].terms`]?.[0]}</p>}
215 |                     </>
216 |                   ) : (
217 |                     <div className="space-y-2">
218 |                       {year.terms.map((term, termIndex) => (
219 |                         <div key={term.id} className="p-3 rounded border">
220 |                           <div className="grid grid-cols-1 md:grid-cols-5 gap-3 items-end">
221 |                             <div>
222 |                               <Label htmlFor={`term-name-${term.id}`} className="text-xs text-gray-600">
223 |                                 Term Name
224 |                               </Label>
225 |                               <Input
226 |                                 id={`term-name-${term.id}`}
227 |                                 value={term.termName}
228 |                                 onChange={(e) => updateTerm(year.id!, term.id!, { termName: e.target.value })}
229 |                                 placeholder="Fall Semester"
230 |                                 className={`mt-1 h-8 text-sm ${errors[`academicYears[${yearIndex}].terms[${termIndex}].termName`] ? "border-red-500" : ""}`}
231 |                               />
232 |                               {errors[`academicYears[${yearIndex}].terms[${termIndex}].termName`] && <p className="mt-1 text-xs text-red-600">{errors[`academicYears[${yearIndex}].terms[${termIndex}].termName`]?.[0]}</p>}
233 |                             </div>
234 |                             <div>
235 |                               <Label htmlFor={`term-start-${term.id}`} className="text-xs text-gray-600">
236 |                                 Start Date
237 |                               </Label>
238 |                               <Input
239 |                                 id={`term-start-${term.id}`}
240 |                                 type="date"
241 |                                 value={term.startDate}
242 |                                 onChange={(e) => updateTerm(year.id!, term.id!, { startDate: e.target.value })}
243 |                                 className={`mt-1 h-8 text-sm ${errors[`academicYears[${yearIndex}].terms[${termIndex}].startDate`] ? "border-red-500" : ""}`}
244 |                               />
245 |                               {errors[`academicYears[${yearIndex}].terms[${termIndex}].startDate`] && <p className="mt-1 text-xs text-red-600">{errors[`academicYears[${yearIndex}].terms[${termIndex}].startDate`]?.[0]}</p>}
246 |                             </div>
247 |                             <div>
248 |                               <Label htmlFor={`term-end-${term.id}`} className="text-xs text-gray-600">
249 |                                 End Date
250 |                               </Label>
251 |                               <Input
252 |                                 id={`term-end-${term.id}`}
253 |                                 type="date"
254 |                                 value={term.endDate}
255 |                                 onChange={(e) => updateTerm(year.id!, term.id!, { endDate: e.target.value })}
256 |                                 className={`mt-1 h-8 text-sm ${errors[`academicYears[${yearIndex}].terms[${termIndex}].endDate`] ? "border-red-500" : ""}`}
257 |                               />
258 |                               {errors[`academicYears[${yearIndex}].terms[${termIndex}].endDate`] && <p className="mt-1 text-xs text-red-600">{errors[`academicYears[${yearIndex}].terms[${termIndex}].endDate`]?.[0]}</p>}
259 |                             </div>
260 |                             <div className="flex items-center space-x-2">
261 |                               <Switch
262 |                                 id={`current-term-${term.id}`}
263 |                                 checked={term.isCurrent}
264 |                                 onCheckedChange={(checked) => updateTerm(year.id!, term.id!, { isCurrent: checked })}
265 |                               />
266 |                               <Label htmlFor={`current-term-${term.id}`} className="text-xs text-gray-600">
267 |                                 Current
268 |                               </Label>
269 |                             </div>
270 |                             <div>
271 |                               <Button
272 |                                 variant="ghost"
273 |                                 size="sm"
274 |                                 onClick={() => removeTerm(year.id!, term.id!)}
275 |                                 className="text-red-600 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0"
276 |                               >
277 |                                 <Trash2 className="h-3 w-3" />
278 |                               </Button>
279 |                             </div>
280 |                           </div>
281 |                         </div>
282 |                       ))}
283 |                     </div>
284 |                   )}
285 |                 </div>
286 |               )}
287 |             </div>
288 |           </div>
289 |         ))}
290 |       </div>
291 |     </div>
292 |   )
293 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/forms/basic-information-form.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { Input } from "@/components/ui/input"
 4 | import { Label } from "@/components/ui/label"
 5 | import { Textarea } from "@/components/ui/textarea"
 6 | import { Building2, Mail, Phone, MapPin } from "lucide-react"
 7 | import { SchoolFormData } from "../types/school-forms"
 8 | 
 9 | interface BasicInformationFormProps {
10 |   data: Partial<SchoolFormData>
11 |   updateData: (updates: Partial<SchoolFormData>) => void
12 |   errors: Record<string, string[] | undefined>
13 | }
14 | 
15 | export function BasicInformationForm({ data, updateData, errors }: BasicInformationFormProps) {
16 |   return (
17 |     <div className="space-y-4">
18 |       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
19 |         <div className="md:col-span-2">
20 |           <Label htmlFor="name" className="flex items-center gap-2">
21 |             <Building2 className="h-4 w-4" />
22 |             School Name *
23 |           </Label>
24 |           <Input
25 |             id="name"
26 |             value={data.name || ''}
27 |             onChange={(e) => updateData({ name: e.target.value })}
28 |             placeholder="Enter your school name"
29 |             className={`mt-1 ${errors.name ? "border-red-500" : ""}`}
30 |           />
31 |           {errors.name && <p className="mt-1 text-sm text-red-600">{errors.name[0]}</p>}
32 |         </div>
33 | 
34 |         <div className="md:col-span-2">
35 |           <Label htmlFor="address" className="flex items-center gap-2">
36 |             <MapPin className="h-4 w-4" />
37 |             Address
38 |           </Label>
39 |           <Textarea
40 |             id="address"
41 |             value={data.address || ''}
42 |             onChange={(e) => updateData({ address: e.target.value })}
43 |             placeholder="Enter your school's full address"
44 |             className="mt-1 min-h-[80px]"
45 |           />
46 |         </div>
47 | 
48 |         <div>
49 |           <Label htmlFor="phone" className="flex items-center gap-2">
50 |             <Phone className="h-4 w-4" />
51 |             Phone Number
52 |           </Label>
53 |           <Input
54 |             id="phone"
55 |             value={data.phone || ''}
56 |             onChange={(e) => updateData({ phone: e.target.value })}
57 |             placeholder="+1 (555) 123-4567"
58 |             className="mt-1"
59 |           />
60 |         </div>
61 | 
62 |         <div>
63 |           <Label htmlFor="email" className="flex items-center gap-2">
64 |             <Mail className="h-4 w-4" />
65 |             Email Address *
66 |           </Label>
67 |           <Input
68 |             id="email"
69 |             type="email"
70 |             value={data.email || ''}
71 |             onChange={(e) => updateData({ email: e.target.value })}
72 |             placeholder="contact@yourschool.edu"
73 |             className={`mt-1 ${errors.email ? "border-red-500" : ""}`}
74 |           />
75 |           {errors.email && <p className="mt-1 text-sm text-red-600">{errors.email[0]}</p>}
76 |         </div>
77 |       </div>
78 |     </div>
79 |   );
80 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/forms/departments-form.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import { Button } from "@/components/ui/button"
  4 | import { Input } from "@/components/ui/input"
  5 | import { Label } from "@/components/ui/label"
  6 | import { Card, CardContent } from "@/components/ui/card"
  7 | import { Plus, Trash2, Building } from "lucide-react"
  8 | import { Department, SchoolFormData } from "../types/school-forms"
  9 | 
 10 | interface DepartmentsFormProps {
 11 |   data: SchoolFormData
 12 |   updateData: (updates: Partial<SchoolFormData>) => void
 13 |   errors: Record<string, string[] | undefined>
 14 | }
 15 | 
 16 | export function DepartmentsForm({ data, updateData, errors }: DepartmentsFormProps) {
 17 |   const addDepartment = () => {
 18 |     const newDepartment: Department = {
 19 |       id: Date.now().toString(),
 20 |       name: "",
 21 |       description: "",
 22 |     }
 23 |     updateData({ departments: [...data.departments, newDepartment] })
 24 |   }
 25 | 
 26 |   const updateDepartment = (deptId: string, updates: Partial<Department>) => {
 27 |     const updatedDepartments = data.departments.map((dept) => (dept.id === deptId ? { ...dept, ...updates } : dept))
 28 |     updateData({ departments: updatedDepartments })
 29 |   }
 30 | 
 31 |   const removeDepartment = (deptId: string) => {
 32 |     const updatedDepartments = data.departments.filter((dept) => dept.id !== deptId)
 33 |     updateData({ departments: updatedDepartments })
 34 |   }
 35 | 
 36 |   return (
 37 |     <div className="space-y-6">
 38 |       <div className="flex items-center justify-between">
 39 |         <div>
 40 |           <h3 className="text-lg font-semibold flex items-center gap-2">
 41 |             <Building className="h-5 w-5" />
 42 |             School Departments
 43 |           </h3>
 44 |           <p className="text-sm text-gray-600">Organize your school into departments or divisions</p>
 45 |         </div>
 46 |         <Button onClick={addDepartment} className="flex items-center gap-2">
 47 |           <Plus className="h-4 w-4" />
 48 |           Add Department
 49 |         </Button>
 50 |       </div>
 51 | 
 52 |       {data.departments.length === 0 && (
 53 |         <Card className="border-dashed">
 54 |           <CardContent className="flex flex-col items-center justify-center py-12">
 55 |             <Building className="h-12 w-12 text-gray-400 mb-4" />
 56 |             <p className="text-gray-500 text-center">
 57 |               No departments defined yet.
 58 |               <br />
 59 |               Click Add Department to create your first department.
 60 |             </p>
 61 |           </CardContent>
 62 |         </Card>
 63 |       )}
 64 | 
 65 |       <div className="space-y-3">
 66 |         {data.departments.map((department, index) => (
 67 |           <div
 68 |             key={department.id}
 69 |             className="group border border-gray-200 rounded-lg p-4 hover:border-gray-300 hover:shadow-sm transition-all"
 70 |           >
 71 |             <div className="flex items-start gap-4">
 72 |               <div className="flex-1 grid grid-cols-1 md:grid-cols-2 gap-4">
 73 |                 <div>
 74 |                   <Label htmlFor={`dept-name-${department.id}`} className="text-sm font-medium text-gray-700">
 75 |                     Department Name *
 76 |                   </Label>
 77 |                   <Input
 78 |                     id={`dept-name-${department.id}`}
 79 |                     value={department.name}
 80 |                     onChange={(e) => updateDepartment(department.id!, { name: e.target.value })}
 81 |                     placeholder="Mathematics Department"
 82 |                     className={`mt-1 h-9 ${errors[`departments[${index}].name`] ? "border-red-500" : ""}`}
 83 |                   />
 84 |                   {errors[`departments[${index}].name`] && <p className="mt-1 text-xs text-red-600">{errors[`departments[${index}].name`]?.[0]}</p>}
 85 |                 </div>
 86 |                 <div>
 87 |                   <Label htmlFor={`dept-desc-${department.id}`} className="text-sm font-medium text-gray-700">
 88 |                     Description
 89 |                   </Label>
 90 |                   <Input
 91 |                     id={`dept-desc-${department.id}`}
 92 |                     value={department.description || ''}
 93 |                     onChange={(e) => updateDepartment(department.id!, { description: e.target.value })}
 94 |                     placeholder="Brief description..."
 95 |                     className="mt-1 h-9"
 96 |                   />
 97 |                 </div>
 98 |               </div>
 99 |               <Button
100 |                 variant="ghost"
101 |                 size="sm"
102 |                 onClick={() => removeDepartment(department.id!)}
103 |                 className="text-red-600 hover:text-red-700 hover:bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity mt-6"
104 |               >
105 |                 <Trash2 className="h-4 w-4" />
106 |               </Button>
107 |             </div>
108 |           </div>
109 |         ))}
110 |       </div>
111 |     </div>
112 |   )
113 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/forms/grade-levels-form.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | import { Button } from "@/components/ui/button"
  3 | import { Input } from "@/components/ui/input"
  4 | import { Label } from "@/components/ui/label"
  5 | import { Textarea } from "@/components/ui/textarea"
  6 | import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
  7 | import { Badge } from "@/components/ui/badge"
  8 | import { Plus, Trash2, GraduationCap, ArrowUp, ArrowDown } from "lucide-react"
  9 | import { GradeLevel, SchoolFormData } from "../types/school-forms"
 10 | 
 11 | interface GradeLevelsFormProps {
 12 |   data: SchoolFormData
 13 |   updateData: (updates: Partial<SchoolFormData>) => void
 14 |   errors: Record<string, string[] | undefined>
 15 | }
 16 | 
 17 | export function GradeLevelsForm({ data, updateData, errors }: GradeLevelsFormProps) {
 18 |   const addGradeLevel = () => {
 19 |     const nextOrder = data.gradeLevels.length > 0 ? Math.max(...data.gradeLevels.map((g) => g.levelOrder), 0) + 1 : 1
 20 |     const newGrade: GradeLevel = {
 21 |       id: Date.now().toString(),
 22 |       name: "",
 23 |       levelOrder: nextOrder,
 24 |       description: "",
 25 |     }
 26 |     updateData({ gradeLevels: [...data.gradeLevels, newGrade] })
 27 |   }
 28 | 
 29 |   const updateGradeLevel = (gradeId: string, updates: Partial<GradeLevel>) => {
 30 |     const updatedGrades = data.gradeLevels.map((grade) => (grade.id === gradeId ? { ...grade, ...updates } : grade))
 31 |     updateData({ gradeLevels: updatedGrades })
 32 |   }
 33 | 
 34 |   const removeGradeLevel = (gradeId: string) => {
 35 |     const updatedGrades = data.gradeLevels.filter((grade) => grade.id !== gradeId)
 36 |     const reorderedGrades = updatedGrades
 37 |       .sort((a, b) => a.levelOrder - b.levelOrder)
 38 |       .map((grade, index) => ({ ...grade, levelOrder: index + 1 }))
 39 |     updateData({ gradeLevels: reorderedGrades })
 40 |   }
 41 | 
 42 |   const moveGrade = (gradeId: string, direction: "up" | "down") => {
 43 |     const sortedGrades = [...data.gradeLevels].sort((a, b) => a.levelOrder - b.levelOrder)
 44 |     const currentIndex = sortedGrades.findIndex((g) => g.id === gradeId)
 45 | 
 46 |     if (
 47 |       (direction === "up" && currentIndex === 0) ||
 48 |       (direction === "down" && currentIndex === sortedGrades.length - 1)
 49 |     ) {
 50 |       return
 51 |     }
 52 | 
 53 |     const newIndex = direction === "up" ? currentIndex - 1 : currentIndex + 1
 54 |     const updatedGrades = [...sortedGrades]
 55 |     ;[updatedGrades[currentIndex], updatedGrades[newIndex]] = [updatedGrades[newIndex], updatedGrades[currentIndex]]
 56 |     const reorderedGrades = updatedGrades.map((grade, index) => ({
 57 |       ...grade,
 58 |       levelOrder: index + 1,
 59 |     }))
 60 |     updateData({ gradeLevels: reorderedGrades })
 61 |   }
 62 | 
 63 |   const sortedGrades = [...data.gradeLevels].sort((a, b) => a.levelOrder - b.levelOrder)
 64 | 
 65 |   return (
 66 |     <div className="space-y-6">
 67 |       <div className="flex items-center justify-between">
 68 |         <div>
 69 |           <h3 className="text-lg font-semibold flex items-center gap-2">
 70 |             <GraduationCap className="h-5 w-5" />
 71 |             Grade Levels
 72 |           </h3>
 73 |           <p className="text-sm text-gray-600">Define the grade levels or classes in your school</p>
 74 |         </div>
 75 |         <Button onClick={addGradeLevel} className="flex items-center gap-2">
 76 |           <Plus className="h-4 w-4" />
 77 |           Add Grade Level
 78 |         </Button>
 79 |       </div>
 80 | 
 81 |       {data.gradeLevels.length === 0 && (
 82 |         <Card className="border-dashed">
 83 |           <CardContent className="flex flex-col items-center justify-center py-12">
 84 |             <GraduationCap className="h-12 w-12 text-gray-400 mb-4" />
 85 |             <p className="text-gray-500 text-center">
 86 |               No grade levels defined yet.
 87 |               <br />
 88 |               Click Add Grade Level to create your first grade.
 89 |             </p>
 90 |           </CardContent>
 91 |         </Card>
 92 |       )}
 93 | 
 94 |       <div className="space-y-4">
 95 |         {sortedGrades.map((grade, index) => (
 96 |           <Card key={grade.id}>
 97 |             <CardHeader className="pb-3">
 98 |               <div className="flex items-center justify-between">
 99 |                 <div className="flex items-center gap-3">
100 |                   <Badge variant="outline" className="font-mono">
101 |                     #{grade.levelOrder}
102 |                   </Badge>
103 |                   <CardTitle className="text-base">{grade.name || "Untitled Grade Level"}</CardTitle>
104 |                 </div>
105 |                 <div className="flex items-center gap-2">
106 |                   <Button variant="ghost" size="sm" onClick={() => moveGrade(grade.id!, "up")} disabled={index === 0}>
107 |                     <ArrowUp className="h-4 w-4" />
108 |                   </Button>
109 |                   <Button
110 |                     variant="ghost"
111 |                     size="sm"
112 |                     onClick={() => moveGrade(grade.id!, "down")}
113 |                     disabled={index === sortedGrades.length - 1}
114 |                   >
115 |                     <ArrowDown className="h-4 w-4" />
116 |                   </Button>
117 |                   <Button
118 |                     variant="ghost"
119 |                     size="sm"
120 |                     onClick={() => removeGradeLevel(grade.id!)}
121 |                     className="text-red-600 hover:text-red-700"
122 |                   >
123 |                     <Trash2 className="h-4 w-4" />
124 |                   </Button>
125 |                 </div>
126 |               </div>
127 |             </CardHeader>
128 |             <CardContent className="space-y-4">
129 |               <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
130 |                 <div>
131 |                   <Label htmlFor={`grade-name-${grade.id}`}>Grade Name *</Label>
132 |                   <Input
133 |                     id={`grade-name-${grade.id}`}
134 |                     value={grade.name}
135 |                     onChange={(e) => updateGradeLevel(grade.id!, { name: e.target.value })}
136 |                     placeholder="Grade 1, Kindergarten, Senior Year..."
137 |                     className={`mt-1 ${errors[`gradeLevels[${index}].name`] ? "border-red-500" : ""}`}
138 |                   />
139 |                   {errors[`gradeLevels[${index}].name`] && <p className="mt-1 text-xs text-red-600">{errors[`gradeLevels[${index}].name`]?.[0]}</p>}
140 |                 </div>
141 |                 <div>
142 |                   <Label htmlFor={`grade-order-${grade.id}`}>Level Order</Label>
143 |                   <Input
144 |                     id={`grade-order-${grade.id}`}
145 |                     type="number"
146 |                     value={grade.levelOrder}
147 |                     onChange={(e) => updateGradeLevel(grade.id!, { levelOrder: Number.parseInt(e.target.value) || 1 })}
148 |                     className={`mt-1 ${errors[`gradeLevels[${index}].levelOrder`] ? "border-red-500" : ""}`}
149 |                     min="1"
150 |                   />
151 |                   {errors[`gradeLevels[${index}].levelOrder`] && <p className="mt-1 text-xs text-red-600">{errors[`gradeLevels[${index}].levelOrder`]?.[0]}</p>}
152 |                 </div>
153 |               </div>
154 |               <div>
155 |                 <Label htmlFor={`grade-desc-${grade.id}`}>Description</Label>
156 |                 <Textarea
157 |                   id={`grade-desc-${grade.id}`}
158 |                   value={grade.description || ''}
159 |                   onChange={(e) => updateGradeLevel(grade.id!, { description: e.target.value })}
160 |                   placeholder="Brief description of this grade level"
161 |                   className="mt-1 min-h-[60px]"
162 |                 />
163 |               </div>
164 |             </CardContent>
165 |           </Card>
166 |         ))}
167 |       </div>
168 |     </div>
169 |   )
170 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/school-card-skeleton.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { Card, CardContent, CardHeader } from "@/components/ui/card"
 4 | import { Skeleton } from "@/components/ui/skeleton"
 5 | 
 6 | export function SchoolCardSkeleton() {
 7 |   return (
 8 |     <Card className="group relative overflow-hidden">
 9 |       <div className="absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/10 to-transparent" />
10 |       <CardHeader className="pb-3">
11 |         <Skeleton className="h-6 w-3/4 mb-2" />
12 |         <Skeleton className="h-4 w-full" />
13 |         <Skeleton className="h-4 w-2/3" />
14 |       </CardHeader>
15 |       <CardContent>
16 |         <div className="flex items-center justify-between">
17 |           <div className="flex items-center space-x-2">
18 |             <Skeleton className="h-4 w-4 rounded-full" />
19 |             <Skeleton className="h-4 w-16" />
20 |           </div>
21 |           <Skeleton className="h-8 w-20 rounded-md" />
22 |         </div>
23 |       </CardContent>
24 |     </Card>
25 |   )
26 | }
27 | 
28 | export function SchoolGridSkeleton() {
29 |   return (
30 |     <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
31 |       {Array.from({ length: 8 }).map((_, i) => (
32 |         <SchoolCardSkeleton key={i} />
33 |       ))}
34 |     </div>
35 |   )
36 | }
37 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/school-card.tsx:
--------------------------------------------------------------------------------
  1 | "use client";
  2 | 
  3 | import React from 'react';
  4 | import { useRouter } from "next/navigation";
  5 | import { toast } from "sonner";
  6 | import { Card, CardContent } from '@/components/ui/card';
  7 | import { School } from '../columns';
  8 | 
  9 | 
 10 | interface SchoolCardProps {
 11 |   school: School;
 12 |   canEditSchool: boolean;
 13 | }
 14 | 
 15 | export function SchoolCard({ school, canEditSchool }: SchoolCardProps) {
 16 |   const router = useRouter();
 17 | 
 18 |   const handleCardClick = () => {
 19 |     if (!canEditSchool) {
 20 |       toast.error("You do not have permission to access this school.");
 21 |       return;
 22 |     }
 23 |     router.push(`/dashboard/schools/${school.id}`);
 24 |   };
 25 | 
 26 |   return (
 27 |     <Card 
 28 |       className="w-[80%] mx-auto cursor-pointer transition-all duration-300 hover:shadow-xl hover:shadow-slate-200/50 hover:-translate-y-1 border-0 bg-white/80 backdrop-blur-sm"
 29 |       onClick={handleCardClick}
 30 |     >
 31 |       <CardContent className="p-8">
 32 |         <div className="flex items-center justify-between">
 33 |           {/* Left Section - Main Info */}
 34 |           <div className="flex-1 space-y-4">
 35 |             <div className="flex items-center gap-4">
 36 |               <div className="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg">
 37 |                 <svg className="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 38 |                   <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
 39 |                 </svg>
 40 |               </div>
 41 |               
 42 |               <div className="space-y-2">
 43 |                 <div className="flex items-center gap-3">
 44 |                   <h3 className="text-2xl font-bold text-slate-900 tracking-tight">
 45 |                     {school.name}
 46 |                   </h3>
 47 | 
 48 |                 </div>
 49 |                 
 50 |                 {school.name && (
 51 |                   <p className="text-slate-600 text-sm leading-relaxed max-w-2xl">
 52 |                     {school.address}
 53 |                   </p>
 54 |                 )}
 55 |               </div>
 56 |             </div>
 57 | 
 58 |             {/* Contact Information */}
 59 |             <div className="flex flex-wrap gap-6 text-sm text-slate-500">
 60 |               {school.email && (
 61 |                 <div className="flex items-center gap-2">
 62 |                   <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 63 |                     <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
 64 |                   </svg>
 65 |                   <span>{school.email}</span>
 66 |                 </div>
 67 |               )}
 68 |               
 69 |               {school.phone && (
 70 |                 <div className="flex items-center gap-2">
 71 |                   <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 72 |                     <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
 73 |                   </svg>
 74 |                   <span>{school.phone}</span>
 75 |                 </div>
 76 |               )}
 77 |               
 78 |               {school.address && (
 79 |                 <div className="flex items-center gap-2">
 80 |                   <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
 81 |                     <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
 82 |                     <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
 83 |                   </svg>
 84 |                   <span className="truncate max-w-xs">{school.address}</span>
 85 |                 </div>
 86 |               )}
 87 |             </div>
 88 |           </div>
 89 | 
 90 |           {/* Right Section - Stats */}
 91 |           <div className="flex flex-col items-end space-y-4">
 92 |             <div className="flex gap-6">
 93 |               <p>School Student count</p>
 94 |             </div>
 95 | 
 96 |             {/* Action Indicator */}
 97 |             <div className="flex items-center gap-2 text-slate-400 group-hover:text-slate-600 transition-colors">
 98 |               <span className="text-xs font-medium">Click to manage</span>
 99 |               <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
100 |                 <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
101 |               </svg>
102 |             </div>
103 |           </div>
104 |         </div>
105 |       </CardContent>
106 |     </Card>
107 |   );
108 | }
109 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/school-setup.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import { useState, useEffect } from "react";
  4 | import { useRouter, useSearchParams } from "next/navigation";
  5 | import { SchoolFormData } from "./types/school-forms";
  6 | import {
  7 |     upsertAcademicYears,
  8 |     upsertDepartments,
  9 |     upsertGradeLevels
 10 | } from "@/lib/actions/schools";
 11 | import { toast } from "sonner";
 12 | import { Button } from "@/components/ui/button";
 13 | import { Progress } from "@/components/ui/progress";
 14 | import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
 15 | 
 16 | import { AcademicInformationForm } from "./forms/academic-information-form";
 17 | import { DepartmentsForm } from "./forms/departments-form";
 18 | import { GradeLevelsForm } from "./forms/grade-levels-form";
 19 | import { Check, ChevronLeft, School, GraduationCap, Building, ListOrdered } from "lucide-react";
 20 | 
 21 | interface SchoolSetupProps {
 22 |     initialData: SchoolFormData;
 23 | }
 24 | 
 25 | const steps = [
 26 |     { id: 1, title: "Basic Information", icon: School },
 27 |     { id: 2, title: "Academic Information", icon: GraduationCap },
 28 |     { id: 3, title: "Departments", icon: Building },
 29 |     { id: 4, title: "Grade Levels", icon: ListOrdered },
 30 | ];
 31 | 
 32 | const totalSteps = steps.length;
 33 | 
 34 | type ActionResult = {
 35 |     success: boolean;
 36 |     message: string;
 37 |     errors?: Record<string, string[] | undefined>;
 38 | };
 39 | 
 40 | export function SchoolSetup({ initialData }: SchoolSetupProps) {
 41 |     const router = useRouter();
 42 |     const searchParams = useSearchParams();
 43 | 
 44 |     const [formData, setFormData] = useState<SchoolFormData>(initialData);
 45 |     const [currentStep, setCurrentStep] = useState(1);
 46 |     const [isSubmitting, setIsSubmitting] = useState(false);
 47 |     // FIX: Provide a specific type for Zod field errors
 48 |     const [errors, setErrors] = useState<Record<string, string[] | undefined>>({});
 49 | 
 50 |     useEffect(() => {
 51 |         const step = searchParams.get("step");
 52 |         const initialStep = initialData.id ? (step ? Number(step) : 2) : 1;
 53 |         setCurrentStep(initialStep);
 54 |     }, [searchParams, initialData.id]);
 55 | 
 56 |     const updateData = (updates: Partial<SchoolFormData>) => {
 57 |         setFormData((prev) => ({ ...prev, ...updates }));
 58 |         const newErrors = { ...errors };
 59 |         Object.keys(updates).forEach(key => delete newErrors[key]);
 60 |         setErrors(newErrors);
 61 |     };
 62 | 
 63 |     const handleNext = async () => {
 64 |         setIsSubmitting(true);
 65 |         setErrors({});
 66 |         // FIX: Use the specific ActionResult type
 67 |         let result: ActionResult | undefined;
 68 | 
 69 |         switch (currentStep) {
 70 |             case 2:
 71 |                 result = await upsertAcademicYears(formData.id!, formData.academicYears);
 72 |                 if (result.success) goToStep(3);
 73 |                 break;
 74 |             case 3:
 75 |                 result = await upsertDepartments(formData.id!, formData.departments);
 76 |                 if (result.success) goToStep(4);
 77 |                 break;
 78 |             case 4:
 79 |                 result = await upsertGradeLevels(formData.id!, formData.gradeLevels);
 80 |                 if (result.success) {
 81 |                     toast.success("School setup complete!");
 82 |                     router.push('/dashboard/schools');
 83 |                 }
 84 |                 break;
 85 |             default:
 86 |                 goToStep(currentStep + 1);
 87 |         }
 88 | 
 89 |         if (result && !result.success) {
 90 |             toast.error(result.message);
 91 |             if(result.errors) setErrors(result.errors);
 92 |         }
 93 |         setIsSubmitting(false);
 94 |     };
 95 | 
 96 |     const goToStep = (step: number) => {
 97 |         setCurrentStep(step);
 98 |         router.push(`?step=${step}`, { scroll: false });
 99 |     };
100 | 
101 |     const handlePrevious = () => {
102 |         if (currentStep > 2) {
103 |             goToStep(currentStep - 1);
104 |         } else {
105 |             router.push('/dashboard/schools');
106 |         }
107 |     }
108 | 
109 |     const renderCurrentForm = () => {
110 |         const commonProps = { data: formData, updateData, errors };
111 |         switch (currentStep) {
112 |             case 2: return <AcademicInformationForm {...commonProps} />;
113 |             case 3: return <DepartmentsForm {...commonProps} />;
114 |             case 4: return <GradeLevelsForm {...commonProps} />;
115 |             default: return <AcademicInformationForm {...commonProps} />;
116 |         }
117 |     };
118 | 
119 |     const progress = ((currentStep - 1) / totalSteps) * 100;
120 |     const currentStepData = steps[currentStep - 1];
121 | 
122 |     return (
123 |         <div className="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8">
124 |             <div>
125 |                 <h1 className="text-3xl font-bold tracking-tight text-gray-900">Onboard {initialData.name}</h1>
126 |                 <p className="mt-2 text-lg text-gray-600">Follow the steps to complete the setup for your new school.</p>
127 |             </div>
128 | 
129 |             <div className="space-y-4">
130 |                 <Progress value={progress} className="h-2" />
131 |                 <div className="flex justify-between">
132 |                     {steps.map(step => (
133 |                         <div key={step.id} className="text-center">
134 |                             <div className={`mx-auto h-8 w-8 rounded-full flex items-center justify-center border-2 ${currentStep >= step.id ? 'bg-blue-600 border-blue-600 text-white' : 'bg-white border-gray-300 text-gray-500'}`}>
135 |                                 {currentStep > step.id ? <Check className="h-5 w-5"/> : <step.icon className="h-5 w-5"/>}
136 |                             </div>
137 |                             <p className={`mt-2 text-sm font-medium ${currentStep >= step.id ? 'text-blue-600' : 'text-gray-500'}`}>{step.title}</p>
138 |                         </div>
139 |                     ))}
140 |                 </div>
141 |             </div>
142 | 
143 |             <Card>
144 |                 <CardHeader>
145 |                     <CardTitle>{currentStepData.title}</CardTitle>
146 |                     <CardDescription>
147 |                         Configure the {currentStepData.title.toLowerCase()} for {formData.name}.
148 |                     </CardDescription>
149 |                 </CardHeader>
150 |                 <CardContent>
151 |                     {renderCurrentForm()}
152 |                 </CardContent>
153 |             </Card>
154 | 
155 |             <div className="flex justify-between items-center">
156 |                 <Button variant="outline" onClick={handlePrevious}>
157 |                     <ChevronLeft className="h-4 w-4 mr-2"/>
158 |                     {currentStep === 2 ? "Back to Schools" : "Previous"}
159 |                 </Button>
160 |                 <Button onClick={handleNext} disabled={isSubmitting}>
161 |                     {isSubmitting ? "Saving..." : (currentStep === totalSteps ? "Finish Setup" : "Save and Continue")}
162 |                 </Button>
163 |             </div>
164 |         </div>
165 |     );
166 | }
167 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/_components/types/school-forms.ts:
--------------------------------------------------------------------------------
 1 | export interface AcademicTerm {
 2 |   id?: string;
 3 |   termName: string;
 4 |   startDate: string;
 5 |   endDate: string;
 6 |   isCurrent: boolean;
 7 | }
 8 | 
 9 | export interface AcademicYear {
10 |   id?: string;
11 |   yearName: string;
12 |   startDate: string;
13 |   endDate: string;
14 |   isCurrent: boolean;
15 |   terms: AcademicTerm[];
16 | }
17 | 
18 | export interface Department {
19 |   id?: string;
20 |   name: string;
21 |   description?: string;
22 | }
23 | 
24 | export interface GradeLevel {
25 |   id?: string;
26 |   name: string;
27 |   levelOrder: number;
28 |   description?: string;
29 | }
30 | 
31 | export interface BrandingConfig {
32 |   logo?: {
33 |     url?: string | null;
34 |     position?: "left" | "center" | "right";
35 |     size?: "small" | "medium" | "large";
36 |   } | null;
37 |   colors: {
38 |     primary: string;
39 |     secondary: string;
40 |     accent: string;
41 |     background: string;
42 |     text: string;
43 |   };
44 |   typography: {
45 |     headingFont: string;
46 |     bodyFont: string;
47 |     fontSize: "small" | "medium" | "large";
48 |   };
49 |   theme: {
50 |     mode: "light" | "dark" | "auto";
51 |     borderRadius: "none" | "small" | "medium" | "large";
52 |     shadows: boolean;
53 |   };
54 |   layout: {
55 |     sidebarPosition: "left" | "right";
56 |     headerStyle: "minimal" | "standard" | "prominent";
57 |     cardStyle: "flat" | "elevated" | "outlined";
58 |   };
59 | }
60 | 
61 | export interface SchoolFormData {
62 |   id?: number;
63 |   name: string;
64 |   address?: string | null;
65 |   phone?: string | null;
66 |   email: string;
67 |   academicYears: AcademicYear[];
68 |   departments: Department[];
69 |   gradeLevels: GradeLevel[];
70 |   website?: string | null;
71 |   logoUrl?: string | null;
72 |   branding?: BrandingConfig;
73 | }
74 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/columns.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { ColumnDef } from "@tanstack/react-table"
 4 | import { MoreHorizontal } from "lucide-react"
 5 | import { Button } from "@/components/ui/button"
 6 | import {
 7 |   DropdownMenu,
 8 |   DropdownMenuContent,
 9 |   DropdownMenuItem,
10 |   DropdownMenuLabel,
11 |   DropdownMenuSeparator,
12 |   DropdownMenuTrigger,
13 | } from "@/components/ui/dropdown-menu"
14 | import { toast } from "sonner"
15 | 
16 | import type { schools } from "@/lib/db/schema/tenant"; // Import the schools schema for typing
17 | import { deleteSchoolAction } from "@/lib/actions/schools"
18 | 
19 | export type School = typeof schools.$inferSelect; // Type for a school record
20 | 
21 | export const getColumns = (
22 |     onEdit: (school: School) => void,
23 |     canEditSchool: boolean,
24 |     canDeleteSchool: boolean
25 | ): ColumnDef<School>[] => [
26 |     {
27 |         accessorKey: "name",
28 |         header: "Name",
29 |     },
30 |     {
31 |         accessorKey: "email",
32 |         header: "Email",
33 |     },
34 |     {
35 |         accessorKey: "phone",
36 |         header: "Phone",
37 |     },
38 |     {
39 |         accessorKey: "website",
40 |         header: "Website",
41 |         cell: ({ row }) => {
42 |             const school = row.original;
43 |             return school.website ? (
44 |                 <a href={school.website} target="_blank" rel="noopener noreferrer" className="text-blue-500 hover:underline">
45 |                     {school.website}
46 |                 </a>
47 |             ) : "-";
48 |         },
49 |     },
50 |     {
51 |         id: "actions",
52 |         cell: ({ row }) => {
53 |             const school = row.original;
54 |             
55 |             const handleDelete = async () => {
56 |                 if (window.confirm(`Are you sure you want to delete school "${school.name}"?`)) {
57 |                   const result = await deleteSchoolAction(school.id);
58 |                   if (result.success) {
59 |                     toast.success(result.message);
60 |                   } else {
61 |                     toast.error(result.message);
62 |                   }
63 |                 }
64 |             };
65 | 
66 |             if (!canEditSchool && !canDeleteSchool) {
67 |                 return null;
68 |             }
69 | 
70 |             return (
71 |                 <DropdownMenu>
72 |                     <DropdownMenuTrigger asChild>
73 |                         <Button variant="ghost" className="h-8 w-8 p-0">
74 |                             <span className="sr-only">Open menu</span>
75 |                             <MoreHorizontal className="h-4 w-4" />
76 |                         </Button>
77 |                     </DropdownMenuTrigger>
78 |                     <DropdownMenuContent align="end">
79 |                         <DropdownMenuLabel>Actions</DropdownMenuLabel>
80 |                         
81 |                         {canEditSchool && (
82 |                             <DropdownMenuItem onClick={() => onEdit(school)}>
83 |                                 Edit School
84 |                             </DropdownMenuItem>
85 |                         )}
86 |                         {canEditSchool && canDeleteSchool && <DropdownMenuSeparator />}
87 |                         {canDeleteSchool && (
88 |                             <DropdownMenuItem onClick={handleDelete} className="text-red-500 focus:text-red-500">
89 |                                 Delete School
90 |                             </DropdownMenuItem>
91 |                         )}
92 |                     </DropdownMenuContent>
93 |                 </DropdownMenu>
94 |             );
95 |         },
96 |     },
97 | ];
98 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/data-table.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import { useRouter } from "next/navigation";
  5 | import {
  6 |     flexRender,
  7 |     getCoreRowModel,
  8 |     useReactTable,
  9 |     getPaginationRowModel,
 10 |     getSortedRowModel,
 11 |     getFilteredRowModel,
 12 |     SortingState,
 13 |     ColumnFiltersState,
 14 | } from "@tanstack/react-table"
 15 | 
 16 | import {
 17 |     Table,
 18 |     TableBody,
 19 |     TableCell,
 20 |     TableHead,
 21 |     TableHeader,
 22 |     TableRow,
 23 | } from "@/components/ui/table"
 24 | import { Button } from "@/components/ui/button"
 25 | import { Input } from "@/components/ui/input"
 26 | import { useTenant } from "@/components/tenant-provider";
 27 | import { toast } from "sonner";
 28 | import { getColumns, School } from "./columns" // Keep using the DB type here
 29 | import { SchoolFormDialog } from "./school-form-dialog"
 30 | 
 31 | interface SchoolsDataTableProps {
 32 |     data: School[]
 33 | }
 34 | 
 35 | export function SchoolsDataTable({ data }: SchoolsDataTableProps) {
 36 |     const router = useRouter();
 37 |     const [isCreateDialogOpen, setIsCreateDialogOpen] = React.useState(false);
 38 |     const [sorting, setSorting] = React.useState<SortingState>([]);
 39 |     const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([]);
 40 | 
 41 |     const { user } = useTenant();
 42 |  
 43 |     const canCreateSchool = user.permissions.includes('school:create');
 44 |     const canEditSchool = user.permissions.includes('school:update');
 45 |     const canDeleteSchool = user.permissions.includes('school:delete');
 46 | 
 47 |     const handleDashboardView = React.useCallback((school: School) => {
 48 |         if (!canEditSchool) {
 49 |             toast.error("You do not have permission to edit schools.");
 50 |             return;
 51 |         }
 52 |         // Navigate directly to the edit page
 53 |         router.push(`/dashboard/schools/${school.id}`);
 54 |     }, [canEditSchool, router]);
 55 | 
 56 | 
 57 |     const handleEdit = React.useCallback((school: School) => {
 58 |         if (!canEditSchool) {
 59 |             toast.error("You do not have permission to edit schools.");
 60 |             return;
 61 |         }
 62 |         // Navigate directly to the edit page
 63 |         router.push(`/dashboard/schools/${school.id}/settings`);
 64 |     }, [canEditSchool, router]);
 65 | 
 66 |     const handleCreate = React.useCallback(() => {
 67 |         if (!canCreateSchool) {
 68 |             toast.error("You do not have permission to create schools.");
 69 |             return;
 70 |         }
 71 |         // Open the new, simple creation dialog
 72 |         setIsCreateDialogOpen(true);
 73 |     }, [canCreateSchool]);
 74 | 
 75 |     const columns = React.useMemo(() => getColumns(handleEdit, canEditSchool, canDeleteSchool), [handleEdit, canEditSchool, canDeleteSchool]);
 76 | 
 77 |     const table = useReactTable({
 78 |         data,
 79 |         columns,
 80 |         getCoreRowModel: getCoreRowModel(),
 81 |         getPaginationRowModel: getPaginationRowModel(),
 82 |         onSortingChange: setSorting,
 83 |         getSortedRowModel: getSortedRowModel(),
 84 |         onColumnFiltersChange: setColumnFilters,
 85 |         getFilteredRowModel: getFilteredRowModel(),
 86 |         state: {
 87 |             sorting,
 88 |             columnFilters,
 89 |         },
 90 |     });
 91 | 
 92 |     return (
 93 |         <div>
 94 |             <div className="flex items-center justify-between py-4">
 95 |                 <Input
 96 |                     placeholder="Filter by name..."
 97 |                     value={(table.getColumn("name")?.getFilterValue() as string) ?? ""}
 98 |                     onChange={(event) =>
 99 |                         table.getColumn("name")?.setFilterValue(event.target.value)
100 |                     }
101 |                     className="max-w-sm"
102 |                 />
103 |                 {canCreateSchool && <Button onClick={handleCreate}>Create School</Button>}
104 |             </div>
105 |             <div className="rounded-md border">
106 |                 <Table>
107 |                     <TableHeader>
108 |                         {table.getHeaderGroups().map((headerGroup) => (
109 |                             <TableRow key={headerGroup.id}>
110 |                                 {headerGroup.headers.map((header) => (
111 |                                     <TableHead key={header.id}>
112 |                                         {flexRender(header.column.columnDef.header, header.getContext())}
113 |                                     </TableHead>
114 |                                 ))}
115 |                             </TableRow>
116 |                         ))}
117 |                     </TableHeader>
118 |                     <TableBody>
119 |                         {table.getRowModel().rows?.length ? (
120 |                             table.getRowModel().rows.map((row) => (
121 |                                 <TableRow key={row.id}>
122 |                                     {row.getVisibleCells().map((cell) => (
123 |                                         <TableCell key={cell.id}>
124 |                                             {flexRender(cell.column.columnDef.cell, cell.getContext())}
125 |                                         </TableCell>
126 |                                     ))}
127 |                                 </TableRow>
128 |                             ))
129 |                         ) : (
130 |                             <TableRow>
131 |                                 <TableCell colSpan={columns.length} className="h-24 text-center">
132 |                                     No schools found.
133 |                                 </TableCell>
134 |                             </TableRow>
135 |                         )}
136 |                     </TableBody>
137 |                 </Table>
138 |             </div>
139 |             <div className="flex items-center justify-end space-x-2 py-4">
140 |                 <Button
141 |                     variant="outline"
142 |                     size="sm"
143 |                     onClick={() => table.previousPage()}
144 |                     disabled={!table.getCanPreviousPage()}
145 |                 >
146 |                     Previous
147 |                 </Button>
148 |                 <Button
149 |                     variant="outline"
150 |                     size="sm"
151 |                     onClick={() => table.nextPage()}
152 |                     disabled={!table.getCanNextPage()}
153 |                 >
154 |                     Next
155 |                 </Button>
156 |             </div>
157 |             {canCreateSchool && (
158 |                 <SchoolFormDialog
159 |                     isOpen={isCreateDialogOpen}
160 |                     setIsOpen={setIsCreateDialogOpen}
161 |                 />
162 |             )}
163 |         </div>
164 |     );
165 | }
166 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/page.tsx:
--------------------------------------------------------------------------------
  1 | import Link from 'next/link';
  2 | import React, { Suspense } from 'react';
  3 | import { Card, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
  4 | import { getSchools } from '@/lib/actions/schools';
  5 | 
  6 | 
  7 | import { getSession } from '@/lib/session';
  8 | import { SchoolsClientActions } from './SchoolsClientActions';
  9 | import { School } from './columns';
 10 | import { SchoolGridSkeleton } from './_components/school-card-skeleton';
 11 | import { EnhancedSchoolCard } from './_components/enhanced-school-card';
 12 | import { EmptyState } from './_components/empty-state';
 13 | import { Badge, Building2, Filter, Grid3X3, List, Search, TrendingUp } from 'lucide-react';
 14 | import { Input } from '@/components/ui/input';
 15 | import { Button } from '@/components/ui/button';
 16 | 
 17 | export default async function AllSchoolsPage() {
 18 |   // Get session server-side instead of using useTenant()
 19 |   const session = await getSession();
 20 |   
 21 |   // Check permissions server-side
 22 |   const canCreateSchool = session.permissions.includes('school:create');
 23 |   const canEditSchool = session.permissions.includes('school:update');
 24 |   const canDeleteSchool = session.permissions.includes('school:delete');
 25 | 
 26 |   const schools = await getSchools();
 27 | 
 28 |   return (
 29 |       <div className="min-h-screen">
 30 |       <div className="container mx-auto px-6 py-8">
 31 |         {/*Header*/}
 32 |         <div className="mb-8">
 33 |           <div className="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
 34 |             {canCreateSchool && (
 35 |                 <SchoolsClientActions
 36 |                     canCreateSchool={canCreateSchool}
 37 |                     canEditSchool={canEditSchool}
 38 |                     canDeleteSchool={canDeleteSchool}
 39 |                 />
 40 |             )}
 41 |           </div>
 42 |         </div>
 43 |         {/* Search and Filter Bar - only show if there are schools */}
 44 |         {schools.length > 0 && (
 45 |           <div className="mb-8">
 46 |             <Card className="border-0 shadow-sm backdrop-blur-sm">
 47 |               <div className="p-6">
 48 |                 <div className="flex flex-col sm:flex-row gap-4">
 49 |                   <div className="relative flex-1">
 50 |                     <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4" />
 51 |                     <Input
 52 |                       placeholder="Search schools by name, location, or contact..."
 53 |                       className="pl-10"
 54 |                     />
 55 |                   </div>
 56 |                   <div className="flex items-center space-x-2">
 57 |                     <Button variant="outline" size="sm">
 58 |                       <Filter className="h-4 w-4 mr-2" />
 59 |                       Filter
 60 |                     </Button>
 61 |                     <div className="flex border rounded-lg p-1">
 62 |                       <Button variant="ghost" size="sm" className="p-2">
 63 |                         <Grid3X3 className="h-4 w-4" />
 64 |                       </Button>
 65 |                       <Button variant="ghost" size="sm" className="p-2">
 66 |                         <List className="h-4 w-4" />
 67 |                       </Button>
 68 |                     </div>
 69 |                   </div>
 70 |                 </div>
 71 |               </div>
 72 |             </Card>
 73 |           </div>
 74 |         )}
 75 | 
 76 |         {/* Content Section */}
 77 |         {schools.length > 0 ? (
 78 |           <div className="grid gap-8 grid-cols-1 md:grid-cols-2 2xl:grid-cols-3">
 79 |             {schools.map((school) => (
 80 |               <EnhancedSchoolCard
 81 |                 key={school.id}
 82 |                 school={school}
 83 |                 canEditSchool={canEditSchool}
 84 |                 canDeleteSchool={canDeleteSchool}
 85 |               />
 86 |             ))}
 87 |           </div>
 88 |         ) : (
 89 |           <EmptyState canCreateSchool={canCreateSchool} />
 90 |         )}
 91 |       </div>
 92 |     </div>
 93 |   );
 94 | }
 95 | 
 96 | // Server Component for individual school cards
 97 | function SchoolCard({ school, canEditSchool }: { school: School, canEditSchool: boolean }) {
 98 |   if (canEditSchool) {
 99 |     return (
100 |       <Link href={`/dashboard/schools/${school.id}`}>
101 |         <Card className="hover:bg-muted/50 transition-colors">
102 |           <CardHeader>
103 |             <CardTitle>{school.name}</CardTitle>
104 |             <CardDescription>Click to manage this school.</CardDescription>
105 |           </CardHeader>
106 |         </Card>
107 |       </Link>
108 |     );
109 |   }
110 | 
111 |   // If no edit permission, just show the card without link
112 |   return (
113 |     <Card className="opacity-60">
114 |       <CardHeader>
115 |         <CardTitle>{school.name}</CardTitle>
116 |         <CardDescription>No permission to manage this school.</CardDescription>
117 |       </CardHeader>
118 |     </Card>
119 |   );
120 | }
121 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(schools)/schools/school-form-dialog.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react";
 4 | import { useRouter } from "next/navigation";
 5 | import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from "@/components/ui/dialog";
 6 | import { Button } from "@/components/ui/button";
 7 | import { toast } from "sonner";
 8 | import { upsertSchoolBasicInfo } from "@/lib/actions/schools";
 9 | import { BasicInformationForm } from "./_components/forms/basic-information-form";
10 | import { SchoolFormData } from "./_components/types/school-forms";
11 | 
12 | interface SchoolFormDialogProps {
13 |     isOpen: boolean;
14 |     setIsOpen: (open: boolean) => void;
15 | }
16 | 
17 | export function SchoolFormDialog({ isOpen, setIsOpen }: SchoolFormDialogProps) {
18 |     const router = useRouter();
19 |     const [isSubmitting, setIsSubmitting] = React.useState(false);
20 |     const [formData, setFormData] = React.useState<Partial<SchoolFormData>>({
21 |         name: "",
22 |         email: "",
23 |         address: "",
24 |         phone: "",
25 |     });
26 |     const [errors, setErrors] = React.useState<Record<string, string[] | undefined>>({});
27 | 
28 |     const updateData = (updates: Partial<SchoolFormData>) => {
29 |         setFormData((prev) => ({ ...prev, ...updates }));
30 |         setErrors({});
31 |     };
32 | 
33 |     const handleSaveAndContinue = async () => {
34 |         setIsSubmitting(true);
35 | 
36 |         // FIX: Ensure required fields are not undefined before sending
37 |         const { name, email, address, phone } = formData;
38 |         if (!name || !email) {
39 |             toast.error("School Name and Email are required.");
40 |             setIsSubmitting(false);
41 |             setErrors({
42 |                 name: !name ? ["School name is required"] : undefined,
43 |                 email: !email ? ["Email is required"] : undefined,
44 |             });
45 |             return;
46 |         }
47 | 
48 |         const result = await upsertSchoolBasicInfo({ name, email, address, phone });
49 | 
50 |         if (result.success && result.school) {
51 |             toast.success(result.message);
52 |             setIsOpen(false);
53 |             router.push(`/dashboard/schools/${result.school.id}/settings`);
54 |         } else {
55 |             toast.error(result.message);
56 |             if (result.errors) {
57 |                 setErrors(result.errors);
58 |             }
59 |         }
60 |         setIsSubmitting(false);
61 |     };
62 | 
63 |     return (
64 |         <Dialog open={isOpen} onOpenChange={setIsOpen}>
65 |             <DialogContent className="sm:max-w-[625px]">
66 |                 <DialogHeader>
67 |                     <DialogTitle>Create a New School</DialogTitle>
68 |                     <DialogDescription>
69 |                         Start by providing the basic details. You will configure the rest in the next step.
70 |                     </DialogDescription>
71 |                 </DialogHeader>
72 |                 <div className="py-4">
73 |                     <BasicInformationForm data={formData} updateData={updateData} errors={errors} />
74 |                 </div>
75 |                 <div className="flex justify-end pt-4">
76 |                     <Button onClick={handleSaveAndContinue} disabled={isSubmitting}>
77 |                         {isSubmitting ? "Saving..." : "Save and Continue"}
78 |                     </Button>
79 |                 </div>
80 |             </DialogContent>
81 |         </Dialog>
82 |     );
83 | }
84 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/(tenant)/layout.tsx:
--------------------------------------------------------------------------------
 1 | // app/(dashboard)/dashboard/(tenant)/layout.tsx
 2 | import { notFound } from "next/navigation"
 3 | import { getSession, UserSession } from "@/lib/session"
 4 | import React from "react"
 5 | import { SidebarProvider, SidebarInset } from "@/components/ui/sidebar"
 6 | import { AppSidebar } from "@/components/app-sidebar"
 7 | import { Separator } from "@/components/ui/separator"
 8 | import { Breadcrumb } from "@/components/ui/breadcrumb"
 9 | import { MobileNav } from "@/components/mobile-nav"
10 | import { NavUser } from "@/components/user-nav"
11 | import { getTenantNavItems } from "@/lib/navigation"
12 | import { NavItem } from "@/components/navigation-provider"
13 | 
14 | 
15 | interface TenantLayoutProps {
16 |   children?: React.ReactNode;
17 | }
18 | 
19 | export default async function TenantLayout({ children }: TenantLayoutProps) {
20 |   const user: UserSession = await getSession();
21 |   if (!user) {
22 |     return notFound();
23 |   }
24 | 
25 |   // Fetch tenant-specific navigation items from our service
26 |   const tenantNavItems: NavItem[] = getTenantNavItems(user);
27 | 
28 |   return (
29 |     <SidebarProvider>
30 |       {/* Pass the nav items directly to AppSidebar */}
31 |       <AppSidebar user={user} />
32 |       <SidebarInset>
33 |         <header className="sticky top-0 z-10 flex h-14 shrink-0 items-center justify-between gap-2 border-b bg-background/80 px-4 backdrop-blur-lg sm:px-6">
34 |           <div className="flex items-center gap-2">
35 |             <Separator orientation="vertical" className="mr-2 h-4 hidden md:flex" />
36 |             <Breadcrumb />
37 |             <MobileNav />
38 |           </div>
39 |           <div className="flex items-center gap-4">
40 |             <NavUser user={user} />
41 |           </div>
42 |         </header>
43 |         <main className="flex flex-1 flex-col gap-4 p-4 lg:gap-6 lg:p-6">
44 |           {children}
45 |         </main>
46 |       </SidebarInset>
47 |     </SidebarProvider>
48 |   )
49 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/layout.tsx:
--------------------------------------------------------------------------------
 1 | import { notFound } from "next/navigation"
 2 | import { getSession, UserSession } from "@/lib/session"
 3 | import React from "react"
 4 | import {
 5 |   SidebarProvider,
 6 |   SidebarInset,
 7 | } from "@/components/ui/sidebar"
 8 | import { AppSidebar } from "@/components/app-sidebar"
 9 | import { Separator } from "@/components/ui/separator"
10 | import { Breadcrumb } from "@/components/ui/breadcrumb"
11 | import log from "@/lib/logger"
12 | import { TenantContextType, TenantProvider } from "@/components/tenant-provider"
13 | import { MobileNav } from "@/components/mobile-nav"
14 | import { NavUser } from "@/components/user-nav"
15 | import { NavigationProvider, NavItem } from "@/components/navigation-provider"
16 | 
17 | 
18 | interface DashboardLayoutProps {
19 |   children?: React.ReactNode;
20 | }
21 | 
22 | const tenantNavItems: NavItem[] = [
23 |   { title: "Dashboard", url: "/dashboard", iconName: "Home", requiredPermission: 'dashboard:view' },
24 |   { title: "People", url: "/dashboard/people", iconName: "Users", requiredPermission: 'person:read' },
25 |   { title: "Roles", url: "/dashboard/roles", iconName: "Folder", requiredPermission: 'role:read' },
26 |   { title: "Schools", url: "/dashboard/schools", iconName: "Home", requiredPermission: 'school:read' },
27 |   { title: "Billings", url: "/dashboard/billing", iconName: "DollarSign", requiredPermission: 'tenant:view_billing' },
28 |   { title: "Integrations", url: "/dashboard/integrations", iconName: "Plug", requiredPermission: 'tenant:manage' },
29 |   { title: "Settings", url: "/dashboard/settings", iconName: "Settings", requiredPermission: 'tenant:manage_settings' },
30 | ];
31 | 
32 | export default async function DashboardLayout({ children }: DashboardLayoutProps) {
33 |   // 1. Fetch the session data once for the entire dashboard
34 |   const user: UserSession = await getSession();
35 |   if (!user) {
36 |     log.warn("No user session found in dashboard layout, redirecting.");
37 |     return notFound();
38 |   }
39 |   console.log("[DashboardLayout] User session:", user);
40 | 
41 |     // 2. Prepare the context value with user and tenant information
42 |   const tenantContextValue: TenantContextType = {
43 |     user: user,
44 |     tenant: {
45 |       id: user.tenantId,
46 |       tenantId: user.tenantId,
47 |       name: user.name
48 |     },
49 |   };
50 | 
51 |   return (
52 |     <TenantProvider value={tenantContextValue}>
53 |       <NavigationProvider initialItems={tenantNavItems}>
54 |         <SidebarProvider>
55 |           <AppSidebar user={user} />
56 |           <SidebarInset>
57 |             <header className="sticky top-0 z-10 flex h-14 shrink-0 items-center justify-between gap-2 border-b bg-background/80 px-4 backdrop-blur-lg sm:px-6">
58 |               <div className="flex items-center gap-2">
59 |                 <Separator orientation="vertical" className="mr-2 h-4 hidden md:flex" />
60 |                   <Breadcrumb />
61 |                 <MobileNav />
62 |               </div>
63 |               <div className="flex items-center gap-4">
64 |                   <NavUser user={user} />
65 |               </div>
66 |             </header>
67 |             <main className="flex flex-1 flex-col gap-4 p-4 lg:gap-6 lg:p-6">
68 |               {children}
69 |             </main>
70 |           </SidebarInset>
71 |         </SidebarProvider>
72 |       </NavigationProvider>
73 |     </TenantProvider>
74 |   )
75 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/page.tsx:
--------------------------------------------------------------------------------
 1 | import { getSession, enforcePermission } from "@/lib/session";
 2 | import { getTenantDb } from "@/lib/db";
 3 | import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
 4 | import { Users, Folder, Building, UserCircle } from "lucide-react";
 5 | import { sql } from "drizzle-orm";
 6 | 
 7 | async function getStats(tenantId: string) {
 8 |     const db = await getTenantDb(tenantId);
 9 |     try {
10 |         const userCountResult = await db.execute(sql`SELECT COUNT(*) FROM users;`);
11 |         const roleCountResult = await db.execute(sql`SELECT COUNT(*) FROM roles;`);
12 |         const userCount = Number((userCountResult.rows[0] as { count: string }).count);
13 |         const roleCount = Number((roleCountResult.rows[0] as { count: string }).count);
14 |         return { userCount, roleCount };
15 |     } catch (error) {
16 |         console.error("Failed to fetch dashboard stats:", error);
17 |         // In a real app, you might want to log this error and return default/empty stats
18 |         return { userCount: 0, roleCount: 0 };
19 |     }
20 | }
21 | 
22 | export default async function DashboardPage() {
23 |   // Enforce permission to view the dashboard
24 |   await enforcePermission('dashboard:view');
25 | 
26 |   const session = await getSession();
27 |   const stats = await getStats(session.tenantId);
28 | 
29 |   return (
30 |     <div className="space-y-6">
31 |       <div>
32 |         <h1 className="text-3xl font-bold">Dashboard</h1>
33 |         <p className="text-muted-foreground">
34 |           An overview of your organization&apos;s activity.
35 |         </p>
36 |       </div>
37 |       <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
38 |         <Card className="lg:col-span-1">
39 |           <CardHeader className="pb-4">
40 |             <CardTitle>Welcome, {session.name}!</CardTitle>
41 |             <CardDescription>You are currently logged in.</CardDescription>
42 |           </CardHeader>
43 |           <CardContent className="space-y-4 text-sm">
44 |             <div className="flex items-center gap-2">
45 |                 <UserCircle className="h-4 w-4 text-muted-foreground" />
46 |                 <span className="text-muted-foreground">User ID:</span>
47 |                 <span className="font-medium">{session.userId}</span>
48 |             </div>
49 |             <div className="flex items-center gap-2">
50 |                 <Building className="h-4 w-4 text-muted-foreground" />
51 |                 <span className="text-muted-foreground">Organization:</span>
52 |                 <span className="font-medium">{session.tenantId}</span>
53 |             </div>
54 |           </CardContent>
55 |         </Card>
56 |         <Card>
57 |           <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
58 |             <CardTitle className="text-sm font-medium">Total Users</CardTitle>
59 |             <Users className="h-4 w-4 text-muted-foreground" />
60 |           </CardHeader>
61 |           <CardContent>
62 |             <div className="text-2xl font-bold">{stats.userCount}</div>
63 |             <p className="text-xs text-muted-foreground">managed within this tenant</p>
64 |           </CardContent>
65 |         </Card>
66 |         <Card>
67 |           <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
68 |             <CardTitle className="text-sm font-medium">Defined Roles</CardTitle>
69 |             <Folder className="h-4 w-4 text-muted-foreground" />
70 |           </CardHeader>
71 |           <CardContent>
72 |             <div className="text-2xl font-bold">{stats.roleCount}</div>
73 |             <p className="text-xs text-muted-foreground">available for assignment</p>
74 |           </CardContent>
75 |         </Card>
76 |       </div>
77 |     </div>
78 |   );
79 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/roles/columns.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import { ColumnDef } from "@tanstack/react-table"
  4 | import { MoreHorizontal } from "lucide-react"
  5 | import { Button } from "@/components/ui/button"
  6 | import {
  7 |   DropdownMenu,
  8 |   DropdownMenuContent,
  9 |   DropdownMenuItem,
 10 |   DropdownMenuLabel,
 11 |   DropdownMenuSeparator,
 12 |   DropdownMenuTrigger,
 13 | } from "@/components/ui/dropdown-menu"
 14 | import { toast } from "sonner"
 15 | import { deleteRole } from "@/lib/actions/role"
 16 | import type { roles, permissions } from "@/lib/db/schema/tenant" 
 17 | import { Badge } from "@/components/ui/badge" 
 18 | 
 19 | // Update Role type to include permissions as an array of the full permission objects,
 20 | // as returned by getRoles.
 21 | export type Role = (typeof roles.$inferSelect) & {
 22 |     permissions?: (typeof permissions.$inferSelect)[]; 
 23 | };
 24 | 
 25 | export const getColumns = (
 26 |     onEdit: (role: Role) => void, 
 27 |     canEditRole: boolean, 
 28 |     canDeleteRole: boolean 
 29 | ): ColumnDef<Role>[] => [
 30 |     {
 31 |         accessorKey: "name",
 32 |         header: "Name",
 33 |     },
 34 |     {
 35 |         accessorKey: "description",
 36 |         header: "Description",
 37 |     },
 38 |     {
 39 |         accessorKey: "permissions", 
 40 |         header: "Permissions",
 41 |         cell: ({ row }) => {
 42 |             const role = row.original;
 43 |             return (
 44 |                 <div className="flex flex-wrap gap-1">
 45 |                     {role.permissions && role.permissions.length > 0 ? (
 46 |                         role.permissions.map(perm => (
 47 |                             <Badge key={perm.id} variant="secondary">
 48 |                                 {perm.name}
 49 |                             </Badge>
 50 |                         ))
 51 |                     ) : (
 52 |                         <span className="text-muted-foreground text-xs">No permissions assigned</span>
 53 |                     )}
 54 |                 </div>
 55 |             );
 56 |         },
 57 |     },
 58 |     {
 59 |         id: "actions",
 60 |         cell: ({ row }) => {
 61 |             const role = row.original;
 62 | 
 63 |             const handleDelete = async () => {
 64 |                 if (window.confirm(`Are you sure you want to delete role "${role.name}"?`)) {
 65 |                   const result = await deleteRole(role.id);
 66 |                   if (result.success) {
 67 |                     toast.success(result.message);
 68 |                   } else {
 69 |                     toast.error(result.message);
 70 |                   }
 71 |                 }
 72 |             };
 73 | 
 74 |             if (!canEditRole && !canDeleteRole) {
 75 |                 return null;
 76 |             }
 77 | 
 78 |             return (
 79 |                 <DropdownMenu>
 80 |                     <DropdownMenuTrigger asChild>
 81 |                         <Button variant="ghost" className="h-8 w-8 p-0">
 82 |                             <span className="sr-only">Open menu</span>
 83 |                             <MoreHorizontal className="h-4 w-4" />
 84 |                         </Button>
 85 |                     </DropdownMenuTrigger>
 86 |                     <DropdownMenuContent align="end">
 87 |                         <DropdownMenuLabel>Actions</DropdownMenuLabel>
 88 |                         {canEditRole && (
 89 |                             <DropdownMenuItem onClick={() => onEdit(role)}>
 90 |                                 Edit Role
 91 |                             </DropdownMenuItem>
 92 |                         )}
 93 |                         {canEditRole && canDeleteRole && <DropdownMenuSeparator />}
 94 |                         {canDeleteRole && (
 95 |                             <DropdownMenuItem onClick={handleDelete} className="text-red-500 focus:text-red-500">
 96 |                                 Delete Role
 97 |                             </DropdownMenuItem>
 98 |                         )}
 99 |                     </DropdownMenuContent>
100 |                 </DropdownMenu>
101 |             )
102 |         },
103 |     },
104 | ]
105 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/roles/data-table.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import {
  5 |   ColumnDef,
  6 |   flexRender,
  7 |   getCoreRowModel,
  8 |   useReactTable,
  9 | } from "@tanstack/react-table"
 10 | import {
 11 |   Table,
 12 |   TableBody,
 13 |   TableCell,
 14 |   TableHead,
 15 |   TableHeader,
 16 |   TableRow,
 17 | } from "@/components/ui/table"
 18 | import { Button } from "@/components/ui/button"
 19 | 
 20 | import { getColumns, Role } from "./columns"
 21 | import { RoleFormDialog } from "./role-form-dialog"
 22 | import { useTenant } from "@/components/tenant-provider"
 23 | import { toast } from "sonner"
 24 | 
 25 | interface RolesDataTableProps {
 26 |   data: Role[]
 27 | }
 28 | 
 29 | export function RolesDataTable({ data }: RolesDataTableProps) {
 30 |   const [isDialogOpen, setIsDialogOpen] = React.useState(false);
 31 |   const [editingRole, setEditingRole] = React.useState<Role | null>(null);
 32 | 
 33 |   const { user } = useTenant(); // Access user permissions from context
 34 | 
 35 |   // Check permissions for UI rendering
 36 |   // Similar to tenant-provier, we need user-provider to access user permissions across the app
 37 |   
 38 |   const canCreateRole = user.permissions.includes('role:create');
 39 |   const canEditRole = user.permissions.includes('role:update');
 40 |   const canDeleteRole = user.permissions.includes('role:delete');
 41 |   const canAssignRolePermissions = user.permissions.includes('role:assign_permissions');
 42 | 
 43 |   const handleEdit = React.useCallback((role: Role) => {
 44 |     if (!canEditRole) {
 45 |       toast.error("You do not have permission to edit roles.");
 46 |       return;
 47 |     }
 48 |     setEditingRole(role);
 49 |     setIsDialogOpen(true);
 50 |   }, [canEditRole]);
 51 | 
 52 |   const handleCreate = React.useCallback(() => {
 53 |     if (!canCreateRole) {
 54 |       toast.error("You do not have permission to create roles.");
 55 |       return;
 56 |     }
 57 |     setEditingRole(null);
 58 |     setIsDialogOpen(true);
 59 |   }, [canCreateRole]);
 60 |   
 61 |   // Pass permissions to columns for conditional rendering of actions
 62 |   const columns: ColumnDef<Role>[] = React.useMemo(() => getColumns(handleEdit, canEditRole, canDeleteRole), [handleEdit, canEditRole, canDeleteRole]);
 63 | 
 64 |   const table = useReactTable({
 65 |     data,
 66 |     columns,
 67 |     getCoreRowModel: getCoreRowModel(),
 68 |   })
 69 | 
 70 |   return (
 71 |     <div>
 72 |         <div className="flex items-center justify-end py-4">
 73 |             {/* Conditionally render Create Role button */}
 74 |             {canCreateRole && <Button onClick={handleCreate}>Create Role</Button>}
 75 |         </div>
 76 |         <div className="rounded-md border">
 77 |         <Table>
 78 |             <TableHeader>
 79 |             {table.getHeaderGroups().map((headerGroup) => (
 80 |                 <TableRow key={headerGroup.id}>
 81 |                 {headerGroup.headers.map((header) => (
 82 |                     <TableHead key={header.id}>
 83 |                         {flexRender(header.column.columnDef.header, header.getContext())}
 84 |                     </TableHead>
 85 |                 ))}
 86 |                 </TableRow>
 87 |             ))}
 88 |             </TableHeader>
 89 |             <TableBody>
 90 |             {table.getRowModel().rows?.length ? (
 91 |                 table.getRowModel().rows.map((row) => (
 92 |                 <TableRow key={row.id}>
 93 |                     {row.getVisibleCells().map((cell) => (
 94 |                     <TableCell key={cell.id}>
 95 |                         {flexRender(cell.column.columnDef.cell, cell.getContext())}
 96 |                     </TableCell>
 97 |                     ))}
 98 |                 </TableRow>
 99 |                 ))
100 |             ) : (
101 |                 <TableRow>
102 |                 <TableCell colSpan={columns.length} className="h-24 text-center">
103 |                     No roles found.
104 |                 </TableCell>
105 |                 </TableRow>
106 |             )}
107 |             </TableBody>
108 |         </Table>
109 |         </div>
110 |       {/* Only render dialog if user has permission to create or edit */}
111 |       {(canCreateRole || canEditRole) && ( 
112 |         <RoleFormDialog
113 |           key={editingRole?.id} // Add key to force re-mount and reset form state
114 |           isOpen={isDialogOpen}
115 |           setIsOpen={setIsDialogOpen}
116 |           role={editingRole}
117 |           canAssignRolePermissions={canAssignRolePermissions} // Pass this down to control permission assignment UI
118 |         />
119 |       )}
120 |     </div>
121 |   )
122 | }
123 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/roles/page.tsx:
--------------------------------------------------------------------------------
 1 | import { getRoles } from "@/lib/actions/role";
 2 | import { RolesDataTable } from "./data-table";
 3 | import { enforcePermission } from "@/lib/session";
 4 | 
 5 | export default async function RolesPage() {
 6 |   // Enforce permission to view roles. If the user doesn't have 'role:read',
 7 |   // they will be redirected by the enforcePermission function.
 8 |   await enforcePermission('role:read'); 
 9 |   
10 |   // Fetch roles after permission check.
11 |   const roles = await getRoles();
12 | 
13 |   return (
14 |     <div className="space-y-4">
15 |       <h1 className="text-2xl font-bold">Role Management</h1>
16 |       <p className="text-muted-foreground">Create and manage roles for your organization.</p>
17 |       <RolesDataTable data={roles} />
18 |     </div>
19 |   );
20 | }
21 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/roles/role-form-dialog.tsx:
--------------------------------------------------------------------------------
  1 | "use client";
  2 | 
  3 | import React from 'react';
  4 | import { useForm } from 'react-hook-form';
  5 | import { zodResolver } from '@hookform/resolvers/zod';
  6 | import {
  7 |   Dialog,
  8 |   DialogContent,
  9 |   DialogHeader,
 10 |   DialogTitle,
 11 |   DialogFooter,
 12 |   DialogDescription,
 13 | } from '@/components/ui/dialog';
 14 | import { Button } from '@/components/ui/button';
 15 | import { Input } from '@/components/ui/input';
 16 | import { toast } from 'sonner';
 17 | import { RoleFormSchema, RoleFormInput } from '@/lib/dto/role';
 18 | import { upsertRole, getRoles } from '@/lib/actions/role'; 
 19 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
 20 | import type { Role } from './columns';
 21 | import { MultiSelect } from '@/components/ui/multi-select'; 
 22 | import type { permissions } from '@/lib/db/schema/tenant';
 23 | 
 24 | interface RoleFormDialogProps {
 25 |   isOpen: boolean;
 26 |   setIsOpen: (open: boolean) => void;
 27 |   role: Role | null;
 28 |   canAssignRolePermissions: boolean; 
 29 | }
 30 | 
 31 | export function RoleFormDialog({ isOpen, setIsOpen, role, canAssignRolePermissions }: RoleFormDialogProps) {
 32 |   const isEditMode = !!role;
 33 |   const [allPermissions, setAllPermissions] = React.useState<Array<typeof permissions.$inferSelect>>([]); // Explicitly type the state
 34 |   const [isLoadingPermissions, setIsLoadingPermissions] = React.useState(true);
 35 | 
 36 |   React.useEffect(() => {
 37 |     async function fetchPermissions() {
 38 |       setIsLoadingPermissions(true);
 39 |       try {
 40 |         const allRolesWithPermissions = await getRoles(); 
 41 |         const uniquePermissions = new Map<number, typeof permissions.$inferSelect>(); // Explicitly type the Map
 42 |         allRolesWithPermissions.forEach(r => {
 43 |             r.permissions?.forEach((p: typeof permissions.$inferSelect) => { // Explicitly type 'p' here
 44 |                 if (!uniquePermissions.has(p.id)) {
 45 |                     uniquePermissions.set(p.id, p);
 46 |                 }
 47 |             });
 48 |         });
 49 |         setAllPermissions(Array.from(uniquePermissions.values()));
 50 |       } catch (error) {
 51 |         toast.error("Failed to load permissions.");
 52 |         console.error("Failed to load permissions:", error);
 53 |       } finally {
 54 |         setIsLoadingPermissions(false);
 55 |       }
 56 |     }
 57 |     if (isOpen && canAssignRolePermissions) { 
 58 |       fetchPermissions();
 59 |     }
 60 |   }, [isOpen, canAssignRolePermissions]);
 61 | 
 62 |   const permissionOptions = allPermissions.map(perm => ({
 63 |     value: perm.name, 
 64 |     label: perm.name,
 65 |   }));
 66 | 
 67 |   // Use React.useMemo to memoize defaultSelectedPermissions
 68 |   const defaultSelectedPermissions = React.useMemo(() => {
 69 |     return role?.permissions?.map(p => p.name) || [];
 70 |   }, [role]); // Dependency array for useMemo
 71 | 
 72 |   const form = useForm<RoleFormInput>({
 73 |     resolver: zodResolver(RoleFormSchema),
 74 |     defaultValues: {
 75 |         id: role?.id,
 76 |         name: role?.name || '',
 77 |         description: role?.description || '',
 78 |         permissions: defaultSelectedPermissions, 
 79 |     },
 80 |   });
 81 | 
 82 |   React.useEffect(() => {
 83 |     form.reset({
 84 |       id: role?.id,
 85 |       name: role?.name || '',
 86 |       description: role?.description || '',
 87 |       permissions: defaultSelectedPermissions,
 88 |     });
 89 |   }, [role, defaultSelectedPermissions, form]);
 90 | 
 91 | 
 92 |   const onSubmit = async (values: RoleFormInput) => {
 93 |     const result = await upsertRole(values);
 94 |     if (result.success) {
 95 |       toast.success(result.message);
 96 |       setIsOpen(false); 
 97 |     } else {
 98 |       toast.error(result.message);
 99 |     }
100 |   };
101 | 
102 |   return (
103 |     <Dialog open={isOpen} onOpenChange={setIsOpen}>
104 |       <DialogContent className="sm:max-w-[425px]">
105 |         <DialogHeader>
106 |           <DialogTitle>{isEditMode ? 'Edit Role' : 'Create New Role'}</DialogTitle>
107 |           <DialogDescription>
108 |             {isEditMode ? "Update the role's details below." : "Fill in the details to create a new role."}
109 |           </DialogDescription>
110 |         </DialogHeader>
111 |         <Form {...form}>
112 |             <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
113 |                 <FormField
114 |                     control={form.control}
115 |                     name="name"
116 |                     render={({ field }) => (
117 |                         <FormItem>
118 |                             <FormLabel>Role Name</FormLabel>
119 |                             <FormControl>
120 |                                 <Input placeholder="e.g., Teacher" {...field} />
121 |                             </FormControl>
122 |                             <FormMessage />
123 |                         </FormItem>
124 |                     )}
125 |                 />
126 |                 <FormField
127 |                     control={form.control}
128 |                     name="description"
129 |                     render={({ field }) => (
130 |                         <FormItem>
131 |                             <FormLabel>Description</FormLabel>
132 |                             <FormControl>
133 |                                 <Input placeholder="e.g., Can manage courses and students" {...field} />
134 |                             </FormControl>
135 |                             <FormMessage />
136 |                         </FormItem>
137 |                     )}
138 |                 />
139 |                 {canAssignRolePermissions && !isLoadingPermissions && (
140 |                     <FormField
141 |                         control={form.control}
142 |                         name="permissions"
143 |                         render={({ field }) => (
144 |                             <FormItem>
145 |                                 <FormLabel>Permissions</FormLabel>
146 |                                 <FormControl>
147 |                                     <MultiSelect
148 |                                         options={permissionOptions}
149 |                                         defaultValue={field.value as string[]} 
150 |                                         onValueChange={field.onChange}
151 |                                         placeholder="Select permissions..."
152 |                                     />
153 |                                 </FormControl>
154 |                                 <FormMessage />
155 |                             </FormItem>
156 |                         )}
157 |                     />
158 |                 )}
159 |                 <DialogFooter>
160 |                     <Button type="submit" disabled={form.formState.isSubmitting}>
161 |                         {form.formState.isSubmitting ? 'Saving...' : 'Save Role'}
162 |                     </Button>
163 |                 </DialogFooter>
164 |             </form>
165 |         </Form>
166 |       </DialogContent>
167 |     </Dialog>
168 |   );
169 | }
170 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/settings/_components/delete-account-form.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import { useForm } from "react-hook-form";
 4 | import { zodResolver } from "@hookform/resolvers/zod";
 5 | import { toast } from "sonner";
 6 | import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
 7 | import { Button } from "@/components/ui/button";
 8 | import { Input } from "@/components/ui/input";
 9 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from "@/components/ui/form";
10 | import { DeleteAccountSchema, DeleteAccountInput } from "@/lib/dto/settings";
11 | import { deleteAccountAction } from "@/lib/actions/settings";
12 | 
13 | export function DeleteAccountForm() {
14 |   const form = useForm<DeleteAccountInput>({
15 |     resolver: zodResolver(DeleteAccountSchema),
16 |     defaultValues: {
17 |       confirm: "",
18 |     },
19 |   });
20 | 
21 |   const onSubmit = async () => {
22 |     if (window.confirm("Are you absolutely sure you want to delete your account? This action cannot be undone.")) {
23 |         const result = await deleteAccountAction();
24 |         if (result.success) {
25 |             toast.success(result.message);
26 |             // The server action will handle the redirect.
27 |         } else {
28 |             toast.error(result.message);
29 |         }
30 |     }
31 |   };
32 | 
33 |   return (
34 |     <Card className="border-destructive">
35 |       <CardHeader>
36 |         <CardTitle className="text-destructive">Danger Zone</CardTitle>
37 |         <CardDescription>
38 |           Deleting your account is a permanent action and cannot be reversed.
39 |         </CardDescription>
40 |       </CardHeader>
41 |       <Form {...form}>
42 |         <form onSubmit={form.handleSubmit(onSubmit)}>
43 |           <CardContent>
44 |             <FormField
45 |               control={form.control}
46 |               name="confirm"
47 |               render={({ field }) => (
48 |                 <FormItem>
49 |                   <FormLabel>To confirm, type &quot;delete my account&quot; below</FormLabel>
50 |                   <FormControl><Input {...field} /></FormControl>
51 |                   <FormMessage />
52 |                 </FormItem>
53 |               )}
54 |             />
55 |           </CardContent>
56 |           <CardFooter className="border-t border-destructive/50 px-6 py-4">
57 |             <Button variant="destructive" type="submit" disabled={form.formState.isSubmitting}>
58 |               {form.formState.isSubmitting ? "Deleting..." : "Delete My Account"}
59 |             </Button>
60 |           </CardFooter>
61 |         </form>
62 |       </Form>
63 |     </Card>
64 |   );
65 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/settings/_components/update-password-form.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import { useForm } from "react-hook-form";
 4 | import { zodResolver } from "@hookform/resolvers/zod";
 5 | import { toast } from "sonner";
 6 | import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
 7 | import { Button } from "@/components/ui/button";
 8 | import { Input } from "@/components/ui/input";
 9 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from "@/components/ui/form";
10 | import { UpdatePasswordSchema, UpdatePasswordInput } from "@/lib/dto/settings";
11 | import { updatePasswordAction } from "@/lib/actions/settings";
12 | 
13 | export function UpdatePasswordForm() {
14 |   const form = useForm<UpdatePasswordInput>({
15 |     resolver: zodResolver(UpdatePasswordSchema),
16 |     defaultValues: {
17 |       currentPassword: "",
18 |       newPassword: "",
19 |     },
20 |   });
21 | 
22 |   const onSubmit = async (values: UpdatePasswordInput) => {
23 |     const result = await updatePasswordAction(values);
24 |     if (result.success) {
25 |       toast.success(result.message);
26 |       form.reset();
27 |     } else {
28 |       toast.error(result.message);
29 |     }
30 |   };
31 | 
32 |   return (
33 |     <Card>
34 |       <CardHeader>
35 |         <CardTitle>Change Password</CardTitle>
36 |         <CardDescription>Update your password here. It recommended to use a strong, unique password.</CardDescription>
37 |       </CardHeader>
38 |       <Form {...form}>
39 |         <form onSubmit={form.handleSubmit(onSubmit)}>
40 |           <CardContent className="space-y-4">
41 |             <FormField
42 |               control={form.control}
43 |               name="currentPassword"
44 |               render={({ field }) => (
45 |                 <FormItem>
46 |                   <FormLabel>Current Password</FormLabel>
47 |                   <FormControl><Input type="password" {...field} /></FormControl>
48 |                   <FormMessage />
49 |                 </FormItem>
50 |               )}
51 |             />
52 |             <FormField
53 |               control={form.control}
54 |               name="newPassword"
55 |               render={({ field }) => (
56 |                 <FormItem>
57 |                   <FormLabel>New Password</FormLabel>
58 |                   <FormControl><Input type="password" {...field} /></FormControl>
59 |                   <FormMessage />
60 |                 </FormItem>
61 |               )}
62 |             />
63 |           </CardContent>
64 |           <CardFooter className="border-t px-6 py-4">
65 |             <Button type="submit" disabled={form.formState.isSubmitting}>
66 |               {form.formState.isSubmitting ? "Updating..." : "Update Password"}
67 |             </Button>
68 |           </CardFooter>
69 |         </form>
70 |       </Form>
71 |     </Card>
72 |   );
73 | }


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/settings/_components/update-profile-form.tsx:
--------------------------------------------------------------------------------
 1 | 'use client';
 2 | 
 3 | import { useForm } from "react-hook-form";
 4 | import { zodResolver } from "@hookform/resolvers/zod";
 5 | import { toast } from "sonner";
 6 | import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
 7 | import { Button } from "@/components/ui/button";
 8 | import { Input } from "@/components/ui/input";
 9 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from "@/components/ui/form";
10 | import { UpdateProfileSchema, UpdateProfileInput } from "@/lib/dto/settings";
11 | import { updateProfileAction } from "@/lib/actions/settings";
12 | import { UserSession } from "@/lib/session";
13 | 
14 | interface UpdateProfileFormProps {
15 |   user: UserSession;
16 | }
17 | 
18 | export default function UpdateProfileForm({ user }: UpdateProfileFormProps) {
19 |   const form = useForm<UpdateProfileInput>({
20 |     resolver: zodResolver(UpdateProfileSchema),
21 |     defaultValues: {
22 |       name: user.name,
23 |       email: user.email,
24 |     },
25 |   });
26 | 
27 |   const onSubmit = async (values: UpdateProfileInput) => {
28 |     const result = await updateProfileAction(values);
29 |     if (result.success) {
30 |       toast.success(result.message);
31 |       // Re-fetch session or update context if needed after successful profile update
32 |     } else {
33 |       toast.error(result.message);
34 |       if (!result.success) {
35 |         form.setError("email", { type: "server", message: result.message });
36 |       }
37 |     }
38 |   };
39 | 
40 |   return (
41 |     <Card>
42 |       <CardHeader>
43 |         <CardTitle>Update Profile</CardTitle>
44 |         <CardDescription>Update your account profile information.</CardDescription>
45 |       </CardHeader>
46 |       <Form {...form}>
47 |         <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
48 |           <CardContent>
49 |             <FormField
50 |               control={form.control}
51 |               name="name"
52 |               render={({ field }) => (
53 |                 <FormItem>
54 |                   <FormLabel>Name</FormLabel>
55 |                   <FormControl><Input {...field} /></FormControl>
56 |                   <FormMessage />
57 |                 </FormItem>
58 |               )}
59 |             />
60 |             <FormField
61 |               control={form.control}
62 |               name="email"
63 |               render={({ field }) => (
64 |                 <FormItem>
65 |                   <FormLabel>Email</FormLabel>
66 |                   <FormControl><Input type="email" {...field} /></FormControl>
67 |                   <FormMessage />
68 |                 </FormItem>
69 |               )}
70 |             />
71 |           </CardContent>
72 |           <CardFooter className="border-t px-6 py-4">
73 |             <Button type="submit" disabled={form.formState.isSubmitting}>
74 |               {form.formState.isSubmitting ? "Updating..." : "Update Profile"}
75 |             </Button>
76 |           </CardFooter>
77 |         </form>
78 |       </Form>
79 |     </Card>
80 |   );
81 | }
82 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/settings/page.tsx:
--------------------------------------------------------------------------------
 1 | import { Separator } from "@/components/ui/separator";
 2 | import UpdateProfileForm from "./_components/update-profile-form";
 3 | import { UpdatePasswordForm } from "./_components/update-password-form";
 4 | import { DeleteAccountForm } from "./_components/delete-account-form";
 5 | import { getSession } from "@/lib/session";
 6 | 
 7 | /**
 8 |  * Settings page for the dashboard.
 9 |  * Allows users to update their profile, change password, and delete their account.
10 |  * @returns {JSX.Element} The settings page component.
11 |  */
12 | export default async function SettingsPage() {
13 |   const session = await getSession();
14 |   const currentUser = session; 
15 | 
16 |   return (
17 |     <div className="space-y-6">
18 |       <div>
19 |         <h3 className="text-lg font-medium">Settings</h3>
20 |         <p className="text-sm text-muted-foreground">
21 |           Manage your account settings and set e-mail preferences.
22 |         </p>
23 |       </div>
24 |       <Separator />
25 |       <UpdateProfileForm user={currentUser} />
26 |       <UpdatePasswordForm />
27 |       <DeleteAccountForm />
28 |     </div>
29 |   );
30 | }
31 | 


--------------------------------------------------------------------------------
/app/(dashboard)/dashboard/tenant-provider.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import { createContext, useContext, ReactNode } from 'react';
 4 | import { type UserSession } from '@/lib/session';
 5 | 
 6 | // Define the shape of the context data
 7 | export interface TenantContextType {
 8 |   user: UserSession;
 9 |   tenant: {
10 |     id: string;
11 |     tenantId: string;
12 |     name: string;
13 |   };
14 | }
15 | 
16 | // Create the context with a null default value
17 | const TenantContext = createContext<TenantContextType | null>(null);
18 | 
19 | // The provider component that will wrap our dashboard layout
20 | export function TenantProvider({ children, value }: { children: ReactNode; value: TenantContextType }) {
21 |   return (
22 |     <TenantContext.Provider value={value}>
23 |       {children}
24 |     </TenantContext.Provider>
25 |   );
26 | }
27 | 
28 | // The custom hook that client components will use to access the data
29 | export function useTenant() {
30 |   const context = useContext(TenantContext);
31 |   if (context === null) {
32 |     throw new Error("useTenant must be used within a TenantProvider");
33 |   }
34 |   return context;
35 | }


--------------------------------------------------------------------------------
/app/_components/call-to-action-section.tsx:
--------------------------------------------------------------------------------
 1 | import Link from "next/link";
 2 | import { Button } from "@/components/ui/button";
 3 | import { ArrowRight } from "lucide-react";
 4 | 
 5 | export function CallToActionSection() {
 6 |   return (
 7 |     <section id="pricing" className="w-full py-20 md:py-32 lg:py-40">
 8 |       <div className="container px-4 md:px-6 text-center">
 9 |         <div className="max-w-4xl mx-auto space-y-8 relative">
10 |            <div className="absolute -inset-20 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full blur-3xl opacity-10"></div>
11 |           <h2 className="text-4xl md:text-5xl font-bold tracking-tight text-white">
12 |             Ready to Transform Your School Management?
13 |           </h2>
14 |           <p className="text-lg md:text-xl text-gray-400">
15 |             Join hundreds of modern educational institutions already streamlining their operations with Scholian.
16 |             Experience the future of school management today.
17 |           </p>
18 |           <div className="flex flex-col sm:flex-row gap-4 justify-center">
19 |              <Button
20 |               asChild
21 |               size="lg"
22 |               className="rounded-full px-8 py-3 text-lg font-semibold bg-white text-black hover:bg-gray-200 shadow-lg shadow-white/10 transition-all duration-300"
23 |             >
24 |               <Link href="/signup">
25 |                 Start Your Free Trial
26 |                 <ArrowRight className="ml-2 h-5 w-5" />
27 |               </Link>
28 |             </Button>
29 |             <Button
30 |               asChild
31 |               size="lg"
32 |               variant="outline"
33 |               className="rounded-full px-8 py-3 text-lg font-semibold bg-transparent border-white/20 text-white hover:bg-white/10 hover:border-white/40 transition-all duration-300"
34 |             >
35 |               <Link href="/contact">Contact Sales</Link>
36 |             </Button>
37 |           </div>
38 |         </div>
39 |       </div>
40 |     </section>
41 |   );
42 | }
43 | 


--------------------------------------------------------------------------------
/app/_components/features-section.tsx:
--------------------------------------------------------------------------------
 1 | import { BookOpen, BarChart, Users, CalendarDays, DollarSign, LayoutGrid } from "lucide-react";
 2 | 
 3 | const features = [
 4 |   {
 5 |     icon: Users,
 6 |     title: "Student Management",
 7 |     description: "Effortlessly manage student records, attendance, grades, and communication in a centralized system.",
 8 |   },
 9 |   {
10 |     icon: BookOpen,
11 |     title: "Curriculum Planning",
12 |     description: "Design, organize, and track courses, subjects, and lesson plans with intuitive tools.",
13 |   },
14 |   {
15 |     icon: BarChart,
16 |     title: "Analytics & Reporting",
17 |     description: "Gain deep insights into academic performance, attendance trends, and operational efficiency.",
18 |   },
19 |   {
20 |     icon: CalendarDays,
21 |     title: "Event Scheduling",
22 |     description: "Plan and manage school events, holidays, and academic calendars with ease.",
23 |   },
24 |   {
25 |     icon: DollarSign,
26 |     title: "Financial Tracking",
27 |     description: "Monitor tuition, fees, expenses, and budget allocation for complete financial oversight.",
28 |   },
29 |   {
30 |     icon: LayoutGrid,
31 |     title: "Customizable Dashboards",
32 |     description: "Personalize dashboards to display the most relevant data and metrics for each role.",
33 |   },
34 | ];
35 | 
36 | export function FeaturesSection() {
37 |   return (
38 |     <section id="features" className="w-full py-20 md:py-28 lg:py-32">
39 |       <div className="container px-4 md:px-6 text-center">
40 |         <div className="max-w-3xl mx-auto space-y-4">
41 |           <div className="inline-block rounded-full bg-white/10 px-4 py-1 text-sm font-semibold text-gray-200">
42 |             Key Features
43 |           </div>
44 |           <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight text-white">
45 |             Everything You Need to Succeed
46 |           </h2>
47 |           <p className="text-lg md:text-xl text-gray-400">
48 |             Our comprehensive platform is packed with features designed to streamline your administrative tasks, enhance
49 |             the learning experience, and empower your institution.
50 |           </p>
51 |         </div>
52 |         <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-16">
53 |           {features.map((feature, index) => {
54 |             const Icon = feature.icon;
55 |             return (
56 |               <div
57 |                 key={index}
58 |                 className="bg-white/5 p-8 rounded-xl border border-white/10 shadow-lg hover:border-white/20 hover:bg-white/10 transition-all duration-300 transform hover:-translate-y-1"
59 |               >
60 |                 <div className="flex items-center justify-center w-12 h-12 rounded-lg bg-white/10 text-white mb-6 mx-auto">
61 |                   <Icon className="h-6 w-6" />
62 |                 </div>
63 |                 <h3 className="text-xl font-bold text-white mb-3">{feature.title}</h3>
64 |                 <p className="text-gray-400 text-base">{feature.description}</p>
65 |               </div>
66 |             );
67 |           })}
68 |         </div>
69 |       </div>
70 |     </section>
71 |   );
72 | }
73 | 


--------------------------------------------------------------------------------
/app/_components/footer.tsx:
--------------------------------------------------------------------------------
 1 | import Link from "next/link";
 2 | import { GraduationCap } from "lucide-react";
 3 | 
 4 | export function Footer() {
 5 |   return (
 6 |     <footer className="w-full shrink-0 px-4 md:px-6 border-t border-white/10 text-gray-400">
 7 |       <div className="container mx-auto flex flex-col md:flex-row items-center justify-between gap-6 py-10">
 8 |         <div className="flex flex-col md:flex-row items-center gap-4">
 9 |             <div className="flex items-center space-x-3">
10 |                 <GraduationCap className="h-6 w-6 text-gray-200" />
11 |                 <span className="text-xl font-bold text-white">Scholian</span>
12 |             </div>
13 |             <p className="text-sm text-gray-500">&copy; {new Date().getFullYear()} Scholian Inc. All rights reserved.</p>
14 |         </div>
15 |         <nav className="flex gap-6">
16 |           <Link href="#" className="text-sm hover:text-white transition-colors">
17 |             Terms
18 |           </Link>
19 |           <Link href="#" className="text-sm hover:text-white transition-colors">
20 |             Privacy
21 |           </Link>
22 |           <Link href="#" className="text-sm hover:text-white transition-colors">
23 |             Contact
24 |           </Link>
25 |         </nav>
26 |       </div>
27 |     </footer>
28 |   );
29 | }
30 | 


--------------------------------------------------------------------------------
/app/_components/header.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import Link from "next/link";
 4 | import { Button } from "@/components/ui/button";
 5 | import { GraduationCap, Menu, X } from "lucide-react";
 6 | import { useState } from "react";
 7 | import { cn } from "@/lib/utils";
 8 | 
 9 | export function Header() {
10 |   const [isOpen, setIsOpen] = useState(false);
11 | 
12 |   return (
13 |     <header className="fixed top-0 left-0 right-0 z-50">
14 |       <div className="container mx-auto px-4 sm:px-6 lg:px-8">
15 |         <div className="mt-4 flex h-16 items-center justify-between rounded-full border border-white/10 bg-black/50 p-2 px-6 shadow-lg backdrop-blur-xl">
16 |           <Link href="#" className="flex items-center justify-center">
17 |             <GraduationCap className="h-7 w-7 text-white" />
18 |             <span className="ml-3 text-xl font-bold text-white tracking-wider">Scholian</span>
19 |           </Link>
20 |           <nav className="hidden md:flex items-center gap-6">
21 |             <Link href="#features" className="text-sm font-medium text-gray-300 hover:text-white transition-colors">
22 |               Features
23 |             </Link>
24 |             <Link href="#security" className="text-sm font-medium text-gray-300 hover:text-white transition-colors">
25 |               Security
26 |             </Link>
27 |             <Link href="#pricing" className="text-sm font-medium text-gray-300 hover:text-white transition-colors">
28 |               Pricing
29 |             </Link>
30 |           </nav>
31 |           <div className="hidden md:flex items-center gap-4">
32 |             <Button variant="ghost" asChild className="text-gray-300 hover:text-white hover:bg-white/10">
33 |               <Link href="/login">Login</Link>
34 |             </Button>
35 |             <Button asChild className="rounded-full bg-white text-black hover:bg-gray-200">
36 |               <Link href="/signup">Get Started</Link>
37 |             </Button>
38 |           </div>
39 |           <div className="md:hidden">
40 |             <button onClick={() => setIsOpen(!isOpen)} className="text-white">
41 |               {isOpen ? <X size={24} /> : <Menu size={24} />}
42 |             </button>
43 |           </div>
44 |         </div>
45 |       </div>
46 |       {/* Mobile Menu */}
47 |       <div
48 |         className={cn(
49 |           "md:hidden mt-2 mx-4 rounded-xl border border-white/10 bg-black/50 shadow-lg backdrop-blur-xl overflow-hidden transition-all duration-300 ease-in-out",
50 |           isOpen ? "max-h-96 opacity-100" : "max-h-0 opacity-0"
51 |         )}
52 |       >
53 |         <nav className="flex flex-col items-center gap-4 p-4">
54 |           <Link href="#features" onClick={()=>setIsOpen(false)} className="w-full text-center py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors">
55 |             Features
56 |           </Link>
57 |           <Link href="#security" onClick={()=>setIsOpen(false)} className="w-full text-center py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors">
58 |             Security
59 |           </Link>
60 |           <Link href="#pricing" onClick={()=>setIsOpen(false)} className="w-full text-center py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors">
61 |             Pricing
62 |           </Link>
63 |           <div className="w-full border-t border-white/10 my-2"></div>
64 |           <Button variant="ghost" asChild className="w-full text-gray-300 hover:text-white hover:bg-white/10">
65 |             <Link href="/login">Login</Link>
66 |           </Button>
67 |           <Button asChild className="w-full rounded-full bg-white text-black hover:bg-gray-200">
68 |             <Link href="/signup">Get Started</Link>
69 |           </Button>
70 |         </nav>
71 |       </div>
72 |     </header>
73 |   );
74 | }
75 | 


--------------------------------------------------------------------------------
/app/_components/hero-section.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | import Link from "next/link"
 3 | import { Button } from "@/components/ui/button"
 4 | import { ArrowRight, PlayCircle } from "lucide-react"
 5 | 
 6 | export function HeroSection() {
 7 |   return (
 8 |     <section className="relative w-full pt-48 pb-20 md:pt-64 md:pb-28 lg:pt-72 lg:pb-32 overflow-hidden">
 9 |       {/* Abstract background shapes - more subtle now */}
10 |       <div className="absolute inset-0 -z-10 opacity-30">
11 |         <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/30 rounded-full mix-blend-screen filter blur-3xl animate-blob" />
12 |         <div className="absolute top-1/2 right-1/4 w-96 h-96 bg-purple-500/30 rounded-full mix-blend-screen filter blur-3xl animate-blob animation-delay-2000" />
13 |         <div className="absolute bottom-1/4 left-1/3 w-96 h-96 bg-green-500/30 rounded-full mix-blend-screen filter blur-3xl animate-blob animation-delay-4000" />
14 |       </div>
15 | 
16 |       <div className="container px-4 md:px-6 relative z-10">
17 |         <div className="flex flex-col items-center text-center space-y-8">
18 |           <div className="flex flex-col justify-center space-y-6 text-center lg:text-left">
19 |             <div className="space-y-4">
20 |               <h1 className="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold tracking-tighter leading-tight text-transparent bg-clip-text bg-gradient-to-br from-white to-gray-400">
21 |               The All-In-One Platform for Modern Education
22 |             </h1>
23 |           <p className="max-w-[700px] text-lg md:text-xl text-gray-400">
24 |             Scholian provides everything your institution needs to manage students, staff, and curriculum with
25 |             unparalleled ease and robust security.
26 |           </p>
27 |             </div>
28 |           <div className="flex flex-col sm:flex-row gap-4 justify-center">
29 |             <Button
30 |               asChild
31 |               size="lg"
32 |               className="rounded-full px-8 py-3 text-lg font-semibold bg-white text-black hover:bg-gray-200 shadow-lg shadow-white/10 transition-all duration-300"
33 |             >
34 |               <Link href="/signup">
35 |                 Start Free Trial
36 |                 <ArrowRight className="ml-2 h-5 w-5" />
37 |               </Link>
38 |             </Button>
39 |             <Button
40 |               asChild
41 |               size="lg"
42 |               variant="outline"
43 |               className="rounded-full px-8 py-3 text-lg font-semibold bg-transparent border-white/20 text-white hover:bg-white/10 hover:border-white/40 transition-all duration-300"
44 |             >
45 |               <Link href="/signup">
46 |                 <PlayCircle className="mr-2 h-5 w-5" />
47 |                 Request a Demo
48 |               </Link>
49 |             </Button>
50 |           </div>
51 |           </div>
52 |           <div className="relative mt-20 lg:mt-24 group">
53 |           <img
54 |               src="https://colorlib.com/wp/wp-content/uploads/sites/2/free-dashboard-templates-1.jpg?height=700&width=900"
55 |               width="1200"
56 |               height="750"
57 |               alt="Scholian Dashboard Screenshot"
58 |               className="rounded-xl"
59 |               onError={(e) => {
60 |                 const target = e.target as HTMLImageElement;
61 |                 target.onerror = null;
62 |                 target.src = 'https://colorlib.com/wp/wp-content/uploads/sites/2/free-dashboard-templates-1.jpg?height=700&width=900';
63 |               }}
64 |             />
65 |           </div>
66 |         </div>
67 |       </div>
68 |     </section>
69 |   )
70 | }
71 | 


--------------------------------------------------------------------------------
/app/_components/loading.tsx:
--------------------------------------------------------------------------------
1 | export default function Loading() {
2 |   return null
3 | }
4 | 


--------------------------------------------------------------------------------
/app/_components/security-section.tsx:
--------------------------------------------------------------------------------
 1 | import { Database, Cloud, Lock, Server } from "lucide-react";
 2 | 
 3 | const securityFeatures = [
 4 |   {
 5 |     icon: Database,
 6 |     title: "Dedicated Databases",
 7 |     description: "Each tenant gets a dedicated, isolated database for maximum data integrity and performance.",
 8 |   },
 9 |   {
10 |     icon: Lock,
11 |     title: "Robust Encryption",
12 |     description: "All data is encrypted at rest and in transit using industry-leading protocols.",
13 |   },
14 |   {
15 |     icon: Server,
16 |     title: "Scalable Infrastructure",
17 |     description: "Built on a resilient cloud infrastructure designed for high availability and performance.",
18 |   },
19 |   {
20 |     icon: Cloud,
21 |     title: "Regular Audits & Compliance",
22 |     description: "Undergo frequent security audits and comply with educational data privacy regulations.",
23 |   },
24 | ];
25 | 
26 | export function SecuritySection() {
27 |   return (
28 |     <section id="security" className="w-full py-20 md:py-28 lg:py-32 bg-black/20">
29 |       <div className="container px-4 md:px-6 text-center">
30 |         <div className="max-w-3xl mx-auto space-y-4">
31 |           <div className="inline-block rounded-full bg-white/10 px-4 py-1 text-sm font-semibold text-gray-200">
32 |             Enterprise Grade
33 |           </div>
34 |           <h2 className="text-3xl md:text-4xl lg:text-5xl font-bold tracking-tight text-white">
35 |             Your Data, Our Priority: Uncompromised Security
36 |           </h2>
37 |           <p className="text-lg md:text-xl text-gray-400">
38 |             Scholian is built with a multi-tenant architecture, ensuring robust enterprise-grade security and dedicated
39 |             resources for every institution.
40 |           </p>
41 |         </div>
42 |         <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 mt-16">
43 |           {securityFeatures.map((feature, index) => {
44 |             const Icon = feature.icon;
45 |             return (
46 |               <div
47 |                 key={index}
48 |                 className="bg-white/5 p-8 rounded-xl border border-white/10 shadow-lg"
49 |               >
50 |                 <div className="flex items-center justify-center w-12 h-12 rounded-lg bg-white/10 text-white mb-6 mx-auto">
51 |                   <Icon className="h-6 w-6" />
52 |                 </div>
53 |                 <h3 className="text-xl font-bold text-white mb-3">{feature.title}</h3>
54 |                 <p className="text-gray-400 text-base">{feature.description}</p>
55 |               </div>
56 |             );
57 |           })}
58 |         </div>
59 |       </div>
60 |     </section>
61 |   );
62 | }
63 | 


--------------------------------------------------------------------------------
/app/api/auth/login/route.ts:
--------------------------------------------------------------------------------
 1 | import { NextRequest, NextResponse } from 'next/server';
 2 | import { eq } from 'drizzle-orm';
 3 | import bcrypt from 'bcrypt';
 4 | import jwt from 'jsonwebtoken';
 5 | import { LoginWithTenantDto } from '@/lib/dto/tenant';
 6 | import { getTenantDb } from '@/lib/db';
 7 | import * as tenantSchema from '@/lib/db/schema/tenant';
 8 | import { env } from '@/env.mjs';
 9 | import log from '@/lib/logger';
10 | 
11 | export const runtime = 'nodejs';
12 | 
13 | export async function POST(request: NextRequest) {
14 |   try {
15 |     const body = await request.json();
16 |     // The tenantId is now explicitly provided in the login form body.
17 |     const { tenantId, email, password } = LoginWithTenantDto.parse(body);
18 | 
19 |     log.info({ tenantId, email }, '[API] Login attempt.');
20 | 
21 |     const tenantDb = await getTenantDb(tenantId);
22 |     // Eagerly load the 'person' relation to get the user's name
23 |     const userResult = await tenantDb.query.users.findFirst({
24 |       where: eq(tenantSchema.users.email, email),
25 |       with: {
26 |         person: true, // Load associated person data
27 |         usersToRoles: {
28 |           with: {
29 |             role: {
30 |               with: {
31 |                 rolesToPermissions: {
32 |                   with: {
33 |                     permission: true,
34 |                   },
35 |                 },
36 |               },
37 |             },
38 |           },
39 |         },
40 |       },
41 |     });
42 | 
43 |     if (!userResult) {
44 |       log.warn({ tenantId, email }, '[API] Login failed: User not found.');
45 |       return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });
46 |     }
47 | 
48 |     const isPasswordValid = await bcrypt.compare(password, userResult.password);
49 |     if (!isPasswordValid) {
50 |       log.warn({ tenantId, email }, '[API] Login failed: Invalid password.');
51 |       return NextResponse.json({ error: 'Invalid credentials' }, { status: 401 });
52 |     }
53 | 
54 |     // Aggregate all unique permission names for the user
55 |     const userPermissions = new Set<string>();
56 |     userResult.usersToRoles.forEach(userRole => {
57 |       userRole.role.rolesToPermissions.forEach(rolePermission => {
58 |         userPermissions.add(rolePermission.permission.name); 
59 |       });
60 |     });
61 | 
62 |     // Create JWT payload with tenantId, userId, name (from person), email, and permissions
63 |     const tokenPayload = {
64 |       tenantId,
65 |       userId: userResult.id,
66 |       name: userResult.person ? `${userResult.person.firstName} ${userResult.person.lastName}` : userResult.email, // Use person's name, fallback to email
67 |       email: userResult.email,
68 |       permissions: Array.from(userPermissions), 
69 |     };
70 | 
71 |     const token = jwt.sign(tokenPayload, env.JWT_SECRET, { expiresIn: '8h' });
72 |     log.info({ tenantId, userId: userResult.id }, '[API] Login successful.');
73 | 
74 |     const response = NextResponse.json({ message: 'Login successful' });
75 |     response.cookies.set('authToken', token, {
76 |       httpOnly: true,
77 |       secure: process.env.NODE_ENV === 'production',
78 |       sameSite: 'strict',
79 |       path: '/',
80 |       maxAge: 8 * 60 * 60, // 8 hours
81 |     });
82 |     
83 |     // Commenting out domain-specific cookie settings for now.
84 |     // This can be re-enabled when subdomain routing is implemented again.
85 |     // console.log('Setting cookie for domain:', process.env.NODE_ENV === 'development' ? '.localhost' : '.yourdomain.com');
86 |     // console.log('Request host:', request.headers.get('host'));
87 |     // console.log('Response Set-Cookie:', response.headers.get('set-cookie'));
88 | 
89 |     return response;
90 | 
91 |   } catch (err) {
92 |     log.error({ error: err }, '[API] Login process failed.');
93 |     if (err instanceof Error && err.message === 'Tenant not found') {
94 |       return NextResponse.json({ error: 'Invalid tenant specified' }, { status: 404 });
95 |     }
96 |     return NextResponse.json({ error: 'An internal error occurred' }, { status: 500 });
97 |   }
98 | }
99 | 


--------------------------------------------------------------------------------
/app/api/tenants/route.ts:
--------------------------------------------------------------------------------
  1 | import { NextRequest, NextResponse } from 'next/server';
  2 | import bcrypt from 'bcrypt';
  3 | import { TenantSignupDto } from '@/lib/dto/tenant';
  4 | import { createNeonProject, deleteNeonProject } from '@/lib/neon/api';
  5 | import { mainDb, getTenantDb } from '@/lib/db';
  6 | import { tenants } from '@/lib/db/schema/shared';
  7 | import * as tenantSchema from '@/lib/db/schema/tenant';
  8 | import { encrypt } from '@/lib/crypto';
  9 | import { runTenantMigrations } from '@/lib/db/migrate';
 10 | import { seedTenantData } from '@/scripts/seed-tenant-data';
 11 | import log from '@/lib/logger';
 12 | import z from 'zod';
 13 | import { eq } from 'drizzle-orm';
 14 | 
 15 | export const runtime = 'nodejs';
 16 | 
 17 | export async function POST(request: NextRequest) {
 18 |   let neonProjectId: string | null = null;
 19 |   const { tenantId } = await request.clone().json();
 20 |   try {
 21 |     const body = await request.json();
 22 |     const data = TenantSignupDto.parse(body);
 23 |     const { tenantId, orgName, adminName, adminEmail, adminPassword } = data;
 24 | 
 25 |     log.info({ tenantId }, '[API] Tenant creation request received.');
 26 | 
 27 |     // Check if tenantId already exists
 28 |     const existingTenant = await mainDb.query.tenants.findFirst({
 29 |       where: eq(tenants.tenantId, tenantId),
 30 |     });
 31 | 
 32 |     if (existingTenant) {
 33 |       log.warn({ tenantId }, '[API] Tenant creation failed: Tenant ID already exists.');
 34 |       return NextResponse.json({ error: 'This subdomain is already taken. Please choose another.' }, { status: 409 });
 35 |     }
 36 | 
 37 |     // 1. Create the new database project on Neon
 38 |     const neonProject = await createNeonProject(tenantId);
 39 |     if (!neonProject || !neonProject.projectId || !neonProject.connectionString) {
 40 |       throw new Error("Invalid response from Neon API during project creation.");
 41 |     }
 42 |     const { projectId: _neonProjectId, connectionString } = neonProject;
 43 |     neonProjectId = _neonProjectId;
 44 |     console.log(`neonProject: ${JSON.stringify(neonProject)}`);
 45 | 
 46 |     // 2. Store the new tenant's metadata in your main database
 47 |     const encryptedConnectionString = encrypt(connectionString);
 48 | 
 49 |     await mainDb.insert(tenants).values({
 50 |       tenantId,
 51 |       name: orgName,
 52 |       neonProjectId: _neonProjectId,
 53 |       connectionString: encryptedConnectionString,
 54 |     });
 55 |     log.info({ tenantId, neonProjectId }, '[API] Tenant metadata stored.');
 56 | 
 57 |     // 3. Run the migrations on the newly created tenant database
 58 |     await runTenantMigrations(connectionString);
 59 | 
 60 |     // 4. Seed default roles and permissions in the new tenant database
 61 |     const tenantDb = await getTenantDb(tenantId);
 62 |     await seedTenantData(tenantDb);
 63 |     log.info({ tenantId }, '[API] Default tenant data seeded.');
 64 | 
 65 |     // 5. Create the tenant's first admin PERSON in their new database
 66 |     const [newAdminPerson] = await tenantDb.insert(tenantSchema.people).values({
 67 |       schoolId: null,
 68 |       firstName: adminName.split(' ')[0] || adminName,
 69 |       lastName: adminName.split(' ')[1] || '',
 70 |       contactEmail: adminEmail,
 71 |       personType: 'staff',
 72 |     }).returning({ id: tenantSchema.people.id });
 73 |     log.info({ tenantId, adminEmail, personId: newAdminPerson.id }, '[API] Admin person created in tenant DB.');
 74 | 
 75 | 
 76 |     // 6. Create the tenant's first admin USER in their new database, linked to the person
 77 |     const hashedPassword = await bcrypt.hash(adminPassword, 12);
 78 |     const [newAdminUser] = await tenantDb.insert(tenantSchema.users).values({
 79 |       personId: newAdminPerson.id,
 80 |       email: adminEmail,
 81 |       password: hashedPassword,
 82 |     }).returning({ id: tenantSchema.users.id });
 83 |     log.info({ tenantId, adminEmail, userId: newAdminUser.id }, '[API] Admin user created in tenant DB.');
 84 | 
 85 |     // 7. Assign TENANT_ADMIN role to the newly created admin user
 86 |     const [tenantAdminRole] = await tenantDb.select()
 87 |       .from(tenantSchema.roles)
 88 |       .where(eq(tenantSchema.roles.name, 'TENANT_ADMIN'));
 89 | 
 90 |     if (tenantAdminRole) {
 91 |       await tenantDb.insert(tenantSchema.usersToRoles).values({
 92 |         userId: newAdminUser.id,
 93 |         roleId: tenantAdminRole.id,
 94 |         schoolId: null,
 95 |       });
 96 |       log.info({ tenantId, userId: newAdminUser.id, role: 'TENANT_ADMIN' }, '[API] Assigned TENANT_ADMIN role to new admin user.');
 97 |     } else {
 98 |       log.error({ tenantId }, '[API] TENANT_ADMIN role not found during user assignment. This indicates a seeding issue.');
 99 |     }
100 | 
101 |     // 8. Done!
102 |     return NextResponse.json({ message: 'Tenant created successfully', tenantId });
103 | 
104 |   } catch (err) {
105 |  let errorMessage = 'Internal server error';
106 |  let errorDetails ={};
107 |      errorDetails = { error: 'An unknown error occurred' };
108 | 
109 |     if (err instanceof z.ZodError) {
110 |         errorMessage = 'Invalid input';
111 |         errorDetails = err.flatten();
112 |         return NextResponse.json({ error: errorMessage, details: errorDetails }, { status: 400 });
113 |     }
114 |     
115 |     if (err instanceof Error) {
116 |         errorMessage = err.message;
117 |         errorDetails = { name: err.name, message: err.message, stack: err.stack };
118 |     }
119 | 
120 |     log.error({ ...errorDetails, tenantId, neonProjectId }, '[API] Tenant creation failed.');
121 | 
122 |     if (neonProjectId) {
123 |       await deleteNeonProject(neonProjectId);
124 |     }
125 |     
126 |     return NextResponse.json({ error: 'Failed to create tenant. Please try again.' }, { status: 500 });
127 |   }
128 | }
129 | 


--------------------------------------------------------------------------------
/app/favicon.ico:
--------------------------------------------------------------------------------
https://raw.githubusercontent.com/shoaibrain/edux/Calendar/app/favicon.ico


--------------------------------------------------------------------------------
/app/globals.css:
--------------------------------------------------------------------------------
  1 | @import "tailwindcss";
  2 | @import "tw-animate-css";
  3 | 
  4 | @custom-variant dark (&:is(.dark *));
  5 | 
  6 | @theme inline {
  7 |   --color-background: var(--background);
  8 |   --color-foreground: var(--foreground);
  9 |   --font-sans: var(--font-geist-sans);
 10 |   --font-mono: var(--font-geist-mono);
 11 |   --color-sidebar-ring: var(--sidebar-ring);
 12 |   --color-sidebar-border: var(--sidebar-border);
 13 |   --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
 14 |   --color-sidebar-accent: var(--sidebar-accent);
 15 |   --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
 16 |   --color-sidebar-primary: var(--sidebar-primary);
 17 |   --color-sidebar-foreground: var(--sidebar-foreground);
 18 |   --color-sidebar: var(--sidebar);
 19 |   --color-chart-5: var(--chart-5);
 20 |   --color-chart-4: var(--chart-4);
 21 |   --color-chart-3: var(--chart-3);
 22 |   --color-chart-2: var(--chart-2);
 23 |   --color-chart-1: var(--chart-1);
 24 |   --color-ring: var(--ring);
 25 |   --color-input: var(--input);
 26 |   --color-border: var(--border);
 27 |   --color-destructive: var(--destructive);
 28 |   --color-accent-foreground: var(--accent-foreground);
 29 |   --color-accent: var(--accent);
 30 |   --color-muted-foreground: var(--muted-foreground);
 31 |   --color-muted: var(--muted);
 32 |   --color-secondary-foreground: var(--secondary-foreground);
 33 |   --color-secondary: var(--secondary);
 34 |   --color-primary-foreground: var(--primary-foreground);
 35 |   --color-primary: var(--primary);
 36 |   --color-popover-foreground: var(--popover-foreground);
 37 |   --color-popover: var(--popover);
 38 |   --color-card-foreground: var(--card-foreground);
 39 |   --color-card: var(--card);
 40 |   --radius-sm: calc(var(--radius) - 4px);
 41 |   --radius-md: calc(var(--radius) - 2px);
 42 |   --radius-lg: var(--radius);
 43 |   --radius-xl: calc(var(--radius) + 4px);
 44 | }
 45 | 
 46 | :root {
 47 |   --radius: 0.625rem;
 48 |   --background: oklch(1 0 0);
 49 |   --foreground: oklch(0.129 0.042 264.695);
 50 |   --card: oklch(1 0 0);
 51 |   --card-foreground: oklch(0.129 0.042 264.695);
 52 |   --popover: oklch(1 0 0);
 53 |   --popover-foreground: oklch(0.129 0.042 264.695);
 54 |   --primary: oklch(0.208 0.042 265.755);
 55 |   --primary-foreground: oklch(0.984 0.003 247.858);
 56 |   --secondary: oklch(0.968 0.007 247.896);
 57 |   --secondary-foreground: oklch(0.208 0.042 265.755);
 58 |   --muted: oklch(0.968 0.007 247.896);
 59 |   --muted-foreground: oklch(0.554 0.046 257.417);
 60 |   --accent: oklch(0.968 0.007 247.896);
 61 |   --accent-foreground: oklch(0.208 0.042 265.755);
 62 |   --destructive: oklch(0.577 0.245 27.325);
 63 |   --border: oklch(0.929 0.013 255.508);
 64 |   --input: oklch(0.929 0.013 255.508);
 65 |   --ring: oklch(0.704 0.04 256.788);
 66 |   --chart-1: oklch(0.646 0.222 41.116);
 67 |   --chart-2: oklch(0.6 0.118 184.704);
 68 |   --chart-3: oklch(0.398 0.07 227.392);
 69 |   --chart-4: oklch(0.828 0.189 84.429);
 70 |   --chart-5: oklch(0.769 0.188 70.08);
 71 |   --sidebar: oklch(0.984 0.003 247.858);
 72 |   --sidebar-foreground: oklch(0.129 0.042 264.695);
 73 |   --sidebar-primary: oklch(0.208 0.042 265.755);
 74 |   --sidebar-primary-foreground: oklch(0.984 0.003 247.858);
 75 |   --sidebar-accent: oklch(0.968 0.007 247.896);
 76 |   --sidebar-accent-foreground: oklch(0.208 0.042 265.755);
 77 |   --sidebar-border: oklch(0.929 0.013 255.508);
 78 |   --sidebar-ring: oklch(0.704 0.04 256.788);
 79 | }
 80 | 
 81 | .dark {
 82 |   --background: oklch(0.129 0.042 264.695);
 83 |   --foreground: oklch(0.984 0.003 247.858);
 84 |   --card: oklch(0.208 0.042 265.755);
 85 |   --card-foreground: oklch(0.984 0.003 247.858);
 86 |   --popover: oklch(0.208 0.042 265.755);
 87 |   --popover-foreground: oklch(0.984 0.003 247.858);
 88 |   --primary: oklch(0.929 0.013 255.508);
 89 |   --primary-foreground: oklch(0.208 0.042 265.755);
 90 |   --secondary: oklch(0.279 0.041 260.031);
 91 |   --secondary-foreground: oklch(0.984 0.003 247.858);
 92 |   --muted: oklch(0.279 0.041 260.031);
 93 |   --muted-foreground: oklch(0.704 0.04 256.788);
 94 |   --accent: oklch(0.279 0.041 260.031);
 95 |   --accent-foreground: oklch(0.984 0.003 247.858);
 96 |   --destructive: oklch(0.704 0.191 22.216);
 97 |   --border: oklch(1 0 0 / 10%);
 98 |   --input: oklch(1 0 0 / 15%);
 99 |   --ring: oklch(0.551 0.027 264.364);
100 |   --chart-1: oklch(0.488 0.243 264.376);
101 |   --chart-2: oklch(0.696 0.17 162.48);
102 |   --chart-3: oklch(0.769 0.188 70.08);
103 |   --chart-4: oklch(0.627 0.265 303.9);
104 |   --chart-5: oklch(0.645 0.246 16.439);
105 |   --sidebar: oklch(0.208 0.042 265.755);
106 |   --sidebar-foreground: oklch(0.984 0.003 247.858);
107 |   --sidebar-primary: oklch(0.488 0.243 264.376);
108 |   --sidebar-primary-foreground: oklch(0.984 0.003 247.858);
109 |   --sidebar-accent: oklch(0.279 0.041 260.031);
110 |   --sidebar-accent-foreground: oklch(0.984 0.003 247.858);
111 |   --sidebar-border: oklch(1 0 0 / 10%);
112 |   --sidebar-ring: oklch(0.551 0.027 264.364);
113 | }
114 | 
115 | @layer base {
116 |   * {
117 |     @apply border-border outline-ring/50;
118 |   }
119 |   body {
120 |     @apply bg-background text-foreground;
121 |   }
122 | }
123 | 
124 | @layer base {
125 |   :root {
126 |     --background: 222.2 84% 4.9%;
127 |     --foreground: 210 40% 98%;
128 |     --card: 222.2 84% 4.9%;
129 |     --card-foreground: 210 40% 98%;
130 |     --popover: 222.2 84% 4.9%;
131 |     --popover-foreground: 210 40% 98%;
132 |     --primary: 217.2 91.2% 59.8%;
133 |     --primary-foreground: 210 40% 98%;
134 |     --secondary: 217.2 32.6% 17.5%;
135 |     --secondary-foreground: 210 40% 98%;
136 |     --muted: 217.2 32.6% 17.5%;
137 |     --muted-foreground: 215 20.2% 65.1%;
138 |     --accent: 217.2 32.6% 17.5%;
139 |     --accent-foreground: 210 40% 98%;
140 |     --destructive: 0 62.8% 30.6%;
141 |     --destructive-foreground: 0 0% 98%;
142 |     --border: 217.2 32.6% 17.5%;
143 |     --input: 217.2 32.6% 17.5%;
144 |     --ring: 224.3 76.3% 48%;
145 |     --radius: 0.5rem;
146 |   }
147 | 
148 |   .dark {
149 |     --background: 222.2 84% 4.9%;
150 |     --foreground: 210 40% 98%;
151 |     --card: 222.2 84% 4.9%;
152 |     --card-foreground: 210 40% 98%;
153 |     --popover: 222.2 84% 4.9%;
154 |     --popover-foreground: 210 40% 98%;
155 |     --primary: 217.2 91.2% 59.8%;
156 |     --primary-foreground: 210 40% 98%;
157 |     --secondary: 217.2 32.6% 17.5%;
158 |     --secondary-foreground: 210 40% 98%;
159 |     --muted: 217.2 32.6% 17.5%;
160 |     --muted-foreground: 215 20.2% 65.1%;
161 |     --accent: 217.2 32.6% 17.5%;
162 |     --accent-foreground: 210 40% 98%;
163 |     --destructive: 0 62.8% 30.6%;
164 |     --destructive-foreground: 0 0% 98%;
165 |     --border: 217.2 32.6% 17.5%;
166 |     --input: 217.2 32.6% 17.5%;
167 |     --ring: 224.3 76.3% 48%;
168 |   }
169 | }
170 | 
171 | @layer base {
172 |   * {
173 |     @apply border-border;
174 |   }
175 |   body {
176 |     @apply bg-background text-foreground;
177 |     background-color: #0A0A0A;
178 |     overflow-x: hidden;
179 |   }
180 | 
181 |   /* This is the core of the dub.co background effect */
182 |   body::before {
183 |     content: "";
184 |     position: absolute;
185 |     top: 0;
186 |     left: 0;
187 |     right: 0;
188 |     bottom: 0;
189 |     background-image:
190 |       linear-gradient(to right, rgba(255, 255, 255, 0.05) 1px, transparent 1px),
191 |       linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
192 |     background-size: 36px 36px;
193 |     -webkit-mask-image: radial-gradient(ellipse 80% 50% at 50% 0%, black 40%, transparent 100%);
194 |     mask-image: radial-gradient(ellipse 80% 50% at 50% 0%, black 40%, transparent 100%);
195 |     z-index: -1;
196 |     pointer-events: none;
197 |   }
198 | }
199 | 
200 | /* Keyframe animations for the hero section blobs */
201 | @keyframes blob {
202 |   0% {
203 |     transform: translate(0px, 0px) scale(1);
204 |   }
205 |   33% {
206 |     transform: translate(30px, -50px) scale(1.1);
207 |   }
208 |   66% {
209 |     transform: translate(-20px, 20px) scale(0.9);
210 |   }
211 |   100% {
212 |     transform: translate(0px, 0px) scale(1);
213 |   }
214 | }
215 | 
216 | .animation-delay-2000 {
217 |   animation-delay: 2s;
218 | }
219 | 
220 | .animation-delay-4000 {
221 |   animation-delay: 4s;
222 | }


--------------------------------------------------------------------------------
/app/layout.tsx:
--------------------------------------------------------------------------------
 1 | import type { Metadata } from "next";
 2 | import { GeistSans } from 'geist/font/sans';
 3 | import { GeistMono } from 'geist/font/mono';
 4 | import "./globals.css";
 5 | import { ThemeProvider } from "@/components/theme-provider";
 6 | import { Toaster } from "@/components/ui/sonner";
 7 | import { SpeedInsights } from '@vercel/speed-insights/next';
 8 | 
 9 | export const metadata: Metadata = {
10 |   title: "Scholian | The All-In-One Platform for Modern Education",
11 |   description: "Scholian provides everything your institution needs to manage students, staff, and curriculum with unparalleled ease and robust security.",
12 | };
13 | 
14 | export default function RootLayout({
15 |   children,
16 | }: Readonly<{
17 |   children: React.ReactNode;
18 | }>) {
19 |   return (
20 |     <html lang="en" className="dark" suppressHydrationWarning>
21 |       <body
22 |         className={`${GeistSans.variable} ${GeistMono.variable} font-sans antialiased bg-[#0A0A0A]`}
23 |       >
24 |         <ThemeProvider
25 |           attribute="class"
26 |           defaultTheme="dark"
27 |           enableSystem
28 |           disableTransitionOnChange
29 |         >
30 |           {/* The relative z-0 container ensures content renders above the grid background */}
31 |           <div className="relative z-0">
32 |             {children}
33 |           </div>
34 |           <SpeedInsights />
35 |           <Toaster richColors theme="dark" />
36 |         </ThemeProvider>
37 |       </body>
38 |     </html>
39 |   );
40 | }
41 | 


--------------------------------------------------------------------------------
/app/login/page.tsx:
--------------------------------------------------------------------------------
  1 | 'use client';
  2 | 
  3 | import { useState } from 'react';
  4 | import { useForm } from 'react-hook-form';
  5 | import { zodResolver } from '@hookform/resolvers/zod';
  6 | import { LoginWithTenantInput, LoginWithTenantDto } from '@/lib/dto/tenant';
  7 | import { Button } from '@/components/ui/button';
  8 | import { Input } from '@/components/ui/input';
  9 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
 10 | import { toast } from 'sonner';
 11 | import Link from 'next/link';
 12 | import { Eye, EyeOff, LoaderCircle } from 'lucide-react';
 13 | import { redirect } from 'next/navigation';
 14 | 
 15 | export default function LoginPage() {
 16 |   const [showPassword, setShowPassword] = useState(false);
 17 | 
 18 |   const form = useForm<LoginWithTenantInput>({
 19 |     resolver: zodResolver(LoginWithTenantDto),
 20 |     defaultValues: {
 21 |       tenantId: '',
 22 |       email: '',
 23 |       password: '',
 24 |     },
 25 |   });
 26 | 
 27 |   const { isSubmitting } = form.formState;
 28 | 
 29 |   const onSubmit = async (data: LoginWithTenantInput) => {
 30 |     try {
 31 |       const res = await fetch('/api/auth/login', {
 32 |         method: 'POST',
 33 |         headers: { 'Content-Type': 'application/json' },
 34 |         body: JSON.stringify(data),
 35 |       });
 36 | 
 37 |       if (res.ok) {
 38 |         toast.success('Login successful! Redirecting...');
 39 |         // Redirect to the dashboard without subdomain
 40 |         window.location.href = '/dashboard';
 41 |         // redirect('/dashboard');
 42 |       } else {
 43 |         const result = await res.json();
 44 |         toast.error(result.error || 'Login failed');
 45 |       }
 46 |     } catch (error) {
 47 |       toast.error('An unexpected error occurred.');
 48 |       console.error('Login request failed:', error);
 49 |     }
 50 |   };
 51 | 
 52 |   return (
 53 |     <div className="min-h-screen flex items-center justify-center p-4">
 54 |       <div className="w-full max-w-md">
 55 |         <div className="text-center mb-8">
 56 |           <h1 className="text-3xl font-bold text-gray-900 dark:text-white">
 57 |             Sign in to your School
 58 |           </h1>
 59 |           <p className="text-gray-500 dark:text-gray-400">Enter your credentials to access your account.</p>
 60 |         </div>
 61 |         <div className="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md border border-gray-200 dark:border-gray-700">
 62 |           <Form {...form}>
 63 |             <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
 64 |               {/* Always show the tenantId field now */}
 65 |               <FormField
 66 |                 control={form.control}
 67 |                 name="tenantId"
 68 |                 render={({ field }) => (
 69 |                   <FormItem>
 70 |                     <FormLabel>Organization ID</FormLabel>
 71 |                     <FormControl>
 72 |                       <Input placeholder="e.g., frisco-high" {...field} />
 73 |                     </FormControl>
 74 |                     <FormMessage />
 75 |                   </FormItem>
 76 |                 )}
 77 |               />
 78 |               <FormField
 79 |                 control={form.control}
 80 |                 name="email"
 81 |                 render={({ field }) => (
 82 |                   <FormItem>
 83 |                     <FormLabel>Email</FormLabel>
 84 |                     <FormControl>
 85 |                       <Input type="email" placeholder="e.g., admin@example.com" {...field} />
 86 |                     </FormControl>
 87 |                     <FormMessage />
 88 |                   </FormItem>
 89 |                 )}
 90 |               />
 91 |               <FormField
 92 |                 control={form.control}
 93 |                 name="password"
 94 |                 render={({ field }) => (
 95 |                   <FormItem>
 96 |                     <FormLabel>Password</FormLabel>
 97 |                     <div className="relative">
 98 |                       <FormControl>
 99 |                         <Input type={showPassword ? 'text' : 'password'} {...field} />
100 |                       </FormControl>
101 |                       <button
102 |                         type="button"
103 |                         onClick={() => setShowPassword(!showPassword)}
104 |                         className="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400"
105 |                       >
106 |                         {showPassword ? <EyeOff className="h-5 w-5" /> : <Eye className="h-5 w-5" />}
107 |                       </button>
108 |                     </div>
109 |                     <FormMessage />
110 |                   </FormItem>
111 |                 )}
112 |               />
113 |               <Button type="submit" className="w-full" disabled={isSubmitting}>
114 |                 {isSubmitting && <LoaderCircle className="mr-2 h-4 w-4 animate-spin" />}
115 |                 {isSubmitting ? 'Signing in...' : 'Sign In'}
116 |               </Button>
117 |             </form>
118 |           </Form>
119 |         </div>
120 |         <p className="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
121 |           Don&apos;t have an account?{' '}
122 |           <Link href="/signup" className="font-medium text-blue-600 hover:underline dark:text-blue-500">
123 |             Sign up
124 |           </Link>
125 |         </p>
126 |       </div>
127 |     </div>
128 |   );
129 | }
130 | 


--------------------------------------------------------------------------------
/app/page.tsx:
--------------------------------------------------------------------------------
 1 | import { Header } from "@/app/_components/header";
 2 | import { HeroSection } from "@/app/_components/hero-section";
 3 | import { FeaturesSection } from "@/app/_components/features-section";
 4 | import { SecuritySection } from "@/app/_components/security-section";
 5 | import { CallToActionSection } from "@/app/_components/call-to-action-section";
 6 | import { Footer } from "@/app/_components/footer";
 7 | 
 8 | export default function MarketingPage() {
 9 |   return (
10 |     <div className="flex flex-col min-h-screen">
11 |       <Header />
12 |       <main className="flex-1">
13 |         <HeroSection />
14 |         <FeaturesSection />
15 |         <SecuritySection />
16 |         <CallToActionSection />
17 |       </main>
18 |       <Footer />
19 |     </div>
20 |   );
21 | }
22 | 


--------------------------------------------------------------------------------
/app/signup/page.tsx:
--------------------------------------------------------------------------------
  1 | 'use client';
  2 | import { useForm } from 'react-hook-form';
  3 | import { zodResolver } from '@hookform/resolvers/zod';
  4 | import { TenantSignupInput, TenantSignupDto } from '@/lib/dto/tenant';
  5 | import { useState } from 'react';
  6 | import { Button } from '@/components/ui/button';
  7 | import { Input } from '@/components/ui/input';
  8 | import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
  9 | import { toast } from 'sonner';
 10 | import Link from 'next/link';
 11 | import { Eye, EyeOff, LoaderCircle } from 'lucide-react';
 12 | import { rootDomain, protocol } from '@/lib/utils';
 13 | import { cn } from '@/lib/utils';
 14 | import { redirect } from 'next/navigation';
 15 | 
 16 | export default function SignupPage() {
 17 |   const [showPassword, setShowPassword] = useState(false);
 18 | 
 19 |   const form = useForm<TenantSignupInput>({
 20 |     resolver: zodResolver(TenantSignupDto),
 21 |     defaultValues: {
 22 |       orgName: '',
 23 |       tenantId: '',
 24 |       adminName: '',
 25 |       adminEmail: '',
 26 |       adminPassword: '',
 27 |     },
 28 |   });
 29 | 
 30 |   const { isSubmitting, errors } = form.formState;
 31 | 
 32 |   const onSubmit = async (data: TenantSignupInput) => {
 33 |     try {
 34 |       const res = await fetch('/api/tenants', {
 35 |         method: 'POST',
 36 |         headers: { 'Content-Type': 'application/json' },
 37 |         body: JSON.stringify(data),
 38 |       });
 39 |       const result = await res.json();
 40 |       if (res.ok) {
 41 |         toast.success(`Tenant "${data.orgName}" created successfully! Redirecting...`);
 42 |         // TODO: For future subdomain implementation, the redirect would be:
 43 |         // window.location.href = `${protocol}://${data.tenantId}.${rootDomain}/login`;
 44 |         
 45 |         // For now, redirect to the main login page
 46 |         window.location.href = '/login';
 47 |         
 48 |       } else {
 49 |         toast.error(result.error || 'Error creating tenant');
 50 |         if (res.status === 409) {
 51 |           form.setError('tenantId', {
 52 |             type: 'server',
 53 |             message: result.error,
 54 |           });
 55 |         } else if (result.details) {
 56 |           result.details.issues.forEach((issue: { path: (string | number)[]; message: string; }) => {
 57 |             if (issue.path && issue.path.length > 0) {
 58 |               form.setError(issue.path[0] as keyof TenantSignupInput, {
 59 |                 type: 'server',
 60 |                 message: issue.message,
 61 |               });
 62 |             }
 63 |           });
 64 |         }
 65 |       }
 66 |     } catch (error) {
 67 |       console.error('Signup request failed:', error);
 68 |       toast.error('An unexpected error occurred. Please try again.');
 69 |     }
 70 |   };
 71 | 
 72 |   return (
 73 |     <div className="min-h-screen flex items-center justify-center p-4">
 74 |       <div className="w-full max-w-md">
 75 |         <div className="text-center mb-8">
 76 |           <h1 className="text-3xl font-bold text-gray-900 dark:text-white">Create your School</h1>
 77 |           <p className="text-gray-500 dark:text-gray-400">Start your 14-day free trial today.</p>
 78 |         </div>
 79 |         <div className="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md border border-gray-200 dark:border-gray-700">
 80 |           <Form {...form}>
 81 |             <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
 82 |               <FormField
 83 |                 control={form.control}
 84 |                 name="orgName"
 85 |                 render={({ field }) => (
 86 |                   <FormItem>
 87 |                     <FormLabel>Organization Name</FormLabel>
 88 |                     <FormControl>
 89 |                       <Input placeholder="e.g., EduX Academy" {...field} />
 90 |                     </FormControl>
 91 |                     <FormMessage />
 92 |                   </FormItem>
 93 |                 )}
 94 |               />
 95 |               <FormField
 96 |                 control={form.control}
 97 |                 name="tenantId"
 98 |                 render={({ field }) => (
 99 |                   <FormItem>
100 |                     <FormLabel>Subdomain</FormLabel>
101 |                     <div className="flex items-center">
102 |                       <FormControl>
103 |                         <Input 
104 |                           placeholder="your-school" 
105 |                           {...field} 
106 |                           className={cn("rounded-r-none", errors.tenantId && "border-red-500 focus-visible:ring-red-500")}
107 |                         />
108 |                       </FormControl>
109 |                       {/* This part can be removed if you don't want to show the root domain */}
110 |                       <span className={cn("inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 text-sm h-10", errors.tenantId && "border-red-500")}>
111 |                         .{rootDomain}
112 |                       </span>
113 |                     </div>
114 |                     <FormMessage />
115 |                   </FormItem>
116 |                 )}
117 |               />
118 |               <FormField
119 |                 control={form.control}
120 |                 name="adminName"
121 |                 render={({ field }) => (
122 |                   <FormItem>
123 |                     <FormLabel>Your Name</FormLabel>
124 |                     <FormControl>
125 |                       <Input placeholder="e.g., John Doe" {...field} />
126 |                     </FormControl>
127 |                     <FormMessage />
128 |                   </FormItem>
129 |                 )}
130 |               />
131 |               <FormField
132 |                 control={form.control}
133 |                 name="adminEmail"
134 |                 render={({ field }) => (
135 |                   <FormItem>
136 |                     <FormLabel>Email</FormLabel>
137 |                     <FormControl>
138 |                       <Input type="email" placeholder="e.g., admin@example.com" {...field} />
139 |                     </FormControl>
140 |                     <FormMessage />
141 |                   </FormItem>
142 |                 )}
143 |               />
144 |               <FormField
145 |                 control={form.control}
146 |                 name="adminPassword"
147 |                 render={({ field }) => (
148 |                   <FormItem>
149 |                     <FormLabel>Password</FormLabel>
150 |                     <div className="relative">
151 |                       <FormControl>
152 |                         <Input type={showPassword ? 'text' : 'password'} placeholder="Minimum 8 characters" {...field} />
153 |                       </FormControl>
154 |                       <button
155 |                         type="button"
156 |                         onClick={() => setShowPassword(!showPassword)}
157 |                         className="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400"
158 |                       >
159 |                         {showPassword ? <EyeOff className="h-5 w-5" /> : <Eye className="h-5 w-5" />}
160 |                       </button>
161 |                     </div>
162 |                     <FormMessage />
163 |                   </FormItem>
164 |                 )}
165 |               />
166 |               <Button
167 |                 type="submit"
168 |                 className="w-full"
169 |                 disabled={isSubmitting}
170 |               >
171 |                 {isSubmitting && <LoaderCircle className="mr-2 h-4 w-4 animate-spin" />}
172 |                 {isSubmitting ? 'Creating Account...' : 'Create Account'}
173 |               </Button>
174 |             </form>
175 |           </Form>
176 |         </div>
177 |         <p className="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">
178 |           Already have an account?{' '}
179 |           <Link href="/login" className="font-medium text-blue-600 hover:underline dark:text-blue-500">
180 |             Log in
181 |           </Link>
182 |         </p>
183 |       </div>
184 |     </div>
185 |   );
186 | }
187 | 


--------------------------------------------------------------------------------
/components.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "$schema": "https://ui.shadcn.com/schema.json",
 3 |   "style": "new-york",
 4 |   "rsc": true,
 5 |   "tsx": true,
 6 |   "tailwind": {
 7 |     "config": "",
 8 |     "css": "app/globals.css",
 9 |     "baseColor": "slate",
10 |     "cssVariables": true,
11 |     "prefix": ""
12 |   },
13 |   "aliases": {
14 |     "components": "@/components",
15 |     "utils": "@/lib/utils",
16 |     "ui": "@/components/ui",
17 |     "lib": "@/lib",
18 |     "hooks": "@/hooks"
19 |   },
20 |   "iconLibrary": "lucide"
21 | }


--------------------------------------------------------------------------------
/components/app-sidebar.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import { Rocket, PanelLeft } from "lucide-react"
 5 | 
 6 | import { type UserSession } from "@/lib/session"
 7 | import { useTenant } from "@/components/tenant-provider"
 8 | import { MainNav } from "./sidebar-nav"
 9 | import {
10 |   Sidebar,
11 |   SidebarContent,
12 |   SidebarFooter,
13 |   SidebarHeader,
14 |   SidebarMenu,
15 |   SidebarMenuButton,
16 |   SidebarMenuItem,
17 |   SidebarTrigger,
18 | } from "@/components/ui/sidebar"
19 | import { cn } from "@/lib/utils"
20 | import { buttonVariants } from "@/components/ui/button"
21 | import { useNavigation } from "@/components/navigation-provider"
22 | 
23 | interface AppSidebarProps extends React.ComponentProps<typeof Sidebar> {
24 |     user: UserSession;
25 | }
26 | /**
27 |  * @param param0 - The user session object containing user permissions and details.
28 |  * @param props - Additional props for the sidebar component.
29 |  * @returns  - A sidebar component that displays navigation items based on user permissions.
30 |  */
31 | export function AppSidebar({ user, ...props }: AppSidebarProps) {
32 |   const { user: currentUserSession } = useTenant();
33 |   const { items: allNavItems } = useNavigation();
34 | 
35 |   console.debug("[AppSidebar] User permissions:", currentUserSession?.permissions);
36 |   console.debug("[AppSidebar] All nav items from context:", allNavItems);
37 | 
38 |   const navItems = allNavItems.filter(item => {
39 |     if (!item.requiredPermission) {
40 |       return true;
41 |     }
42 |     return currentUserSession?.permissions?.includes(item.requiredPermission);
43 |   });
44 | 
45 |   console.log("[AppSidebar] Filtered nav items:", navItems);
46 | 
47 |   return (
48 |     <Sidebar collapsible="icon" {...props}>
49 |       <SidebarHeader>
50 |         <SidebarMenu>
51 |           <SidebarMenuItem>
52 |             <SidebarMenuButton size="lg" asChild>
53 |               <a href="/dashboard">
54 |                 <div className="flex size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground">
55 |                   <Rocket className="size-4" />
56 |                 </div>
57 | 
58 |                 <div className="flex flex-col gap-0.5 leading-none group-data-[collapsible=icon]:hidden">
59 |                   <span className="font-semibold">EduX</span>
60 |                   <span className="text-xs text-muted-foreground">Tenant Portal</span>
61 |                 </div>
62 |               </a>
63 |             </SidebarMenuButton>
64 |           </SidebarMenuItem>
65 |         </SidebarMenu>
66 |       </SidebarHeader>
67 |       <SidebarContent>
68 |         <MainNav items={navItems} />
69 |       </SidebarContent>
70 | 
71 |       <SidebarFooter className="p-2 hidden md:block">
72 |         <SidebarTrigger
73 |           className={cn(
74 |             buttonVariants({ variant: "ghost", size: "default" }),
75 |             "w-full justify-start"
76 |           )}
77 |         >
78 |           <PanelLeft className="mr-2 size-4" />
79 |           <span className="group-data-[collapsible=icon]:hidden">
80 |             Collapse
81 |           </span>
82 |         </SidebarTrigger>
83 |       </SidebarFooter>
84 |     </Sidebar>
85 |   )
86 | }


--------------------------------------------------------------------------------
/components/breadcrumbs.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import { usePathname } from "next/navigation";
 4 | import Link from "next/link";
 5 | import { Fragment } from "react";
 6 | 
 7 | export function Breadcrumbs() {
 8 |     const pathname = usePathname();
 9 |     const segments = pathname.split('/').filter(Boolean);
10 | 
11 |     return (
12 |         <nav aria-label="Breadcrumb">
13 |             <ol className="flex items-center gap-1 text-sm text-muted-foreground">
14 |                 <li><Link href="/dashboard" className="hover:text-foreground capitalize">{segments[0] || 'Dashboard'}</Link></li>
15 |                 {segments.slice(1).map((segment, index) => {
16 |                     const href = `/${segments.slice(0, index + 2).join('/')}`;
17 |                     const isLast = index === segments.length - 2;
18 |                     return (
19 |                         <Fragment key={href}>
20 |                             <li className="text-muted-foreground">/</li>
21 |                             <li>
22 |                                 {isLast ? (
23 |                                     <span className="font-medium text-foreground capitalize">{segment}</span>
24 |                                 ) : (
25 |                                     <Link href={href} className="hover:text-foreground capitalize">{segment}</Link>
26 |                                 )}
27 |                             </li>
28 |                         </Fragment>
29 |                     );
30 |                 })}
31 |             </ol>
32 |         </nav>
33 |     );
34 | }


--------------------------------------------------------------------------------
/components/logout-button.tsx:
--------------------------------------------------------------------------------
 1 | 'use client';
 2 | 
 3 | import { logout } from '@/lib/actions/auth';
 4 | import { DropdownMenuItem } from './ui/dropdown-menu';
 5 | 
 6 | export default function LogoutButton() {
 7 |   return (
 8 |     <DropdownMenuItem onSelect={() => logout()}>
 9 |       Logout
10 |     </DropdownMenuItem>
11 |   );
12 | }


--------------------------------------------------------------------------------
/components/mobile-nav.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import Link from "next/link";
 4 | import { usePathname } from "next/navigation";
 5 | import {
 6 |   PanelLeft,
 7 |   Rocket,
 8 |   Home,
 9 |   Users,
10 |   Folder,
11 |   Settings,
12 |   DollarSign, 
13 |   Plug,       
14 | } from "lucide-react"
15 | import {
16 |   Sheet,
17 |   SheetContent,
18 |   SheetTrigger,
19 | } from "@/components/ui/sheet"
20 | import { Button } from "./ui/button";
21 | import { cn } from "@/lib/utils";
22 | import { useTenant } from "@/components/tenant-provider"; 
23 | 
24 | export function MobileNav() {
25 |     const { user: currentUserSession } = useTenant(); 
26 | 
27 |     const allNavItems = [
28 |         { title: "Dashboard", url: "/dashboard", icon: <Home className="h-5 w-5" />, requiredPermission: 'dashboard:view' },
29 |         { title: "People", url: "/dashboard/people", icon: <Users className="h-5 w-5" />, requiredPermission: 'person:read' }, // Updated permission to 'person:read'
30 |         { title: "Roles", url: "/dashboard/roles", icon: <Folder className="h-5 w-5" />, requiredPermission: 'role:read' },
31 |         { title: "Schools", url: "/dashboard/schools", icon: <Home className="h-5 w-5" />, requiredPermission: 'school:read' },
32 |         { title: "Billings", url: "/dashboard/billing", icon: <DollarSign className="h-5 w-5" />, requiredPermission: 'tenant:view_billing' },
33 |         { title: "Integrations", url: "/dashboard/integrations", icon: <Plug className="h-5 w-5" />, requiredPermission: 'tenant:manage' },
34 |         { title: "Settings", url: "/dashboard/settings", icon: <Settings className="h-5 w-5" />, requiredPermission: null },
35 |     ];
36 | 
37 |     const navItems = allNavItems.filter(item => {
38 |         if (!item.requiredPermission) {
39 |             return true; 
40 |         }
41 |         return currentUserSession.permissions.includes(item.requiredPermission);
42 |     });
43 | 
44 |     return (
45 |         <Sheet>
46 |             <SheetTrigger asChild>
47 |               <Button size="icon" variant="outline" className="sm:hidden">
48 |                 <PanelLeft className="h-5 w-5" />
49 |                 <span className="sr-only">Toggle Menu</span>
50 |               </Button>
51 |             </SheetTrigger>
52 |             <SheetContent side="left" className="sm:max-w-xs p-0">
53 |               <nav className="grid gap-6 text-lg font-medium p-4">
54 |                 <Link href="/dashboard" className="group flex h-10 w-10 shrink-0 items-center justify-center gap-2 rounded-full bg-primary text-lg font-semibold text-primary-foreground md:text-base">
55 |                   <Rocket className="h-5 w-5 transition-all group-hover:scale-110" />
56 |                   <span className="sr-only">EduX</span>
57 |                 </Link>
58 |                 {navItems.map(item => (
59 |                     <MobileLink key={item.url} href={item.url} icon={item.icon}>
60 |                         {item.title}
61 |                     </MobileLink>
62 |                 ))}
63 |               </nav>
64 |             </SheetContent>
65 |         </Sheet>
66 |     )
67 | }
68 | 
69 | function MobileLink({ href, children, icon }: { href: string; children: React.ReactNode; icon: React.ReactNode }) {
70 |     const pathname = usePathname();
71 |     const isActive = pathname === href;
72 | 
73 |     return (
74 |         <Link 
75 |             href={href} 
76 |             className={cn(
77 |                 "flex items-center gap-4 px-2.5 hover:text-foreground",
78 |                 isActive ? "text-foreground" : "text-muted-foreground",
79 |             )}
80 |         >
81 |             {icon}
82 |             {children}
83 |         </Link>
84 |     )
85 | }
86 | 


--------------------------------------------------------------------------------
/components/navigation-provider.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import * as React from "react";
 4 | import { 
 5 |   Home, Users, Folder, DollarSign, Plug, Settings, BookOpen, 
 6 |   Calendar, UserCheck, Building, GraduationCap, ClipboardList 
 7 | } from "lucide-react";
 8 | 
 9 | // Centralized map of all icons used for navigation
10 | export const iconMap = {
11 |   Home,
12 |   Users,
13 |   Folder,
14 |   DollarSign,
15 |   Plug,
16 |   Settings,
17 |   BookOpen,       // For Academics
18 |   Calendar,       // For Calendar
19 |   UserCheck,      // For Staff
20 |   Building,       // For Departments
21 |   GraduationCap,  // For Students
22 |   ClipboardList,  // For Classes
23 | };
24 | 
25 | export type IconName = keyof typeof iconMap;
26 | 
27 | export interface NavItem {
28 |   title: string;
29 |   url: string;
30 |   iconName: IconName;
31 |   requiredPermission: string | null;
32 | }
33 | 
34 | interface NavigationContextType {
35 |   items: NavItem[];
36 | }
37 | 
38 | const NavigationContext = React.createContext<NavigationContextType | undefined>(
39 |   undefined
40 | );
41 | 
42 | export function NavigationProvider({
43 |   children,
44 |   initialItems = [],
45 | }: {
46 |   children: React.ReactNode;
47 |   initialItems?: NavItem[];
48 | }) {
49 |   const [items] = React.useState<NavItem[]>(initialItems);
50 | 
51 |   return (
52 |     <NavigationContext.Provider value={{ items }}>
53 |       {children}
54 |     </NavigationContext.Provider>
55 |   );
56 | }
57 | 
58 | export function useNavigation() {
59 |   const context = React.useContext(NavigationContext);
60 |   if (context === undefined) {
61 |     throw new Error("useNavigation must be used within a NavigationProvider");
62 |   }
63 |   return context;
64 | }


--------------------------------------------------------------------------------
/components/sidebar-nav.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import Link from "next/link"
 4 | import { usePathname } from "next/navigation"
 5 | import { cn } from "@/lib/utils"
 6 | import {
 7 |   SidebarMenu,
 8 |   SidebarMenuButton,
 9 |   SidebarMenuItem,
10 | } from "@/components/ui/sidebar"
11 | import { NavItem, iconMap } from "@/components/navigation-provider"
12 | 
13 | interface MainNavProps {
14 |   items: NavItem[]
15 | }
16 | 
17 | export function MainNav({ items }: MainNavProps) {
18 |   const pathname = usePathname()
19 | 
20 |   if (!items?.length) {
21 |     return null
22 |   }
23 | 
24 |   return (
25 |     <SidebarMenu>
26 |       {items.map((item, index) => {
27 |         const Icon = iconMap[item.iconName]
28 |         // An item is active if the current path is the item's URL,
29 |         // or if it's a parent path (and not the root dashboard URL).
30 |         const isActive = pathname === item.url || (item.url !== '/dashboard' && pathname.startsWith(item.url))
31 | 
32 |         return (
33 |           <SidebarMenuItem key={index}>
34 |             <SidebarMenuButton
35 |               
36 |               className="w-full justify-start"
37 |               asChild
38 |             >
39 |               <Link href={item.url}>
40 |                 {Icon && <Icon className="mr-2 size-4" />}
41 |                 <span>{item.title}</span>
42 |               </Link>
43 |             </SidebarMenuButton>
44 |           </SidebarMenuItem>
45 |         )
46 |       })}
47 |     </SidebarMenu>
48 |   )
49 | }


--------------------------------------------------------------------------------
/components/tenant-provider.tsx:
--------------------------------------------------------------------------------
 1 | "use client";
 2 | 
 3 | import { createContext, useContext, ReactNode } from 'react';
 4 | import { type UserSession } from '@/lib/session';
 5 | 
 6 | // Define the shape of the context data
 7 | export interface TenantContextType {
 8 |   user: UserSession;
 9 |   tenant: {
10 |     id: string;
11 |     tenantId: string;
12 |     name: string;
13 |   };
14 | }
15 | 
16 | // Create the context with a null default value
17 | const TenantContext = createContext<TenantContextType | null>(null);
18 | 
19 | // The provider component that will wrap our dashboard layout
20 | export function TenantProvider({ children, value }: { children: ReactNode; value: TenantContextType }) {
21 |   return (
22 |     <TenantContext.Provider value={value}>
23 |       {children}
24 |     </TenantContext.Provider>
25 |   );
26 | }
27 | 
28 | // The custom hook that client components will use to access the data
29 | export function useTenant() {
30 |   const context = useContext(TenantContext);
31 |   if (context === null) {
32 |     throw new Error("useTenant must be used within a TenantProvider");
33 |   }
34 |   return context;
35 | }


--------------------------------------------------------------------------------
/components/theme-provider.tsx:
--------------------------------------------------------------------------------
1 | "use client"
2 | 
3 | import * as React from "react"
4 | import { ThemeProvider as NextThemesProvider, ThemeProviderProps } from "next-themes"
5 | 
6 | 
7 | export function ThemeProvider({ children, ...props }: ThemeProviderProps) {
8 |   return <NextThemesProvider {...props}>{children}</NextThemesProvider>
9 | }


--------------------------------------------------------------------------------
/components/theme-toggle.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import { Moon, Sun } from "lucide-react"
 5 | import { useTheme } from "next-themes"
 6 | 
 7 | import { Button } from "@/components/ui/button"
 8 | import {
 9 |   DropdownMenu,
10 |   DropdownMenuContent,
11 |   DropdownMenuItem,
12 |   DropdownMenuTrigger,
13 | } from "@/components/ui/dropdown-menu"
14 | 
15 | export function ThemeToggle() {
16 |   const { setTheme } = useTheme()
17 | 
18 |   return (
19 |     <DropdownMenu>
20 |       <DropdownMenuTrigger asChild>
21 |         <Button variant="outline" size="icon">
22 |           <Sun className="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0" />
23 |           <Moon className="absolute h-[0.5rem] w-[0.5rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100" />
24 |           <span className="sr-only">Toggle theme</span>
25 |         </Button>
26 |       </DropdownMenuTrigger>
27 |       <DropdownMenuContent align="end">
28 |         <DropdownMenuItem onClick={() => setTheme("light")}>
29 |           Light
30 |         </DropdownMenuItem>
31 |         <DropdownMenuItem onClick={() => setTheme("dark")}>
32 |           Dark
33 |         </DropdownMenuItem>
34 |         <DropdownMenuItem onClick={() => setTheme("system")}>
35 |           System
36 |         </DropdownMenuItem>
37 |       </DropdownMenuContent>
38 |     </DropdownMenu>
39 |   )
40 | }


--------------------------------------------------------------------------------
/components/ui/alert.tsx:
--------------------------------------------------------------------------------
 1 | import * as React from "react"
 2 | import { cva, type VariantProps } from "class-variance-authority"
 3 | 
 4 | import { cn } from "@/lib/utils"
 5 | 
 6 | const alertVariants = cva(
 7 |   "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
 8 |   {
 9 |     variants: {
10 |       variant: {
11 |         default: "bg-card text-card-foreground",
12 |         destructive:
13 |           "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
14 |       },
15 |     },
16 |     defaultVariants: {
17 |       variant: "default",
18 |     },
19 |   }
20 | )
21 | 
22 | function Alert({
23 |   className,
24 |   variant,
25 |   ...props
26 | }: React.ComponentProps<"div"> & VariantProps<typeof alertVariants>) {
27 |   return (
28 |     <div
29 |       data-slot="alert"
30 |       role="alert"
31 |       className={cn(alertVariants({ variant }), className)}
32 |       {...props}
33 |     />
34 |   )
35 | }
36 | 
37 | function AlertTitle({ className, ...props }: React.ComponentProps<"div">) {
38 |   return (
39 |     <div
40 |       data-slot="alert-title"
41 |       className={cn(
42 |         "col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",
43 |         className
44 |       )}
45 |       {...props}
46 |     />
47 |   )
48 | }
49 | 
50 | function AlertDescription({
51 |   className,
52 |   ...props
53 | }: React.ComponentProps<"div">) {
54 |   return (
55 |     <div
56 |       data-slot="alert-description"
57 |       className={cn(
58 |         "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
59 |         className
60 |       )}
61 |       {...props}
62 |     />
63 |   )
64 | }
65 | 
66 | export { Alert, AlertTitle, AlertDescription }
67 | 


--------------------------------------------------------------------------------
/components/ui/avatar.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as AvatarPrimitive from "@radix-ui/react-avatar"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function Avatar({
 9 |   className,
10 |   ...props
11 | }: React.ComponentProps<typeof AvatarPrimitive.Root>) {
12 |   return (
13 |     <AvatarPrimitive.Root
14 |       data-slot="avatar"
15 |       className={cn(
16 |         "relative flex size-8 shrink-0 overflow-hidden rounded-full",
17 |         className
18 |       )}
19 |       {...props}
20 |     />
21 |   )
22 | }
23 | 
24 | function AvatarImage({
25 |   className,
26 |   ...props
27 | }: React.ComponentProps<typeof AvatarPrimitive.Image>) {
28 |   return (
29 |     <AvatarPrimitive.Image
30 |       data-slot="avatar-image"
31 |       className={cn("aspect-square size-full", className)}
32 |       {...props}
33 |     />
34 |   )
35 | }
36 | 
37 | function AvatarFallback({
38 |   className,
39 |   ...props
40 | }: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
41 |   return (
42 |     <AvatarPrimitive.Fallback
43 |       data-slot="avatar-fallback"
44 |       className={cn(
45 |         "bg-muted flex size-full items-center justify-center rounded-full",
46 |         className
47 |       )}
48 |       {...props}
49 |     />
50 |   )
51 | }
52 | 
53 | export { Avatar, AvatarImage, AvatarFallback }
54 | 


--------------------------------------------------------------------------------
/components/ui/badge.tsx:
--------------------------------------------------------------------------------
 1 | import * as React from "react"
 2 | import { Slot } from "@radix-ui/react-slot"
 3 | import { cva, type VariantProps } from "class-variance-authority"
 4 | 
 5 | import { cn } from "@/lib/utils"
 6 | 
 7 | const badgeVariants = cva(
 8 |   "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
 9 |   {
10 |     variants: {
11 |       variant: {
12 |         default:
13 |           "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
14 |         secondary:
15 |           "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
16 |         destructive:
17 |           "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
18 |         outline:
19 |           "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
20 |       },
21 |     },
22 |     defaultVariants: {
23 |       variant: "default",
24 |     },
25 |   }
26 | )
27 | 
28 | function Badge({
29 |   className,
30 |   variant,
31 |   asChild = false,
32 |   ...props
33 | }: React.ComponentProps<"span"> &
34 |   VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
35 |   const Comp = asChild ? Slot : "span"
36 | 
37 |   return (
38 |     <Comp
39 |       data-slot="badge"
40 |       className={cn(badgeVariants({ variant }), className)}
41 |       {...props}
42 |     />
43 |   )
44 | }
45 | 
46 | export { Badge, badgeVariants }
47 | 


--------------------------------------------------------------------------------
/components/ui/breadcrumb.tsx:
--------------------------------------------------------------------------------
  1 | import * as React from "react"
  2 | import { Slot } from "@radix-ui/react-slot"
  3 | import { ChevronRight, MoreHorizontal } from "lucide-react"
  4 | 
  5 | import { cn } from "@/lib/utils"
  6 | 
  7 | function Breadcrumb({ ...props }: React.ComponentProps<"nav">) {
  8 |   return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />
  9 | }
 10 | 
 11 | function BreadcrumbList({ className, ...props }: React.ComponentProps<"ol">) {
 12 |   return (
 13 |     <ol
 14 |       data-slot="breadcrumb-list"
 15 |       className={cn(
 16 |         "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
 17 |         className
 18 |       )}
 19 |       {...props}
 20 |     />
 21 |   )
 22 | }
 23 | 
 24 | function BreadcrumbItem({ className, ...props }: React.ComponentProps<"li">) {
 25 |   return (
 26 |     <li
 27 |       data-slot="breadcrumb-item"
 28 |       className={cn("inline-flex items-center gap-1.5", className)}
 29 |       {...props}
 30 |     />
 31 |   )
 32 | }
 33 | 
 34 | function BreadcrumbLink({
 35 |   asChild,
 36 |   className,
 37 |   ...props
 38 | }: React.ComponentProps<"a"> & {
 39 |   asChild?: boolean
 40 | }) {
 41 |   const Comp = asChild ? Slot : "a"
 42 | 
 43 |   return (
 44 |     <Comp
 45 |       data-slot="breadcrumb-link"
 46 |       className={cn("hover:text-foreground transition-colors", className)}
 47 |       {...props}
 48 |     />
 49 |   )
 50 | }
 51 | 
 52 | function BreadcrumbPage({ className, ...props }: React.ComponentProps<"span">) {
 53 |   return (
 54 |     <span
 55 |       data-slot="breadcrumb-page"
 56 |       role="link"
 57 |       aria-disabled="true"
 58 |       aria-current="page"
 59 |       className={cn("text-foreground font-normal", className)}
 60 |       {...props}
 61 |     />
 62 |   )
 63 | }
 64 | 
 65 | function BreadcrumbSeparator({
 66 |   children,
 67 |   className,
 68 |   ...props
 69 | }: React.ComponentProps<"li">) {
 70 |   return (
 71 |     <li
 72 |       data-slot="breadcrumb-separator"
 73 |       role="presentation"
 74 |       aria-hidden="true"
 75 |       className={cn("[&>svg]:size-3.5", className)}
 76 |       {...props}
 77 |     >
 78 |       {children ?? <ChevronRight />}
 79 |     </li>
 80 |   )
 81 | }
 82 | 
 83 | function BreadcrumbEllipsis({
 84 |   className,
 85 |   ...props
 86 | }: React.ComponentProps<"span">) {
 87 |   return (
 88 |     <span
 89 |       data-slot="breadcrumb-ellipsis"
 90 |       role="presentation"
 91 |       aria-hidden="true"
 92 |       className={cn("flex size-9 items-center justify-center", className)}
 93 |       {...props}
 94 |     >
 95 |       <MoreHorizontal className="size-4" />
 96 |       <span className="sr-only">More</span>
 97 |     </span>
 98 |   )
 99 | }
100 | 
101 | export {
102 |   Breadcrumb,
103 |   BreadcrumbList,
104 |   BreadcrumbItem,
105 |   BreadcrumbLink,
106 |   BreadcrumbPage,
107 |   BreadcrumbSeparator,
108 |   BreadcrumbEllipsis,
109 | }
110 | 


--------------------------------------------------------------------------------
/components/ui/button.tsx:
--------------------------------------------------------------------------------
 1 | import * as React from "react"
 2 | import { Slot } from "@radix-ui/react-slot"
 3 | import { cva, type VariantProps } from "class-variance-authority"
 4 | 
 5 | import { cn } from "@/lib/utils"
 6 | 
 7 | const buttonVariants = cva(
 8 |   "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
 9 |   {
10 |     variants: {
11 |       variant: {
12 |         default:
13 |           "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
14 |         destructive:
15 |           "bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
16 |         outline:
17 |           "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
18 |         secondary:
19 |           "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
20 |         ghost:
21 |           "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
22 |         link: "text-primary underline-offset-4 hover:underline",
23 |       },
24 |       size: {
25 |         default: "h-9 px-4 py-2 has-[>svg]:px-3",
26 |         sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
27 |         lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
28 |         icon: "size-9",
29 |       },
30 |     },
31 |     defaultVariants: {
32 |       variant: "default",
33 |       size: "default",
34 |     },
35 |   }
36 | )
37 | 
38 | function Button({
39 |   className,
40 |   variant,
41 |   size,
42 |   asChild = false,
43 |   ...props
44 | }: React.ComponentProps<"button"> &
45 |   VariantProps<typeof buttonVariants> & {
46 |     asChild?: boolean
47 |   }) {
48 |   const Comp = asChild ? Slot : "button"
49 | 
50 |   return (
51 |     <Comp
52 |       data-slot="button"
53 |       className={cn(buttonVariants({ variant, size, className }))}
54 |       {...props}
55 |     />
56 |   )
57 | }
58 | 
59 | export { Button, buttonVariants }
60 | 


--------------------------------------------------------------------------------
/components/ui/card.tsx:
--------------------------------------------------------------------------------
 1 | import * as React from "react"
 2 | 
 3 | import { cn } from "@/lib/utils"
 4 | 
 5 | function Card({ className, ...props }: React.ComponentProps<"div">) {
 6 |   return (
 7 |     <div
 8 |       data-slot="card"
 9 |       className={cn(
10 |         "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",
11 |         className
12 |       )}
13 |       {...props}
14 |     />
15 |   )
16 | }
17 | 
18 | function CardHeader({ className, ...props }: React.ComponentProps<"div">) {
19 |   return (
20 |     <div
21 |       data-slot="card-header"
22 |       className={cn(
23 |         "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
24 |         className
25 |       )}
26 |       {...props}
27 |     />
28 |   )
29 | }
30 | 
31 | function CardTitle({ className, ...props }: React.ComponentProps<"div">) {
32 |   return (
33 |     <div
34 |       data-slot="card-title"
35 |       className={cn("leading-none font-semibold", className)}
36 |       {...props}
37 |     />
38 |   )
39 | }
40 | 
41 | function CardDescription({ className, ...props }: React.ComponentProps<"div">) {
42 |   return (
43 |     <div
44 |       data-slot="card-description"
45 |       className={cn("text-muted-foreground text-sm", className)}
46 |       {...props}
47 |     />
48 |   )
49 | }
50 | 
51 | function CardAction({ className, ...props }: React.ComponentProps<"div">) {
52 |   return (
53 |     <div
54 |       data-slot="card-action"
55 |       className={cn(
56 |         "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
57 |         className
58 |       )}
59 |       {...props}
60 |     />
61 |   )
62 | }
63 | 
64 | function CardContent({ className, ...props }: React.ComponentProps<"div">) {
65 |   return (
66 |     <div
67 |       data-slot="card-content"
68 |       className={cn("px-6", className)}
69 |       {...props}
70 |     />
71 |   )
72 | }
73 | 
74 | function CardFooter({ className, ...props }: React.ComponentProps<"div">) {
75 |   return (
76 |     <div
77 |       data-slot="card-footer"
78 |       className={cn("flex items-center px-6 [.border-t]:pt-6", className)}
79 |       {...props}
80 |     />
81 |   )
82 | }
83 | 
84 | export {
85 |   Card,
86 |   CardHeader,
87 |   CardFooter,
88 |   CardTitle,
89 |   CardAction,
90 |   CardDescription,
91 |   CardContent,
92 | }
93 | 


--------------------------------------------------------------------------------
/components/ui/checkbox.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
 5 | import { CheckIcon } from "lucide-react"
 6 | 
 7 | import { cn } from "@/lib/utils"
 8 | 
 9 | function Checkbox({
10 |   className,
11 |   ...props
12 | }: React.ComponentProps<typeof CheckboxPrimitive.Root>) {
13 |   return (
14 |     <CheckboxPrimitive.Root
15 |       data-slot="checkbox"
16 |       className={cn(
17 |         "peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
18 |         className
19 |       )}
20 |       {...props}
21 |     >
22 |       <CheckboxPrimitive.Indicator
23 |         data-slot="checkbox-indicator"
24 |         className="flex items-center justify-center text-current transition-none"
25 |       >
26 |         <CheckIcon className="size-3.5" />
27 |       </CheckboxPrimitive.Indicator>
28 |     </CheckboxPrimitive.Root>
29 |   )
30 | }
31 | 
32 | export { Checkbox }
33 | 


--------------------------------------------------------------------------------
/components/ui/collapsible.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"
 4 | 
 5 | function Collapsible({
 6 |   ...props
 7 | }: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
 8 |   return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />
 9 | }
10 | 
11 | function CollapsibleTrigger({
12 |   ...props
13 | }: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
14 |   return (
15 |     <CollapsiblePrimitive.CollapsibleTrigger
16 |       data-slot="collapsible-trigger"
17 |       {...props}
18 |     />
19 |   )
20 | }
21 | 
22 | function CollapsibleContent({
23 |   ...props
24 | }: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
25 |   return (
26 |     <CollapsiblePrimitive.CollapsibleContent
27 |       data-slot="collapsible-content"
28 |       {...props}
29 |     />
30 |   )
31 | }
32 | 
33 | export { Collapsible, CollapsibleTrigger, CollapsibleContent }
34 | 


--------------------------------------------------------------------------------
/components/ui/command.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import { Command as CommandPrimitive } from "cmdk"
  5 | import { SearchIcon } from "lucide-react"
  6 | 
  7 | import { cn } from "@/lib/utils"
  8 | import {
  9 |   Dialog,
 10 |   DialogContent,
 11 |   DialogDescription,
 12 |   DialogHeader,
 13 |   DialogTitle,
 14 | } from "@/components/ui/dialog"
 15 | 
 16 | function Command({
 17 |   className,
 18 |   ...props
 19 | }: React.ComponentProps<typeof CommandPrimitive>) {
 20 |   return (
 21 |     <CommandPrimitive
 22 |       data-slot="command"
 23 |       className={cn(
 24 |         "bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",
 25 |         className
 26 |       )}
 27 |       {...props}
 28 |     />
 29 |   )
 30 | }
 31 | 
 32 | function CommandDialog({
 33 |   title = "Command Palette",
 34 |   description = "Search for a command to run...",
 35 |   children,
 36 |   className,
 37 |   showCloseButton = true,
 38 |   ...props
 39 | }: React.ComponentProps<typeof Dialog> & {
 40 |   title?: string
 41 |   description?: string
 42 |   className?: string
 43 |   showCloseButton?: boolean
 44 | }) {
 45 |   return (
 46 |     <Dialog {...props}>
 47 |       <DialogHeader className="sr-only">
 48 |         <DialogTitle>{title}</DialogTitle>
 49 |         <DialogDescription>{description}</DialogDescription>
 50 |       </DialogHeader>
 51 |       <DialogContent
 52 |         className={cn("overflow-hidden p-0", className)}
 53 |         showCloseButton={showCloseButton}
 54 |       >
 55 |         <Command className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
 56 |           {children}
 57 |         </Command>
 58 |       </DialogContent>
 59 |     </Dialog>
 60 |   )
 61 | }
 62 | 
 63 | function CommandInput({
 64 |   className,
 65 |   ...props
 66 | }: React.ComponentProps<typeof CommandPrimitive.Input>) {
 67 |   return (
 68 |     <div
 69 |       data-slot="command-input-wrapper"
 70 |       className="flex h-9 items-center gap-2 border-b px-3"
 71 |     >
 72 |       <SearchIcon className="size-4 shrink-0 opacity-50" />
 73 |       <CommandPrimitive.Input
 74 |         data-slot="command-input"
 75 |         className={cn(
 76 |           "placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",
 77 |           className
 78 |         )}
 79 |         {...props}
 80 |       />
 81 |     </div>
 82 |   )
 83 | }
 84 | 
 85 | function CommandList({
 86 |   className,
 87 |   ...props
 88 | }: React.ComponentProps<typeof CommandPrimitive.List>) {
 89 |   return (
 90 |     <CommandPrimitive.List
 91 |       data-slot="command-list"
 92 |       className={cn(
 93 |         "max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",
 94 |         className
 95 |       )}
 96 |       {...props}
 97 |     />
 98 |   )
 99 | }
100 | 
101 | function CommandEmpty({
102 |   ...props
103 | }: React.ComponentProps<typeof CommandPrimitive.Empty>) {
104 |   return (
105 |     <CommandPrimitive.Empty
106 |       data-slot="command-empty"
107 |       className="py-6 text-center text-sm"
108 |       {...props}
109 |     />
110 |   )
111 | }
112 | 
113 | function CommandGroup({
114 |   className,
115 |   ...props
116 | }: React.ComponentProps<typeof CommandPrimitive.Group>) {
117 |   return (
118 |     <CommandPrimitive.Group
119 |       data-slot="command-group"
120 |       className={cn(
121 |         "text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",
122 |         className
123 |       )}
124 |       {...props}
125 |     />
126 |   )
127 | }
128 | 
129 | function CommandSeparator({
130 |   className,
131 |   ...props
132 | }: React.ComponentProps<typeof CommandPrimitive.Separator>) {
133 |   return (
134 |     <CommandPrimitive.Separator
135 |       data-slot="command-separator"
136 |       className={cn("bg-border -mx-1 h-px", className)}
137 |       {...props}
138 |     />
139 |   )
140 | }
141 | 
142 | function CommandItem({
143 |   className,
144 |   ...props
145 | }: React.ComponentProps<typeof CommandPrimitive.Item>) {
146 |   return (
147 |     <CommandPrimitive.Item
148 |       data-slot="command-item"
149 |       className={cn(
150 |         "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
151 |         className
152 |       )}
153 |       {...props}
154 |     />
155 |   )
156 | }
157 | 
158 | function CommandShortcut({
159 |   className,
160 |   ...props
161 | }: React.ComponentProps<"span">) {
162 |   return (
163 |     <span
164 |       data-slot="command-shortcut"
165 |       className={cn(
166 |         "text-muted-foreground ml-auto text-xs tracking-widest",
167 |         className
168 |       )}
169 |       {...props}
170 |     />
171 |   )
172 | }
173 | 
174 | export {
175 |   Command,
176 |   CommandDialog,
177 |   CommandInput,
178 |   CommandList,
179 |   CommandEmpty,
180 |   CommandGroup,
181 |   CommandItem,
182 |   CommandShortcut,
183 |   CommandSeparator,
184 | }
185 | 


--------------------------------------------------------------------------------
/components/ui/dialog.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import * as DialogPrimitive from "@radix-ui/react-dialog"
  5 | import { XIcon } from "lucide-react"
  6 | 
  7 | import { cn } from "@/lib/utils"
  8 | 
  9 | function Dialog({
 10 |   ...props
 11 | }: React.ComponentProps<typeof DialogPrimitive.Root>) {
 12 |   return <DialogPrimitive.Root data-slot="dialog" {...props} />
 13 | }
 14 | 
 15 | function DialogTrigger({
 16 |   ...props
 17 | }: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
 18 |   return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />
 19 | }
 20 | 
 21 | function DialogPortal({
 22 |   ...props
 23 | }: React.ComponentProps<typeof DialogPrimitive.Portal>) {
 24 |   return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />
 25 | }
 26 | 
 27 | function DialogClose({
 28 |   ...props
 29 | }: React.ComponentProps<typeof DialogPrimitive.Close>) {
 30 |   return <DialogPrimitive.Close data-slot="dialog-close" {...props} />
 31 | }
 32 | 
 33 | function DialogOverlay({
 34 |   className,
 35 |   ...props
 36 | }: React.ComponentProps<typeof DialogPrimitive.Overlay>) {
 37 |   return (
 38 |     <DialogPrimitive.Overlay
 39 |       data-slot="dialog-overlay"
 40 |       className={cn(
 41 |         "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
 42 |         className
 43 |       )}
 44 |       {...props}
 45 |     />
 46 |   )
 47 | }
 48 | 
 49 | function DialogContent({
 50 |   className,
 51 |   children,
 52 |   showCloseButton = true,
 53 |   ...props
 54 | }: React.ComponentProps<typeof DialogPrimitive.Content> & {
 55 |   showCloseButton?: boolean
 56 | }) {
 57 |   return (
 58 |     <DialogPortal data-slot="dialog-portal">
 59 |       <DialogOverlay />
 60 |       <DialogPrimitive.Content
 61 |         data-slot="dialog-content"
 62 |         className={cn(
 63 |           "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
 64 |           className
 65 |         )}
 66 |         {...props}
 67 |       >
 68 |         {children}
 69 |         {showCloseButton && (
 70 |           <DialogPrimitive.Close
 71 |             data-slot="dialog-close"
 72 |             className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"
 73 |           >
 74 |             <XIcon />
 75 |             <span className="sr-only">Close</span>
 76 |           </DialogPrimitive.Close>
 77 |         )}
 78 |       </DialogPrimitive.Content>
 79 |     </DialogPortal>
 80 |   )
 81 | }
 82 | 
 83 | function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
 84 |   return (
 85 |     <div
 86 |       data-slot="dialog-header"
 87 |       className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
 88 |       {...props}
 89 |     />
 90 |   )
 91 | }
 92 | 
 93 | function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
 94 |   return (
 95 |     <div
 96 |       data-slot="dialog-footer"
 97 |       className={cn(
 98 |         "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
 99 |         className
100 |       )}
101 |       {...props}
102 |     />
103 |   )
104 | }
105 | 
106 | function DialogTitle({
107 |   className,
108 |   ...props
109 | }: React.ComponentProps<typeof DialogPrimitive.Title>) {
110 |   return (
111 |     <DialogPrimitive.Title
112 |       data-slot="dialog-title"
113 |       className={cn("text-lg leading-none font-semibold", className)}
114 |       {...props}
115 |     />
116 |   )
117 | }
118 | 
119 | function DialogDescription({
120 |   className,
121 |   ...props
122 | }: React.ComponentProps<typeof DialogPrimitive.Description>) {
123 |   return (
124 |     <DialogPrimitive.Description
125 |       data-slot="dialog-description"
126 |       className={cn("text-muted-foreground text-sm", className)}
127 |       {...props}
128 |     />
129 |   )
130 | }
131 | 
132 | export {
133 |   Dialog,
134 |   DialogClose,
135 |   DialogContent,
136 |   DialogDescription,
137 |   DialogFooter,
138 |   DialogHeader,
139 |   DialogOverlay,
140 |   DialogPortal,
141 |   DialogTitle,
142 |   DialogTrigger,
143 | }
144 | 


--------------------------------------------------------------------------------
/components/ui/dropdown-menu.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
  5 | import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"
  6 | 
  7 | import { cn } from "@/lib/utils"
  8 | 
  9 | function DropdownMenu({
 10 |   ...props
 11 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
 12 |   return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />
 13 | }
 14 | 
 15 | function DropdownMenuPortal({
 16 |   ...props
 17 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
 18 |   return (
 19 |     <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
 20 |   )
 21 | }
 22 | 
 23 | function DropdownMenuTrigger({
 24 |   ...props
 25 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
 26 |   return (
 27 |     <DropdownMenuPrimitive.Trigger
 28 |       data-slot="dropdown-menu-trigger"
 29 |       {...props}
 30 |     />
 31 |   )
 32 | }
 33 | 
 34 | function DropdownMenuContent({
 35 |   className,
 36 |   sideOffset = 4,
 37 |   ...props
 38 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
 39 |   return (
 40 |     <DropdownMenuPrimitive.Portal>
 41 |       <DropdownMenuPrimitive.Content
 42 |         data-slot="dropdown-menu-content"
 43 |         sideOffset={sideOffset}
 44 |         className={cn(
 45 |           "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
 46 |           className
 47 |         )}
 48 |         {...props}
 49 |       />
 50 |     </DropdownMenuPrimitive.Portal>
 51 |   )
 52 | }
 53 | 
 54 | function DropdownMenuGroup({
 55 |   ...props
 56 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
 57 |   return (
 58 |     <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
 59 |   )
 60 | }
 61 | 
 62 | function DropdownMenuItem({
 63 |   className,
 64 |   inset,
 65 |   variant = "default",
 66 |   ...props
 67 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
 68 |   inset?: boolean
 69 |   variant?: "default" | "destructive"
 70 | }) {
 71 |   return (
 72 |     <DropdownMenuPrimitive.Item
 73 |       data-slot="dropdown-menu-item"
 74 |       data-inset={inset}
 75 |       data-variant={variant}
 76 |       className={cn(
 77 |         "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
 78 |         className
 79 |       )}
 80 |       {...props}
 81 |     />
 82 |   )
 83 | }
 84 | 
 85 | function DropdownMenuCheckboxItem({
 86 |   className,
 87 |   children,
 88 |   checked,
 89 |   ...props
 90 | }: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
 91 |   return (
 92 |     <DropdownMenuPrimitive.CheckboxItem
 93 |       data-slot="dropdown-menu-checkbox-item"
 94 |       className={cn(
 95 |         "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
 96 |         className
 97 |       )}
 98 |       checked={checked}
 99 |       {...props}
100 |     >
101 |       <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
102 |         <DropdownMenuPrimitive.ItemIndicator>
103 |           <CheckIcon className="size-4" />
104 |         </DropdownMenuPrimitive.ItemIndicator>
105 |       </span>
106 |       {children}
107 |     </DropdownMenuPrimitive.CheckboxItem>
108 |   )
109 | }
110 | 
111 | function DropdownMenuRadioGroup({
112 |   ...props
113 | }: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
114 |   return (
115 |     <DropdownMenuPrimitive.RadioGroup
116 |       data-slot="dropdown-menu-radio-group"
117 |       {...props}
118 |     />
119 |   )
120 | }
121 | 
122 | function DropdownMenuRadioItem({
123 |   className,
124 |   children,
125 |   ...props
126 | }: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
127 |   return (
128 |     <DropdownMenuPrimitive.RadioItem
129 |       data-slot="dropdown-menu-radio-item"
130 |       className={cn(
131 |         "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
132 |         className
133 |       )}
134 |       {...props}
135 |     >
136 |       <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
137 |         <DropdownMenuPrimitive.ItemIndicator>
138 |           <CircleIcon className="size-2 fill-current" />
139 |         </DropdownMenuPrimitive.ItemIndicator>
140 |       </span>
141 |       {children}
142 |     </DropdownMenuPrimitive.RadioItem>
143 |   )
144 | }
145 | 
146 | function DropdownMenuLabel({
147 |   className,
148 |   inset,
149 |   ...props
150 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
151 |   inset?: boolean
152 | }) {
153 |   return (
154 |     <DropdownMenuPrimitive.Label
155 |       data-slot="dropdown-menu-label"
156 |       data-inset={inset}
157 |       className={cn(
158 |         "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
159 |         className
160 |       )}
161 |       {...props}
162 |     />
163 |   )
164 | }
165 | 
166 | function DropdownMenuSeparator({
167 |   className,
168 |   ...props
169 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
170 |   return (
171 |     <DropdownMenuPrimitive.Separator
172 |       data-slot="dropdown-menu-separator"
173 |       className={cn("bg-border -mx-1 my-1 h-px", className)}
174 |       {...props}
175 |     />
176 |   )
177 | }
178 | 
179 | function DropdownMenuShortcut({
180 |   className,
181 |   ...props
182 | }: React.ComponentProps<"span">) {
183 |   return (
184 |     <span
185 |       data-slot="dropdown-menu-shortcut"
186 |       className={cn(
187 |         "text-muted-foreground ml-auto text-xs tracking-widest",
188 |         className
189 |       )}
190 |       {...props}
191 |     />
192 |   )
193 | }
194 | 
195 | function DropdownMenuSub({
196 |   ...props
197 | }: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
198 |   return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />
199 | }
200 | 
201 | function DropdownMenuSubTrigger({
202 |   className,
203 |   inset,
204 |   children,
205 |   ...props
206 | }: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
207 |   inset?: boolean
208 | }) {
209 |   return (
210 |     <DropdownMenuPrimitive.SubTrigger
211 |       data-slot="dropdown-menu-sub-trigger"
212 |       data-inset={inset}
213 |       className={cn(
214 |         "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",
215 |         className
216 |       )}
217 |       {...props}
218 |     >
219 |       {children}
220 |       <ChevronRightIcon className="ml-auto size-4" />
221 |     </DropdownMenuPrimitive.SubTrigger>
222 |   )
223 | }
224 | 
225 | function DropdownMenuSubContent({
226 |   className,
227 |   ...props
228 | }: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
229 |   return (
230 |     <DropdownMenuPrimitive.SubContent
231 |       data-slot="dropdown-menu-sub-content"
232 |       className={cn(
233 |         "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
234 |         className
235 |       )}
236 |       {...props}
237 |     />
238 |   )
239 | }
240 | 
241 | export {
242 |   DropdownMenu,
243 |   DropdownMenuPortal,
244 |   DropdownMenuTrigger,
245 |   DropdownMenuContent,
246 |   DropdownMenuGroup,
247 |   DropdownMenuLabel,
248 |   DropdownMenuItem,
249 |   DropdownMenuCheckboxItem,
250 |   DropdownMenuRadioGroup,
251 |   DropdownMenuRadioItem,
252 |   DropdownMenuSeparator,
253 |   DropdownMenuShortcut,
254 |   DropdownMenuSub,
255 |   DropdownMenuSubTrigger,
256 |   DropdownMenuSubContent,
257 | }
258 | 


--------------------------------------------------------------------------------
/components/ui/form.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import * as LabelPrimitive from "@radix-ui/react-label"
  5 | import { Slot } from "@radix-ui/react-slot"
  6 | import {
  7 |   Controller,
  8 |   FormProvider,
  9 |   useFormContext,
 10 |   useFormState,
 11 |   type ControllerProps,
 12 |   type FieldPath,
 13 |   type FieldValues,
 14 | } from "react-hook-form"
 15 | 
 16 | import { cn } from "@/lib/utils"
 17 | import { Label } from "@/components/ui/label"
 18 | 
 19 | const Form = FormProvider
 20 | 
 21 | type FormFieldContextValue<
 22 |   TFieldValues extends FieldValues = FieldValues,
 23 |   TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
 24 | > = {
 25 |   name: TName
 26 | }
 27 | 
 28 | const FormFieldContext = React.createContext<FormFieldContextValue>(
 29 |   {} as FormFieldContextValue
 30 | )
 31 | 
 32 | const FormField = <
 33 |   TFieldValues extends FieldValues = FieldValues,
 34 |   TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
 35 | >({
 36 |   ...props
 37 | }: ControllerProps<TFieldValues, TName>) => {
 38 |   return (
 39 |     <FormFieldContext.Provider value={{ name: props.name }}>
 40 |       <Controller {...props} />
 41 |     </FormFieldContext.Provider>
 42 |   )
 43 | }
 44 | 
 45 | const useFormField = () => {
 46 |   const fieldContext = React.useContext(FormFieldContext)
 47 |   const itemContext = React.useContext(FormItemContext)
 48 |   const { getFieldState } = useFormContext()
 49 |   const formState = useFormState({ name: fieldContext.name })
 50 |   const fieldState = getFieldState(fieldContext.name, formState)
 51 | 
 52 |   if (!fieldContext) {
 53 |     throw new Error("useFormField should be used within <FormField>")
 54 |   }
 55 | 
 56 |   const { id } = itemContext
 57 | 
 58 |   return {
 59 |     id,
 60 |     name: fieldContext.name,
 61 |     formItemId: `${id}-form-item`,
 62 |     formDescriptionId: `${id}-form-item-description`,
 63 |     formMessageId: `${id}-form-item-message`,
 64 |     ...fieldState,
 65 |   }
 66 | }
 67 | 
 68 | type FormItemContextValue = {
 69 |   id: string
 70 | }
 71 | 
 72 | const FormItemContext = React.createContext<FormItemContextValue>(
 73 |   {} as FormItemContextValue
 74 | )
 75 | 
 76 | function FormItem({ className, ...props }: React.ComponentProps<"div">) {
 77 |   const id = React.useId()
 78 | 
 79 |   return (
 80 |     <FormItemContext.Provider value={{ id }}>
 81 |       <div
 82 |         data-slot="form-item"
 83 |         className={cn("grid gap-2", className)}
 84 |         {...props}
 85 |       />
 86 |     </FormItemContext.Provider>
 87 |   )
 88 | }
 89 | 
 90 | function FormLabel({
 91 |   className,
 92 |   ...props
 93 | }: React.ComponentProps<typeof LabelPrimitive.Root>) {
 94 |   const { error, formItemId } = useFormField()
 95 | 
 96 |   return (
 97 |     <Label
 98 |       data-slot="form-label"
 99 |       data-error={!!error}
100 |       className={cn("data-[error=true]:text-destructive", className)}
101 |       htmlFor={formItemId}
102 |       {...props}
103 |     />
104 |   )
105 | }
106 | 
107 | function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
108 |   const { error, formItemId, formDescriptionId, formMessageId } = useFormField()
109 | 
110 |   return (
111 |     <Slot
112 |       data-slot="form-control"
113 |       id={formItemId}
114 |       aria-describedby={
115 |         !error
116 |           ? `${formDescriptionId}`
117 |           : `${formDescriptionId} ${formMessageId}`
118 |       }
119 |       aria-invalid={!!error}
120 |       {...props}
121 |     />
122 |   )
123 | }
124 | 
125 | function FormDescription({ className, ...props }: React.ComponentProps<"p">) {
126 |   const { formDescriptionId } = useFormField()
127 | 
128 |   return (
129 |     <p
130 |       data-slot="form-description"
131 |       id={formDescriptionId}
132 |       className={cn("text-muted-foreground text-sm", className)}
133 |       {...props}
134 |     />
135 |   )
136 | }
137 | 
138 | function FormMessage({ className, ...props }: React.ComponentProps<"p">) {
139 |   const { error, formMessageId } = useFormField()
140 |   const body = error ? String(error?.message ?? "") : props.children
141 | 
142 |   if (!body) {
143 |     return null
144 |   }
145 | 
146 |   return (
147 |     <p
148 |       data-slot="form-message"
149 |       id={formMessageId}
150 |       className={cn("text-destructive text-sm", className)}
151 |       {...props}
152 |     >
153 |       {body}
154 |     </p>
155 |   )
156 | }
157 | 
158 | export {
159 |   useFormField,
160 |   Form,
161 |   FormItem,
162 |   FormLabel,
163 |   FormControl,
164 |   FormDescription,
165 |   FormMessage,
166 |   FormField,
167 | }
168 | 


--------------------------------------------------------------------------------
/components/ui/input.tsx:
--------------------------------------------------------------------------------
 1 | import * as React from "react"
 2 | 
 3 | import { cn } from "@/lib/utils"
 4 | 
 5 | function Input({ className, type, ...props }: React.ComponentProps<"input">) {
 6 |   return (
 7 |     <input
 8 |       type={type}
 9 |       data-slot="input"
10 |       className={cn(
11 |         "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
12 |         "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
13 |         "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
14 |         className
15 |       )}
16 |       {...props}
17 |     />
18 |   )
19 | }
20 | 
21 | export { Input }
22 | 


--------------------------------------------------------------------------------
/components/ui/label.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as LabelPrimitive from "@radix-ui/react-label"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function Label({
 9 |   className,
10 |   ...props
11 | }: React.ComponentProps<typeof LabelPrimitive.Root>) {
12 |   return (
13 |     <LabelPrimitive.Root
14 |       data-slot="label"
15 |       className={cn(
16 |         "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
17 |         className
18 |       )}
19 |       {...props}
20 |     />
21 |   )
22 | }
23 | 
24 | export { Label }
25 | 


--------------------------------------------------------------------------------
/components/ui/multi-select.tsx:
--------------------------------------------------------------------------------
  1 | "use client";
  2 | 
  3 | import * as React from "react";
  4 | import { X } from "lucide-react";
  5 | 
  6 | import { Badge } from "@/components/ui/badge";
  7 | import {
  8 |   Command,
  9 |   CommandGroup,
 10 |   CommandItem,
 11 |   CommandList,
 12 | } from "@/components/ui/command";
 13 | import { Command as CommandPrimitive } from "cmdk";
 14 | 
 15 | type Option = Record<"value" | "label", string>;
 16 | 
 17 | // Add onValueChange to the props
 18 | interface MultiSelectProps extends React.InputHTMLAttributes<HTMLInputElement> {
 19 |     options: Option[];
 20 |     defaultValue?: string[];
 21 |     onValueChange?: (value: string[]) => void;
 22 | }
 23 | 
 24 | export function MultiSelect({ options, name, defaultValue = [], onValueChange, ...props }: MultiSelectProps) {
 25 |   const inputRef = React.useRef<HTMLInputElement>(null);
 26 |   const [open, setOpen] = React.useState(false);
 27 |   const [selected, setSelected] = React.useState<Option[]>(() => {
 28 |     return options.filter(option => defaultValue.includes(option.value));
 29 |   });
 30 |   const [inputValue, setInputValue] = React.useState("");
 31 | 
 32 |   // Propagate changes up to the form
 33 |   React.useEffect(() => {
 34 |     onValueChange?.(selected.map(s => s.value));
 35 |   }, [selected, onValueChange]);
 36 | 
 37 |   const handleUnselect = React.useCallback((option: Option) => {
 38 |     setSelected(prev => prev.filter(s => s.value !== option.value));
 39 |   }, []);
 40 | 
 41 |   const handleKeyDown = React.useCallback((e: React.KeyboardEvent<HTMLDivElement>) => {
 42 |     const input = inputRef.current
 43 |     if (input) {
 44 |       if ((e.key === "Delete" || e.key === "Backspace") && input.value === "") {
 45 |         setSelected(prev => {
 46 |             const newSelected = [...prev];
 47 |             newSelected.pop();
 48 |             return newSelected;
 49 |         })
 50 |       }
 51 |       if (e.key === "Escape") {
 52 |         input.blur();
 53 |       }
 54 |     }
 55 |   }, []);
 56 | 
 57 |   const selectables = options.filter(option => !selected.some(s => s.value === option.value));
 58 |   const { value, ...restProps } = props;
 59 | 
 60 |   return (
 61 |       <Command onKeyDown={handleKeyDown} className="overflow-visible bg-transparent">
 62 |         <div
 63 |           className="group border border-input px-3 py-2 text-sm ring-offset-background rounded-md focus-within:ring-2 focus-within:ring-ring focus-within:ring-offset-2"
 64 |         >
 65 |           <div className="flex gap-1 flex-wrap">
 66 |             {selected.map((option) => {
 67 |               return (
 68 |                 <Badge key={option.value} variant="secondary">
 69 |                   {option.label}
 70 |                   <button
 71 |                     type="button"
 72 |                     className="ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"
 73 |                     onClick={() => handleUnselect(option)}
 74 |                   >
 75 |                     <X className="h-3 w-3 text-muted-foreground hover:text-foreground" />
 76 |                   </button>
 77 |                 </Badge>
 78 |               )
 79 |             })}
 80 |             <CommandPrimitive.Input
 81 |               ref={inputRef}
 82 |               value={inputValue}
 83 |               onValueChange={setInputValue}
 84 |               onBlur={() => setOpen(false)}
 85 |               onFocus={() => setOpen(true)}
 86 |               className="ml-2 bg-transparent outline-none placeholder:text-muted-foreground flex-1"
 87 |               {...restProps}
 88 |             />
 89 |           </div>
 90 |         </div>
 91 |         <div className="relative mt-2">
 92 |           {open && selectables.length > 0 ?
 93 |             <div className="absolute w-full z-10 top-0 rounded-md border bg-popover text-popover-foreground shadow-md outline-none animate-in">
 94 |               <CommandList>
 95 |                 <CommandGroup className="h-full overflow-auto">
 96 |                   {selectables.map((option) => {
 97 |                     return (
 98 |                       <CommandItem
 99 |                         key={option.value}
100 |                         onMouseDown={(e) => e.preventDefault()}
101 |                         onSelect={() => {
102 |                           setInputValue("")
103 |                           setSelected(prev => [...prev, option])
104 |                         }}
105 |                         className={"cursor-pointer"}
106 |                       >
107 |                         {option.label}
108 |                       </CommandItem>
109 |                     );
110 |                   })}
111 |                 </CommandGroup>
112 |               </CommandList>
113 |             </div>
114 |             : null}
115 |         </div>
116 |       </Command >
117 |   )
118 | }
119 | 


--------------------------------------------------------------------------------
/components/ui/progress.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as ProgressPrimitive from "@radix-ui/react-progress"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function Progress({
 9 |   className,
10 |   value,
11 |   ...props
12 | }: React.ComponentProps<typeof ProgressPrimitive.Root>) {
13 |   return (
14 |     <ProgressPrimitive.Root
15 |       data-slot="progress"
16 |       className={cn(
17 |         "bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",
18 |         className
19 |       )}
20 |       {...props}
21 |     >
22 |       <ProgressPrimitive.Indicator
23 |         data-slot="progress-indicator"
24 |         className="bg-primary h-full w-full flex-1 transition-all"
25 |         style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
26 |       />
27 |     </ProgressPrimitive.Root>
28 |   )
29 | }
30 | 
31 | export { Progress }
32 | 


--------------------------------------------------------------------------------
/components/ui/select.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import * as SelectPrimitive from "@radix-ui/react-select"
  5 | import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from "lucide-react"
  6 | 
  7 | import { cn } from "@/lib/utils"
  8 | 
  9 | function Select({
 10 |   ...props
 11 | }: React.ComponentProps<typeof SelectPrimitive.Root>) {
 12 |   return <SelectPrimitive.Root data-slot="select" {...props} />
 13 | }
 14 | 
 15 | function SelectGroup({
 16 |   ...props
 17 | }: React.ComponentProps<typeof SelectPrimitive.Group>) {
 18 |   return <SelectPrimitive.Group data-slot="select-group" {...props} />
 19 | }
 20 | 
 21 | function SelectValue({
 22 |   ...props
 23 | }: React.ComponentProps<typeof SelectPrimitive.Value>) {
 24 |   return <SelectPrimitive.Value data-slot="select-value" {...props} />
 25 | }
 26 | 
 27 | function SelectTrigger({
 28 |   className,
 29 |   size = "default",
 30 |   children,
 31 |   ...props
 32 | }: React.ComponentProps<typeof SelectPrimitive.Trigger> & {
 33 |   size?: "sm" | "default"
 34 | }) {
 35 |   return (
 36 |     <SelectPrimitive.Trigger
 37 |       data-slot="select-trigger"
 38 |       data-size={size}
 39 |       className={cn(
 40 |         "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
 41 |         className
 42 |       )}
 43 |       {...props}
 44 |     >
 45 |       {children}
 46 |       <SelectPrimitive.Icon asChild>
 47 |         <ChevronDownIcon className="size-4 opacity-50" />
 48 |       </SelectPrimitive.Icon>
 49 |     </SelectPrimitive.Trigger>
 50 |   )
 51 | }
 52 | 
 53 | function SelectContent({
 54 |   className,
 55 |   children,
 56 |   position = "popper",
 57 |   ...props
 58 | }: React.ComponentProps<typeof SelectPrimitive.Content>) {
 59 |   return (
 60 |     <SelectPrimitive.Portal>
 61 |       <SelectPrimitive.Content
 62 |         data-slot="select-content"
 63 |         className={cn(
 64 |           "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
 65 |           position === "popper" &&
 66 |             "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
 67 |           className
 68 |         )}
 69 |         position={position}
 70 |         {...props}
 71 |       >
 72 |         <SelectScrollUpButton />
 73 |         <SelectPrimitive.Viewport
 74 |           className={cn(
 75 |             "p-1",
 76 |             position === "popper" &&
 77 |               "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"
 78 |           )}
 79 |         >
 80 |           {children}
 81 |         </SelectPrimitive.Viewport>
 82 |         <SelectScrollDownButton />
 83 |       </SelectPrimitive.Content>
 84 |     </SelectPrimitive.Portal>
 85 |   )
 86 | }
 87 | 
 88 | function SelectLabel({
 89 |   className,
 90 |   ...props
 91 | }: React.ComponentProps<typeof SelectPrimitive.Label>) {
 92 |   return (
 93 |     <SelectPrimitive.Label
 94 |       data-slot="select-label"
 95 |       className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
 96 |       {...props}
 97 |     />
 98 |   )
 99 | }
100 | 
101 | function SelectItem({
102 |   className,
103 |   children,
104 |   ...props
105 | }: React.ComponentProps<typeof SelectPrimitive.Item>) {
106 |   return (
107 |     <SelectPrimitive.Item
108 |       data-slot="select-item"
109 |       className={cn(
110 |         "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
111 |         className
112 |       )}
113 |       {...props}
114 |     >
115 |       <span className="absolute right-2 flex size-3.5 items-center justify-center">
116 |         <SelectPrimitive.ItemIndicator>
117 |           <CheckIcon className="size-4" />
118 |         </SelectPrimitive.ItemIndicator>
119 |       </span>
120 |       <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
121 |     </SelectPrimitive.Item>
122 |   )
123 | }
124 | 
125 | function SelectSeparator({
126 |   className,
127 |   ...props
128 | }: React.ComponentProps<typeof SelectPrimitive.Separator>) {
129 |   return (
130 |     <SelectPrimitive.Separator
131 |       data-slot="select-separator"
132 |       className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
133 |       {...props}
134 |     />
135 |   )
136 | }
137 | 
138 | function SelectScrollUpButton({
139 |   className,
140 |   ...props
141 | }: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {
142 |   return (
143 |     <SelectPrimitive.ScrollUpButton
144 |       data-slot="select-scroll-up-button"
145 |       className={cn(
146 |         "flex cursor-default items-center justify-center py-1",
147 |         className
148 |       )}
149 |       {...props}
150 |     >
151 |       <ChevronUpIcon className="size-4" />
152 |     </SelectPrimitive.ScrollUpButton>
153 |   )
154 | }
155 | 
156 | function SelectScrollDownButton({
157 |   className,
158 |   ...props
159 | }: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {
160 |   return (
161 |     <SelectPrimitive.ScrollDownButton
162 |       data-slot="select-scroll-down-button"
163 |       className={cn(
164 |         "flex cursor-default items-center justify-center py-1",
165 |         className
166 |       )}
167 |       {...props}
168 |     >
169 |       <ChevronDownIcon className="size-4" />
170 |     </SelectPrimitive.ScrollDownButton>
171 |   )
172 | }
173 | 
174 | export {
175 |   Select,
176 |   SelectContent,
177 |   SelectGroup,
178 |   SelectItem,
179 |   SelectLabel,
180 |   SelectScrollDownButton,
181 |   SelectScrollUpButton,
182 |   SelectSeparator,
183 |   SelectTrigger,
184 |   SelectValue,
185 | }
186 | 


--------------------------------------------------------------------------------
/components/ui/separator.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as SeparatorPrimitive from "@radix-ui/react-separator"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function Separator({
 9 |   className,
10 |   orientation = "horizontal",
11 |   decorative = true,
12 |   ...props
13 | }: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
14 |   return (
15 |     <SeparatorPrimitive.Root
16 |       data-slot="separator"
17 |       decorative={decorative}
18 |       orientation={orientation}
19 |       className={cn(
20 |         "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
21 |         className
22 |       )}
23 |       {...props}
24 |     />
25 |   )
26 | }
27 | 
28 | export { Separator }
29 | 


--------------------------------------------------------------------------------
/components/ui/sheet.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import * as SheetPrimitive from "@radix-ui/react-dialog"
  5 | import { XIcon } from "lucide-react"
  6 | 
  7 | import { cn } from "@/lib/utils"
  8 | 
  9 | function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
 10 |   return <SheetPrimitive.Root data-slot="sheet" {...props} />
 11 | }
 12 | 
 13 | function SheetTrigger({
 14 |   ...props
 15 | }: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
 16 |   return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />
 17 | }
 18 | 
 19 | function SheetClose({
 20 |   ...props
 21 | }: React.ComponentProps<typeof SheetPrimitive.Close>) {
 22 |   return <SheetPrimitive.Close data-slot="sheet-close" {...props} />
 23 | }
 24 | 
 25 | function SheetPortal({
 26 |   ...props
 27 | }: React.ComponentProps<typeof SheetPrimitive.Portal>) {
 28 |   return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />
 29 | }
 30 | 
 31 | function SheetOverlay({
 32 |   className,
 33 |   ...props
 34 | }: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
 35 |   return (
 36 |     <SheetPrimitive.Overlay
 37 |       data-slot="sheet-overlay"
 38 |       className={cn(
 39 |         "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
 40 |         className
 41 |       )}
 42 |       {...props}
 43 |     />
 44 |   )
 45 | }
 46 | 
 47 | function SheetContent({
 48 |   className,
 49 |   children,
 50 |   side = "right",
 51 |   ...props
 52 | }: React.ComponentProps<typeof SheetPrimitive.Content> & {
 53 |   side?: "top" | "right" | "bottom" | "left"
 54 | }) {
 55 |   return (
 56 |     <SheetPortal>
 57 |       <SheetOverlay />
 58 |       <SheetPrimitive.Content
 59 |         data-slot="sheet-content"
 60 |         className={cn(
 61 |           "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
 62 |           side === "right" &&
 63 |             "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
 64 |           side === "left" &&
 65 |             "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
 66 |           side === "top" &&
 67 |             "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
 68 |           side === "bottom" &&
 69 |             "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
 70 |           className
 71 |         )}
 72 |         {...props}
 73 |       >
 74 |         {children}
 75 |         <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
 76 |           <XIcon className="size-4" />
 77 |           <span className="sr-only">Close</span>
 78 |         </SheetPrimitive.Close>
 79 |       </SheetPrimitive.Content>
 80 |     </SheetPortal>
 81 |   )
 82 | }
 83 | 
 84 | function SheetHeader({ className, ...props }: React.ComponentProps<"div">) {
 85 |   return (
 86 |     <div
 87 |       data-slot="sheet-header"
 88 |       className={cn("flex flex-col gap-1.5 p-4", className)}
 89 |       {...props}
 90 |     />
 91 |   )
 92 | }
 93 | 
 94 | function SheetFooter({ className, ...props }: React.ComponentProps<"div">) {
 95 |   return (
 96 |     <div
 97 |       data-slot="sheet-footer"
 98 |       className={cn("mt-auto flex flex-col gap-2 p-4", className)}
 99 |       {...props}
100 |     />
101 |   )
102 | }
103 | 
104 | function SheetTitle({
105 |   className,
106 |   ...props
107 | }: React.ComponentProps<typeof SheetPrimitive.Title>) {
108 |   return (
109 |     <SheetPrimitive.Title
110 |       data-slot="sheet-title"
111 |       className={cn("text-foreground font-semibold", className)}
112 |       {...props}
113 |     />
114 |   )
115 | }
116 | 
117 | function SheetDescription({
118 |   className,
119 |   ...props
120 | }: React.ComponentProps<typeof SheetPrimitive.Description>) {
121 |   return (
122 |     <SheetPrimitive.Description
123 |       data-slot="sheet-description"
124 |       className={cn("text-muted-foreground text-sm", className)}
125 |       {...props}
126 |     />
127 |   )
128 | }
129 | 
130 | export {
131 |   Sheet,
132 |   SheetTrigger,
133 |   SheetClose,
134 |   SheetContent,
135 |   SheetHeader,
136 |   SheetFooter,
137 |   SheetTitle,
138 |   SheetDescription,
139 | }
140 | 


--------------------------------------------------------------------------------
/components/ui/sidebar.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | import { Slot } from "@radix-ui/react-slot"
  5 | import { cva, VariantProps } from "class-variance-authority"
  6 | import { PanelLeftIcon } from "lucide-react"
  7 | 
  8 | import { useIsMobile } from "@/hooks/use-mobile"
  9 | import { cn } from "@/lib/utils"
 10 | import { Button } from "@/components/ui/button"
 11 | import { Input } from "@/components/ui/input"
 12 | import { Separator } from "@/components/ui/separator"
 13 | import {
 14 |   Sheet,
 15 |   SheetContent,
 16 |   SheetDescription,
 17 |   SheetHeader,
 18 |   SheetTitle,
 19 | } from "@/components/ui/sheet"
 20 | 
 21 | import {
 22 |   Tooltip,
 23 |   TooltipContent,
 24 |   TooltipProvider,
 25 |   TooltipTrigger,
 26 | } from "@/components/ui/tooltip"
 27 | import { Skeleton } from "./skeleton"
 28 | 
 29 | 
 30 | const SIDEBAR_COOKIE_NAME = "sidebar_state"
 31 | const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
 32 | const SIDEBAR_WIDTH = "16rem"
 33 | const SIDEBAR_WIDTH_MOBILE = "18rem"
 34 | const SIDEBAR_WIDTH_ICON = "3rem"
 35 | const SIDEBAR_KEYBOARD_SHORTCUT = "b"
 36 | 
 37 | type SidebarContextProps = {
 38 |   state: "expanded" | "collapsed"
 39 |   open: boolean
 40 |   setOpen: (open: boolean) => void
 41 |   openMobile: boolean
 42 |   setOpenMobile: (open: boolean) => void
 43 |   isMobile: boolean
 44 |   toggleSidebar: () => void
 45 | }
 46 | 
 47 | const SidebarContext = React.createContext<SidebarContextProps | null>(null)
 48 | 
 49 | function useSidebar(b: boolean) {
 50 |   const context = React.useContext(SidebarContext)
 51 |   if (!context) {
 52 |     throw new Error("useSidebar must be used within a SidebarProvider.")
 53 |   }
 54 | 
 55 |   return context
 56 | }
 57 | 
 58 | function SidebarProvider({
 59 |   defaultOpen = true,
 60 |   open: openProp,
 61 |   onOpenChange: setOpenProp,
 62 |   className,
 63 |   style,
 64 |   children,
 65 |   ...props
 66 | }: React.ComponentProps<"div"> & {
 67 |   defaultOpen?: boolean
 68 |   open?: boolean
 69 |   onOpenChange?: (open: boolean) => void
 70 | }) {
 71 |   const isMobile = useIsMobile()
 72 |   const [openMobile, setOpenMobile] = React.useState(false)
 73 | 
 74 |   // This is the internal state of the sidebar.
 75 |   // We use openProp and setOpenProp for control from outside the component.
 76 |   const [_open, _setOpen] = React.useState(defaultOpen)
 77 |   const open = openProp ?? _open
 78 |   const setOpen = React.useCallback(
 79 |     (value: boolean | ((value: boolean) => boolean)) => {
 80 |       const openState = typeof value === "function" ? value(open) : value
 81 |       if (setOpenProp) {
 82 |         setOpenProp(openState)
 83 |       } else {
 84 |         _setOpen(openState)
 85 |       }
 86 | 
 87 |       // This sets the cookie to keep the sidebar state.
 88 |       document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
 89 |     },
 90 |     [setOpenProp, open]
 91 |   )
 92 | 
 93 |   // Helper to toggle the sidebar.
 94 |   const toggleSidebar = React.useCallback(() => {
 95 |     return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)
 96 |   }, [isMobile, setOpen, setOpenMobile])
 97 | 
 98 |   // Adds a keyboard shortcut to toggle the sidebar.
 99 |   React.useEffect(() => {
100 |     const handleKeyDown = (event: KeyboardEvent) => {
101 |       if (
102 |         event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
103 |         (event.metaKey || event.ctrlKey)
104 |       ) {
105 |         event.preventDefault()
106 |         toggleSidebar()
107 |       }
108 |     }
109 | 
110 |     window.addEventListener("keydown", handleKeyDown)
111 |     return () => window.removeEventListener("keydown", handleKeyDown)
112 |   }, [toggleSidebar])
113 | 
114 |   // We add a state so that we can do data-state="expanded" or "collapsed".
115 |   // This makes it easier to style the sidebar with Tailwind classes.
116 |   const state = open ? "expanded" : "collapsed"
117 | 
118 |   const contextValue = React.useMemo<SidebarContextProps>(
119 |     () => ({
120 |       state,
121 |       open,
122 |       setOpen,
123 |       isMobile,
124 |       openMobile,
125 |       setOpenMobile,
126 |       toggleSidebar,
127 |     }),
128 |     [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]
129 |   )
130 | 
131 |   return (
132 |     <SidebarContext.Provider value={contextValue}>
133 |       <TooltipProvider delayDuration={0}>
134 |         <div
135 |           data-slot="sidebar-wrapper"
136 |           style={
137 |             {
138 |               "--sidebar-width": SIDEBAR_WIDTH,
139 |               "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
140 |               ...style,
141 |             } as React.CSSProperties
142 |           }
143 |           className={cn(
144 |             "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",
145 |             className
146 |           )}
147 |           {...props}
148 |         >
149 |           {children}
150 |         </div>
151 |       </TooltipProvider>
152 |     </SidebarContext.Provider>
153 |   )
154 | }
155 | 
156 | function Sidebar({
157 |   side = "left",
158 |   variant = "sidebar",
159 |   collapsible = "offcanvas",
160 |   className,
161 |   children,
162 |   ...props
163 | }: React.ComponentProps<"div"> & {
164 |   side?: "left" | "right"
165 |   variant?: "sidebar" | "floating" | "inset"
166 |   collapsible?: "offcanvas" | "icon" | "none"
167 | }) {
168 |   const { isMobile, state, openMobile, setOpenMobile } = useSidebar(false)
169 | 
170 |     if (collapsible === "none") {
171 |     return (
172 |       <div
173 |         data-slot="sidebar"
174 |         className={cn(
175 |           "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
176 |           className
177 |         )}
178 |         {...props}
179 |       >
180 |         {children}
181 |       </div>
182 |     )
183 |   }
184 | 
185 |   if (isMobile) {
186 |     return (
187 |       <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
188 |         <SheetContent
189 |           data-sidebar="sidebar"
190 |           data-slot="sidebar"
191 |           data-mobile="true"
192 |           className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
193 |           style={
194 |             {
195 |               "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
196 |             } as React.CSSProperties
197 |           }
198 |           side={side}
199 |         >
200 |           <SheetHeader className="sr-only">
201 |             <SheetTitle>Sidebar</SheetTitle>
202 |             <SheetDescription>Displays the mobile sidebar.</SheetDescription>
203 |           </SheetHeader>
204 |           <div className="flex h-full w-full flex-col">{children}</div>
205 |         </SheetContent>
206 |       </Sheet>
207 |     )
208 |   }
209 | 
210 |   return (
211 |     <div
212 |       className="group peer text-sidebar-foreground hidden md:block"
213 |       data-state={state}
214 |       data-collapsible={state === "collapsed" ? collapsible : ""}
215 |       data-variant={variant}
216 |       data-side={side}
217 |       data-slot="sidebar"
218 |     >
219 |       {/* This is what handles the sidebar gap on desktop */}
220 |       <div
221 |         data-slot="sidebar-gap"
222 |         className={cn(
223 |           "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
224 |           "group-data-[collapsible=offcanvas]:w-0",
225 |           "group-data-[side=right]:rotate-180",
226 |           variant === "floating" || variant === "inset"
227 |             ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
228 |             : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)"
229 |         )}
230 |       />
231 |       <div
232 |         data-slot="sidebar-container"
233 |         className={cn(
234 |           "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
235 |           side === "left"
236 |             ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
237 |             : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
238 |           // Adjust the padding for floating and inset variants.
239 |           variant === "floating" || variant === "inset"
240 |             ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
241 |             : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
242 |           className
243 |         )}
244 |         {...props}
245 |       >
246 |         <div
247 |           data-sidebar="sidebar"
248 |           data-slot="sidebar-inner"
249 |           className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
250 |         >
251 |           {children}
252 |         </div>
253 |       </div>
254 |     </div>
255 |   )
256 | }
257 | 
258 | function SidebarTrigger({
259 |   className,
260 |   onClick,
261 |   ...props
262 | }: React.ComponentProps<typeof Button>) {
263 |   const { toggleSidebar } = useSidebar(false)
264 | 
265 |     return (
266 |     <Button
267 |       data-sidebar="trigger"
268 |       data-slot="sidebar-trigger"
269 |       variant="ghost"
270 |       size="icon"
271 |       className={cn("size-7", className)}
272 |       onClick={(event) => {
273 |         onClick?.(event)
274 |         toggleSidebar()
275 |       }}
276 |       {...props}
277 |     >
278 |       <PanelLeftIcon />
279 |       <span className="sr-only">Toggle Sidebar</span>
280 |     </Button>
281 |   )
282 | }
283 | 
284 | function SidebarRail({ className, ...props }: React.ComponentProps<"button">) {
285 |   const { toggleSidebar } = useSidebar(false)
286 | 
287 |     return (
288 |     <button
289 |       data-sidebar="rail"
290 |       data-slot="sidebar-rail"
291 |       aria-label="Toggle Sidebar"
292 |       tabIndex={-1}
293 |       onClick={toggleSidebar}
294 |       title="Toggle Sidebar"
295 |       className={cn(
296 |         "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
297 |         "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
298 |         "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
299 |         "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
300 |         "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
301 |         "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
302 |         className
303 |       )}
304 |       {...props}
305 |     />
306 |   )
307 | }
308 | 
309 | function SidebarInset({ className, ...props }: React.ComponentProps<"main">) {
310 |   return (
311 |     <main
312 |       data-slot="sidebar-inset"
313 |       className={cn(
314 |         "bg-background relative flex w-full flex-1 flex-col",
315 |         "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
316 |         className
317 |       )}
318 |       {...props}
319 |     />
320 |   )
321 | }
322 | 
323 | function SidebarInput({
324 |   className,
325 |   ...props
326 | }: React.ComponentProps<typeof Input>) {
327 |   return (
328 |     <Input
329 |       data-slot="sidebar-input"
330 |       data-sidebar="input"
331 |       className={cn("bg-background h-8 w-full shadow-none", className)}
332 |       {...props}
333 |     />
334 |   )
335 | }
336 | 
337 | function SidebarHeader({ className, ...props }: React.ComponentProps<"div">) {
338 |   return (
339 |     <div
340 |       data-slot="sidebar-header"
341 |       data-sidebar="header"
342 |       className={cn("flex flex-col gap-2 p-2", className)}
343 |       {...props}
344 |     />
345 |   )
346 | }
347 | 
348 | function SidebarFooter({ className, ...props }: React.ComponentProps<"div">) {
349 |   return (
350 |     <div
351 |       data-slot="sidebar-footer"
352 |       data-sidebar="footer"
353 |       className={cn("flex flex-col gap-2 p-2", className)}
354 |       {...props}
355 |     />
356 |   )
357 | }
358 | 
359 | function SidebarSeparator({
360 |   className,
361 |   ...props
362 | }: React.ComponentProps<typeof Separator>) {
363 |   return (
364 |     <Separator
365 |       data-slot="sidebar-separator"
366 |       data-sidebar="separator"
367 |       className={cn("bg-sidebar-border mx-2 w-auto", className)}
368 |       {...props}
369 |     />
370 |   )
371 | }
372 | 
373 | function SidebarContent({ className, ...props }: React.ComponentProps<"div">) {
374 |   return (
375 |     <div
376 |       data-slot="sidebar-content"
377 |       data-sidebar="content"
378 |       className={cn(
379 |         "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
380 |         className
381 |       )}
382 |       {...props}
383 |     />
384 |   )
385 | }
386 | 
387 | function SidebarGroup({ className, ...props }: React.ComponentProps<"div">) {
388 |   return (
389 |     <div
390 |       data-slot="sidebar-group"
391 |       data-sidebar="group"
392 |       className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
393 |       {...props}
394 |     />
395 |   )
396 | }
397 | 
398 | function SidebarGroupLabel({
399 |   className,
400 |   asChild = false,
401 |   ...props
402 | }: React.ComponentProps<"div"> & { asChild?: boolean }) {
403 |   const Comp = asChild ? Slot : "div"
404 | 
405 |   return (
406 |     <Comp
407 |       data-slot="sidebar-group-label"
408 |       data-sidebar="group-label"
409 |       className={cn(
410 |         "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
411 |         "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
412 |         className
413 |       )}
414 |       {...props}
415 |     />
416 |   )
417 | }
418 | 
419 | function SidebarGroupAction({
420 |   className,
421 |   asChild = false,
422 |   ...props
423 | }: React.ComponentProps<"button"> & { asChild?: boolean }) {
424 |   const Comp = asChild ? Slot : "button"
425 | 
426 |   return (
427 |     <Comp
428 |       data-slot="sidebar-group-action"
429 |       data-sidebar="group-action"
430 |       className={cn(
431 |         "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
432 |         // Increases the hit area of the button on mobile.
433 |         "after:absolute after:-inset-2 md:after:hidden",
434 |         "group-data-[collapsible=icon]:hidden",
435 |         className
436 |       )}
437 |       {...props}
438 |     />
439 |   )
440 | }
441 | 
442 | function SidebarGroupContent({
443 |   className,
444 |   ...props
445 | }: React.ComponentProps<"div">) {
446 |   return (
447 |     <div
448 |       data-slot="sidebar-group-content"
449 |       data-sidebar="group-content"
450 |       className={cn("w-full text-sm", className)}
451 |       {...props}
452 |     />
453 |   )
454 | }
455 | 
456 | function SidebarMenu({ className, ...props }: React.ComponentProps<"ul">) {
457 |   return (
458 |     <ul
459 |       data-slot="sidebar-menu"
460 |       data-sidebar="menu"
461 |       className={cn("flex w-full min-w-0 flex-col gap-1", className)}
462 |       {...props}
463 |     />
464 |   )
465 | }
466 | 
467 | function SidebarMenuItem({ className, ...props }: React.ComponentProps<"li">) {
468 |   return (
469 |     <li
470 |       data-slot="sidebar-menu-item"
471 |       data-sidebar="menu-item"
472 |       className={cn("group/menu-item relative", className)}
473 |       {...props}
474 |     />
475 |   )
476 | }
477 | 
478 | const sidebarMenuButtonVariants = cva(
479 |   "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
480 |   {
481 |     variants: {
482 |       variant: {
483 |         default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
484 |         outline:
485 |           "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
486 |       },
487 |       size: {
488 |         default: "h-8 text-sm",
489 |         sm: "h-7 text-xs",
490 |         lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
491 |       },
492 |     },
493 |     defaultVariants: {
494 |       variant: "default",
495 |       size: "default",
496 |     },
497 |   }
498 | )
499 | 
500 | function SidebarMenuButton({
501 |   asChild = false,
502 |   isActive = false,
503 |   variant = "default",
504 |   size = "default",
505 |   tooltip,
506 |   className,
507 |   ...props
508 | }: React.ComponentProps<"button"> & {
509 |   asChild?: boolean
510 |   isActive?: boolean
511 |   tooltip?: string | React.ComponentProps<typeof TooltipContent>
512 | } & VariantProps<typeof sidebarMenuButtonVariants>) {
513 |   const Comp = asChild ? Slot : "button"
514 |   const { isMobile, state } = useSidebar(false)
515 | 
516 |     const button = (
517 |     <Comp
518 |       data-slot="sidebar-menu-button"
519 |       data-sidebar="menu-button"
520 |       data-size={size}
521 |       data-active={isActive}
522 |       className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
523 |       {...props}
524 |     />
525 |   )
526 | 
527 |   if (!tooltip) {
528 |     return button
529 |   }
530 | 
531 |   if (typeof tooltip === "string") {
532 |     tooltip = {
533 |       children: tooltip,
534 |     }
535 |   }
536 | 
537 |   return (
538 |     <Tooltip>
539 |       <TooltipTrigger asChild>{button}</TooltipTrigger>
540 |       <TooltipContent
541 |         side="right"
542 |         align="center"
543 |         hidden={state !== "collapsed" || isMobile}
544 |         {...tooltip}
545 |       />
546 |     </Tooltip>
547 |   )
548 | }
549 | 
550 | function SidebarMenuAction({
551 |   className,
552 |   asChild = false,
553 |   showOnHover = false,
554 |   ...props
555 | }: React.ComponentProps<"button"> & {
556 |   asChild?: boolean
557 |   showOnHover?: boolean
558 | }) {
559 |   const Comp = asChild ? Slot : "button"
560 | 
561 |   return (
562 |     <Comp
563 |       data-slot="sidebar-menu-action"
564 |       data-sidebar="menu-action"
565 |       className={cn(
566 |         "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
567 |         // Increases the hit area of the button on mobile.
568 |         "after:absolute after:-inset-2 md:after:hidden",
569 |         "peer-data-[size=sm]/menu-button:top-1",
570 |         "peer-data-[size=default]/menu-button:top-1.5",
571 |         "peer-data-[size=lg]/menu-button:top-2.5",
572 |         "group-data-[collapsible=icon]:hidden",
573 |         showOnHover &&
574 |           "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
575 |         className
576 |       )}
577 |       {...props}
578 |     />
579 |   )
580 | }
581 | 
582 | function SidebarMenuBadge({
583 |   className,
584 |   ...props
585 | }: React.ComponentProps<"div">) {
586 |   return (
587 |     <div
588 |       data-slot="sidebar-menu-badge"
589 |       data-sidebar="menu-badge"
590 |       className={cn(
591 |         "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
592 |         "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
593 |         "peer-data-[size=sm]/menu-button:top-1",
594 |         "peer-data-[size=default]/menu-button:top-1.5",
595 |         "peer-data-[size=lg]/menu-button:top-2.5",
596 |         "group-data-[collapsible=icon]:hidden",
597 |         className
598 |       )}
599 |       {...props}
600 |     />
601 |   )
602 | }
603 | 
604 | function SidebarMenuSkeleton({
605 |   className,
606 |   showIcon = false,
607 |   ...props
608 | }: React.ComponentProps<"div"> & {
609 |   showIcon?: boolean
610 | }) {
611 |   // Random width between 50 to 90%.
612 |   const width = React.useMemo(() => {
613 |     return `${Math.floor(Math.random() * 40) + 50}%`
614 |   }, [])
615 | 
616 |   return (
617 |     <div
618 |       data-slot="sidebar-menu-skeleton"
619 |       data-sidebar="menu-skeleton"
620 |       className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
621 |       {...props}
622 |     >
623 |       {showIcon && (
624 |         <Skeleton
625 |           className="size-4 rounded-md"
626 |           data-sidebar="menu-skeleton-icon"
627 |         />
628 |       )}
629 |       <Skeleton
630 |         className="h-4 max-w-(--skeleton-width) flex-1"
631 |         data-sidebar="menu-skeleton-text"
632 |         style={
633 |           {
634 |             "--skeleton-width": width,
635 |           } as React.CSSProperties
636 |         }
637 |       />
638 |     </div>
639 |   )
640 | }
641 | 
642 | function SidebarMenuSub({ className, ...props }: React.ComponentProps<"ul">) {
643 |   return (
644 |     <ul
645 |       data-slot="sidebar-menu-sub"
646 |       data-sidebar="menu-sub"
647 |       className={cn(
648 |         "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
649 |         "group-data-[collapsible=icon]:hidden",
650 |         className
651 |       )}
652 |       {...props}
653 |     />
654 |   )
655 | }
656 | 
657 | function SidebarMenuSubItem({
658 |   className,
659 |   ...props
660 | }: React.ComponentProps<"li">) {
661 |   return (
662 |     <li
663 |       data-slot="sidebar-menu-sub-item"
664 |       data-sidebar="menu-sub-item"
665 |       className={cn("group/menu-sub-item relative", className)}
666 |       {...props}
667 |     />
668 |   )
669 | }
670 | 
671 | function SidebarMenuSubButton({
672 |   asChild = false,
673 |   size = "md",
674 |   isActive = false,
675 |   className,
676 |   ...props
677 | }: React.ComponentProps<"a"> & {
678 |   asChild?: boolean
679 |   size?: "sm" | "md"
680 |   isActive?: boolean
681 | }) {
682 |   const Comp = asChild ? Slot : "a"
683 | 
684 |   return (
685 |     <Comp
686 |       data-slot="sidebar-menu-sub-button"
687 |       data-sidebar="menu-sub-button"
688 |       data-size={size}
689 |       data-active={isActive}
690 |       className={cn(
691 |         "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
692 |         "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
693 |         size === "sm" && "text-xs",
694 |         size === "md" && "text-sm",
695 |         "group-data-[collapsible=icon]:hidden",
696 |         className
697 |       )}
698 |       {...props}
699 |     />
700 |   )
701 | }
702 | 
703 | export {
704 |   Sidebar,
705 |   SidebarContent,
706 |   SidebarFooter,
707 |   SidebarGroup,
708 |   SidebarGroupAction,
709 |   SidebarGroupContent,
710 |   SidebarGroupLabel,
711 |   SidebarHeader,
712 |   SidebarInput,
713 |   SidebarInset,
714 |   SidebarMenu,
715 |   SidebarMenuAction,
716 |   SidebarMenuBadge,
717 |   SidebarMenuButton,
718 |   SidebarMenuItem,
719 |   SidebarMenuSkeleton,
720 |   SidebarMenuSub,
721 |   SidebarMenuSubButton,
722 |   SidebarMenuSubItem,
723 |   SidebarProvider,
724 |   SidebarRail,
725 |   SidebarSeparator,
726 |   SidebarTrigger,
727 |   useSidebar,
728 | }
729 | 


--------------------------------------------------------------------------------
/components/ui/skeleton.tsx:
--------------------------------------------------------------------------------
 1 | import { cn } from "@/lib/utils"
 2 | 
 3 | function Skeleton({ className, ...props }: React.ComponentProps<"div">) {
 4 |   return (
 5 |     <div
 6 |       data-slot="skeleton"
 7 |       className={cn("bg-accent animate-pulse rounded-md", className)}
 8 |       {...props}
 9 |     />
10 |   )
11 | }
12 | 
13 | export { Skeleton }
14 | 
15 | 


--------------------------------------------------------------------------------
/components/ui/sonner.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { useTheme } from "next-themes"
 4 | import { Toaster as Sonner, ToasterProps } from "sonner"
 5 | 
 6 | const Toaster = ({ ...props }: ToasterProps) => {
 7 |   const { theme = "system" } = useTheme()
 8 | 
 9 |   return (
10 |     <Sonner
11 |       theme={theme as ToasterProps["theme"]}
12 |       className="toaster group"
13 |       style={
14 |         {
15 |           "--normal-bg": "var(--popover)",
16 |           "--normal-text": "var(--popover-foreground)",
17 |           "--normal-border": "var(--border)",
18 |         } as React.CSSProperties
19 |       }
20 |       {...props}
21 |     />
22 |   )
23 | }
24 | 
25 | export { Toaster }
26 | 


--------------------------------------------------------------------------------
/components/ui/switch.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as SwitchPrimitive from "@radix-ui/react-switch"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function Switch({
 9 |   className,
10 |   ...props
11 | }: React.ComponentProps<typeof SwitchPrimitive.Root>) {
12 |   return (
13 |     <SwitchPrimitive.Root
14 |       data-slot="switch"
15 |       className={cn(
16 |         "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
17 |         className
18 |       )}
19 |       {...props}
20 |     >
21 |       <SwitchPrimitive.Thumb
22 |         data-slot="switch-thumb"
23 |         className={cn(
24 |           "bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"
25 |         )}
26 |       />
27 |     </SwitchPrimitive.Root>
28 |   )
29 | }
30 | 
31 | export { Switch }
32 | 


--------------------------------------------------------------------------------
/components/ui/table.tsx:
--------------------------------------------------------------------------------
  1 | "use client"
  2 | 
  3 | import * as React from "react"
  4 | 
  5 | import { cn } from "@/lib/utils"
  6 | 
  7 | function Table({ className, ...props }: React.ComponentProps<"table">) {
  8 |   return (
  9 |     <div
 10 |       data-slot="table-container"
 11 |       className="relative w-full overflow-x-auto"
 12 |     >
 13 |       <table
 14 |         data-slot="table"
 15 |         className={cn("w-full caption-bottom text-sm", className)}
 16 |         {...props}
 17 |       />
 18 |     </div>
 19 |   )
 20 | }
 21 | 
 22 | function TableHeader({ className, ...props }: React.ComponentProps<"thead">) {
 23 |   return (
 24 |     <thead
 25 |       data-slot="table-header"
 26 |       className={cn("[&_tr]:border-b", className)}
 27 |       {...props}
 28 |     />
 29 |   )
 30 | }
 31 | 
 32 | function TableBody({ className, ...props }: React.ComponentProps<"tbody">) {
 33 |   return (
 34 |     <tbody
 35 |       data-slot="table-body"
 36 |       className={cn("[&_tr:last-child]:border-0", className)}
 37 |       {...props}
 38 |     />
 39 |   )
 40 | }
 41 | 
 42 | function TableFooter({ className, ...props }: React.ComponentProps<"tfoot">) {
 43 |   return (
 44 |     <tfoot
 45 |       data-slot="table-footer"
 46 |       className={cn(
 47 |         "bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",
 48 |         className
 49 |       )}
 50 |       {...props}
 51 |     />
 52 |   )
 53 | }
 54 | 
 55 | function TableRow({ className, ...props }: React.ComponentProps<"tr">) {
 56 |   return (
 57 |     <tr
 58 |       data-slot="table-row"
 59 |       className={cn(
 60 |         "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
 61 |         className
 62 |       )}
 63 |       {...props}
 64 |     />
 65 |   )
 66 | }
 67 | 
 68 | function TableHead({ className, ...props }: React.ComponentProps<"th">) {
 69 |   return (
 70 |     <th
 71 |       data-slot="table-head"
 72 |       className={cn(
 73 |         "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
 74 |         className
 75 |       )}
 76 |       {...props}
 77 |     />
 78 |   )
 79 | }
 80 | 
 81 | function TableCell({ className, ...props }: React.ComponentProps<"td">) {
 82 |   return (
 83 |     <td
 84 |       data-slot="table-cell"
 85 |       className={cn(
 86 |         "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
 87 |         className
 88 |       )}
 89 |       {...props}
 90 |     />
 91 |   )
 92 | }
 93 | 
 94 | function TableCaption({
 95 |   className,
 96 |   ...props
 97 | }: React.ComponentProps<"caption">) {
 98 |   return (
 99 |     <caption
100 |       data-slot="table-caption"
101 |       className={cn("text-muted-foreground mt-4 text-sm", className)}
102 |       {...props}
103 |     />
104 |   )
105 | }
106 | 
107 | export {
108 |   Table,
109 |   TableHeader,
110 |   TableBody,
111 |   TableFooter,
112 |   TableHead,
113 |   TableRow,
114 |   TableCell,
115 |   TableCaption,
116 | }
117 | 


--------------------------------------------------------------------------------
/components/ui/tabs.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as TabsPrimitive from "@radix-ui/react-tabs"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function Tabs({
 9 |   className,
10 |   ...props
11 | }: React.ComponentProps<typeof TabsPrimitive.Root>) {
12 |   return (
13 |     <TabsPrimitive.Root
14 |       data-slot="tabs"
15 |       className={cn("flex flex-col gap-2", className)}
16 |       {...props}
17 |     />
18 |   )
19 | }
20 | 
21 | function TabsList({
22 |   className,
23 |   ...props
24 | }: React.ComponentProps<typeof TabsPrimitive.List>) {
25 |   return (
26 |     <TabsPrimitive.List
27 |       data-slot="tabs-list"
28 |       className={cn(
29 |         "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",
30 |         className
31 |       )}
32 |       {...props}
33 |     />
34 |   )
35 | }
36 | 
37 | function TabsTrigger({
38 |   className,
39 |   ...props
40 | }: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
41 |   return (
42 |     <TabsPrimitive.Trigger
43 |       data-slot="tabs-trigger"
44 |       className={cn(
45 |         "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
46 |         className
47 |       )}
48 |       {...props}
49 |     />
50 |   )
51 | }
52 | 
53 | function TabsContent({
54 |   className,
55 |   ...props
56 | }: React.ComponentProps<typeof TabsPrimitive.Content>) {
57 |   return (
58 |     <TabsPrimitive.Content
59 |       data-slot="tabs-content"
60 |       className={cn("flex-1 outline-none", className)}
61 |       {...props}
62 |     />
63 |   )
64 | }
65 | 
66 | export { Tabs, TabsList, TabsTrigger, TabsContent }
67 | 


--------------------------------------------------------------------------------
/components/ui/textarea.tsx:
--------------------------------------------------------------------------------
 1 | import * as React from "react"
 2 | 
 3 | import { cn } from "@/lib/utils"
 4 | 
 5 | function Textarea({ className, ...props }: React.ComponentProps<"textarea">) {
 6 |   return (
 7 |     <textarea
 8 |       data-slot="textarea"
 9 |       className={cn(
10 |         "border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
11 |         className
12 |       )}
13 |       {...props}
14 |     />
15 |   )
16 | }
17 | 
18 | export { Textarea }
19 | 


--------------------------------------------------------------------------------
/components/ui/tooltip.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import * as TooltipPrimitive from "@radix-ui/react-tooltip"
 5 | 
 6 | import { cn } from "@/lib/utils"
 7 | 
 8 | function TooltipProvider({
 9 |   delayDuration = 0,
10 |   ...props
11 | }: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
12 |   return (
13 |     <TooltipPrimitive.Provider
14 |       data-slot="tooltip-provider"
15 |       delayDuration={delayDuration}
16 |       {...props}
17 |     />
18 |   )
19 | }
20 | 
21 | function Tooltip({
22 |   ...props
23 | }: React.ComponentProps<typeof TooltipPrimitive.Root>) {
24 |   return (
25 |     <TooltipProvider>
26 |       <TooltipPrimitive.Root data-slot="tooltip" {...props} />
27 |     </TooltipProvider>
28 |   )
29 | }
30 | 
31 | function TooltipTrigger({
32 |   ...props
33 | }: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
34 |   return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />
35 | }
36 | 
37 | function TooltipContent({
38 |   className,
39 |   sideOffset = 0,
40 |   children,
41 |   ...props
42 | }: React.ComponentProps<typeof TooltipPrimitive.Content>) {
43 |   return (
44 |     <TooltipPrimitive.Portal>
45 |       <TooltipPrimitive.Content
46 |         data-slot="tooltip-content"
47 |         sideOffset={sideOffset}
48 |         className={cn(
49 |           "bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
50 |           className
51 |         )}
52 |         {...props}
53 |       >
54 |         {children}
55 |         <TooltipPrimitive.Arrow className="bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
56 |       </TooltipPrimitive.Content>
57 |     </TooltipPrimitive.Portal>
58 |   )
59 | }
60 | 
61 | export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }
62 | 


--------------------------------------------------------------------------------
/components/user-nav.tsx:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import * as React from "react"
 4 | import { useTheme } from "next-themes"
 5 | import {
 6 |   DropdownMenu,
 7 |   DropdownMenuContent,
 8 |   DropdownMenuItem,
 9 |   DropdownMenuLabel,
10 |   DropdownMenuSeparator,
11 |   DropdownMenuTrigger,
12 |   DropdownMenuSub,
13 |   DropdownMenuSubContent,
14 |   DropdownMenuSubTrigger,
15 |   DropdownMenuPortal,
16 | } from "@/components/ui/dropdown-menu"
17 | import { Button } from "@/components/ui/button"
18 | import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar"
19 | import { logout } from "@/lib/actions/auth"
20 | import type { UserSession } from "@/lib/session"
21 | import { Moon, Sun } from "lucide-react"
22 | 
23 | interface NavUserProps {
24 |   user: UserSession;
25 | }
26 | 
27 | export function NavUser({ user }: NavUserProps) {
28 |     const { setTheme } = useTheme()
29 |     const userInitial = user.name?.charAt(0).toUpperCase() || 'A';
30 | 
31 |     return (
32 |         <DropdownMenu>
33 |             <DropdownMenuTrigger asChild>
34 |                 {/* Updated trigger to be a simple avatar button for the header */}
35 |                 <Button variant="ghost" className="relative h-9 w-9 rounded-full">
36 |                     <Avatar className="h-9 w-9">
37 |                         <AvatarImage src={`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAADgCAMAAAAt85rTAAAAkFBMVEX///8AAAD6+vr5+fnp6eny8vL29vbu7u4MDAzX19cICAjk5OTe3t7h4eHAwMDt7e27u7vOzs6srKwSEhKoqKhZWVmGhoZmZmZHR0fR0dEmJiZTU1PJycmNjY1aWlpvb296enodHR2zs7Oenp4+Pj45OTmAgIAyMjKVlZUrKytsbGw6OjqKiooeHh5CQkJKSkoy3jvvAAAR3UlEQVR4nO1dZ5uyTA8lCEgTaYL0phQL/P9/986A7lrAwr086HtxPuyua5uQmeQkkwwEMWHChAkTJkyYMGHChAkTJkyYMGHChAkTJkyYMGHChDExo+c0M/YghgKnH0JztVqZgeeOPZa/xpxLHLhElnL/P4qcy94a7mHqLjn20P4CglfxLeJhHFeG9OUyMq7fIdwPNCdQv1ZKN3gmXoMvFZA2tdfk0+LZ2GPtg5h9TTwMdezBvguOIowu09IGb+wBvwfK1OzNG+IB8ObYY34L0lvCNaDHHvQ7MHoIuBx70G9A7SEfjD3od5D0kK8ce9DvgM7eF/Cr/IT8vnzmN4UWs/INyXhEdpDDLIWxR/0G4pckY3me1zQkW2ZjCYOxR/06aLNVHpa/flBorFasV6lCLjIs4ff4Qe6eYfO1pnanJzTEUX3dkiTJEmqxuAr9Vx573C/j1kngVaYdA5nOgefxIz4Kb9IVMWiQjDTc91HdCHh0drmLNLWsrUnkBDJ1+xbpmwScXatvqytUoy4mXJuH2KVaglssoPQfj7M3uCvTcuXAO+N2BXj7Pxja3+CKiGqR+Mp7ONi99LqPgHc1RfcvZVsoyIce1t8huJqhtwMnqYs1KBhB3DAYCL8n7bS7EvDGdEhGuU9/HuXoJduEYkQJ1qryLWz0UkAerpbWMtB4LYKfDJpro2ugbdYFZgBaxf33g+2D8FKDzo9aON3fIinAtqHyXEuKkzQwAgPTukharAtXL2Ex5rhfxmW6gt+dlhaTH528AAhjRZH1ECqXEzFNY/y9ukIszYwEQix8/eB9flShXxpRDwtIkmQOEukiVTUvIcWVT1KKmkhGIRLLLCRSPJdDiKD6fHdx5ehLM811Z+tHB4Lwi99FRm2NWJYkr+YBskkcQEGXJhO/wtBcChhKLmcdgnAvETP70qIGtS11M0xL5y5yniiYUO3PVx9C2lAYHP7xEDf/mwUuQdSjX7iNEGEtYFLGQYg3exPQkdcovkHAZWGukWTVFsVG/JmJ0pXS/IFDKQP9Jnc1A0AWt4rAxQsXPQ7Xd2HGJyJXYh5CSlRx4H6KYs8CSrAxIiwLtannqwzpUoaKRAEhEtsxv4TOWEdnjn5RjnY81RrQTv0HWZg0oRwRvZGhVtYMyUYeUiz5jlgU30JIPWjYmFjxeqMTMqxVydnYjuaZSxg4x0QvZmedcbBCYciXUBnaBHmhY1Yi8tqJeB4O+KeVYTcwowi6zsC42sGxmuctNE9X21GG+z64LBItgJVFCGCf7Ki0wT/Jk6khEr92eO7xnPC1ENsGpeXDPhEKFAyHSAkru4h7+nXejCoup59wPBmfBLRm3XHoUhz+64H2hQQFueCRn8hUYM+u0DB/d+GZwCdoFz/mInkdYoOENP49ESEWkKBJwUlFpEF+U0/CuR2caTQdaALSna8wzCGjZuFm5wXFN22fuWDXcc+coZCA7CmjaxUbXUBKoiUfLTbG2oO9M+tcoajqaqJ9kYDi/pyooJB4SIVNUp7Wiywz/cLeLcU0spHomgaO3ExM8Zs0SBpg6zSN1DWvg15ePz0x46QkQVxUj+psdwOjlvCrBCSoCLSVX6LpV+JcNl/Nr57W682JU0SsNSEj91UCEkKlaRFee34t4HURjMpfbc6wYFJYQHaswfYCI2UAjoKiBb6W4cIJusXN5hMPZcxIwI832j5AsxTvaSa1gLzm/MRBVHFX/4TCKmf/XVO0Sczw4EpwEmd1qoKxTuUJLHv+ybPN72LcAb+LeZraAGspY0/TsAkb5H0tMd4O5TVsanL0Mraes/uxh/wmSFKUXHtd/JiSAEWCu9p8IvHYwwHvigYWQQqHqH5FNfaI++Bir5eFtYNl43kogpjGTvG8y7vUHST3dxXjnUBelCMg0eoyBDOxGvIyoyzutBGjoolrjDnQ3qCuJAT2KC9PMYNoZHYU2ZucI4llhiT/mh3sa4j2tUsw5ZqYCimLrYyGzYup7zBl/Z4ii2vcViSAr1OMuv5ha2hVNn9YY4+0J26rnnAVCQ9XZKaWUPuGnO89GDm3b5mLxvIttfjVV+R8b0GuwJPhpdaC8Bv7Cmb7nPDlA7zSXfBV5aJn5IidiJtk84IOs+/Y3L2GiHdViNi2V5H2rIUiHHmsvbBpEoE6JK7D8uwjGfnvqaX8RQynnZcc0rlawqOJqj/+qM+E8UOfVXYlkGrF/nr1G3xNTvsSjJLF57+twkZMzA3LU2nsDb6sb6mBbEIc/vBLDjlEmiAXKq4SuhQRxfNF/OhzPhNzRDZN7rztiTHTYVvv6dKxXzRxIZ6uLAowvqKw4hKkkmdQ1R2Pi/KXQis7CJtHYhI4Ua0/rcpz7cs4GhkHEWTxKccU278tV0zMaqegj6EsWY5le8sRUqR8UVcWbaVILeZFPYznXzzNeFBdMhbPIIkEaDX/ko56UfUBSuOqN55xriJ1yd78yjLDZVs50IQS7PTP354Xwy0ST13ebGO615UFlv3rE1QH6dwHBveiV5Evf7IaaQlF7tuwTQ1edRkIyWV23gelMgWxgXN9l4sciPGxjBs5Pdgm7cMT7Qs/J/vq8VxqoG9JxMd/wiRSWkGWf+Q29iJgIVI7bWGy+WHS1pZzo5PnWLA6sdjsLtTLqL8p/g8CqbPoyj+IBujiTKW5QiaSrPF7zMpn5tX2WmNWBeWnWZs5cgzm44RRvm42QJksJEizoeB0ABaharfSCGtYf1buAo3I1p8MiTo2Kgx8mlhk9aKbV7jqx7yvHBHsz2okFDLInic0cxsLouPaCy7C9JQxbTVMaLsljJCO7AelgJcObF5I2IrHGNc/YT02AiYQp8nWj1oEJEMwPya8ZxzYv5SvTY4iHaXInxP0Cs1TYRPICiH4rRsui+hz+tA8gKuzpzqdGGPvUuzgZQ4p0qRciLF1mYetucIQ/LZ/jwBXu4nFu8mWDHXJGhOiP9lNEjWuYtZqnZRPaedFC3B3LZHUnb1102YL23FpYfV4J4kM3mpFIwdzK4h33BR4Uue5JXZ+qRz4qpA5867nmw9ePRs0Q4mKK8Wq7hmhMRT5iSC8+Q95bguQus0EKe6WlvYwzSSUdsexcsyCk3QvNMttVhyjCLcuZNlrLZjvQwftjl2bpzmqPHLWJHYTDwdlnArYzm+gBU6Jk9TBvWr23jF3QR7LkiIyCITnDKPBmQPpndU0TtTEch6biXnxMBMqgv1TW6rEeeBvWBRq+mmix5YozMmr710PdAqGHNn3JdbyurmaHPuEMufVw8tuQkjQnJybmW0X9uqQKCJFtjshkh0mq0qmbeeHcHzDazh4kuu0jg/m6IzSARwWiirAXemPFUSxw2y8UVnbjt5829DqxTNDL/BdKl5I6WrPwipVJeE2/dEGThuGuqqt3pjZNdaFOj4JCZiwPRuqOPy2OqiL1z29Hg3TjLCGXdu/vabqkymf1S216yZmA/cVtV3AsAdJ5MyhfZXpULvwWVX2Sa7QEL5rEWe7/SBGNIFt6xxT+NpFz5xNHwKVtH/oIyydYWrcdh1VEaJdW5nZyunxobMqfPs9wiZ9/qL3wW07qiLodW1dSLN1hT77VPv9jTR3mBq3GLbtfoz0nbrtOgh7fOppAb85kiGiY9IAp2ON5SWmKGTQ47rOgh41sfljVtsT823nxIibgELoQYCprMdVSWGIcNCCzuu2eMTBHkPu0QDKrLdDJPtziLqemvfvcjSq9zMVNKz6ft0jbKDbNu97U8OoRzEJ92Ak/SGwD5Iqft+aHvFZBNIGeZASohgenFiQ9C0Kie1HS1Bq15QOQ5yZn8Lu7/N6pPMw0xS3MwuTH6ASerkaojRJ2D4MIY1Vaw69zAZwg1ahDcAepIfm17W5skWFS9sZoMomhuz+1B7OIqh/ijxzeBD2YEIWZurdHBaPwd8HS2QILaHC3Fzq4T98KmM+2JBQTWR/JNm5mzjuEBknJmvlackh3P3D1RS0B/Y+aWIzr7qVMBkilljcZeybf2ea/w8Z2EdLUDjk2Bm4mpHdrENviH6Z9nRTPXP/YcHnm+43O7VrJXOZcNdXT8wCbYCM065jE13+JwGrbmtBZ+cLSlfX85g2iwGM6KYj5/lPAtKPFpMZ4GI9ehHf5l+EctP7GzvBHTvmffy2gAvdd07ETnnkWpdeUTpOmZnSjZ/ghoglVLbjROz8LQEZLtkWpipFaT01z+VBXRAQ7gM/aYiuSq+jCAIZmdet6CIxy7Q+eJNKgzlOUjl94lZ1gFiCxhs/bUAW7UUBSdffhtKPxhJHIKh1L4edD3CGkLjtCNuYnfZSfYuYrEyFrKuapSQMQ5VOCorrt8FQ9UjDPYPFRu1hG+Wwz5kMyeUJ1h0tpWGQHnJVSkxHkpanQ8jeBWR/H7bpYLd/6OJRHoOg0JtoN90WdUEoZ+iuQDcmkZQhJ/NeN5ugh7jFQWeVjph1m7TlAY55UKzDuG1KUaEU9MqsiHD4+5TaussjPxCQCQGina7cSDdbyIaJD3UkhKKXNeyI8v8N0JUEkdhW0ZmFatpgcjfzmhQk1cslS5QqFfP3XjYmGCBtPwetw3DFcE9GKPmw2gSqd39R5qp8Khaam/lC3vY693Y1wOYuB6wfJG7LQa4qHK+/DlHHbJNLFEkk94aX2vlVuaoPDaC9JO9lLOab8u8TMp4dhhk+EiYyD7or0r/kEJnXn68jl5KXZf7pjPAuf0wpYZbWU9fvZWNcbQAjisjxgltIeepgKY9+mFgnD6ZD1nzdjEuCamVIv7Qm7gxL6WRlKeKyV4Md4oYD5Csk21Wwosg55SY73EJmlzsZL8sE6tCFM8ooUK+nsHsfYHFJ0nQA6aXq7KM+yU2VHWTnbJE7vx9LiqpZ4ib5nT7TwRDiYF/i00VuIN5mqSy/NDxni4/UZnYUIWVvTTWSnguWHAzWOHrdRoXsvYHvXxrnsNmlcesx0ozze18zikI0zVfx0uO8MpTktUBIr27oMwvOxcWG/hr3kKYDFYp6dyaRlrZgh7HYSQwPP4c168e1kbvnqyDo5gotz/zZthJJL/Hx6tUms5vGSp6PqsFuAHsj4EyMc0N93ADoahu8TOm4cIIqQHT7+toHHdyBpKmFK+tG+HsD32O2Xu2MPOYG7B7xriyCm+jS0+PNGR+vF9e3dZoUEx/KXXwZOob3tUoUmotGaDrlT++9VpqGLrncYjl0Z4x34dRE/bWbRIga75u4DxuDFA8FRIH7kyvLz59BzuYCF+uGUxybTm1ei+xttfNUhWJm/1Vj2q+AM+XldZBAtL0wevPYB9gacl10R6EFSgucrCLzsT0rzN6YlZMnsSv8522TvwKKr0apS6MIrOukEe3iW6BuVmGu6kkc+uufG/rtnRBNe24xO4x06vbhXdqx9MA5GSb50jXTbrivj7TCR8jZ202VGiWiNeenyWykAxIO7+13zPXCic+nhd+WctNoYuaJJCPjQc0Zgr7MrS3skU5ay99ixlJ51H+kMp9MOs65WHAuO5KA+uv9fTNpEyUXAcf+SV5RviwQO0AwTquk679q11wT8otFJ9jPJnd8UYfABGMJKKxfy+8uAta8JD2zkH+WxYwvpuhyBeG7Q/sbMMUrJWWLlHeuX/dCiuhSQKGE8M2R/RFm6+d+Ypnbzk2vHR1tnqahLwVUtEGqtF5B/szK0GqxUW85TvpCpVZc/lIHabyDkJTjw4Q5E2/t5O4V0m2vYRvi7S/tjmG0G9rR1SNdSChyuE8lMKtXikEvy9UOIx7VpXbueZCWqQVtjRqv1XvIvwcHUADPGryGA1l2jHYRRmbrqJawemUfyP3JEM/NUQ/9lVpPO6W9qHLbF5r3Wm5ePM9KJtBa2i//Q+T3CXwhgaor/fmwxOAC51qLZYWiplEP7aCDm4IDIc9KtXMWSi/aQ6bJBEolwABZ+bdAOhfHopBcaG/lB2785WSDs1mQHJqeYI5+F0LSg1QS53NRidMjBH+0zXO6+eRtSdo4sMLoWFVHKFLvz240gG96Co7+IecZkzQliuKcRkb1rxJeMgTik57dMRDDX60YK/qo03LOkP9Mg3SvvsPh8XcpWfdjjpKZMGHChAkTJkyYMGHChAkTJkyYMGHChAkTJvw9/gf5zyskfSSrMAAAAABJRU5ErkJggg==`} alt={user.name || ''} />
38 |                         <AvatarFallback>{userInitial}</AvatarFallback>
39 |                     </Avatar>
40 |                 </Button>
41 |             </DropdownMenuTrigger>
42 |             <DropdownMenuContent className="w-56" align="end" forceMount>
43 |                 <DropdownMenuLabel className="font-normal">
44 |                     <div className="flex flex-col space-y-1">
45 |                         <p className="text-sm font-medium leading-none">{user.name}</p>
46 |                         <p className="text-xs leading-none text-muted-foreground">{user.email}</p>
47 |                     </div>
48 |                 </DropdownMenuLabel>
49 |                 <DropdownMenuSeparator />
50 |                 {/* Theme Toggle Submenu */}
51 |                 <DropdownMenuSub>
52 |                     <DropdownMenuSubTrigger>
53 |                         <Sun className="mr-2 h-4 w-4" />
54 |                         <span>Theme</span>
55 |                     </DropdownMenuSubTrigger>
56 |                     <DropdownMenuPortal>
57 |                         <DropdownMenuSubContent>
58 |                             <DropdownMenuItem onClick={() => setTheme("light")}>
59 |                                 Light
60 |                             </DropdownMenuItem>
61 |                             <DropdownMenuItem onClick={() => setTheme("dark")}>
62 |                                 Dark
63 |                             </DropdownMenuItem>
64 |                             <DropdownMenuItem onClick={() => setTheme("system")}>
65 |                                 System
66 |                             </DropdownMenuItem>
67 |                         </DropdownMenuSubContent>
68 |                     </DropdownMenuPortal>
69 |                 </DropdownMenuSub>
70 |                 <DropdownMenuSeparator />
71 |                 <form action={logout} className="w-full">
72 |                     <button type="submit" className="w-full text-left relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors hover:bg-accent focus:bg-accent focus:text-accent-foreground">
73 |                         Logout
74 |                     </button>
75 |                 </form>
76 |             </DropdownMenuContent>
77 |         </DropdownMenu>
78 |     )
79 | }


--------------------------------------------------------------------------------
/drizzle.config.ts:
--------------------------------------------------------------------------------
 1 | import { defineConfig } from 'drizzle-kit';
 2 | import { env } from './env.mjs';
 3 | 
 4 | export default defineConfig({
 5 |   schema: './lib/db/schema/shared.ts',
 6 |   out: './drizzle/main-migrations',
 7 |   dialect: 'postgresql',
 8 |   dbCredentials: {
 9 |     url: env.POSTGRES_URL,
10 |   },
11 | });


--------------------------------------------------------------------------------
/drizzle.tenant.config.ts:
--------------------------------------------------------------------------------
 1 | // drizzle.tenant.config.ts
 2 | 
 3 | import { defineConfig } from 'drizzle-kit';
 4 | import 'dotenv/config';
 5 | 
 6 | export default defineConfig({
 7 |   dialect: 'postgresql',
 8 |   // Make sure this points to your tenant-specific schema file(s)
 9 |   schema: './lib/db/schema/tenant.ts', 
10 |   // This is the crucial line to add/correct
11 |   out: './drizzle/tenant', 
12 |   dbCredentials: {
13 |     url: process.env.TENANT_DATABASE_URL || 'postgresql://user:password@host:port/db',
14 |   },
15 |   verbose: true,
16 |   strict: true,
17 | });


--------------------------------------------------------------------------------
/drizzle/main-migrations/0000_medical_captain_universe.sql:
--------------------------------------------------------------------------------
 1 | CREATE TABLE "tenants" (
 2 | 	"id" serial PRIMARY KEY NOT NULL,
 3 | 	"tenant_id" text NOT NULL,
 4 | 	"name" text NOT NULL,
 5 | 	"neon_project_id" text NOT NULL,
 6 | 	"connection_string" text NOT NULL,
 7 | 	"created_at" timestamp DEFAULT now() NOT NULL,
 8 | 	CONSTRAINT "tenants_tenant_id_unique" UNIQUE("tenant_id"),
 9 | 	CONSTRAINT "tenants_neon_project_id_unique" UNIQUE("neon_project_id")
10 | );
11 | 


--------------------------------------------------------------------------------
/drizzle/main-migrations/meta/0000_snapshot.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "id": "4f03aac9-4dd1-46f8-af6e-72b74883071f",
 3 |   "prevId": "00000000-0000-0000-0000-000000000000",
 4 |   "version": "7",
 5 |   "dialect": "postgresql",
 6 |   "tables": {
 7 |     "public.tenants": {
 8 |       "name": "tenants",
 9 |       "schema": "",
10 |       "columns": {
11 |         "id": {
12 |           "name": "id",
13 |           "type": "serial",
14 |           "primaryKey": true,
15 |           "notNull": true
16 |         },
17 |         "tenant_id": {
18 |           "name": "tenant_id",
19 |           "type": "text",
20 |           "primaryKey": false,
21 |           "notNull": true
22 |         },
23 |         "name": {
24 |           "name": "name",
25 |           "type": "text",
26 |           "primaryKey": false,
27 |           "notNull": true
28 |         },
29 |         "neon_project_id": {
30 |           "name": "neon_project_id",
31 |           "type": "text",
32 |           "primaryKey": false,
33 |           "notNull": true
34 |         },
35 |         "connection_string": {
36 |           "name": "connection_string",
37 |           "type": "text",
38 |           "primaryKey": false,
39 |           "notNull": true
40 |         },
41 |         "created_at": {
42 |           "name": "created_at",
43 |           "type": "timestamp",
44 |           "primaryKey": false,
45 |           "notNull": true,
46 |           "default": "now()"
47 |         }
48 |       },
49 |       "indexes": {},
50 |       "foreignKeys": {},
51 |       "compositePrimaryKeys": {},
52 |       "uniqueConstraints": {
53 |         "tenants_tenant_id_unique": {
54 |           "name": "tenants_tenant_id_unique",
55 |           "nullsNotDistinct": false,
56 |           "columns": [
57 |             "tenant_id"
58 |           ]
59 |         },
60 |         "tenants_neon_project_id_unique": {
61 |           "name": "tenants_neon_project_id_unique",
62 |           "nullsNotDistinct": false,
63 |           "columns": [
64 |             "neon_project_id"
65 |           ]
66 |         }
67 |       },
68 |       "policies": {},
69 |       "checkConstraints": {},
70 |       "isRLSEnabled": false
71 |     }
72 |   },
73 |   "enums": {},
74 |   "schemas": {},
75 |   "sequences": {},
76 |   "roles": {},
77 |   "policies": {},
78 |   "views": {},
79 |   "_meta": {
80 |     "columns": {},
81 |     "schemas": {},
82 |     "tables": {}
83 |   }
84 | }


--------------------------------------------------------------------------------
/drizzle/main-migrations/meta/_journal.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "version": "7",
 3 |   "dialect": "postgresql",
 4 |   "entries": [
 5 |     {
 6 |       "idx": 0,
 7 |       "version": "7",
 8 |       "when": 1755126905727,
 9 |       "tag": "0000_medical_captain_universe",
10 |       "breakpoints": true
11 |     }
12 |   ]
13 | }


--------------------------------------------------------------------------------
/drizzle/tenant/0000_sleepy_doctor_spectrum.sql:
--------------------------------------------------------------------------------
  1 | CREATE TYPE "public"."attendance_status" AS ENUM('present', 'absent', 'tardy', 'excused');--> statement-breakpoint
  2 | CREATE TYPE "public"."invoice_status" AS ENUM('draft', 'open', 'paid', 'void', 'past_due');--> statement-breakpoint
  3 | CREATE TYPE "public"."payment_method" AS ENUM('credit_card', 'bank_transfer', 'cash', 'check', 'scholarship');--> statement-breakpoint
  4 | CREATE TYPE "public"."person_type" AS ENUM('student', 'guardian', 'staff');--> statement-breakpoint
  5 | CREATE TYPE "public"."schedule_type" AS ENUM('recurring_class', 'one_time_event');--> statement-breakpoint
  6 | CREATE TABLE "academic_terms" (
  7 | 	"id" serial PRIMARY KEY NOT NULL,
  8 | 	"academic_year_id" integer NOT NULL,
  9 | 	"term_name" text NOT NULL,
 10 | 	"start_date" date NOT NULL,
 11 | 	"end_date" date NOT NULL,
 12 | 	"is_current" boolean DEFAULT false NOT NULL,
 13 | 	"created_at" timestamp DEFAULT now() NOT NULL,
 14 | 	"updated_at" timestamp DEFAULT now() NOT NULL
 15 | );
 16 | --> statement-breakpoint
 17 | CREATE TABLE "academic_years" (
 18 | 	"id" serial PRIMARY KEY NOT NULL,
 19 | 	"school_id" integer NOT NULL,
 20 | 	"year_name" text NOT NULL,
 21 | 	"start_date" date NOT NULL,
 22 | 	"end_date" date NOT NULL,
 23 | 	"is_current" boolean DEFAULT false NOT NULL,
 24 | 	"created_at" timestamp DEFAULT now() NOT NULL,
 25 | 	"updated_at" timestamp DEFAULT now() NOT NULL
 26 | );
 27 | --> statement-breakpoint
 28 | CREATE TABLE "departments" (
 29 | 	"id" serial PRIMARY KEY NOT NULL,
 30 | 	"school_id" integer NOT NULL,
 31 | 	"name" text NOT NULL,
 32 | 	"description" text,
 33 | 	"created_at" timestamp DEFAULT now() NOT NULL,
 34 | 	"updated_at" timestamp DEFAULT now() NOT NULL
 35 | );
 36 | --> statement-breakpoint
 37 | CREATE TABLE "employees" (
 38 | 	"id" serial PRIMARY KEY NOT NULL,
 39 | 	"person_id" integer NOT NULL,
 40 | 	"employee_id" text NOT NULL,
 41 | 	"hire_date" date NOT NULL,
 42 | 	"termination_date" date,
 43 | 	"position" text,
 44 | 	"department_id" integer,
 45 | 	"employment_history_json" jsonb,
 46 | 	"notes" text,
 47 | 	"created_at" timestamp with time zone DEFAULT now() NOT NULL,
 48 | 	"updated_at" timestamp with time zone DEFAULT now() NOT NULL,
 49 | 	CONSTRAINT "employees_person_id_unique" UNIQUE("person_id"),
 50 | 	CONSTRAINT "employees_employee_id_unique" UNIQUE("employee_id")
 51 | );
 52 | --> statement-breakpoint
 53 | CREATE TABLE "grade_levels" (
 54 | 	"id" serial PRIMARY KEY NOT NULL,
 55 | 	"school_id" integer NOT NULL,
 56 | 	"name" text NOT NULL,
 57 | 	"level_order" integer NOT NULL,
 58 | 	"description" text,
 59 | 	"created_at" timestamp DEFAULT now() NOT NULL,
 60 | 	"updated_at" timestamp DEFAULT now() NOT NULL
 61 | );
 62 | --> statement-breakpoint
 63 | CREATE TABLE "guardians" (
 64 | 	"id" serial PRIMARY KEY NOT NULL,
 65 | 	"person_id" integer NOT NULL,
 66 | 	"relationship" text,
 67 | 	"is_primary_contact" boolean DEFAULT false NOT NULL,
 68 | 	"created_at" timestamp with time zone DEFAULT now() NOT NULL,
 69 | 	"updated_at" timestamp with time zone DEFAULT now() NOT NULL,
 70 | 	CONSTRAINT "guardians_person_id_unique" UNIQUE("person_id")
 71 | );
 72 | --> statement-breakpoint
 73 | CREATE TABLE "people" (
 74 | 	"id" serial PRIMARY KEY NOT NULL,
 75 | 	"school_id" integer,
 76 | 	"first_name" text NOT NULL,
 77 | 	"last_name" text NOT NULL,
 78 | 	"middle_name" text,
 79 | 	"date_of_birth" date,
 80 | 	"gender" text,
 81 | 	"contact_email" text,
 82 | 	"contact_phone" text,
 83 | 	"address" text,
 84 | 	"person_type" "person_type" NOT NULL,
 85 | 	"profile_picture_url" text,
 86 | 	"created_at" timestamp with time zone DEFAULT now() NOT NULL,
 87 | 	"updated_at" timestamp with time zone DEFAULT now() NOT NULL,
 88 | 	CONSTRAINT "people_contact_email_unique" UNIQUE("contact_email")
 89 | );
 90 | --> statement-breakpoint
 91 | CREATE TABLE "permissions" (
 92 | 	"id" serial PRIMARY KEY NOT NULL,
 93 | 	"name" text NOT NULL,
 94 | 	"description" text,
 95 | 	"created_at" timestamp DEFAULT now() NOT NULL,
 96 | 	CONSTRAINT "permissions_name_unique" UNIQUE("name")
 97 | );
 98 | --> statement-breakpoint
 99 | CREATE TABLE "roles" (
100 | 	"id" serial PRIMARY KEY NOT NULL,
101 | 	"name" text NOT NULL,
102 | 	"description" text,
103 | 	"created_at" timestamp DEFAULT now() NOT NULL,
104 | 	CONSTRAINT "roles_name_unique" UNIQUE("name")
105 | );
106 | --> statement-breakpoint
107 | CREATE TABLE "roles_to_permissions" (
108 | 	"role_id" integer NOT NULL,
109 | 	"permission_id" integer NOT NULL,
110 | 	CONSTRAINT "roles_to_permissions_role_id_permission_id_pk" PRIMARY KEY("role_id","permission_id")
111 | );
112 | --> statement-breakpoint
113 | CREATE TABLE "schools" (
114 | 	"id" serial PRIMARY KEY NOT NULL,
115 | 	"name" text NOT NULL,
116 | 	"address" text,
117 | 	"phone" text,
118 | 	"email" text,
119 | 	"website" text,
120 | 	"logo_url" text,
121 | 	"branding_json" jsonb,
122 | 	"created_at" timestamp DEFAULT now() NOT NULL,
123 | 	"updated_at" timestamp DEFAULT now() NOT NULL
124 | );
125 | --> statement-breakpoint
126 | CREATE TABLE "student_guardians" (
127 | 	"student_id" integer NOT NULL,
128 | 	"guardian_id" integer NOT NULL,
129 | 	CONSTRAINT "student_guardians_student_id_guardian_id_pk" PRIMARY KEY("student_id","guardian_id")
130 | );
131 | --> statement-breakpoint
132 | CREATE TABLE "students" (
133 | 	"id" serial PRIMARY KEY NOT NULL,
134 | 	"person_id" integer NOT NULL,
135 | 	"student_id" text NOT NULL,
136 | 	"enrollment_date" date NOT NULL,
137 | 	"graduation_date" date,
138 | 	"current_grade_level_id" integer,
139 | 	"academic_history_json" jsonb,
140 | 	"notes" text,
141 | 	"created_at" timestamp with time zone DEFAULT now() NOT NULL,
142 | 	"updated_at" timestamp with time zone DEFAULT now() NOT NULL,
143 | 	CONSTRAINT "students_person_id_unique" UNIQUE("person_id"),
144 | 	CONSTRAINT "students_student_id_unique" UNIQUE("student_id")
145 | );
146 | --> statement-breakpoint
147 | CREATE TABLE "users" (
148 | 	"id" serial PRIMARY KEY NOT NULL,
149 | 	"email" text NOT NULL,
150 | 	"password" text NOT NULL,
151 | 	"person_id" integer NOT NULL,
152 | 	"created_at" timestamp with time zone DEFAULT now() NOT NULL,
153 | 	CONSTRAINT "users_email_unique" UNIQUE("email"),
154 | 	CONSTRAINT "users_person_id_unique" UNIQUE("person_id")
155 | );
156 | --> statement-breakpoint
157 | CREATE TABLE "users_to_roles" (
158 | 	"user_id" integer NOT NULL,
159 | 	"role_id" integer NOT NULL,
160 | 	"school_id" integer,
161 | 	CONSTRAINT "users_to_roles_user_id_role_id_pk" PRIMARY KEY("user_id","role_id")
162 | );
163 | --> statement-breakpoint
164 | ALTER TABLE "academic_terms" ADD CONSTRAINT "academic_terms_academic_year_id_academic_years_id_fk" FOREIGN KEY ("academic_year_id") REFERENCES "public"."academic_years"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
165 | ALTER TABLE "academic_years" ADD CONSTRAINT "academic_years_school_id_schools_id_fk" FOREIGN KEY ("school_id") REFERENCES "public"."schools"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
166 | ALTER TABLE "departments" ADD CONSTRAINT "departments_school_id_schools_id_fk" FOREIGN KEY ("school_id") REFERENCES "public"."schools"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
167 | ALTER TABLE "employees" ADD CONSTRAINT "employees_person_id_people_id_fk" FOREIGN KEY ("person_id") REFERENCES "public"."people"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
168 | ALTER TABLE "employees" ADD CONSTRAINT "employees_department_id_departments_id_fk" FOREIGN KEY ("department_id") REFERENCES "public"."departments"("id") ON DELETE set null ON UPDATE no action;--> statement-breakpoint
169 | ALTER TABLE "grade_levels" ADD CONSTRAINT "grade_levels_school_id_schools_id_fk" FOREIGN KEY ("school_id") REFERENCES "public"."schools"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
170 | ALTER TABLE "guardians" ADD CONSTRAINT "guardians_person_id_people_id_fk" FOREIGN KEY ("person_id") REFERENCES "public"."people"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
171 | ALTER TABLE "people" ADD CONSTRAINT "people_school_id_schools_id_fk" FOREIGN KEY ("school_id") REFERENCES "public"."schools"("id") ON DELETE set null ON UPDATE no action;--> statement-breakpoint
172 | ALTER TABLE "roles_to_permissions" ADD CONSTRAINT "roles_to_permissions_role_id_roles_id_fk" FOREIGN KEY ("role_id") REFERENCES "public"."roles"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
173 | ALTER TABLE "roles_to_permissions" ADD CONSTRAINT "roles_to_permissions_permission_id_permissions_id_fk" FOREIGN KEY ("permission_id") REFERENCES "public"."permissions"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
174 | ALTER TABLE "student_guardians" ADD CONSTRAINT "student_guardians_student_id_students_id_fk" FOREIGN KEY ("student_id") REFERENCES "public"."students"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
175 | ALTER TABLE "student_guardians" ADD CONSTRAINT "student_guardians_guardian_id_guardians_id_fk" FOREIGN KEY ("guardian_id") REFERENCES "public"."guardians"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
176 | ALTER TABLE "students" ADD CONSTRAINT "students_person_id_people_id_fk" FOREIGN KEY ("person_id") REFERENCES "public"."people"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
177 | ALTER TABLE "students" ADD CONSTRAINT "students_current_grade_level_id_grade_levels_id_fk" FOREIGN KEY ("current_grade_level_id") REFERENCES "public"."grade_levels"("id") ON DELETE set null ON UPDATE no action;--> statement-breakpoint
178 | ALTER TABLE "users" ADD CONSTRAINT "users_person_id_people_id_fk" FOREIGN KEY ("person_id") REFERENCES "public"."people"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
179 | ALTER TABLE "users_to_roles" ADD CONSTRAINT "users_to_roles_user_id_users_id_fk" FOREIGN KEY ("user_id") REFERENCES "public"."users"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
180 | ALTER TABLE "users_to_roles" ADD CONSTRAINT "users_to_roles_role_id_roles_id_fk" FOREIGN KEY ("role_id") REFERENCES "public"."roles"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
181 | ALTER TABLE "users_to_roles" ADD CONSTRAINT "users_to_roles_school_id_schools_id_fk" FOREIGN KEY ("school_id") REFERENCES "public"."schools"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
182 | CREATE UNIQUE INDEX "unq_year_term" ON "academic_terms" USING btree ("academic_year_id","term_name");--> statement-breakpoint
183 | CREATE UNIQUE INDEX "unq_school_year" ON "academic_years" USING btree ("school_id","year_name");--> statement-breakpoint
184 | CREATE UNIQUE INDEX "unq_school_dept" ON "departments" USING btree ("school_id","name");--> statement-breakpoint
185 | CREATE UNIQUE INDEX "unq_school_grade" ON "grade_levels" USING btree ("school_id","name");--> statement-breakpoint
186 | CREATE UNIQUE INDEX "unq_school_order" ON "grade_levels" USING btree ("school_id","level_order");


--------------------------------------------------------------------------------
/drizzle/tenant/meta/0000_snapshot.json:
--------------------------------------------------------------------------------
   1 | {
   2 |   "id": "6e7d0771-2457-4b55-bed0-f9c0141781a0",
   3 |   "prevId": "00000000-0000-0000-0000-000000000000",
   4 |   "version": "7",
   5 |   "dialect": "postgresql",
   6 |   "tables": {
   7 |     "public.academic_terms": {
   8 |       "name": "academic_terms",
   9 |       "schema": "",
  10 |       "columns": {
  11 |         "id": {
  12 |           "name": "id",
  13 |           "type": "serial",
  14 |           "primaryKey": true,
  15 |           "notNull": true
  16 |         },
  17 |         "academic_year_id": {
  18 |           "name": "academic_year_id",
  19 |           "type": "integer",
  20 |           "primaryKey": false,
  21 |           "notNull": true
  22 |         },
  23 |         "term_name": {
  24 |           "name": "term_name",
  25 |           "type": "text",
  26 |           "primaryKey": false,
  27 |           "notNull": true
  28 |         },
  29 |         "start_date": {
  30 |           "name": "start_date",
  31 |           "type": "date",
  32 |           "primaryKey": false,
  33 |           "notNull": true
  34 |         },
  35 |         "end_date": {
  36 |           "name": "end_date",
  37 |           "type": "date",
  38 |           "primaryKey": false,
  39 |           "notNull": true
  40 |         },
  41 |         "is_current": {
  42 |           "name": "is_current",
  43 |           "type": "boolean",
  44 |           "primaryKey": false,
  45 |           "notNull": true,
  46 |           "default": false
  47 |         },
  48 |         "created_at": {
  49 |           "name": "created_at",
  50 |           "type": "timestamp",
  51 |           "primaryKey": false,
  52 |           "notNull": true,
  53 |           "default": "now()"
  54 |         },
  55 |         "updated_at": {
  56 |           "name": "updated_at",
  57 |           "type": "timestamp",
  58 |           "primaryKey": false,
  59 |           "notNull": true,
  60 |           "default": "now()"
  61 |         }
  62 |       },
  63 |       "indexes": {
  64 |         "unq_year_term": {
  65 |           "name": "unq_year_term",
  66 |           "columns": [
  67 |             {
  68 |               "expression": "academic_year_id",
  69 |               "isExpression": false,
  70 |               "asc": true,
  71 |               "nulls": "last"
  72 |             },
  73 |             {
  74 |               "expression": "term_name",
  75 |               "isExpression": false,
  76 |               "asc": true,
  77 |               "nulls": "last"
  78 |             }
  79 |           ],
  80 |           "isUnique": true,
  81 |           "concurrently": false,
  82 |           "method": "btree",
  83 |           "with": {}
  84 |         }
  85 |       },
  86 |       "foreignKeys": {
  87 |         "academic_terms_academic_year_id_academic_years_id_fk": {
  88 |           "name": "academic_terms_academic_year_id_academic_years_id_fk",
  89 |           "tableFrom": "academic_terms",
  90 |           "tableTo": "academic_years",
  91 |           "columnsFrom": [
  92 |             "academic_year_id"
  93 |           ],
  94 |           "columnsTo": [
  95 |             "id"
  96 |           ],
  97 |           "onDelete": "cascade",
  98 |           "onUpdate": "no action"
  99 |         }
 100 |       },
 101 |       "compositePrimaryKeys": {},
 102 |       "uniqueConstraints": {},
 103 |       "policies": {},
 104 |       "checkConstraints": {},
 105 |       "isRLSEnabled": false
 106 |     },
 107 |     "public.academic_years": {
 108 |       "name": "academic_years",
 109 |       "schema": "",
 110 |       "columns": {
 111 |         "id": {
 112 |           "name": "id",
 113 |           "type": "serial",
 114 |           "primaryKey": true,
 115 |           "notNull": true
 116 |         },
 117 |         "school_id": {
 118 |           "name": "school_id",
 119 |           "type": "integer",
 120 |           "primaryKey": false,
 121 |           "notNull": true
 122 |         },
 123 |         "year_name": {
 124 |           "name": "year_name",
 125 |           "type": "text",
 126 |           "primaryKey": false,
 127 |           "notNull": true
 128 |         },
 129 |         "start_date": {
 130 |           "name": "start_date",
 131 |           "type": "date",
 132 |           "primaryKey": false,
 133 |           "notNull": true
 134 |         },
 135 |         "end_date": {
 136 |           "name": "end_date",
 137 |           "type": "date",
 138 |           "primaryKey": false,
 139 |           "notNull": true
 140 |         },
 141 |         "is_current": {
 142 |           "name": "is_current",
 143 |           "type": "boolean",
 144 |           "primaryKey": false,
 145 |           "notNull": true,
 146 |           "default": false
 147 |         },
 148 |         "created_at": {
 149 |           "name": "created_at",
 150 |           "type": "timestamp",
 151 |           "primaryKey": false,
 152 |           "notNull": true,
 153 |           "default": "now()"
 154 |         },
 155 |         "updated_at": {
 156 |           "name": "updated_at",
 157 |           "type": "timestamp",
 158 |           "primaryKey": false,
 159 |           "notNull": true,
 160 |           "default": "now()"
 161 |         }
 162 |       },
 163 |       "indexes": {
 164 |         "unq_school_year": {
 165 |           "name": "unq_school_year",
 166 |           "columns": [
 167 |             {
 168 |               "expression": "school_id",
 169 |               "isExpression": false,
 170 |               "asc": true,
 171 |               "nulls": "last"
 172 |             },
 173 |             {
 174 |               "expression": "year_name",
 175 |               "isExpression": false,
 176 |               "asc": true,
 177 |               "nulls": "last"
 178 |             }
 179 |           ],
 180 |           "isUnique": true,
 181 |           "concurrently": false,
 182 |           "method": "btree",
 183 |           "with": {}
 184 |         }
 185 |       },
 186 |       "foreignKeys": {
 187 |         "academic_years_school_id_schools_id_fk": {
 188 |           "name": "academic_years_school_id_schools_id_fk",
 189 |           "tableFrom": "academic_years",
 190 |           "tableTo": "schools",
 191 |           "columnsFrom": [
 192 |             "school_id"
 193 |           ],
 194 |           "columnsTo": [
 195 |             "id"
 196 |           ],
 197 |           "onDelete": "cascade",
 198 |           "onUpdate": "no action"
 199 |         }
 200 |       },
 201 |       "compositePrimaryKeys": {},
 202 |       "uniqueConstraints": {},
 203 |       "policies": {},
 204 |       "checkConstraints": {},
 205 |       "isRLSEnabled": false
 206 |     },
 207 |     "public.departments": {
 208 |       "name": "departments",
 209 |       "schema": "",
 210 |       "columns": {
 211 |         "id": {
 212 |           "name": "id",
 213 |           "type": "serial",
 214 |           "primaryKey": true,
 215 |           "notNull": true
 216 |         },
 217 |         "school_id": {
 218 |           "name": "school_id",
 219 |           "type": "integer",
 220 |           "primaryKey": false,
 221 |           "notNull": true
 222 |         },
 223 |         "name": {
 224 |           "name": "name",
 225 |           "type": "text",
 226 |           "primaryKey": false,
 227 |           "notNull": true
 228 |         },
 229 |         "description": {
 230 |           "name": "description",
 231 |           "type": "text",
 232 |           "primaryKey": false,
 233 |           "notNull": false
 234 |         },
 235 |         "created_at": {
 236 |           "name": "created_at",
 237 |           "type": "timestamp",
 238 |           "primaryKey": false,
 239 |           "notNull": true,
 240 |           "default": "now()"
 241 |         },
 242 |         "updated_at": {
 243 |           "name": "updated_at",
 244 |           "type": "timestamp",
 245 |           "primaryKey": false,
 246 |           "notNull": true,
 247 |           "default": "now()"
 248 |         }
 249 |       },
 250 |       "indexes": {
 251 |         "unq_school_dept": {
 252 |           "name": "unq_school_dept",
 253 |           "columns": [
 254 |             {
 255 |               "expression": "school_id",
 256 |               "isExpression": false,
 257 |               "asc": true,
 258 |               "nulls": "last"
 259 |             },
 260 |             {
 261 |               "expression": "name",
 262 |               "isExpression": false,
 263 |               "asc": true,
 264 |               "nulls": "last"
 265 |             }
 266 |           ],
 267 |           "isUnique": true,
 268 |           "concurrently": false,
 269 |           "method": "btree",
 270 |           "with": {}
 271 |         }
 272 |       },
 273 |       "foreignKeys": {
 274 |         "departments_school_id_schools_id_fk": {
 275 |           "name": "departments_school_id_schools_id_fk",
 276 |           "tableFrom": "departments",
 277 |           "tableTo": "schools",
 278 |           "columnsFrom": [
 279 |             "school_id"
 280 |           ],
 281 |           "columnsTo": [
 282 |             "id"
 283 |           ],
 284 |           "onDelete": "cascade",
 285 |           "onUpdate": "no action"
 286 |         }
 287 |       },
 288 |       "compositePrimaryKeys": {},
 289 |       "uniqueConstraints": {},
 290 |       "policies": {},
 291 |       "checkConstraints": {},
 292 |       "isRLSEnabled": false
 293 |     },
 294 |     "public.employees": {
 295 |       "name": "employees",
 296 |       "schema": "",
 297 |       "columns": {
 298 |         "id": {
 299 |           "name": "id",
 300 |           "type": "serial",
 301 |           "primaryKey": true,
 302 |           "notNull": true
 303 |         },
 304 |         "person_id": {
 305 |           "name": "person_id",
 306 |           "type": "integer",
 307 |           "primaryKey": false,
 308 |           "notNull": true
 309 |         },
 310 |         "employee_id": {
 311 |           "name": "employee_id",
 312 |           "type": "text",
 313 |           "primaryKey": false,
 314 |           "notNull": true
 315 |         },
 316 |         "hire_date": {
 317 |           "name": "hire_date",
 318 |           "type": "date",
 319 |           "primaryKey": false,
 320 |           "notNull": true
 321 |         },
 322 |         "termination_date": {
 323 |           "name": "termination_date",
 324 |           "type": "date",
 325 |           "primaryKey": false,
 326 |           "notNull": false
 327 |         },
 328 |         "position": {
 329 |           "name": "position",
 330 |           "type": "text",
 331 |           "primaryKey": false,
 332 |           "notNull": false
 333 |         },
 334 |         "department_id": {
 335 |           "name": "department_id",
 336 |           "type": "integer",
 337 |           "primaryKey": false,
 338 |           "notNull": false
 339 |         },
 340 |         "employment_history_json": {
 341 |           "name": "employment_history_json",
 342 |           "type": "jsonb",
 343 |           "primaryKey": false,
 344 |           "notNull": false
 345 |         },
 346 |         "notes": {
 347 |           "name": "notes",
 348 |           "type": "text",
 349 |           "primaryKey": false,
 350 |           "notNull": false
 351 |         },
 352 |         "created_at": {
 353 |           "name": "created_at",
 354 |           "type": "timestamp with time zone",
 355 |           "primaryKey": false,
 356 |           "notNull": true,
 357 |           "default": "now()"
 358 |         },
 359 |         "updated_at": {
 360 |           "name": "updated_at",
 361 |           "type": "timestamp with time zone",
 362 |           "primaryKey": false,
 363 |           "notNull": true,
 364 |           "default": "now()"
 365 |         }
 366 |       },
 367 |       "indexes": {},
 368 |       "foreignKeys": {
 369 |         "employees_person_id_people_id_fk": {
 370 |           "name": "employees_person_id_people_id_fk",
 371 |           "tableFrom": "employees",
 372 |           "tableTo": "people",
 373 |           "columnsFrom": [
 374 |             "person_id"
 375 |           ],
 376 |           "columnsTo": [
 377 |             "id"
 378 |           ],
 379 |           "onDelete": "cascade",
 380 |           "onUpdate": "no action"
 381 |         },
 382 |         "employees_department_id_departments_id_fk": {
 383 |           "name": "employees_department_id_departments_id_fk",
 384 |           "tableFrom": "employees",
 385 |           "tableTo": "departments",
 386 |           "columnsFrom": [
 387 |             "department_id"
 388 |           ],
 389 |           "columnsTo": [
 390 |             "id"
 391 |           ],
 392 |           "onDelete": "set null",
 393 |           "onUpdate": "no action"
 394 |         }
 395 |       },
 396 |       "compositePrimaryKeys": {},
 397 |       "uniqueConstraints": {
 398 |         "employees_person_id_unique": {
 399 |           "name": "employees_person_id_unique",
 400 |           "nullsNotDistinct": false,
 401 |           "columns": [
 402 |             "person_id"
 403 |           ]
 404 |         },
 405 |         "employees_employee_id_unique": {
 406 |           "name": "employees_employee_id_unique",
 407 |           "nullsNotDistinct": false,
 408 |           "columns": [
 409 |             "employee_id"
 410 |           ]
 411 |         }
 412 |       },
 413 |       "policies": {},
 414 |       "checkConstraints": {},
 415 |       "isRLSEnabled": false
 416 |     },
 417 |     "public.grade_levels": {
 418 |       "name": "grade_levels",
 419 |       "schema": "",
 420 |       "columns": {
 421 |         "id": {
 422 |           "name": "id",
 423 |           "type": "serial",
 424 |           "primaryKey": true,
 425 |           "notNull": true
 426 |         },
 427 |         "school_id": {
 428 |           "name": "school_id",
 429 |           "type": "integer",
 430 |           "primaryKey": false,
 431 |           "notNull": true
 432 |         },
 433 |         "name": {
 434 |           "name": "name",
 435 |           "type": "text",
 436 |           "primaryKey": false,
 437 |           "notNull": true
 438 |         },
 439 |         "level_order": {
 440 |           "name": "level_order",
 441 |           "type": "integer",
 442 |           "primaryKey": false,
 443 |           "notNull": true
 444 |         },
 445 |         "description": {
 446 |           "name": "description",
 447 |           "type": "text",
 448 |           "primaryKey": false,
 449 |           "notNull": false
 450 |         },
 451 |         "created_at": {
 452 |           "name": "created_at",
 453 |           "type": "timestamp",
 454 |           "primaryKey": false,
 455 |           "notNull": true,
 456 |           "default": "now()"
 457 |         },
 458 |         "updated_at": {
 459 |           "name": "updated_at",
 460 |           "type": "timestamp",
 461 |           "primaryKey": false,
 462 |           "notNull": true,
 463 |           "default": "now()"
 464 |         }
 465 |       },
 466 |       "indexes": {
 467 |         "unq_school_grade": {
 468 |           "name": "unq_school_grade",
 469 |           "columns": [
 470 |             {
 471 |               "expression": "school_id",
 472 |               "isExpression": false,
 473 |               "asc": true,
 474 |               "nulls": "last"
 475 |             },
 476 |             {
 477 |               "expression": "name",
 478 |               "isExpression": false,
 479 |               "asc": true,
 480 |               "nulls": "last"
 481 |             }
 482 |           ],
 483 |           "isUnique": true,
 484 |           "concurrently": false,
 485 |           "method": "btree",
 486 |           "with": {}
 487 |         },
 488 |         "unq_school_order": {
 489 |           "name": "unq_school_order",
 490 |           "columns": [
 491 |             {
 492 |               "expression": "school_id",
 493 |               "isExpression": false,
 494 |               "asc": true,
 495 |               "nulls": "last"
 496 |             },
 497 |             {
 498 |               "expression": "level_order",
 499 |               "isExpression": false,
 500 |               "asc": true,
 501 |               "nulls": "last"
 502 |             }
 503 |           ],
 504 |           "isUnique": true,
 505 |           "concurrently": false,
 506 |           "method": "btree",
 507 |           "with": {}
 508 |         }
 509 |       },
 510 |       "foreignKeys": {
 511 |         "grade_levels_school_id_schools_id_fk": {
 512 |           "name": "grade_levels_school_id_schools_id_fk",
 513 |           "tableFrom": "grade_levels",
 514 |           "tableTo": "schools",
 515 |           "columnsFrom": [
 516 |             "school_id"
 517 |           ],
 518 |           "columnsTo": [
 519 |             "id"
 520 |           ],
 521 |           "onDelete": "cascade",
 522 |           "onUpdate": "no action"
 523 |         }
 524 |       },
 525 |       "compositePrimaryKeys": {},
 526 |       "uniqueConstraints": {},
 527 |       "policies": {},
 528 |       "checkConstraints": {},
 529 |       "isRLSEnabled": false
 530 |     },
 531 |     "public.guardians": {
 532 |       "name": "guardians",
 533 |       "schema": "",
 534 |       "columns": {
 535 |         "id": {
 536 |           "name": "id",
 537 |           "type": "serial",
 538 |           "primaryKey": true,
 539 |           "notNull": true
 540 |         },
 541 |         "person_id": {
 542 |           "name": "person_id",
 543 |           "type": "integer",
 544 |           "primaryKey": false,
 545 |           "notNull": true
 546 |         },
 547 |         "relationship": {
 548 |           "name": "relationship",
 549 |           "type": "text",
 550 |           "primaryKey": false,
 551 |           "notNull": false
 552 |         },
 553 |         "is_primary_contact": {
 554 |           "name": "is_primary_contact",
 555 |           "type": "boolean",
 556 |           "primaryKey": false,
 557 |           "notNull": true,
 558 |           "default": false
 559 |         },
 560 |         "created_at": {
 561 |           "name": "created_at",
 562 |           "type": "timestamp with time zone",
 563 |           "primaryKey": false,
 564 |           "notNull": true,
 565 |           "default": "now()"
 566 |         },
 567 |         "updated_at": {
 568 |           "name": "updated_at",
 569 |           "type": "timestamp with time zone",
 570 |           "primaryKey": false,
 571 |           "notNull": true,
 572 |           "default": "now()"
 573 |         }
 574 |       },
 575 |       "indexes": {},
 576 |       "foreignKeys": {
 577 |         "guardians_person_id_people_id_fk": {
 578 |           "name": "guardians_person_id_people_id_fk",
 579 |           "tableFrom": "guardians",
 580 |           "tableTo": "people",
 581 |           "columnsFrom": [
 582 |             "person_id"
 583 |           ],
 584 |           "columnsTo": [
 585 |             "id"
 586 |           ],
 587 |           "onDelete": "cascade",
 588 |           "onUpdate": "no action"
 589 |         }
 590 |       },
 591 |       "compositePrimaryKeys": {},
 592 |       "uniqueConstraints": {
 593 |         "guardians_person_id_unique": {
 594 |           "name": "guardians_person_id_unique",
 595 |           "nullsNotDistinct": false,
 596 |           "columns": [
 597 |             "person_id"
 598 |           ]
 599 |         }
 600 |       },
 601 |       "policies": {},
 602 |       "checkConstraints": {},
 603 |       "isRLSEnabled": false
 604 |     },
 605 |     "public.people": {
 606 |       "name": "people",
 607 |       "schema": "",
 608 |       "columns": {
 609 |         "id": {
 610 |           "name": "id",
 611 |           "type": "serial",
 612 |           "primaryKey": true,
 613 |           "notNull": true
 614 |         },
 615 |         "school_id": {
 616 |           "name": "school_id",
 617 |           "type": "integer",
 618 |           "primaryKey": false,
 619 |           "notNull": false
 620 |         },
 621 |         "first_name": {
 622 |           "name": "first_name",
 623 |           "type": "text",
 624 |           "primaryKey": false,
 625 |           "notNull": true
 626 |         },
 627 |         "last_name": {
 628 |           "name": "last_name",
 629 |           "type": "text",
 630 |           "primaryKey": false,
 631 |           "notNull": true
 632 |         },
 633 |         "middle_name": {
 634 |           "name": "middle_name",
 635 |           "type": "text",
 636 |           "primaryKey": false,
 637 |           "notNull": false
 638 |         },
 639 |         "date_of_birth": {
 640 |           "name": "date_of_birth",
 641 |           "type": "date",
 642 |           "primaryKey": false,
 643 |           "notNull": false
 644 |         },
 645 |         "gender": {
 646 |           "name": "gender",
 647 |           "type": "text",
 648 |           "primaryKey": false,
 649 |           "notNull": false
 650 |         },
 651 |         "contact_email": {
 652 |           "name": "contact_email",
 653 |           "type": "text",
 654 |           "primaryKey": false,
 655 |           "notNull": false
 656 |         },
 657 |         "contact_phone": {
 658 |           "name": "contact_phone",
 659 |           "type": "text",
 660 |           "primaryKey": false,
 661 |           "notNull": false
 662 |         },
 663 |         "address": {
 664 |           "name": "address",
 665 |           "type": "text",
 666 |           "primaryKey": false,
 667 |           "notNull": false
 668 |         },
 669 |         "person_type": {
 670 |           "name": "person_type",
 671 |           "type": "person_type",
 672 |           "typeSchema": "public",
 673 |           "primaryKey": false,
 674 |           "notNull": true
 675 |         },
 676 |         "profile_picture_url": {
 677 |           "name": "profile_picture_url",
 678 |           "type": "text",
 679 |           "primaryKey": false,
 680 |           "notNull": false
 681 |         },
 682 |         "created_at": {
 683 |           "name": "created_at",
 684 |           "type": "timestamp with time zone",
 685 |           "primaryKey": false,
 686 |           "notNull": true,
 687 |           "default": "now()"
 688 |         },
 689 |         "updated_at": {
 690 |           "name": "updated_at",
 691 |           "type": "timestamp with time zone",
 692 |           "primaryKey": false,
 693 |           "notNull": true,
 694 |           "default": "now()"
 695 |         }
 696 |       },
 697 |       "indexes": {},
 698 |       "foreignKeys": {
 699 |         "people_school_id_schools_id_fk": {
 700 |           "name": "people_school_id_schools_id_fk",
 701 |           "tableFrom": "people",
 702 |           "tableTo": "schools",
 703 |           "columnsFrom": [
 704 |             "school_id"
 705 |           ],
 706 |           "columnsTo": [
 707 |             "id"
 708 |           ],
 709 |           "onDelete": "set null",
 710 |           "onUpdate": "no action"
 711 |         }
 712 |       },
 713 |       "compositePrimaryKeys": {},
 714 |       "uniqueConstraints": {
 715 |         "people_contact_email_unique": {
 716 |           "name": "people_contact_email_unique",
 717 |           "nullsNotDistinct": false,
 718 |           "columns": [
 719 |             "contact_email"
 720 |           ]
 721 |         }
 722 |       },
 723 |       "policies": {},
 724 |       "checkConstraints": {},
 725 |       "isRLSEnabled": false
 726 |     },
 727 |     "public.permissions": {
 728 |       "name": "permissions",
 729 |       "schema": "",
 730 |       "columns": {
 731 |         "id": {
 732 |           "name": "id",
 733 |           "type": "serial",
 734 |           "primaryKey": true,
 735 |           "notNull": true
 736 |         },
 737 |         "name": {
 738 |           "name": "name",
 739 |           "type": "text",
 740 |           "primaryKey": false,
 741 |           "notNull": true
 742 |         },
 743 |         "description": {
 744 |           "name": "description",
 745 |           "type": "text",
 746 |           "primaryKey": false,
 747 |           "notNull": false
 748 |         },
 749 |         "created_at": {
 750 |           "name": "created_at",
 751 |           "type": "timestamp",
 752 |           "primaryKey": false,
 753 |           "notNull": true,
 754 |           "default": "now()"
 755 |         }
 756 |       },
 757 |       "indexes": {},
 758 |       "foreignKeys": {},
 759 |       "compositePrimaryKeys": {},
 760 |       "uniqueConstraints": {
 761 |         "permissions_name_unique": {
 762 |           "name": "permissions_name_unique",
 763 |           "nullsNotDistinct": false,
 764 |           "columns": [
 765 |             "name"
 766 |           ]
 767 |         }
 768 |       },
 769 |       "policies": {},
 770 |       "checkConstraints": {},
 771 |       "isRLSEnabled": false
 772 |     },
 773 |     "public.roles": {
 774 |       "name": "roles",
 775 |       "schema": "",
 776 |       "columns": {
 777 |         "id": {
 778 |           "name": "id",
 779 |           "type": "serial",
 780 |           "primaryKey": true,
 781 |           "notNull": true
 782 |         },
 783 |         "name": {
 784 |           "name": "name",
 785 |           "type": "text",
 786 |           "primaryKey": false,
 787 |           "notNull": true
 788 |         },
 789 |         "description": {
 790 |           "name": "description",
 791 |           "type": "text",
 792 |           "primaryKey": false,
 793 |           "notNull": false
 794 |         },
 795 |         "created_at": {
 796 |           "name": "created_at",
 797 |           "type": "timestamp",
 798 |           "primaryKey": false,
 799 |           "notNull": true,
 800 |           "default": "now()"
 801 |         }
 802 |       },
 803 |       "indexes": {},
 804 |       "foreignKeys": {},
 805 |       "compositePrimaryKeys": {},
 806 |       "uniqueConstraints": {
 807 |         "roles_name_unique": {
 808 |           "name": "roles_name_unique",
 809 |           "nullsNotDistinct": false,
 810 |           "columns": [
 811 |             "name"
 812 |           ]
 813 |         }
 814 |       },
 815 |       "policies": {},
 816 |       "checkConstraints": {},
 817 |       "isRLSEnabled": false
 818 |     },
 819 |     "public.roles_to_permissions": {
 820 |       "name": "roles_to_permissions",
 821 |       "schema": "",
 822 |       "columns": {
 823 |         "role_id": {
 824 |           "name": "role_id",
 825 |           "type": "integer",
 826 |           "primaryKey": false,
 827 |           "notNull": true
 828 |         },
 829 |         "permission_id": {
 830 |           "name": "permission_id",
 831 |           "type": "integer",
 832 |           "primaryKey": false,
 833 |           "notNull": true
 834 |         }
 835 |       },
 836 |       "indexes": {},
 837 |       "foreignKeys": {
 838 |         "roles_to_permissions_role_id_roles_id_fk": {
 839 |           "name": "roles_to_permissions_role_id_roles_id_fk",
 840 |           "tableFrom": "roles_to_permissions",
 841 |           "tableTo": "roles",
 842 |           "columnsFrom": [
 843 |             "role_id"
 844 |           ],
 845 |           "columnsTo": [
 846 |             "id"
 847 |           ],
 848 |           "onDelete": "cascade",
 849 |           "onUpdate": "no action"
 850 |         },
 851 |         "roles_to_permissions_permission_id_permissions_id_fk": {
 852 |           "name": "roles_to_permissions_permission_id_permissions_id_fk",
 853 |           "tableFrom": "roles_to_permissions",
 854 |           "tableTo": "permissions",
 855 |           "columnsFrom": [
 856 |             "permission_id"
 857 |           ],
 858 |           "columnsTo": [
 859 |             "id"
 860 |           ],
 861 |           "onDelete": "cascade",
 862 |           "onUpdate": "no action"
 863 |         }
 864 |       },
 865 |       "compositePrimaryKeys": {
 866 |         "roles_to_permissions_role_id_permission_id_pk": {
 867 |           "name": "roles_to_permissions_role_id_permission_id_pk",
 868 |           "columns": [
 869 |             "role_id",
 870 |             "permission_id"
 871 |           ]
 872 |         }
 873 |       },
 874 |       "uniqueConstraints": {},
 875 |       "policies": {},
 876 |       "checkConstraints": {},
 877 |       "isRLSEnabled": false
 878 |     },
 879 |     "public.schools": {
 880 |       "name": "schools",
 881 |       "schema": "",
 882 |       "columns": {
 883 |         "id": {
 884 |           "name": "id",
 885 |           "type": "serial",
 886 |           "primaryKey": true,
 887 |           "notNull": true
 888 |         },
 889 |         "name": {
 890 |           "name": "name",
 891 |           "type": "text",
 892 |           "primaryKey": false,
 893 |           "notNull": true
 894 |         },
 895 |         "address": {
 896 |           "name": "address",
 897 |           "type": "text",
 898 |           "primaryKey": false,
 899 |           "notNull": false
 900 |         },
 901 |         "phone": {
 902 |           "name": "phone",
 903 |           "type": "text",
 904 |           "primaryKey": false,
 905 |           "notNull": false
 906 |         },
 907 |         "email": {
 908 |           "name": "email",
 909 |           "type": "text",
 910 |           "primaryKey": false,
 911 |           "notNull": false
 912 |         },
 913 |         "website": {
 914 |           "name": "website",
 915 |           "type": "text",
 916 |           "primaryKey": false,
 917 |           "notNull": false
 918 |         },
 919 |         "logo_url": {
 920 |           "name": "logo_url",
 921 |           "type": "text",
 922 |           "primaryKey": false,
 923 |           "notNull": false
 924 |         },
 925 |         "branding_json": {
 926 |           "name": "branding_json",
 927 |           "type": "jsonb",
 928 |           "primaryKey": false,
 929 |           "notNull": false
 930 |         },
 931 |         "created_at": {
 932 |           "name": "created_at",
 933 |           "type": "timestamp",
 934 |           "primaryKey": false,
 935 |           "notNull": true,
 936 |           "default": "now()"
 937 |         },
 938 |         "updated_at": {
 939 |           "name": "updated_at",
 940 |           "type": "timestamp",
 941 |           "primaryKey": false,
 942 |           "notNull": true,
 943 |           "default": "now()"
 944 |         }
 945 |       },
 946 |       "indexes": {},
 947 |       "foreignKeys": {},
 948 |       "compositePrimaryKeys": {},
 949 |       "uniqueConstraints": {},
 950 |       "policies": {},
 951 |       "checkConstraints": {},
 952 |       "isRLSEnabled": false
 953 |     },
 954 |     "public.student_guardians": {
 955 |       "name": "student_guardians",
 956 |       "schema": "",
 957 |       "columns": {
 958 |         "student_id": {
 959 |           "name": "student_id",
 960 |           "type": "integer",
 961 |           "primaryKey": false,
 962 |           "notNull": true
 963 |         },
 964 |         "guardian_id": {
 965 |           "name": "guardian_id",
 966 |           "type": "integer",
 967 |           "primaryKey": false,
 968 |           "notNull": true
 969 |         }
 970 |       },
 971 |       "indexes": {},
 972 |       "foreignKeys": {
 973 |         "student_guardians_student_id_students_id_fk": {
 974 |           "name": "student_guardians_student_id_students_id_fk",
 975 |           "tableFrom": "student_guardians",
 976 |           "tableTo": "students",
 977 |           "columnsFrom": [
 978 |             "student_id"
 979 |           ],
 980 |           "columnsTo": [
 981 |             "id"
 982 |           ],
 983 |           "onDelete": "cascade",
 984 |           "onUpdate": "no action"
 985 |         },
 986 |         "student_guardians_guardian_id_guardians_id_fk": {
 987 |           "name": "student_guardians_guardian_id_guardians_id_fk",
 988 |           "tableFrom": "student_guardians",
 989 |           "tableTo": "guardians",
 990 |           "columnsFrom": [
 991 |             "guardian_id"
 992 |           ],
 993 |           "columnsTo": [
 994 |             "id"
 995 |           ],
 996 |           "onDelete": "cascade",
 997 |           "onUpdate": "no action"
 998 |         }
 999 |       },
1000 |       "compositePrimaryKeys": {
1001 |         "student_guardians_student_id_guardian_id_pk": {
1002 |           "name": "student_guardians_student_id_guardian_id_pk",
1003 |           "columns": [
1004 |             "student_id",
1005 |             "guardian_id"
1006 |           ]
1007 |         }
1008 |       },
1009 |       "uniqueConstraints": {},
1010 |       "policies": {},
1011 |       "checkConstraints": {},
1012 |       "isRLSEnabled": false
1013 |     },
1014 |     "public.students": {
1015 |       "name": "students",
1016 |       "schema": "",
1017 |       "columns": {
1018 |         "id": {
1019 |           "name": "id",
1020 |           "type": "serial",
1021 |           "primaryKey": true,
1022 |           "notNull": true
1023 |         },
1024 |         "person_id": {
1025 |           "name": "person_id",
1026 |           "type": "integer",
1027 |           "primaryKey": false,
1028 |           "notNull": true
1029 |         },
1030 |         "student_id": {
1031 |           "name": "student_id",
1032 |           "type": "text",
1033 |           "primaryKey": false,
1034 |           "notNull": true
1035 |         },
1036 |         "enrollment_date": {
1037 |           "name": "enrollment_date",
1038 |           "type": "date",
1039 |           "primaryKey": false,
1040 |           "notNull": true
1041 |         },
1042 |         "graduation_date": {
1043 |           "name": "graduation_date",
1044 |           "type": "date",
1045 |           "primaryKey": false,
1046 |           "notNull": false
1047 |         },
1048 |         "current_grade_level_id": {
1049 |           "name": "current_grade_level_id",
1050 |           "type": "integer",
1051 |           "primaryKey": false,
1052 |           "notNull": false
1053 |         },
1054 |         "academic_history_json": {
1055 |           "name": "academic_history_json",
1056 |           "type": "jsonb",
1057 |           "primaryKey": false,
1058 |           "notNull": false
1059 |         },
1060 |         "notes": {
1061 |           "name": "notes",
1062 |           "type": "text",
1063 |           "primaryKey": false,
1064 |           "notNull": false
1065 |         },
1066 |         "created_at": {
1067 |           "name": "created_at",
1068 |           "type": "timestamp with time zone",
1069 |           "primaryKey": false,
1070 |           "notNull": true,
1071 |           "default": "now()"
1072 |         },
1073 |         "updated_at": {
1074 |           "name": "updated_at",
1075 |           "type": "timestamp with time zone",
1076 |           "primaryKey": false,
1077 |           "notNull": true,
1078 |           "default": "now()"
1079 |         }
1080 |       },
1081 |       "indexes": {},
1082 |       "foreignKeys": {
1083 |         "students_person_id_people_id_fk": {
1084 |           "name": "students_person_id_people_id_fk",
1085 |           "tableFrom": "students",
1086 |           "tableTo": "people",
1087 |           "columnsFrom": [
1088 |             "person_id"
1089 |           ],
1090 |           "columnsTo": [
1091 |             "id"
1092 |           ],
1093 |           "onDelete": "cascade",
1094 |           "onUpdate": "no action"
1095 |         },
1096 |         "students_current_grade_level_id_grade_levels_id_fk": {
1097 |           "name": "students_current_grade_level_id_grade_levels_id_fk",
1098 |           "tableFrom": "students",
1099 |           "tableTo": "grade_levels",
1100 |           "columnsFrom": [
1101 |             "current_grade_level_id"
1102 |           ],
1103 |           "columnsTo": [
1104 |             "id"
1105 |           ],
1106 |           "onDelete": "set null",
1107 |           "onUpdate": "no action"
1108 |         }
1109 |       },
1110 |       "compositePrimaryKeys": {},
1111 |       "uniqueConstraints": {
1112 |         "students_person_id_unique": {
1113 |           "name": "students_person_id_unique",
1114 |           "nullsNotDistinct": false,
1115 |           "columns": [
1116 |             "person_id"
1117 |           ]
1118 |         },
1119 |         "students_student_id_unique": {
1120 |           "name": "students_student_id_unique",
1121 |           "nullsNotDistinct": false,
1122 |           "columns": [
1123 |             "student_id"
1124 |           ]
1125 |         }
1126 |       },
1127 |       "policies": {},
1128 |       "checkConstraints": {},
1129 |       "isRLSEnabled": false
1130 |     },
1131 |     "public.users": {
1132 |       "name": "users",
1133 |       "schema": "",
1134 |       "columns": {
1135 |         "id": {
1136 |           "name": "id",
1137 |           "type": "serial",
1138 |           "primaryKey": true,
1139 |           "notNull": true
1140 |         },
1141 |         "email": {
1142 |           "name": "email",
1143 |           "type": "text",
1144 |           "primaryKey": false,
1145 |           "notNull": true
1146 |         },
1147 |         "password": {
1148 |           "name": "password",
1149 |           "type": "text",
1150 |           "primaryKey": false,
1151 |           "notNull": true
1152 |         },
1153 |         "person_id": {
1154 |           "name": "person_id",
1155 |           "type": "integer",
1156 |           "primaryKey": false,
1157 |           "notNull": true
1158 |         },
1159 |         "created_at": {
1160 |           "name": "created_at",
1161 |           "type": "timestamp with time zone",
1162 |           "primaryKey": false,
1163 |           "notNull": true,
1164 |           "default": "now()"
1165 |         }
1166 |       },
1167 |       "indexes": {},
1168 |       "foreignKeys": {
1169 |         "users_person_id_people_id_fk": {
1170 |           "name": "users_person_id_people_id_fk",
1171 |           "tableFrom": "users",
1172 |           "tableTo": "people",
1173 |           "columnsFrom": [
1174 |             "person_id"
1175 |           ],
1176 |           "columnsTo": [
1177 |             "id"
1178 |           ],
1179 |           "onDelete": "cascade",
1180 |           "onUpdate": "no action"
1181 |         }
1182 |       },
1183 |       "compositePrimaryKeys": {},
1184 |       "uniqueConstraints": {
1185 |         "users_email_unique": {
1186 |           "name": "users_email_unique",
1187 |           "nullsNotDistinct": false,
1188 |           "columns": [
1189 |             "email"
1190 |           ]
1191 |         },
1192 |         "users_person_id_unique": {
1193 |           "name": "users_person_id_unique",
1194 |           "nullsNotDistinct": false,
1195 |           "columns": [
1196 |             "person_id"
1197 |           ]
1198 |         }
1199 |       },
1200 |       "policies": {},
1201 |       "checkConstraints": {},
1202 |       "isRLSEnabled": false
1203 |     },
1204 |     "public.users_to_roles": {
1205 |       "name": "users_to_roles",
1206 |       "schema": "",
1207 |       "columns": {
1208 |         "user_id": {
1209 |           "name": "user_id",
1210 |           "type": "integer",
1211 |           "primaryKey": false,
1212 |           "notNull": true
1213 |         },
1214 |         "role_id": {
1215 |           "name": "role_id",
1216 |           "type": "integer",
1217 |           "primaryKey": false,
1218 |           "notNull": true
1219 |         },
1220 |         "school_id": {
1221 |           "name": "school_id",
1222 |           "type": "integer",
1223 |           "primaryKey": false,
1224 |           "notNull": false
1225 |         }
1226 |       },
1227 |       "indexes": {},
1228 |       "foreignKeys": {
1229 |         "users_to_roles_user_id_users_id_fk": {
1230 |           "name": "users_to_roles_user_id_users_id_fk",
1231 |           "tableFrom": "users_to_roles",
1232 |           "tableTo": "users",
1233 |           "columnsFrom": [
1234 |             "user_id"
1235 |           ],
1236 |           "columnsTo": [
1237 |             "id"
1238 |           ],
1239 |           "onDelete": "cascade",
1240 |           "onUpdate": "no action"
1241 |         },
1242 |         "users_to_roles_role_id_roles_id_fk": {
1243 |           "name": "users_to_roles_role_id_roles_id_fk",
1244 |           "tableFrom": "users_to_roles",
1245 |           "tableTo": "roles",
1246 |           "columnsFrom": [
1247 |             "role_id"
1248 |           ],
1249 |           "columnsTo": [
1250 |             "id"
1251 |           ],
1252 |           "onDelete": "cascade",
1253 |           "onUpdate": "no action"
1254 |         },
1255 |         "users_to_roles_school_id_schools_id_fk": {
1256 |           "name": "users_to_roles_school_id_schools_id_fk",
1257 |           "tableFrom": "users_to_roles",
1258 |           "tableTo": "schools",
1259 |           "columnsFrom": [
1260 |             "school_id"
1261 |           ],
1262 |           "columnsTo": [
1263 |             "id"
1264 |           ],
1265 |           "onDelete": "cascade",
1266 |           "onUpdate": "no action"
1267 |         }
1268 |       },
1269 |       "compositePrimaryKeys": {
1270 |         "users_to_roles_user_id_role_id_pk": {
1271 |           "name": "users_to_roles_user_id_role_id_pk",
1272 |           "columns": [
1273 |             "user_id",
1274 |             "role_id"
1275 |           ]
1276 |         }
1277 |       },
1278 |       "uniqueConstraints": {},
1279 |       "policies": {},
1280 |       "checkConstraints": {},
1281 |       "isRLSEnabled": false
1282 |     }
1283 |   },
1284 |   "enums": {
1285 |     "public.attendance_status": {
1286 |       "name": "attendance_status",
1287 |       "schema": "public",
1288 |       "values": [
1289 |         "present",
1290 |         "absent",
1291 |         "tardy",
1292 |         "excused"
1293 |       ]
1294 |     },
1295 |     "public.invoice_status": {
1296 |       "name": "invoice_status",
1297 |       "schema": "public",
1298 |       "values": [
1299 |         "draft",
1300 |         "open",
1301 |         "paid",
1302 |         "void",
1303 |         "past_due"
1304 |       ]
1305 |     },
1306 |     "public.payment_method": {
1307 |       "name": "payment_method",
1308 |       "schema": "public",
1309 |       "values": [
1310 |         "credit_card",
1311 |         "bank_transfer",
1312 |         "cash",
1313 |         "check",
1314 |         "scholarship"
1315 |       ]
1316 |     },
1317 |     "public.person_type": {
1318 |       "name": "person_type",
1319 |       "schema": "public",
1320 |       "values": [
1321 |         "student",
1322 |         "guardian",
1323 |         "staff"
1324 |       ]
1325 |     },
1326 |     "public.schedule_type": {
1327 |       "name": "schedule_type",
1328 |       "schema": "public",
1329 |       "values": [
1330 |         "recurring_class",
1331 |         "one_time_event"
1332 |       ]
1333 |     }
1334 |   },
1335 |   "schemas": {},
1336 |   "sequences": {},
1337 |   "roles": {},
1338 |   "policies": {},
1339 |   "views": {},
1340 |   "_meta": {
1341 |     "columns": {},
1342 |     "schemas": {},
1343 |     "tables": {}
1344 |   }
1345 | }


--------------------------------------------------------------------------------
/drizzle/tenant/meta/_journal.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "version": "7",
 3 |   "dialect": "postgresql",
 4 |   "entries": [
 5 |     {
 6 |       "idx": 0,
 7 |       "version": "7",
 8 |       "when": 1755126918067,
 9 |       "tag": "0000_sleepy_doctor_spectrum",
10 |       "breakpoints": true
11 |     }
12 |   ]
13 | }


--------------------------------------------------------------------------------
/env.mjs:
--------------------------------------------------------------------------------
 1 | import { createEnv } from "@t3-oss/env-nextjs";
 2 | import { z } from "zod";
 3 | 
 4 | export const env = createEnv({
 5 |   server: {
 6 |     POSTGRES_URL: z.string().url(),
 7 |     JWT_SECRET: z.string().min(32, "JWT_SECRET must be at least 32 characters long"),
 8 |     NEON_API_KEY: z.string().min(1),
 9 |     NEON_ORG_ID: z.string().min(1),
10 |     ENCRYPTION_KEY: z.string().min(1, "ENCRYPTION_KEY must be 32 characters long"),
11 |     
12 |   },
13 |   client: {},
14 |   runtimeEnv: {
15 |     POSTGRES_URL: process.env.POSTGRES_URL,
16 |     JWT_SECRET: process.env.JWT_SECRET,
17 |     NEON_API_KEY: process.env.NEON_API_KEY,
18 |     NEON_ORG_ID: process.env.NEON_ORG_ID,
19 |     ENCRYPTION_KEY: process.env.ENCRYPTION_KEY,
20 |   },
21 | });


--------------------------------------------------------------------------------
/eslint.config.mjs:
--------------------------------------------------------------------------------
 1 | import { dirname } from "path";
 2 | import { fileURLToPath } from "url";
 3 | import { FlatCompat } from "@eslint/eslintrc";
 4 | 
 5 | const __filename = fileURLToPath(import.meta.url);
 6 | const __dirname = dirname(__filename);
 7 | 
 8 | const compat = new FlatCompat({
 9 |   baseDirectory: __dirname,
10 | });
11 | 
12 | const eslintConfig = [
13 |   ...compat.extends("next/core-web-vitals", "next/typescript"),
14 | ];
15 | 
16 | export default eslintConfig;
17 | 


--------------------------------------------------------------------------------
/hooks/use-mobile.ts:
--------------------------------------------------------------------------------
 1 | "use client"
 2 | 
 3 | import { useEffect, useState } from "react"
 4 | 
 5 | export function useIsMobile(query: string = "(max-width: 768px)") {
 6 |   const [isMobile, setIsMobile] = useState(false)
 7 | 
 8 |   useEffect(() => {
 9 |     const mediaQuery = window.matchMedia(query)
10 |     const handleChange = () => setIsMobile(mediaQuery.matches)
11 | 
12 |     handleChange() // Set initial value
13 |     mediaQuery.addEventListener("change", handleChange)
14 | 
15 |     return () => {
16 |       mediaQuery.removeEventListener("change", handleChange)
17 |     }
18 |   }, [query])
19 | 
20 |   return isMobile
21 | }


--------------------------------------------------------------------------------
/lib/actions/auth.ts:
--------------------------------------------------------------------------------
 1 | 'use server';
 2 | 
 3 | import { cookies } from "next/headers";
 4 | import { redirect } from "next/navigation";
 5 | 
 6 | export async function logout() {
 7 |   // Destroy the session cookie by setting its expiration date to the past
 8 |   (await cookies()).set("authToken", "", { expires: new Date(0) });
 9 |   // Redirect to the login page
10 |   redirect('/login');
11 | }


--------------------------------------------------------------------------------
/lib/actions/person.ts:
--------------------------------------------------------------------------------
  1 | 'use server';
  2 | 
  3 | import { getTenantDb } from '@/lib/db';
  4 | import { revalidatePath } from 'next/cache';
  5 | import { eq } from 'drizzle-orm';
  6 | import bcrypt from 'bcrypt';
  7 | import log from '../logger';
  8 | import { enforcePermission, getSession, hasPermission } from '../session';
  9 | import { people, users, usersToRoles, roles, schools, personTypeEnum } from '../db/schema/tenant';
 10 | import { PersonFormSchema, type PersonFormInput } from '@/lib/dto/person';
 11 | 
 12 | function isDatabaseError(error: unknown): error is { code: string; message: string } {
 13 |     return typeof error === 'object' && error !== null && 'code' in error;
 14 | }
 15 | 
 16 | /**
 17 |  * @description Fetches all people from the database.
 18 |  * @returns {Promise<any[]>} A promise that resolves to an array of people.
 19 |  * @throws {Error} If the user does not have permission to read people or if the database query fails.
 20 |  */
 21 | export async function getPeople() {
 22 |     await enforcePermission('person:read');
 23 |     const session = await getSession();
 24 |     const db = await getTenantDb(session.tenantId);
 25 | 
 26 |     try {
 27 |         const result = await db.query.people.findMany({
 28 |             with: {
 29 |                 user: {
 30 |                     with: {
 31 |                         usersToRoles: true,
 32 |                     }
 33 |                 },
 34 |                 school: true,
 35 |             },
 36 |         });
 37 |         return result;
 38 |     } catch (error) {
 39 |         log.error({ error, tenantId: session.tenantId }, 'Failed to fetch people.');
 40 |         throw new Error('Failed to retrieve people.');
 41 |     }
 42 | }
 43 | 
 44 | /**
 45 |  * @description Upserts a person in the database.
 46 |  * If the person already exists, it will be updated. Otherwise, it will be created.
 47 |  * This function also handles the creation of a user account for the person if requested.
 48 |  * @param {PersonFormInput} data - The person data to upsert.
 49 |  * @returns {Promise<{success: boolean, message: string, errors?: any}>} A promise that resolves to an object with a success flag and a message.
 50 |  */
 51 | export async function upsertPersonAction(data: PersonFormInput) {
 52 |     log.info({ data }, 'Upserting person...');
 53 |     const session = await getSession();
 54 |     const validatedFields = PersonFormSchema.safeParse(data);
 55 | 
 56 |     if (!validatedFields.success) {
 57 |         log.warn({ errors: validatedFields.error.flatten(), data }, 'Invalid person data provided for upsert.');
 58 |         return { success: false, message: 'Invalid person data.', errors: validatedFields.error.flatten().fieldErrors };
 59 |     }
 60 | 
 61 |     const {
 62 |         id, schoolId, firstName, lastName, middleName, dateOfBirth, gender,
 63 |         contactEmail, contactPhone, address, personType, profilePictureUrl,
 64 |         createUserAccount, userEmail, userPassword, userRoles
 65 |     } = validatedFields.data;
 66 | 
 67 |     const requiredPermission = id ? 'person:update' : 'person:create';
 68 |     await enforcePermission(requiredPermission);
 69 | 
 70 |     const db = await getTenantDb(session.tenantId);
 71 | 
 72 |     const canAssignRoles = await hasPermission('user:assign_roles');
 73 |     const hasUserAccount = id ? !!(await db.query.users.findFirst({ where: eq(users.personId, id) })) : false;
 74 | 
 75 | 
 76 |     try {
 77 |         let personId: number;
 78 |         await db.transaction(async (tx) => {
 79 |             // 1. Upsert Person Record
 80 |             if (id) { // Update existing person
 81 |                 await tx.update(people).set({
 82 |                     schoolId: schoolId,
 83 |                     firstName,
 84 |                     lastName,
 85 |                     middleName,
 86 |                     //@ts-expect-error('ignore')
 87 |                     dateOfBirth: dateOfBirth ? new Date(dateOfBirth) : null,
 88 |                     gender,
 89 |                     contactEmail,
 90 |                     contactPhone,
 91 |                     address,
 92 |                     // Cast personType to the exact enum value type expected by Drizzle
 93 |                     personType: personType as typeof personTypeEnum.enumValues[number],
 94 |                     profilePictureUrl,
 95 |                     updatedAt: new Date(),
 96 |                 }).where(eq(people.id, id));
 97 |                 personId = id;
 98 |                 log.info({ personId, firstName, lastName, tenantId: session.tenantId }, 'Person updated.');
 99 |             } else { // Create new person
100 |                 //@ts-expect-error('expected')
101 |                 const [newPerson] = await tx.insert(people).values({
102 |                     schoolId: schoolId,
103 |                     firstName,
104 |                     lastName,
105 |                     middleName,
106 |                     // Convert string to Date object, or null if empty string/null/undefined
107 |                     dateOfBirth: dateOfBirth ? new Date(dateOfBirth) : null,
108 |                     gender,
109 |                     contactEmail,
110 |                     contactPhone,
111 |                     address,
112 |                     // Cast personType to the exact enum value type expected by Drizzle
113 |                     personType: personType as typeof personTypeEnum.enumValues[number],
114 |                     profilePictureUrl,
115 |                 }).returning({ id: people.id });
116 |                 personId = newPerson.id;
117 |                 log.info({ personId, firstName, lastName, tenantId: session.tenantId }, 'Person created.');
118 |             }
119 | 
120 |             // 2. Handle User Account Creation/Update if requested
121 |             if (createUserAccount) {
122 |                 await enforcePermission('user:grant_access');
123 | 
124 |                 if (!userEmail) {
125 |                     throw new Error("User email is required to create a user account.");
126 |                 }
127 | 
128 |                 const existingUser = await tx.query.users.findFirst({ where: eq(users.personId, personId) });
129 | 
130 |                 let currentUserId: number;
131 | 
132 |                 if (existingUser) {
133 |                     // Update existing user account
134 |                     const userUpdateData: { email: string; password?: string } = { email: userEmail };
135 |                     if (userPassword) { // Only update password if provided
136 |                         userUpdateData.password = await bcrypt.hash(userPassword, 12);
137 |                     }
138 |                     await tx.update(users).set(userUpdateData).where(eq(users.personId, personId));
139 |                     currentUserId = existingUser.id;
140 |                     log.info({ personId, userEmail, tenantId: session.tenantId }, 'User account updated for person.');
141 |                 } else {
142 |                     // Create new user account
143 |                     if (!userPassword) {
144 |                         throw new Error("User password is required to create a new user account.");
145 |                     }
146 |                     const hashedPassword = await bcrypt.hash(userPassword, 12);
147 |                     const [newUser] = await tx.insert(users).values({
148 |                         personId,
149 |                         email: userEmail,
150 |                         password: hashedPassword,
151 |                     }).returning({ id: users.id });
152 |                     currentUserId = newUser.id;
153 |                     log.info({ personId, userEmail, userId: newUser.id, tenantId: session.tenantId }, 'User account created for person.');
154 |                 }
155 | 
156 |                 // 3. Assign Roles to User
157 |                 // `canAssignRoles` is already fetched at the top of the function
158 |                 if (canAssignRoles && userRoles && userRoles.length > 0) {
159 |                     await enforcePermission('user:assign_roles');
160 |                     const roleIds = userRoles.map(Number);
161 | 
162 |                     // Clear existing roles for this user and re-insert
163 |                     await tx.delete(usersToRoles).where(eq(usersToRoles.userId, currentUserId));
164 | 
165 |                     await tx.insert(usersToRoles).values(roleIds.map(roleId => ({
166 |                         userId: currentUserId,
167 |                         roleId: roleId,
168 |                         schoolId: schoolId || null,
169 |                     })));
170 |                     log.info({ userId: currentUserId, assignedRoles: userRoles, tenantId: session.tenantId }, 'Roles assigned to user.');
171 |                 } else if (canAssignRoles && userRoles && userRoles.length === 0 && existingUser) {
172 |                     // If user has permission to assign roles and no roles are selected, remove existing roles
173 |                     await enforcePermission('user:assign_roles');
174 |                     await tx.delete(usersToRoles).where(eq(usersToRoles.userId, currentUserId));
175 |                     log.info({ userId: currentUserId, tenantId: session.tenantId }, 'All roles removed from user.');
176 |                 }
177 |             } else if (hasUserAccount && !createUserAccount) { // `hasUserAccount` is already fetched at the top
178 |                 // If user unchecks "Grant System Access" and an account exists, delete the user account
179 |                 await enforcePermission('user:grant_access');
180 |                 await tx.delete(users).where(eq(users.personId, personId));
181 |                 log.info({ personId, tenantId: session.tenantId }, 'User account revoked for person.');
182 |             }
183 |         });
184 |     } catch (error: unknown) {
185 |         log.error({ error, tenantId: session.tenantId, userId: session.userId, data }, 'Failed to upsert person or create/update user account');
186 |         if (isDatabaseError(error) && error.code === '23505') {
187 |             if (error.message.includes('contact_email')) {
188 |                 return { success: false, message: "A person with this contact email already exists.", errors: { contactEmail: ["This email is already in use."] } };
189 |             }
190 |             if (error.message.includes('email')) {
191 |                 return { success: false, message: "A user with this email already exists.", errors: { userEmail: ["This email is already in use."] } };
192 |             }
193 |         }
194 |         return { success: false, message: "An unexpected error occurred while saving person." };
195 |     }
196 | 
197 |     revalidatePath('/dashboard/people');
198 |     revalidatePath('/dashboard/users');
199 |     return { success: true, message: `Person successfully ${id ? 'updated' : 'created'}.` };
200 | }
201 | 
202 | /**
203 |  * @description Deletes a person from the database.
204 |  * @param {number} personId - The ID of the person to delete.
205 |  * @returns {Promise<{success: boolean, message: string}>} A promise that resolves to an object with a success flag and a message.
206 |  */
207 | export async function deletePersonAction(personId: number) {
208 |     await enforcePermission('person:delete');
209 |     const session = await getSession();
210 |     const db = await getTenantDb(session.tenantId);
211 | 
212 |     try {
213 |         await db.delete(people).where(eq(people.id, personId));
214 |         log.info({ personId, tenantId: session.tenantId }, 'Person deleted.');
215 |         revalidatePath('/dashboard/people');
216 |         revalidatePath('/dashboard/users');
217 |         return { success: true, message: "Person deleted successfully." };
218 |     } catch (error) {
219 |         log.error({ error, personId, tenantId: session.tenantId }, 'Failed to delete person');
220 |         return { success: false, message: "Failed to delete person." };
221 |     }
222 | }
223 | 


--------------------------------------------------------------------------------
/lib/actions/role.ts:
--------------------------------------------------------------------------------
  1 | 'use server';
  2 | 
  3 | import { getTenantDb } from '@/lib/db';
  4 | import { revalidatePath } from 'next/cache';
  5 | import { eq } from 'drizzle-orm';
  6 | import log from '../logger';
  7 | import { roles, permissions, rolesToPermissions, usersToRoles } from '../db/schema/tenant'; 
  8 | import { RoleFormSchema } from '../dto/role';
  9 | import { enforcePermission, hasPermission, getSession } from '../session'; 
 10 | 
 11 | export async function getRoles() {
 12 |     await enforcePermission('role:read'); // Enforce permission to read roles
 13 |     const session = await getSession();
 14 |     const db = await getTenantDb(session.tenantId);
 15 |     
 16 |     try {
 17 |         // Fetch roles with their associated permissions
 18 |         const rolesWithPermissions = await db.query.roles.findMany({
 19 |             with: {
 20 |                 rolesToPermissions: { 
 21 |                     with: {
 22 |                         permission: true, // Eagerly load the full permission object
 23 |                     },
 24 |                 },
 25 |             },
 26 |         });
 27 | 
 28 |         // Format the output to include the full permission objects directly in the 'permissions' array.
 29 |         return rolesWithPermissions.map(role => ({
 30 |             ...role,
 31 |             // Map `rolesToPermissions` to an array of `permission` objects
 32 |             permissions: role.rolesToPermissions.map(rtp => rtp.permission), 
 33 |         }));
 34 |     } catch (error) {
 35 |         log.error({ error, tenantId: session.tenantId }, 'Failed to fetch roles with permissions.');
 36 |         throw new Error('Failed to retrieve roles.');
 37 |     }
 38 | }
 39 | 
 40 | export async function upsertRole(data: unknown) {
 41 |     const session = await getSession();
 42 |     
 43 |     const validatedFields = RoleFormSchema.safeParse(data);
 44 | 
 45 |     if (!validatedFields.success) {
 46 |         log.warn({ errors: validatedFields.error.flatten(), data }, 'Invalid role data provided for upsert.');
 47 |         return { success: false, message: 'Invalid role data.' };
 48 |     }
 49 | 
 50 |     const { id, name, description, permissions: newPermissionNames } = validatedFields.data; // `newPermissionNames` is an array of strings
 51 |     
 52 |     // Enforce permission based on operation type
 53 |     const requiredPermission = id ? 'role:update' : 'role:create';
 54 |     await enforcePermission(requiredPermission);
 55 | 
 56 |     // Additionally, check if the user is attempting to assign permissions to roles
 57 |     if (newPermissionNames && newPermissionNames.length > 0) {
 58 |         const canAssignRolePermissions = await hasPermission('role:assign_permissions');
 59 |         if (!canAssignRolePermissions) {
 60 |             log.warn({ userId: session.userId, tenantId: session.tenantId, attemptedPermissions: newPermissionNames }, 'User attempted to assign permissions to a role without permission.');
 61 |             return { success: false, message: 'You do not have permission to assign permissions to roles.' };
 62 |         }
 63 |     }
 64 | 
 65 |     const db = await getTenantDb(session.tenantId);
 66 | 
 67 |     try {
 68 |         await db.transaction(async (tx) => {
 69 |             let roleId: number;
 70 |             if (id) {
 71 |                 // Update existing role
 72 |                 await tx.update(roles).set({ name, description }).where(eq(roles.id, id));
 73 |                 roleId = id;
 74 |                 log.info({ roleId, name, tenantId: session.tenantId }, 'Role updated.');
 75 |             } else {
 76 |                 // Create new role
 77 |                 const [newRole] = await tx.insert(roles).values({ name, description }).returning({ id: roles.id });
 78 |                 roleId = newRole.id;
 79 |                 log.info({ roleId, name, tenantId: session.tenantId }, 'Role created.');
 80 |             }
 81 | 
 82 |             // Handle permissions assignment
 83 |             if (newPermissionNames) {
 84 |                 // Fetch all existing permissions to get their IDs
 85 |                 const allPermissionsInDb = await tx.select().from(permissions); 
 86 |                 const permissionIds = newPermissionNames.map(pName => {
 87 |                     const found = allPermissionsInDb.find(p => p.name === pName);
 88 |                     if (!found) {
 89 |                         log.warn({ permissionName: pName, tenantId: session.tenantId }, `Permission '${pName}' not found during role assignment.`);
 90 |                     }
 91 |                     return found?.id;
 92 |                 }).filter(Boolean) as number[];
 93 | 
 94 |                 // Clear existing permissions for this role and re-insert
 95 |                 await tx.delete(rolesToPermissions).where(eq(rolesToPermissions.roleId, roleId)); 
 96 |                 if (permissionIds.length > 0) {
 97 |                     await tx.insert(rolesToPermissions).values( 
 98 |                         permissionIds.map(permId => ({
 99 |                             roleId: roleId,
100 |                             permissionId: permId,
101 |                         }))
102 |                     );
103 |                     log.info({ roleId, assignedPermissions: newPermissionNames, tenantId: session.tenantId }, 'Permissions assigned to role.');
104 |                 } else {
105 |                     log.info({ roleId, tenantId: session.tenantId }, 'No permissions assigned to role or all specified permissions were invalid.');
106 |                 }
107 |             }
108 |         });
109 | 
110 |         revalidatePath('/dashboard/roles');
111 |         revalidatePath('/dashboard/people'); // Revalidate users page as role changes might affect user display
112 |         return { success: true, message: `Role successfully ${id ? 'updated' : 'created'}.` };
113 |     } catch (error) {
114 |         log.error({ error, data, tenantId: session.tenantId }, 'Failed to upsert role.');
115 |         // Check for unique constraint violation on role name
116 |         if (error instanceof Error && 'code' in error && error.code === '23505') {
117 |             return { success: false, message: 'A role with this name already exists.' };
118 |         }
119 |         return { success: false, message: 'Failed to save role.' };
120 |     }
121 | }
122 | 
123 | export async function deleteRole(roleId: number) {
124 |     await enforcePermission('role:delete'); // Enforce permission to delete roles
125 |     const session = await getSession();
126 |     const db = await getTenantDb(session.tenantId);
127 | 
128 |     try {
129 |         // Prevent deletion of default/system roles (e.g., TENANT_ADMIN, SCHOOL_ADMIN, MEMBER)
130 |         const roleToDelete = await db.query.roles.findFirst({ where: eq(roles.id, roleId) });
131 |         if (roleToDelete && ['TENANT_ADMIN', 'SCHOOL_ADMIN', 'MEMBER'].includes(roleToDelete.name)) {
132 |             log.warn({ roleId, roleName: roleToDelete.name, tenantId: session.tenantId }, 'Attempted to delete a default system role. Denied.');
133 |             return { success: false, message: `Cannot delete default system role: ${roleToDelete.name}.` };
134 |         }
135 | 
136 |         // Check if role is currently assigned to any users
137 |         const usersWithRole = await db.query.usersToRoles.findMany({ where: eq(usersToRoles.roleId, roleId) }); 
138 |         if (usersWithRole.length > 0) {
139 |             log.warn({ roleId, tenantId: session.tenantId, userCount: usersWithRole.length }, 'Attempted to delete role assigned to users. Denied.');
140 |             return { success: false, message: 'Cannot delete role: it is currently assigned to one or more users. Please unassign it first.' };
141 |         }
142 | 
143 |         await db.delete(roles).where(eq(roles.id, roleId));
144 |         revalidatePath('/dashboard/roles');
145 |         revalidatePath('/dashboard/people'); // Revalidate users page as roles might be removed from users
146 |         return { success: true, message: 'Role deleted successfully.' };
147 |     } catch (error) {
148 |         log.error({ error, roleId, tenantId: session.tenantId }, 'Failed to delete role');
149 |         return { success: false, message: 'Failed to delete role. An unexpected error occurred.' };
150 |     }
151 | }
152 | 


--------------------------------------------------------------------------------
/lib/actions/schools.ts:
--------------------------------------------------------------------------------
  1 | 'use server';
  2 | 
  3 | import { getTenantDb } from '@/lib/db';
  4 | import { revalidatePath } from 'next/cache';
  5 | import { eq, inArray } from 'drizzle-orm';
  6 | import log from '../logger';
  7 | import { enforcePermission, getSession } from '../session';
  8 | import {
  9 |     schools,
 10 |     academicYears,
 11 |     academicTerms,
 12 |     departments,
 13 |     gradeLevels,
 14 | } from '../db/schema/tenant';
 15 | import {
 16 |     AcademicTermSchema,
 17 |     AcademicYearSchema,
 18 |     BasicInfoSchema,
 19 |     DepartmentSchema,
 20 |     GradeLevelSchema,
 21 | } from '@/lib/dto/school';
 22 | import { SchoolFormData } from '@/app/(dashboard)/dashboard/(schools)/schools/_components/types/school-forms';
 23 | import z from 'zod';
 24 | 
 25 | // Define a reusable type for action results
 26 | type ActionResult = {
 27 |     success: boolean;
 28 |     message: string;
 29 |     errors?: Record<string, string[] | undefined>;
 30 | };
 31 | 
 32 | type BasicInfoActionResult = {
 33 |     success: boolean;
 34 |     message: string;
 35 |     errors?: Record<string, string[] | undefined>;
 36 |     school?: typeof schools.$inferSelect;
 37 | }
 38 | 
 39 | function isDatabaseError(error: unknown): error is { code: string; message: string } {
 40 |     return typeof error === 'object' && error !== null && 'code' in error;
 41 | }
 42 | 
 43 | export async function getSchools() {
 44 |     await enforcePermission('school:read');
 45 |     const session = await getSession();
 46 |     const db = await getTenantDb(session.tenantId);
 47 |     return db.query.schools.findMany();
 48 | }
 49 | 
 50 | export async function getSchoolById(id: number): Promise<SchoolFormData | null> {
 51 |     if (!id) return null;
 52 |     await enforcePermission('school:read');
 53 |     const session = await getSession();
 54 |     const db = await getTenantDb(session.tenantId);
 55 | 
 56 |     const school = await db.query.schools.findFirst({
 57 |         where: eq(schools.id, id),
 58 |         with: {
 59 |             academicYears: { with: { academicTerms: true } },
 60 |             departments: true,
 61 |             gradeLevels: true,
 62 |         },
 63 |     });
 64 | 
 65 |     if (!school) return null;
 66 | 
 67 |     return {
 68 |         ...school,
 69 |         email: school.email || '',
 70 |         academicYears: school.academicYears.map(ay => ({
 71 |             ...ay,
 72 |             id: ay.id.toString(),
 73 |             startDate: ay.startDate || '',
 74 |             endDate: ay.endDate || '',
 75 |             terms: ay.academicTerms.map(at => ({
 76 |                 ...at,
 77 |                 id: at.id.toString(),
 78 |                 startDate: at.startDate || '',
 79 |                 endDate: at.endDate || '',
 80 |             })),
 81 |         })),
 82 |         departments: school.departments.map(d => ({ ...d, id: d.id.toString(), description: d.description || undefined })),
 83 |         gradeLevels: school.gradeLevels.map(gl => ({...gl, id: gl.id.toString(), description: gl.description || undefined })),
 84 |         // Make branding optional
 85 |         branding: school.brandingJson ? JSON.parse(school.brandingJson as string) : undefined,
 86 |     };
 87 | }
 88 | export async function upsertSchoolBasicInfo(data: z.infer<typeof BasicInfoSchema>): Promise<BasicInfoActionResult> {
 89 |     const session = await getSession();
 90 |     const validatedFields = BasicInfoSchema.safeParse(data);
 91 | 
 92 |     if (!validatedFields.success) {
 93 |         return { success: false, message: 'Invalid data provided.', errors: validatedFields.error.flatten().fieldErrors };
 94 |     }
 95 | 
 96 |     const { id, ...schoolData } = validatedFields.data;
 97 |     const requiredPermission = id ? 'school:update' : 'school:create';
 98 |     await enforcePermission(requiredPermission);
 99 |     const db = await getTenantDb(session.tenantId);
100 | 
101 |     try {
102 |         if (id) {
103 |             console.log('Updating school with ID:', id);
104 |             const [updatedSchool] = await db.update(schools).set({ ...schoolData, updatedAt: new Date() }).where(eq(schools.id, id)).returning();
105 |             revalidatePath(`/dashboard/schools`);
106 |             return { success: true, message: 'Basic information updated.', school: updatedSchool };
107 |         } else {
108 |             console.log('Creating new school with data:', schoolData);
109 |             const [newSchool] = await db.insert(schools).values(schoolData).returning();
110 |             revalidatePath('/dashboard/schools');
111 |             return { success: true, message: 'School created successfully.', school: newSchool };
112 |         }
113 |     } catch (error) {
114 |         log.error({ error, data }, 'Failed to upsert school basic info.');
115 |         if (isDatabaseError(error) && error.code === '23505') {
116 |             return { success: false, message: "A school with this name already exists.", errors: { name: ["This name is already in use."] } };
117 |         }
118 |         return { success: false, message: "An unexpected server error occurred." };
119 |     }
120 | }
121 | const formatZodArrayErrors = (error: z.ZodError): Record<string, string[] | undefined> => {
122 |     const formattedErrors: Record<string, string[] | undefined> = {};
123 |     error.issues.forEach(issue => {
124 |         const path = issue.path.join('.');
125 |         if (!formattedErrors[path]) {
126 |             formattedErrors[path] = [];
127 |         }
128 |         formattedErrors[path]?.push(issue.message);
129 |     });
130 |     return formattedErrors;
131 | };
132 | 
133 | export async function upsertAcademicYears(schoolId: number, academicYearsData: z.infer<typeof AcademicYearSchema>[]): Promise<ActionResult> {
134 |     const session = await getSession();
135 |     await enforcePermission('school:update');
136 |     const db = await getTenantDb(session.tenantId);
137 | 
138 |     const validation = z.array(AcademicYearSchema).safeParse(academicYearsData);
139 |      if (!validation.success) {
140 |         return { success: false, message: 'Invalid academic year data.', errors: formatZodArrayErrors(validation.error) };
141 |     }
142 | 
143 |     try {
144 |         await db.transaction(async (tx) => {
145 |             const existingYears = await tx.query.academicYears.findMany({ where: eq(academicYears.schoolId, schoolId), columns: { id: true } });
146 |             if (existingYears.length > 0) {
147 |                 console.log('Deleting existing academic terms for school ID:', schoolId);
148 |                 await tx.delete(academicTerms).where(inArray(academicTerms.academicYearId, existingYears.map(y => y.id)));
149 |             }
150 |             await tx.delete(academicYears).where(eq(academicYears.schoolId, schoolId));
151 |             
152 |             for (const yearData of validation.data) {
153 |                 const [newYear] = await tx.insert(academicYears).values({
154 |                     schoolId,
155 |                     yearName: yearData.yearName,
156 |                     startDate: yearData.startDate,
157 |                     endDate: yearData.endDate,
158 |                     isCurrent: yearData.isCurrent,
159 |                 }).returning({ id: academicYears.id });
160 | 
161 |                 if (yearData.terms?.length) {
162 |                     await tx.insert(academicTerms).values(yearData.terms.map((term: z.infer<typeof AcademicTermSchema>) => ({
163 |                         academicYearId: newYear.id,
164 |                         termName: term.termName,
165 |                         startDate: term.startDate,
166 |                         endDate: term.endDate,
167 |                         isCurrent: term.isCurrent,
168 |                     })));
169 |                 }
170 |             }
171 |         });
172 |         revalidatePath(`/dashboard/schools/${schoolId}`);
173 |         return { success: true, message: 'Academic information saved.' };
174 |     } catch (error) {
175 |         log.error({ error, schoolId }, 'Failed to upsert academic years.');
176 |         return { success: false, message: 'An unexpected server error occurred.' };
177 |     }
178 | }
179 | 
180 | export async function upsertDepartments(schoolId: number, departmentsData: z.infer<typeof DepartmentSchema>[]): Promise<ActionResult> {
181 |     const session = await getSession();
182 |     await enforcePermission('school:update');
183 |     const db = await getTenantDb(session.tenantId);
184 | 
185 |     const validation = z.array(DepartmentSchema).safeParse(departmentsData);
186 |     if (!validation.success) {
187 |         return { success: false, message: 'Invalid department data.', errors: formatZodArrayErrors(validation.error) };
188 |     }
189 | 
190 |     try {
191 |         await db.transaction(async (tx) => {
192 |             await tx.delete(departments).where(eq(departments.schoolId, schoolId));
193 |             if (validation.data.length > 0) {
194 |                 await tx.insert(departments).values(validation.data.map(dept => ({
195 |                     schoolId,
196 |                     name: dept.name,
197 |                     description: dept.description,
198 |                 })));
199 |             }
200 |         });
201 |         revalidatePath(`/dashboard/schools/${schoolId}`);
202 |         return { success: true, message: 'Departments saved.' };
203 |     } catch (error) {
204 |         log.error({ error, schoolId }, 'Failed to upsert departments.');
205 |         return { success: false, message: 'An unexpected server error occurred.' };
206 |     }
207 | }
208 | 
209 | export async function upsertGradeLevels(schoolId: number, gradeLevelsData: z.infer<typeof GradeLevelSchema>[]): Promise<ActionResult> {
210 |     const session = await getSession();
211 |     await enforcePermission('school:update');
212 |     const db = await getTenantDb(session.tenantId);
213 | 
214 |     const validation = z.array(GradeLevelSchema).safeParse(gradeLevelsData);
215 |     if (!validation.success) {
216 |         return { success: false, message: 'Invalid grade level data.', errors: formatZodArrayErrors(validation.error) };
217 |     }
218 | 
219 |     try {
220 |         await db.transaction(async (tx) => {
221 |             await tx.delete(gradeLevels).where(eq(gradeLevels.schoolId, schoolId));
222 |             if (validation.data.length > 0) {
223 |                 await tx.insert(gradeLevels).values(validation.data.map(grade => ({
224 |                     schoolId,
225 |                     name: grade.name,
226 |                     levelOrder: grade.levelOrder,
227 |                     description: grade.description,
228 |                 })));
229 |             }
230 |         });
231 |         revalidatePath(`/dashboard/schools/${schoolId}`);
232 |         return { success: true, message: 'Grade levels saved.' };
233 |     } catch (error) {
234 |         log.error({ error, schoolId }, 'Failed to upsert grade levels.');
235 |         return { success: false, message: 'An unexpected server error occurred.' };
236 |     }
237 | }
238 | 
239 | 
240 | export async function deleteSchoolAction(schoolId: number) {
241 |     await enforcePermission('school:delete');
242 |     const session = await getSession();
243 |     const db = await getTenantDb(session.tenantId);
244 | 
245 |     try {
246 |         await db.delete(schools).where(eq(schools.id, schoolId));
247 |         log.info({ schoolId, tenantId: session.tenantId }, 'School deleted.');
248 |         revalidatePath('/dashboard/schools');
249 |         return { success: true, message: "School deleted successfully." };
250 |     } catch (error) {
251 |         log.error({ error, schoolId, tenantId: session.tenantId }, 'Failed to delete school');
252 |         return { success: false, message: "Failed to delete school." };
253 |     }
254 | }
255 | 


--------------------------------------------------------------------------------
/lib/actions/settings.ts:
--------------------------------------------------------------------------------
  1 | 'use server';
  2 | 
  3 | import { revalidatePath } from 'next/cache';
  4 | import { eq } from 'drizzle-orm';
  5 | import bcrypt from 'bcrypt';
  6 | import log from '@/lib/logger';
  7 | import { getSession } from '@/lib/session';
  8 | import { getTenantDb } from '@/lib/db';
  9 | import { users, people } from '@/lib/db/schema/tenant';
 10 | import { UpdateProfileSchema, UpdatePasswordSchema } from '@/lib/dto/settings';
 11 | import { logout } from '@/lib/actions/auth';
 12 | 
 13 | // Action to update the user's profile information
 14 | export async function updateProfileAction(data: unknown) {
 15 |     const session = await getSession();
 16 |     const db = await getTenantDb(session.tenantId);
 17 | 
 18 |     const validatedFields = UpdateProfileSchema.safeParse(data);
 19 |     if (!validatedFields.success) {
 20 |         log.warn({ errors: validatedFields.error.flatten(), userId: session.userId }, "Invalid profile update data provided.");
 21 |         return { success: false, message: "Invalid data provided." };
 22 |     }
 23 | 
 24 |     const { name, email } = validatedFields.data; // 'name' is from the form, will update person's firstName
 25 | 
 26 |     try {
 27 |         await db.transaction(async (tx) => {
 28 |             // Update user's email
 29 |             await tx.update(users)
 30 |                 .set({ email })
 31 |                 .where(eq(users.id, session.userId));
 32 | 
 33 |             // Update person's name (linked to user)
 34 |             // First, find the user's associated personId
 35 |             const user = await tx.query.users.findFirst({ where: eq(users.id, session.userId) });
 36 |             if (user && user.personId) {
 37 |                 // Assuming 'name' in UpdateProfileSchema is the person's first name for simplicity.
 38 |                 // In a real application, you'd have separate firstName/lastName fields in the DTO.
 39 |                 await tx.update(people)
 40 |                     .set({ firstName: name })
 41 |                     .where(eq(people.id, user.personId));
 42 |             } else {
 43 |                 log.warn({ userId: session.userId }, "User has no associated person record during profile update.");
 44 |             }
 45 |         });
 46 | 
 47 |         revalidatePath('/dashboard/settings');
 48 |         return { success: true, message: "Profile updated successfully." };
 49 | 
 50 |     } catch (error: unknown) {
 51 |         if (error instanceof Error && 'code' in error && error.code === '23505') {
 52 |             log.warn({ error, email, userId: session.userId }, "Email already in use during profile update.");
 53 |             return { success: false, message: "This email is already in use by another account." };
 54 |         }
 55 |         log.error({ error, userId: session.userId }, "Failed to update user profile");
 56 |         return { success: false, message: "An unexpected error occurred." };
 57 |     }
 58 | }
 59 | 
 60 | // Action to update the user's password
 61 | export async function updatePasswordAction(data: unknown) {
 62 |     const session = await getSession();
 63 |     const db = await getTenantDb(session.tenantId);
 64 | 
 65 |     const validatedFields = UpdatePasswordSchema.safeParse(data);
 66 |     if (!validatedFields.success) {
 67 |         log.warn({ errors: validatedFields.error.flatten(), userId: session.userId }, "Invalid password update data provided.");
 68 |         return { success: false, message: "Invalid data provided." };
 69 |     }
 70 | 
 71 |     const { currentPassword, newPassword } = validatedFields.data;
 72 | 
 73 |     try {
 74 |         const user = await db.query.users.findFirst({ where: eq(users.id, session.userId) });
 75 |         if (!user) {
 76 |             log.error({ userId: session.userId, tenantId: session.tenantId }, "User not found for password update.");
 77 |             return { success: false, message: "User not found." };
 78 |         }
 79 | 
 80 |         const isPasswordValid = await bcrypt.compare(currentPassword, user.password);
 81 |         if (!isPasswordValid) {
 82 |             log.warn({ userId: session.userId }, "Invalid current password provided during password update.");
 83 |             return { success: false, message: "The current password you entered is incorrect." };
 84 |         }
 85 | 
 86 |         const hashedNewPassword = await bcrypt.hash(newPassword, 12);
 87 |         await db.update(users)
 88 |             .set({ password: hashedNewPassword })
 89 |             .where(eq(users.id, session.userId));
 90 | 
 91 |         log.info({ userId: session.userId }, "Password updated successfully.");
 92 |         return { success: true, message: "Password updated successfully." };
 93 | 
 94 |     } catch (error) {
 95 |         log.error({ error, userId: session.userId }, "Failed to update user password");
 96 |         return { success: false, message: "An unexpected error occurred." };
 97 |     }
 98 | }
 99 | 
100 | // Action to delete the user's own account
101 | export async function deleteAccountAction() {
102 |     const session = await getSession();
103 |     const db = await getTenantDb(session.tenantId);
104 | 
105 |     try {
106 |         // Deleting the user account should NOT delete the person record.
107 |         // The person record might still be needed for historical data (e.g., student records).
108 |         await db.delete(users).where(eq(users.id, session.userId));
109 |         log.info({ userId: session.userId, tenantId: session.tenantId }, "User account deleted successfully.");
110 |         await logout();
111 |         return { success: true, message: "Your account has been deleted." };
112 |     } catch (error) {
113 |         log.error({ error, userId: session.userId, tenantId: session.tenantId }, "Failed to delete user account");
114 |         return { success: false, message: "An unexpected error occurred." };
115 |     }
116 | }
117 | 


--------------------------------------------------------------------------------
/lib/actions/user.ts:
--------------------------------------------------------------------------------
  1 | 'use server';
  2 | 
  3 | import { getTenantDb } from '@/lib/db';
  4 | import { type UserFormInput } from '@/lib/dto/user'; 
  5 | import { users, usersToRoles, roles, people } from '@/lib/db/schema/tenant'; 
  6 | import { revalidatePath } from 'next/cache';
  7 | import { eq } from 'drizzle-orm';
  8 | import bcrypt from 'bcrypt';
  9 | import log from '../logger';
 10 | import { enforcePermission, hasPermission, getSession } from '../session'; 
 11 | 
 12 | function isDatabaseError(error: unknown): error is { code: string; message: string } {
 13 |     return typeof error === 'object' && error !== null && 'code' in error;
 14 | }
 15 | 
 16 | export async function getUsersWithRoles() {
 17 |     log.info('Fetching users with roles...');
 18 |     await enforcePermission('user:read'); 
 19 |     const session = await getSession();
 20 |     const db = await getTenantDb(session.tenantId);
 21 |     
 22 |     try {
 23 |         const usersWithRoles = await db.query.users.findMany({
 24 |             with: {
 25 |                 person: true, // Load associated person data
 26 |                 usersToRoles: {
 27 |                     with: {
 28 |                         role: true
 29 |                     }
 30 |                 }
 31 |             }
 32 |         });
 33 | 
 34 |         // Map to a more consumable format, including person's name
 35 |         return usersWithRoles.map(user => ({
 36 |            ...user,
 37 |             personName: user.person ? `${user.person.firstName} ${user.person.lastName}` : 'N/A',
 38 |             roles: user.usersToRoles.map(ur => ur.role.name).join(', ')
 39 |         }));
 40 |     } catch (error) {
 41 |         log.error({ error, tenantId: session.tenantId }, 'Failed to fetch users with roles.');
 42 |         throw new Error('Failed to retrieve users.');
 43 |     }
 44 | }
 45 | 
 46 | // This action is now primarily for managing an existing user record (email, password, roles).
 47 | // Direct creation of a user linked to a person should happen via upsertPersonAction.
 48 | export async function upsertUserAction(data: UserFormInput) {
 49 |     log.info({ data }, 'Upserting user...');
 50 |     const session = await getSession();
 51 |     
 52 |     const requiredPermission = data.id ? 'user:update' : 'user:create'; 
 53 |     await enforcePermission(requiredPermission);
 54 | 
 55 |     if (data.roles && data.roles.length > 0) {
 56 |         const canAssignRoles = await hasPermission('user:assign_roles');
 57 |         if (!canAssignRoles) {
 58 |             log.warn({ userId: session.userId, tenantId: session.tenantId, attemptedRoles: data.roles }, 'User attempted to assign roles without permission.');
 59 |             return { success: false, message: 'You do not have permission to assign roles.' };
 60 |         }
 61 |     }
 62 | 
 63 |     const db = await getTenantDb(session.tenantId);
 64 | 
 65 |     // Note: 'name' field is no longer part of 'users' table. It's on 'people'.
 66 |     const { id, email, password, roles: roleIdsStr } = data; 
 67 |     const roleIds = roleIdsStr ? roleIdsStr.map(Number) : []; 
 68 |     
 69 |     try {
 70 |         await db.transaction(async (tx) => {
 71 |             if (id) { // Update existing user
 72 |                 const userToUpdate: { email: string; password?: string } = { email };
 73 |                 if (password) {
 74 |                     const hashedPassword = await bcrypt.hash(password, 12);
 75 |                     userToUpdate.password = hashedPassword;
 76 |                 }
 77 |                 
 78 |                 await tx.update(users).set(userToUpdate).where(eq(users.id, id));
 79 |                 
 80 |                 // Update user roles
 81 |                 await tx.delete(usersToRoles).where(eq(usersToRoles.userId, id));
 82 |                 if (roleIds.length > 0) {
 83 |                     await tx.insert(usersToRoles).values(roleIds.map(roleId => ({
 84 |                         userId: id,
 85 |                         roleId: roleId,
 86 |                         // schoolId: ?? // Decide how schoolId for role assignment is handled here if roles are school-scoped.
 87 |                     })));
 88 |                 }
 89 |                 log.info({ userId: id, email, tenantId: session.tenantId }, 'User updated.');
 90 | 
 91 |             } else { 
 92 |                 log.warn({ tenantId: session.tenantId, email }, 'Attempted to create user without personId via upsertUserAction. This flow should be deprecated.');
 93 |                 return { success: false, message: "User creation without a linked person is not allowed." };
 94 |             }
 95 |         });
 96 |     } catch (error: unknown) {
 97 |         log.error({ error, tenantId: session.tenantId, userId: session.userId, data }, 'Failed to upsert user');
 98 |         if (isDatabaseError(error) && error.code === '23505') {
 99 |             return { 
100 |                 success: false, 
101 |                 message: "A user with this email already exists.",
102 |                 errors: { email: ["This email is already in use."] }
103 |             };
104 |         }
105 |         return { success: false, message: "An unexpected error occurred while saving user." };
106 |     }
107 | 
108 |     revalidatePath('/dashboard/people'); 
109 |     revalidatePath('/dashboard/users'); 
110 |     return { success: true, message: `User successfully ${id ? 'updated' : 'created'}.` };
111 | }
112 | 
113 | export async function deleteUserAction(userId: number) {
114 |     await enforcePermission('user:delete'); 
115 |     const session = await getSession();
116 |     const db = await getTenantDb(session.tenantId);
117 | 
118 |     if (userId === session.userId) {
119 |         log.warn({ userId: session.userId, tenantId: session.tenantId }, 'Attempted to delete own account via user management. Denied.');
120 |         return { success: false, message: "You cannot delete your own account from here. Use settings." };
121 |     }
122 | 
123 |     try {
124 |         // Deleting a user does NOT delete the associated person record.
125 |         await db.delete(users).where(eq(users.id, userId));
126 |         log.info({ userId, tenantId: session.tenantId }, 'User deleted.');
127 |         revalidatePath('/dashboard/people');
128 |         revalidatePath('/dashboard/users'); 
129 |         return { success: true, message: "User deleted successfully." };
130 |     } catch (error) {
131 |         log.error({ error, userId, tenantId: session.tenantId }, 'Failed to delete user');
132 |         return { success: false, message: "Failed to delete user." };
133 |     }
134 | }
135 | 


--------------------------------------------------------------------------------
/lib/constants/rbac.ts:
--------------------------------------------------------------------------------
 1 | // Define the default roles
 2 | export const defaultRoles = [
 3 |   { name: 'TENANT_ADMIN', description: 'Full administrative access across the entire tenant.' },
 4 |   { name: 'SCHOOL_ADMIN', description: 'Administrative access within a specific school.' },
 5 |   { name: 'MEMBER', description: 'View-only access at the school level.' },
 6 | ];
 7 | 
 8 | // Define granular permissions
 9 | export const defaultPermissions = [
10 |   // Tenant-level permissions
11 |   { name: 'tenant:manage', description: 'Manage tenant-wide settings and billing.' },
12 |   { name: 'tenant:view_billing', description: 'View tenant billing information.' },
13 | 
14 |   // User management permissions (refers to system users, not people)
15 |   { name: 'user:create', description: 'Create new system users.' },
16 |   { name: 'user:read', description: 'View system user details.' },
17 |   { name: 'user:update', description: 'Update existing system user details.' },
18 |   { name: 'user:delete', description: 'Delete system users.' },
19 |   { name: 'user:assign_roles', description: 'Assign and revoke roles for system users.' },
20 | 
21 |   // Role management permissions
22 |   { name: 'role:create', description: 'Create new roles.' },
23 |   { name: 'role:read', description: 'View role details.' },
24 |   { name: 'role:update', 'description': 'Update existing roles.' },
25 |   { name: 'role:delete', description: 'Delete roles.' },
26 |   { name: 'role:assign_permissions', description: 'Assign and revoke permissions for roles.' },
27 | 
28 |   // School management permissions
29 |   { name: 'school:create', description: 'Create new schools.' },
30 |   { name: 'school:read', description: 'View school details.' },
31 |   { name: 'school:update', description: 'Update existing school details.' },
32 |   { name: 'school:delete', description: 'Delete schools.' },
33 |   { name: 'academic_year:manage', description: 'Create, read, update, and delete academic years.' },
34 |   { name: 'academic_term:manage', description: 'Create, read, update, and delete academic terms.' },
35 |   { name: 'department:manage', description: 'Create, read, update, and delete departments.' },
36 |   { name: 'grade_level:manage', description: 'Create, read, update, and delete grade levels.' },
37 | 
38 |   // People Management Permissions
39 |   { name: 'person:create', description: 'Create new people records (students, employees, guardians).' },
40 |   { name: 'person:read', description: 'View people records.' },
41 |   { name: 'person:update', description: 'Update existing people records.' },
42 |   { name: 'person:delete', description: 'Delete people records.' },
43 |   { name: 'student:admit', description: 'Admit new students and manage their records.' },
44 |   { name: 'employee:onboard', description: 'Onboard new employees and manage their records.' },
45 |   { name: 'guardian:manage', description: 'Manage guardian records and their association with students.' },
46 |   { name: 'user:grant_access', description: 'Grant system access to a person by creating a user account.' }, // New permission for linking Person to User
47 | 
48 |   // General dashboard view
49 |   { name: 'dashboard:view', description: 'Access the main dashboard overview.' },
50 | ];
51 | 
52 | // Define which roles get which permissions
53 | export const rolePermissionsMap: Record<string, string[]> = {
54 |   'TENANT_ADMIN': [
55 |     'tenant:manage', 'tenant:view_billing',
56 |     'user:create', 'user:read', 'user:update', 'user:delete', 'user:assign_roles', 'user:grant_access',
57 |     'role:create', 'role:read', 'role:update', 'role:delete', 'role:assign_permissions',
58 |     'school:create', 'school:read', 'school:update', 'school:delete',
59 |     'academic_year:manage', 'academic_term:manage', 'department:manage', 'grade_level:manage', 
60 |     'person:create', 'person:read', 'person:update', 'person:delete',
61 |     'student:admit', 'employee:onboard', 'guardian:manage',
62 |     'dashboard:view',
63 |   ],
64 |   'SCHOOL_ADMIN': [
65 |     'user:create', 'user:read', 'user:update', 'user:delete', 'user:assign_roles', 'user:grant_access',
66 |     'role:read', 
67 |     'school:read', 'school:update', 
68 |     'academic_year:manage', 'academic_term:manage', 'department:manage', 'grade_level:manage', 
69 |     'person:create', 'person:read', 'person:update', 'person:delete',
70 |     'student:admit', 'employee:onboard', 'guardian:manage',
71 |     'dashboard:view',
72 |   ],
73 |   'MEMBER': [
74 |     'user:read', 
75 |     'role:read', 
76 |     'school:read', 
77 |     'person:read', // Members can view people records
78 |     'dashboard:view',
79 |   ],
80 | };
81 | 


--------------------------------------------------------------------------------
/lib/crypto.ts:
--------------------------------------------------------------------------------
 1 | import { createCipheriv, createDecipheriv, scryptSync, randomBytes } from 'crypto';
 2 | import { env } from '@/env.mjs';
 3 | 
 4 | const ALGORITHM = 'aes-256-gcm';
 5 | const IV_LENGTH = 16;
 6 | const TAG_LENGTH = 16;
 7 | const KEY = scryptSync(env.ENCRYPTION_KEY, 'salt', 32);
 8 | 
 9 | export function encrypt(text: string): string {
10 |   const iv = randomBytes(IV_LENGTH);
11 |   const cipher = createCipheriv(ALGORITHM, KEY, iv);
12 |   const encrypted = Buffer.concat([cipher.update(text, 'utf8'), cipher.final()]);
13 |   const tag = cipher.getAuthTag();
14 |   return Buffer.concat([iv, tag, encrypted]).toString('hex');
15 | }
16 | 
17 | export function decrypt(encryptedText: string): string {
18 |   const data = Buffer.from(encryptedText, 'hex');
19 |   const iv = data.slice(0, IV_LENGTH);
20 |   const tag = data.slice(IV_LENGTH, IV_LENGTH + TAG_LENGTH);
21 |   const encrypted = data.slice(IV_LENGTH + TAG_LENGTH);
22 |   const decipher = createDecipheriv(ALGORITHM, KEY, iv);
23 |   decipher.setAuthTag(tag);
24 |   const decrypted = Buffer.concat([decipher.update(encrypted), decipher.final()]);
25 |   return decrypted.toString('utf8');
26 | }


--------------------------------------------------------------------------------
/lib/db/index.ts:
--------------------------------------------------------------------------------
 1 | // lib/db/index.ts
 2 | import { drizzle, NodePgDatabase } from 'drizzle-orm/node-postgres';
 3 | import { Pool } from 'pg';
 4 | import { eq } from 'drizzle-orm';
 5 | import { tenants } from './schema/shared';
 6 | import * as tenantSchema from './schema/tenant';
 7 | import { env } from '@/env.mjs';
 8 | import { decrypt } from '@/lib/crypto';
 9 | import log from '@/lib/logger';
10 | 
11 | // 1. Main DB Client (for managing tenant metadata)
12 | const mainPool = new Pool({ connectionString: env.POSTGRES_URL });
13 | export const mainDb = drizzle(mainPool, { schema: { tenants } });
14 | 
15 | // 2. Tenant DB Client Cache
16 | const tenantDbCache = new Map<string, NodePgDatabase<typeof tenantSchema>>();
17 | 
18 | // 3. Function to get a tenant-specific DB client
19 | export async function getTenantDb(tenantId: string): Promise<NodePgDatabase<typeof tenantSchema>> {
20 |   if (tenantDbCache.has(tenantId)) {
21 |     log.info({ tenantId }, 'Tenant DB client cache HIT.');
22 |     return tenantDbCache.get(tenantId)!;
23 |   }
24 |   log.info({ tenantId }, 'Tenant DB client cache MISS.');
25 | 
26 |   const results = await mainDb
27 |     .select({ connectionString: tenants.connectionString })
28 |     .from(tenants)
29 |     .where(eq(tenants.tenantId, tenantId))
30 |     .limit(1);
31 | 
32 |   // --- Start of Fix ---
33 |   const tenantData = results[0]; // Access the first element of the array
34 | 
35 |   if (!tenantData) {
36 |     log.error({ tenantId }, 'Tenant not found in main database.');
37 |     throw new Error('Tenant not found');
38 |   }
39 | 
40 |   const decryptedConnectionString = decrypt(tenantData.connectionString);
41 |   // --- End of Fix ---
42 | 
43 |   const tenantPool = new Pool({ connectionString: decryptedConnectionString });
44 |   const tenantDb = drizzle(tenantPool, { schema: tenantSchema });
45 | 
46 |   tenantDbCache.set(tenantId, tenantDb);
47 |   log.info({ tenantId }, 'Created and cached new tenant DB client.');
48 | 
49 |   return tenantDb;
50 | }


--------------------------------------------------------------------------------
/lib/db/migrate.ts:
--------------------------------------------------------------------------------
 1 | import { drizzle } from 'drizzle-orm/postgres-js';
 2 | import postgres from 'postgres';
 3 | import fs from 'fs/promises';
 4 | import path from 'path';
 5 | import log from '@/lib/logger';
 6 | 
 7 | /**
 8 |  * Applies the full tenant schema from a single SQL file to a new tenant database.
 9 |  * This method is reliable in serverless environments where migration folders may not be available.
10 |  * @param {string} connectionString - The connection string for the new tenant database.
11 |  */
12 | export async function runTenantMigrations(connectionString: string) {
13 |   const migrationClient = postgres(connectionString, { max: 1 });
14 |   
15 |   try {
16 |     log.info('Applying tenant schema from SQL snapshot...');
17 |     
18 |     // Construct the path to the schema file. This assumes the file is at the root of the project.
19 |     const schemaPath = path.join(process.cwd(), 'drizzle', 'tenant', '0000_sleepy_doctor_spectrum.sql');
20 |     const schemaSql = await fs.readFile(schemaPath, 'utf-8');
21 | 
22 |     // Execute the entire schema SQL as a single query
23 |     await migrationClient.unsafe(schemaSql);
24 | 
25 |     log.info('Tenant schema applied successfully.');
26 |   } catch (error) {
27 |     log.error({ error }, 'Applying tenant schema failed.');
28 |     // Re-throw the error to ensure the API call fails loudly and triggers cleanup
29 |     throw new Error('Could not apply tenant schema.');
30 |   } finally {
31 |     // Ensure the connection is closed
32 |     await migrationClient.end();
33 |   }
34 | }
35 | 


--------------------------------------------------------------------------------
/lib/db/schema/shared.ts:
--------------------------------------------------------------------------------
 1 | import { pgTable, serial, text, timestamp } from 'drizzle-orm/pg-core';
 2 | 
 3 | export const tenants = pgTable('tenants', {
 4 |   id: serial('id').primaryKey(),
 5 |   tenantId: text('tenant_id').notNull().unique(),
 6 |   name: text('name').notNull(),
 7 |   neonProjectId: text('neon_project_id').notNull().unique(),
 8 |   connectionString: text('connection_string').notNull(), // Encrypted
 9 |   createdAt: timestamp('created_at').defaultNow().notNull(),
10 | });


--------------------------------------------------------------------------------
/lib/db/schema/tenant.ts:
--------------------------------------------------------------------------------
  1 | import { serial, text, pgTable, integer, timestamp, primaryKey, uniqueIndex, boolean, jsonb, date, pgEnum } from 'drizzle-orm/pg-core';
  2 | import { relations } from 'drizzle-orm';
  3 | 
  4 | // --- ENUMS ---
  5 | export const personTypeEnum = pgEnum('person_type', ['student', 'guardian', 'staff']);
  6 | export const attendanceStatusEnum = pgEnum('attendance_status', ['present', 'absent', 'tardy', 'excused']);
  7 | export const invoiceStatusEnum = pgEnum('invoice_status', ['draft', 'open', 'paid', 'void', 'past_due']);
  8 | export const paymentMethodEnum = pgEnum('payment_method', ['credit_card', 'bank_transfer', 'cash', 'check', 'scholarship']);
  9 | export const scheduleTypeEnum = pgEnum('schedule_type', ['recurring_class', 'one_time_event']);
 10 | 
 11 | 
 12 | // Existing users table (now links to people)
 13 | export const users = pgTable('users', {
 14 |   id: serial('id').primaryKey(),
 15 |   email: text('email').notNull().unique(),
 16 |   password: text('password').notNull(),
 17 |   personId: integer('person_id').notNull().references(() => people.id, { onDelete: 'cascade' }).unique(),
 18 |   createdAt: timestamp('created_at', { withTimezone: true }).defaultNow().notNull(),
 19 | });
 20 | 
 21 | // Existing roles table
 22 | export const roles = pgTable('roles', {
 23 |     id: serial('id').primaryKey(),
 24 |     name: text('name').notNull().unique(),
 25 |     description: text('description'),
 26 |     createdAt: timestamp('created_at').defaultNow().notNull(),
 27 | });
 28 | 
 29 | // Existing permissions table
 30 | export const permissions = pgTable('permissions', {
 31 |     id: serial('id').primaryKey(),
 32 |     name: text('name').notNull().unique(),
 33 |     description: text('description'),
 34 |     createdAt: timestamp('created_at').defaultNow().notNull(),
 35 | });
 36 | 
 37 | // Existing users_to_roles join table (schoolId is already added in Milestone 1)
 38 | export const usersToRoles = pgTable('users_to_roles', {
 39 |     userId: integer('user_id').notNull().references(() => users.id, { onDelete: 'cascade' }),
 40 |     roleId: integer('role_id').notNull().references(() => roles.id, { onDelete: 'cascade' }),
 41 |     schoolId: integer('school_id').references(() => schools.id, { onDelete: 'cascade' }),
 42 | }, (t) => ({
 43 |     pk: primaryKey({ columns: [t.userId, t.roleId] }),
 44 | }));
 45 | 
 46 | // Existing roles_to_permissions join table
 47 | export const rolesToPermissions = pgTable('roles_to_permissions', {
 48 |     roleId: integer('role_id').notNull().references(() => roles.id, { onDelete: 'cascade' }),
 49 |     permissionId: integer('permission_id').notNull().references(() => permissions.id, { onDelete: 'cascade' }),
 50 | }, (t) => ({
 51 |     pk: primaryKey({ columns: [t.roleId, t.permissionId] }),
 52 | }));
 53 | 
 54 | 
 55 | // Existing tables from Milestone 1
 56 | export const schools = pgTable('schools', {
 57 |     id: serial('id').primaryKey(),
 58 |     name: text('name').notNull(),
 59 |     address: text('address'),
 60 |     phone: text('phone'),
 61 |     email: text('email'),
 62 |     website: text('website'),
 63 |     logoUrl: text('logo_url'),
 64 |     brandingJson: jsonb('branding_json'),
 65 |     createdAt: timestamp('created_at').defaultNow().notNull(),
 66 |     updatedAt: timestamp('updated_at').defaultNow().notNull(),
 67 | });
 68 | 
 69 | export const academicYears = pgTable('academic_years', {
 70 |     id: serial('id').primaryKey(),
 71 |     schoolId: integer('school_id').notNull().references(() => schools.id, { onDelete: 'cascade' }),
 72 |     yearName: text('year_name').notNull(),
 73 |     startDate: date('start_date').notNull(),
 74 |     endDate: date('end_date').notNull(),
 75 |     isCurrent: boolean('is_current').default(false).notNull(),
 76 |     createdAt: timestamp('created_at').defaultNow().notNull(),
 77 |     updatedAt: timestamp('updated_at').defaultNow().notNull(),
 78 | }, (t) => ({
 79 |     unqSchoolYear: uniqueIndex('unq_school_year').on(t.schoolId, t.yearName),
 80 | }));
 81 | 
 82 | export const academicTerms = pgTable('academic_terms', {
 83 |     id: serial('id').primaryKey(),
 84 |     academicYearId: integer('academic_year_id').notNull().references(() => academicYears.id, { onDelete: 'cascade' }),
 85 |     termName: text('term_name').notNull(),
 86 |     startDate: date('start_date').notNull(),
 87 |     endDate: date('end_date').notNull(),
 88 |     isCurrent: boolean('is_current').default(false).notNull(),
 89 |     createdAt: timestamp('created_at').defaultNow().notNull(),
 90 |     updatedAt: timestamp('updated_at').defaultNow().notNull(),
 91 | }, (t) => ({
 92 |     unqYearTerm: uniqueIndex('unq_year_term').on(t.academicYearId, t.termName),
 93 | }));
 94 | 
 95 | export const departments = pgTable('departments', {
 96 |     id: serial('id').primaryKey(),
 97 |     schoolId: integer('school_id').notNull().references(() => schools.id, { onDelete: 'cascade' }),
 98 |     name: text('name').notNull(),
 99 |     description: text('description'),
100 |     createdAt: timestamp('created_at').defaultNow().notNull(),
101 |     updatedAt: timestamp('updated_at').defaultNow().notNull(),
102 | }, (t) => ({
103 |     unqSchoolDept: uniqueIndex('unq_school_dept').on(t.schoolId, t.name),
104 | }));
105 | 
106 | export const gradeLevels = pgTable('grade_levels', {
107 |     id: serial('id').primaryKey(),
108 |     schoolId: integer('school_id').notNull().references(() => schools.id, { onDelete: 'cascade' }),
109 |     name: text('name').notNull(),
110 |     levelOrder: integer('level_order').notNull(),
111 |     description: text('description'),
112 |     createdAt: timestamp('created_at').defaultNow().notNull(),
113 |     updatedAt: timestamp('updated_at').defaultNow().notNull(),
114 | }, (t) => ({
115 |     unqSchoolGrade: uniqueIndex('unq_school_grade').on(t.schoolId, t.name),
116 |     unqSchoolOrder: uniqueIndex('unq_school_order').on(t.schoolId, t.levelOrder),
117 | }));
118 | 
119 | 
120 | // --- NEW TABLES FOR MILESTONE 2: PEOPLE & IDENTITY ---
121 | 
122 | // 1. People Table (Central registry for all individuals)
123 | export const people = pgTable('people', {
124 |   id: serial('id').primaryKey(),
125 |   // schoolId is now nullable, allowing tenant-level people (e.g., initial TENANT_ADMIN)
126 |   schoolId: integer('school_id').references(() => schools.id, { onDelete: 'set null' }),
127 |   firstName: text('first_name').notNull(),
128 |   lastName: text('last_name').notNull(),
129 |   middleName: text('middle_name'),
130 |   dateOfBirth: date('date_of_birth'),
131 |   gender: text('gender'),
132 |   contactEmail: text('contact_email').unique(),
133 |   contactPhone: text('contact_phone'),
134 |   address: text('address'),
135 |   personType: personTypeEnum('person_type').notNull(),
136 |   profilePictureUrl: text('profile_picture_url'),
137 |   createdAt: timestamp('created_at', { withTimezone: true }).defaultNow().notNull(),
138 |   updatedAt: timestamp('updated_at', { withTimezone: true }).defaultNow().notNull(),
139 | });
140 | 
141 | // 2. Students Table (Specific details for students)
142 | export const students = pgTable('students', {
143 |   id: serial('id').primaryKey(),
144 |   personId: integer('person_id').notNull().references(() => people.id, { onDelete: 'cascade' }).unique(),
145 |   studentId: text('student_id').notNull().unique(),
146 |   enrollmentDate: date('enrollment_date').notNull(),
147 |   graduationDate: date('graduation_date'),
148 |   currentGradeLevelId: integer('current_grade_level_id').references(() => gradeLevels.id, { onDelete: 'set null' }),
149 |   academicHistoryJson: jsonb('academic_history_json'),
150 |   notes: text('notes'),
151 |   createdAt: timestamp('created_at', { withTimezone: true }).defaultNow().notNull(),
152 |   updatedAt: timestamp('updated_at', { withTimezone: true }).defaultNow().notNull(),
153 | });
154 | 
155 | // 3. Employees Table (Specific details for staff/teachers)
156 | export const employees = pgTable('employees', {
157 |   id: serial('id').primaryKey(),
158 |   personId: integer('person_id').notNull().references(() => people.id, { onDelete: 'cascade' }).unique(),
159 |   employeeId: text('employee_id').notNull().unique(),
160 |   hireDate: date('hire_date').notNull(),
161 |   terminationDate: date('termination_date'),
162 |   position: text('position'),
163 |   departmentId: integer('department_id').references(() => departments.id, { onDelete: 'set null' }),
164 |   employmentHistoryJson: jsonb('employment_history_json'),
165 |   notes: text('notes'),
166 |   createdAt: timestamp('created_at', { withTimezone: true }).defaultNow().notNull(),
167 |   updatedAt: timestamp('updated_at', { withTimezone: true }).defaultNow().notNull(),
168 | });
169 | 
170 | // 4. Guardians Table (Links guardians to students)
171 | export const guardians = pgTable('guardians', {
172 |   id: serial('id').primaryKey(),
173 |   personId: integer('person_id').notNull().references(() => people.id, { onDelete: 'cascade' }).unique(),
174 |   relationship: text('relationship'),
175 |   isPrimaryContact: boolean('is_primary_contact').default(false).notNull(),
176 |   createdAt: timestamp('created_at', { withTimezone: true }).defaultNow().notNull(),
177 |   updatedAt: timestamp('updated_at', { withTimezone: true }).defaultNow().notNull(),
178 | });
179 | 
180 | // 5. Student-Guardian Join Table (Many-to-many relationship)
181 | export const studentGuardians = pgTable('student_guardians', {
182 |   studentId: integer('student_id').notNull().references(() => students.id, { onDelete: 'cascade' }),
183 |   guardianId: integer('guardian_id').notNull().references(() => guardians.id, { onDelete: 'cascade' }),
184 | }, (t) => ({
185 |   pk: primaryKey({ columns: [t.studentId, t.guardianId] }),
186 | }));
187 | 
188 | 
189 | // --- RELATIONS (Updated with new tables) ---
190 | 
191 | export const usersRelations = relations(users, ({ one, many }) => ({
192 |     person: one(people, {
193 |         fields: [users.personId],
194 |         references: [people.id],
195 |     }),
196 |     usersToRoles: many(usersToRoles),
197 | }));
198 | 
199 | export const rolesRelations = relations(roles, ({ many }) => ({
200 |     usersToRoles: many(usersToRoles),
201 |     rolesToPermissions: many(rolesToPermissions),
202 | }));
203 | 
204 | export const permissionsRelations = relations(permissions, ({ many }) => ({
205 |     rolesToPermissions: many(rolesToPermissions),
206 | }));
207 | 
208 | export const usersToRolesRelations = relations(usersToRoles, ({ one }) => ({
209 |     role: one(roles, {
210 |         fields: [usersToRoles.roleId],
211 |         references: [roles.id],
212 |     }),
213 |     user: one(users, {
214 |         fields: [usersToRoles.userId],
215 |         references: [users.id],
216 |     }),
217 |     school: one(schools, {
218 |         fields: [usersToRoles.schoolId],
219 |         references: [schools.id],
220 |     }),
221 | }));
222 | 
223 | export const rolesToPermissionsRelations = relations(rolesToPermissions, ({ one }) => ({
224 |     role: one(roles, {
225 |         fields: [rolesToPermissions.roleId],
226 |         references: [roles.id],
227 |     }),
228 |     permission: one(permissions, {
229 |         fields: [rolesToPermissions.permissionId],
230 |         references: [permissions.id],
231 |     }),
232 | }));
233 | 
234 | export const schoolsRelations = relations(schools, ({ many }) => ({
235 |     academicYears: many(academicYears),
236 |     departments: many(departments),
237 |     gradeLevels: many(gradeLevels),
238 |     people: many(people), // A school has many people
239 |     usersToRoles: many(usersToRoles),
240 | }));
241 | 
242 | export const academicYearsRelations = relations(academicYears, ({ one, many }) => ({
243 |     school: one(schools, {
244 |         fields: [academicYears.schoolId],
245 |         references: [schools.id],
246 |     }),
247 |     academicTerms: many(academicTerms),
248 | }));
249 | 
250 | export const academicTermsRelations = relations(academicTerms, ({ one }) => ({
251 |     academicYear: one(academicYears, {
252 |         fields: [academicTerms.academicYearId],
253 |         references: [academicYears.id],
254 |     }),
255 | }));
256 | 
257 | export const departmentsRelations = relations(departments, ({ one, many }) => ({
258 |     school: one(schools, {
259 |         fields: [departments.schoolId],
260 |         references: [schools.id],
261 |     }),
262 |     employees: many(employees),
263 | }));
264 | 
265 | export const gradeLevelsRelations = relations(gradeLevels, ({ one, many }) => ({
266 |     school: one(schools, {
267 |         fields: [gradeLevels.schoolId],
268 |         references: [schools.id],
269 |     }),
270 |     students: many(students),
271 | }));
272 | 
273 | export const peopleRelations = relations(people, ({ one, many }) => ({
274 |     school: one(schools, {
275 |         fields: [people.schoolId],
276 |         references: [schools.id],
277 |     }),
278 |     user: one(users, {
279 |         fields: [people.id],
280 |         references: [users.personId],
281 |     }),
282 |     student: one(students, {
283 |         fields: [people.id],
284 |         references: [students.personId],
285 |     }),
286 |     employee: one(employees, {
287 |         fields: [people.id],
288 |         references: [employees.personId],
289 |     }),
290 |     guardian: one(guardians, {
291 |         fields: [people.id],
292 |         references: [guardians.personId],
293 |     }),
294 | }));
295 | 
296 | export const studentsRelations = relations(students, ({ one, many }) => ({
297 |     person: one(people, {
298 |         fields: [students.personId],
299 |         references: [people.id],
300 |     }),
301 |     currentGradeLevel: one(gradeLevels, {
302 |         fields: [students.currentGradeLevelId],
303 |         references: [gradeLevels.id],
304 |     }),
305 |     studentGuardians: many(studentGuardians),
306 | }));
307 | 
308 | export const employeesRelations = relations(employees, ({ one }) => ({
309 |     person: one(people, {
310 |         fields: [employees.personId],
311 |         references: [people.id],
312 |     }),
313 |     department: one(departments, {
314 |         fields: [employees.departmentId],
315 |         references: [departments.id],
316 |     }),
317 | }));
318 | 
319 | export const guardiansRelations = relations(guardians, ({ one, many }) => ({
320 |     person: one(people, {
321 |         fields: [guardians.personId],
322 |         references: [people.id],
323 |     }),
324 |     studentGuardians: many(studentGuardians),
325 | }));
326 | 
327 | export const studentGuardiansRelations = relations(studentGuardians, ({ one }) => ({
328 |     student: one(students, {
329 |         fields: [studentGuardians.studentId],
330 |         references: [students.id],
331 |     }),
332 |     guardian: one(guardians, {
333 |         fields: [studentGuardians.guardianId],
334 |         references: [guardians.id],
335 |     }),
336 | }));
337 | 


--------------------------------------------------------------------------------
/lib/dto/department.ts:
--------------------------------------------------------------------------------
 1 | // /lib/dto/department.ts
 2 | 
 3 | import { z } from 'zod';
 4 | 
 5 | /**
 6 |  * Schema for CREATING a single new department.
 7 |  * 'schoolId' is required to associate it with the correct school.
 8 |  */
 9 | export const CreateDepartmentSchema = z.object({
10 |   schoolId: z.number(),
11 |   name: z.string().min(2, { message: "Department name must be at least 2 characters." }),
12 |   description: z.string().optional(),
13 | });
14 | export type CreateDepartmentInput = z.infer<typeof CreateDepartmentSchema>;
15 | 
16 | /**
17 |  * Schema for UPDATING a single existing department.
18 |  * 'id' is required to identify the department to update.
19 |  * All other fields are optional for partial updates.
20 |  */
21 | export const UpdateDepartmentSchema = z.object({
22 |   id: z.number(),
23 |   name: z.string().min(2, { message: "Department name must be at least 2 characters." }).optional(),
24 |   description: z.string().optional(),
25 | });
26 | export type UpdateDepartmentInput = z.infer<typeof UpdateDepartmentSchema>;
27 | 
28 | /**
29 |  * Schema for DELETING a single department.
30 |  * Requires the department 'id' for identification.
31 |  */
32 | export const DeleteDepartmentSchema = z.object({
33 |   id: z.number(),
34 | });
35 | export type DeleteDepartmentInput = z.infer<typeof DeleteDepartmentSchema>;


--------------------------------------------------------------------------------
/lib/dto/person.ts:
--------------------------------------------------------------------------------
 1 | import { z } from 'zod';
 2 | import { personTypeEnum } from '@/lib/db/schema/tenant';
 3 | 
 4 | /**
 5 |  * @description Zod schema for validating the person form.
 6 |  * This schema is used to validate the data from the person form before it's sent to the server.
 7 |  * It ensures that all required fields are present and that the data is in the correct format.
 8 |  */
 9 | export const PersonFormSchema = z.object({
10 |   id: z.number().optional(),
11 |   schoolId: z.number().int({ message: "School ID must be an integer." }).nullable().optional(),
12 |   firstName: z.string().min(1, 'First name is required.').max(100),
13 |   lastName: z.string().min(1, 'Last name is required.').max(100),
14 |   middleName: z.string().nullable().optional(),
15 |   dateOfBirth: z.string().nullable().optional(),
16 |   gender: z.string().nullable().optional(),
17 |   contactEmail: z.string().email('Invalid email address.').or(z.literal('')).nullable().optional(),
18 |   contactPhone: z.string().nullable().optional(),
19 |   address: z.string().nullable().optional(),
20 |   personType: z.enum(personTypeEnum.enumValues as Readonly<[string, ...string[]]>),
21 |   profilePictureUrl: z.string().url('Invalid URL.').nullable().optional(),
22 | 
23 |   // Fields for optional user account creation/update
24 |   createUserAccount: z.boolean().optional(),
25 |   // FIX: Allow an empty string, as it's only required if createUserAccount is true.
26 |   userEmail: z.string().email('Invalid email address.').or(z.literal('')).nullable().optional(),
27 |   userPassword: z.string().min(8, 'Password must be at least 8 characters.').or(z.literal('')).nullable().optional(),
28 |   userRoles: z.array(z.string()).nullable().optional(),
29 | 
30 | }).superRefine((data, ctx) => {
31 |   if (data.createUserAccount) {
32 |     if (!data.userEmail) {
33 |       ctx.addIssue({
34 |         code: z.ZodIssueCode.custom,
35 |         message: 'User email is required to create a user account.',
36 |         path: ['userEmail'],
37 |       });
38 |     }
39 |     // Password is required only when creating a new user account.
40 |     if (!data.id && !data.userPassword) {
41 |       ctx.addIssue({
42 |         code: z.ZodIssueCode.custom,
43 |         message: 'User password is required to create a new user account.',
44 |         path: ['userPassword'],
45 |       });
46 |     }
47 |   }
48 | });
49 | 
50 | export type PersonFormInput = z.infer<typeof PersonFormSchema>;
51 | 


--------------------------------------------------------------------------------
/lib/dto/role.ts:
--------------------------------------------------------------------------------
 1 | import { z } from 'zod';
 2 | 
 3 | export const RoleFormSchema = z.object({
 4 |   id: z.number().optional(),
 5 |   name: z.string().min(2, { message: 'Role name must be at least 2 characters.' }),
 6 |   description: z.string().optional(),
 7 |   // New: permissions is an array of strings (permission names) and is optional.
 8 |   // The server-side will map these names to IDs.
 9 |   permissions: z.array(z.string()).optional(), 
10 | });
11 | 
12 | export type RoleFormInput = z.infer<typeof RoleFormSchema>;
13 | 


--------------------------------------------------------------------------------
/lib/dto/school.ts:
--------------------------------------------------------------------------------
  1 | import { z } from 'zod';
  2 | 
  3 | 
  4 | export const BrandingConfigSchema = z.object({
  5 |   logo: z.object({
  6 |     url: z.string().url('Invalid URL for logo.').optional().nullable(),
  7 |     position: z.enum(["left", "center", "right"], { message: "Invalid logo position." }).optional(),
  8 |     size: z.enum(["small", "medium", "large"], { message: "Invalid logo size." }).optional(),
  9 |   }).optional().nullable(),
 10 |   colors: z.object({
 11 |     primary: z.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, "Invalid primary color format (e.g., #RRGGBB)."),
 12 |     secondary: z.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, "Invalid secondary color format.").default("#0284c7"),
 13 |     accent: z.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, "Invalid accent color format.").default("#38bdf8"),
 14 |     background: z.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, "Invalid background color format.").default("#ffffff"),
 15 |     text: z.string().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/, "Invalid text color format.").default("#1f2937"),
 16 |   }),
 17 |   typography: z.object({
 18 |     headingFont: z.string().min(1, "Heading font is required."),
 19 |     bodyFont: z.string().min(1, "Body font is required."),
 20 |     fontSize: z.enum(["small", "medium", "large"], { message: "Invalid font size." }),
 21 |   }),
 22 |   theme: z.object({
 23 |     mode: z.enum(["light", "dark", "auto"], { message: "Invalid theme mode." }),
 24 |     borderRadius: z.enum(["none", "small", "medium", "large"], { message: "Invalid border radius." }),
 25 |     shadows: z.boolean(),
 26 |   }),
 27 |   layout: z.object({
 28 |     sidebarPosition: z.enum(["left", "right"], { message: "Invalid sidebar position." }),
 29 |     headerStyle: z.enum(["minimal", "standard", "prominent"], { message: "Invalid header style." }),
 30 |     cardStyle: z.enum(["flat", "elevated", "outlined"], { message: "Invalid card style." }),
 31 |   }),
 32 | });
 33 | 
 34 | // EXPORT this schema
 35 | export const AcademicTermSchema = z.object({
 36 |     id: z.string().optional(),
 37 |     termName: z.string().min(1, "Term name is required."),
 38 |     startDate: z.string().min(1, "Start date is required.").refine(dateString => !isNaN(new Date(dateString).getTime()), "Invalid term start date."),
 39 |     endDate: z.string().min(1, "End date is required.").refine(dateString => !isNaN(new Date(dateString).getTime()), "Invalid term end date."),
 40 |     isCurrent: z.boolean(),
 41 | });
 42 | 
 43 | // EXPORT this schema
 44 | export const AcademicYearSchema = z.object({
 45 |   id: z.string().optional(), // Stepper uses string IDs for new items
 46 |   yearName: z.string().min(1, "Year name is required."),
 47 |   startDate: z.string().min(1, "Start date is required.").refine(dateString => !isNaN(new Date(dateString).getTime()), "Invalid start date."),
 48 |   endDate: z.string().min(1, "End date is required.").refine(dateString => !isNaN(new Date(dateString).getTime()), "Invalid end date."),
 49 |   isCurrent: z.boolean(),
 50 |   terms: z.array(AcademicTermSchema).min(1, "At least one academic term is required."),
 51 | }).refine(data => new Date(data.startDate) < new Date(data.endDate), {
 52 |   message: "Start date must be before end date for academic year.",
 53 |   path: ["endDate"],
 54 | });
 55 | 
 56 | // EXPORT this schema
 57 | export const DepartmentSchema = z.object({
 58 |   id: z.string().optional(),
 59 |   name: z.string().min(1, "Department name is required."),
 60 |   description: z.string().optional(),
 61 | });
 62 | 
 63 | // EXPORT this schema
 64 | export const GradeLevelSchema = z.object({
 65 |   id: z.string().optional(),
 66 |   name: z.string().min(1, "Grade level name is required."),
 67 |   levelOrder: z.number().int().min(0, "Level order must be 0 or greater."),
 68 |   description: z.string().optional(),
 69 | });
 70 | 
 71 | // EXPORT this schema for the basic info step
 72 | export const BasicInfoSchema = z.object({
 73 |   id: z.number().optional(),
 74 |   name: z.string().min(3, { message: 'School name must be at least 3 characters.' }).max(100),
 75 |   address: z.string().optional().nullable(),
 76 |   phone: z.string().optional().nullable(),
 77 |   email: z.string().email({ message: 'Invalid email address.' }),
 78 | });
 79 | 
 80 | export const SchoolFormSchema = z.object({
 81 |   id: z.number().optional(),
 82 |   // Step 1: Basic Information
 83 |   name: z.string().min(3, { message: 'School name must be at least 3 characters.' }).max(100),
 84 |   address: z.string().optional().nullable(),
 85 |   phone: z.string().optional().nullable(),
 86 |   email: z.string().email({ message: 'Invalid email address.' }),
 87 | 
 88 |   // Step 2: Academic Information
 89 |   academicYears: z.array(AcademicYearSchema).min(1, "At least one academic year is required."),
 90 | 
 91 |   // Step 3: Departments
 92 |   departments: z.array(DepartmentSchema).min(1, "At least one department is required."),
 93 | 
 94 |   // Step 4: Grade Levels
 95 |   gradeLevels: z.array(GradeLevelSchema).min(1, "At least one grade level is required."),
 96 | 
 97 |   // Step 5: Branding
 98 |   website: z.string().url({ message: 'Invalid URL.' }).optional().nullable(),
 99 |   logoUrl: z.string().url({ message: 'Invalid URL.' }).optional().nullable(),
100 |   // MAKE BRANDING OPTIONAL
101 |   branding: BrandingConfigSchema.optional(),
102 | });
103 | 
104 | export type SchoolFormInput = z.infer<typeof SchoolFormSchema>;
105 | 


--------------------------------------------------------------------------------
/lib/dto/settings.ts:
--------------------------------------------------------------------------------
 1 | import { z } from 'zod';
 2 | 
 3 | // Schema for updating the user's general profile information
 4 | export const UpdateProfileSchema = z.object({
 5 |   name: z.string().min(3, { message: "Name must be at least 3 characters." }),
 6 |   email: z.string().email({ message: "Please enter a valid email address." }),
 7 | });
 8 | export type UpdateProfileInput = z.infer<typeof UpdateProfileSchema>;
 9 | 
10 | 
11 | // Schema for updating the user's password
12 | export const UpdatePasswordSchema = z.object({
13 |   currentPassword: z.string().min(1, { message: "Current password is required." }),
14 |   newPassword: z.string().min(8, { message: "New password must be at least 8 characters." }),
15 | });
16 | export type UpdatePasswordInput = z.infer<typeof UpdatePasswordSchema>;
17 | 
18 | // Schema for the danger zone account deletion
19 | export const DeleteAccountSchema = z.object({
20 |     confirm: z.string().refine((val) => val === 'delete my account', {
21 |         message: "You must type 'delete my account' to confirm.",
22 |     }),
23 | });
24 | export type DeleteAccountInput = z.infer<typeof DeleteAccountSchema>;


--------------------------------------------------------------------------------
/lib/dto/tenant.ts:
--------------------------------------------------------------------------------
 1 | // lib/dto/tenant.ts
 2 | import { z } from 'zod';
 3 | 
 4 | export const TenantSignupDto = z.object({
 5 |   orgName: z.string().min(3, 'Org name must be at least 3 characters').max(50),
 6 |   tenantId: z.string().min(3, 'Tenant ID must be at least 3 characters').max(50).regex(/^[a-z0-9-]+$/, 'Tenant ID must be lowercase letters, numbers, or hyphens'),
 7 |   adminName: z.string().min(3, 'Admin name must be at least 3 characters').max(100),
 8 |   adminEmail: z.string().email('Invalid email'),
 9 |   adminPassword: z.string().min(8, 'Password must be at least 8 characters'),
10 | });
11 | 
12 | export const LoginDto = z.object({
13 |   email: z.string().email('Invalid email'),
14 |   password: z.string().min(8, 'Password must be at least 8 characters'),
15 | });
16 | 
17 | export const LoginWithTenantDto = LoginDto.extend({
18 |   tenantId: z.string().min(1, 'Tenant ID is required'),
19 | });
20 | 
21 | export type TenantSignupInput = z.infer<typeof TenantSignupDto>;
22 | export type LoginInput = z.infer<typeof LoginDto>;
23 | export type LoginWithTenantInput = z.infer<typeof LoginWithTenantDto>;


--------------------------------------------------------------------------------
/lib/dto/user.ts:
--------------------------------------------------------------------------------
 1 | import { z } from 'zod';
 2 | 
 3 | export const UserFormSchema = z.object({
 4 |   id: z.number().optional(),
 5 |   name: z.string().min(2, { message: 'Name must be at least 2 characters.' }),
 6 |   email: z.string().email({ message: 'Please enter a valid email.' }),
 7 |   password: z.string().optional(),
 8 |   roles: z.array(z.string()).min(1, { message: 'At least one role must be selected.' }),
 9 | }).refine(data => {
10 |     // If it's a new user (no id), password must be a string of at least 8 chars.
11 |     if (!data.id) {
12 |         return !!data.password && data.password.length >= 8;
13 |     }
14 |     // If it's an existing user and a password IS provided, it must be at least 8 chars.
15 |     // If no password is provided for an existing user, it's valid (means no change).
16 |     if (data.id && data.password) {
17 |         return data.password.length >= 8;
18 |     }
19 |     return true;
20 | }, {
21 |     message: "Password must be at least 8 characters.",
22 |     path: ["password"], // Point the error to the password field
23 | });
24 | 
25 | export type UserFormInput = z.infer<typeof UserFormSchema>;


--------------------------------------------------------------------------------
/lib/logger.ts:
--------------------------------------------------------------------------------
 1 | import pino from 'pino';
 2 | 
 3 | const log = pino({
 4 |   level: process.env.LOG_LEVEL || 'info',
 5 |   formatters: {
 6 |     level: (label: string) => ({ level: label }),
 7 |   },
 8 |   timestamp: pino.stdTimeFunctions.isoTime,
 9 | });
10 | 
11 | export default log;


--------------------------------------------------------------------------------
/lib/navigation.ts:
--------------------------------------------------------------------------------
 1 | import { NavItem } from "@/components/navigation-provider";
 2 | import { UserSession, hasPermission } from "@/lib/session";
 3 | 
 4 | /**
 5 |  * Generates and filters navigation items for the tenant context based on user permissions.
 6 |  * @param user - The user session object.
 7 |  * @returns An array of NavItem objects for the tenant sidebar.
 8 |  */
 9 | export const getTenantNavItems = (user: UserSession): NavItem[] => {
10 |   const allItems: NavItem[] = [
11 |     { title: "Dashboard", url: "/dashboard", iconName: "Home", requiredPermission: 'dashboard:view' },
12 |     { title: "People", url: "/dashboard/people", iconName: "Users", requiredPermission: 'person:read' },
13 |     { title: "Roles", url: "/dashboard/roles", iconName: "Folder", requiredPermission: 'role:read' },
14 |     { title: "Schools", url: "/dashboard/schools", iconName: "Home", requiredPermission: 'school:read' },
15 |     { title: "Billings", url: "/dashboard/billing", iconName: "DollarSign", requiredPermission: 'tenant:view_billing' },
16 |     { title: "Integrations", url: "/dashboard/integrations", iconName: "Plug", requiredPermission: 'tenant:manage' },
17 |     { title: "Settings", url: "/dashboard/settings", iconName: "Settings", requiredPermission: 'tenant:manage_settings' },
18 |   ];
19 | 
20 |   // Filter items based on the user's permissions
21 |   return allItems.filter(item => {
22 |     if (!item.requiredPermission) {
23 |       return true; // Always show items that don't require a permission
24 |     }
25 |     return user?.permissions?.includes(item.requiredPermission) ?? false;
26 |   });
27 | };
28 | 
29 | 
30 | /**
31 |  * Generates and filters navigation items for the school context based on user permissions.
32 |  * @param schoolId - The ID of the current school.
33 |  * @param user - The user session object.
34 |  * @returns An array of NavItem objects for the school sidebar.
35 |  */
36 | export const getSchoolNavItems = (schoolId: string, user: UserSession): NavItem[] => {
37 |   const allItems: NavItem[] = [
38 |     {
39 |         title: "School Dashboard",
40 |         url: `/dashboard/schools/${schoolId}`,
41 |         iconName: "Home",
42 |         requiredPermission: "school:read",
43 |     },
44 |     {
45 |         title: "Students",
46 |         url: `/dashboard/schools/${schoolId}/students`,
47 |         iconName: "GraduationCap",
48 |         requiredPermission: "student:read",
49 |     },
50 |     {
51 |         title: "Staff",
52 |         url: `/dashboard/schools/${schoolId}/staff`,
53 |         iconName: "UserCheck",
54 |         requiredPermission: "staff:read",
55 |     },
56 |     {
57 |         title: "Academics",
58 |         url: `/dashboard/schools/${schoolId}/academics`,
59 |         iconName: "BookOpen",
60 |         requiredPermission: "academics:read",
61 |     },
62 |     {
63 |         title: "School Settings",
64 |         url: `/dashboard/schools/${schoolId}/settings`,
65 |         iconName: "Settings",
66 |         requiredPermission: "school:manage_settings",
67 |     },
68 |   ];
69 | 
70 |   // Filter items based on the user's permissions
71 |   return allItems.filter(item => {
72 |     if (!item.requiredPermission) {
73 |       return true; // Always show items that don't require a permission
74 |     }
75 |     return user?.permissions?.includes(item.requiredPermission) ?? false;
76 |   });
77 | };


--------------------------------------------------------------------------------
/lib/neon/api.ts:
--------------------------------------------------------------------------------
 1 | import { env } from '@/env.mjs';
 2 | import log from '@/lib/logger';
 3 | 
 4 | const NEON_API_BASE = 'https://console.neon.tech/api/v2';
 5 | 
 6 | const getHeaders = () => ({
 7 |   'Authorization': `Bearer ${env.NEON_API_KEY}`,
 8 |   'Content-Type': 'application/json',
 9 |   'Accept': 'application/json',
10 | });
11 | 
12 | export async function createNeonProject(tenantId: string) {
13 |   log.info({ tenantId }, '[NeonAPI] Starting project creation process.');
14 | 
15 |   const projectResponse = await fetch(`${NEON_API_BASE}/projects`, {
16 |     method: 'POST',
17 |     headers: getHeaders(),
18 |     body: JSON.stringify({
19 |       project: { name: `edux-tenant-${tenantId}` },
20 |     }),
21 |   });
22 | 
23 |   if (!projectResponse.ok) {
24 |     const errorBody = await projectResponse.text();
25 |     log.error({ tenantId, status: projectResponse.status, errorBody }, '[NeonAPI] Failed to create project.');
26 |     throw new Error(`Failed to create Neon project: ${errorBody}`);
27 |   }
28 | 
29 |   const responseData = await projectResponse.json();
30 |   const project = responseData.project;
31 |   const connectionDetails = responseData.connection_uris?.[0];
32 |   const connection_uri = connectionDetails?.connection_uri;
33 | 
34 |   if (!connection_uri) {
35 |     log.error({ responseData }, '[NeonAPI] Connection URI could not be extracted from the response.');
36 |     throw new Error('Connection URI could not be extracted from the Neon API response.');
37 |   }
38 | 
39 |   log.info({ tenantId, projectId: project.id }, '[NeonAPI] Project created successfully.');
40 | 
41 |   return {
42 |     projectId: project.id,
43 |     connectionString: connection_uri,
44 |   };
45 | }
46 | 
47 | /**
48 |  * Deletes a Neon project by its ID.
49 |  * This is used for cleanup if the tenant setup process fails after project creation.
50 |  * @param {string} projectId - The ID of the Neon project to delete.
51 |  */
52 | export async function deleteNeonProject(projectId: string) {
53 |   log.warn({ projectId }, '[NeonAPI] Deleting Neon project due to setup failure.');
54 |   
55 |   const deleteResponse = await fetch(`${NEON_API_BASE}/projects/${projectId}`, {
56 |     method: 'DELETE',
57 |     headers: getHeaders(),
58 |   });
59 | 
60 |   if (!deleteResponse.ok) {
61 |     const errorBody = await deleteResponse.text();
62 |     // Log this as an error, as it requires manual cleanup, but don't throw,
63 |     // as we still want to inform the user that the initial signup failed.
64 |     log.error({ projectId, status: deleteResponse.status, errorBody }, '[NeonAPI] CRITICAL: Failed to delete orphaned project. Manual cleanup required.');
65 |   } else {
66 |     log.info({ projectId }, '[NeonAPI] Successfully deleted orphaned project.');
67 |   }
68 | }
69 | 


--------------------------------------------------------------------------------
/lib/server/tenant.ts:
--------------------------------------------------------------------------------
 1 | import { mainDb } from '@/lib/db';
 2 | import { tenants } from '@/lib/db/schema/shared';
 3 | import { eq } from 'drizzle-orm';
 4 | 
 5 | export async function validateTenant(tenantId: string) {
 6 |   console.log(`[Tenant] Validating tenant: ${tenantId}`);
 7 |   const results = await mainDb.select().from(tenants).where(eq(tenants.tenantId, tenantId)).limit(1);
 8 |   const tenant = results[0];
 9 | 
10 |   if (!tenant) {
11 |     console.error(`[Tenant] Invalid tenant: ${tenantId}`);
12 |     throw new Error('Tenant not found');
13 |   }
14 | 
15 |   return tenant;
16 | }


--------------------------------------------------------------------------------
/lib/session.ts:
--------------------------------------------------------------------------------
  1 | import { cookies } from 'next/headers';
  2 | import { redirect } from 'next/navigation';
  3 | import { verify } from 'jsonwebtoken';
  4 | import { env } from '@/env.mjs';
  5 | import log from './logger';
  6 | import { getTenantDb } from './db';
  7 | import { users } from './db/schema/tenant';
  8 | import { eq } from 'drizzle-orm';
  9 | 
 10 | export interface UserSession {
 11 |   tenantId: string;
 12 |   userId: number;
 13 |   email: string;
 14 |   name: string; // This will now be derived from the associated person's name
 15 |   permissions: string[];
 16 | }
 17 | 
 18 | /**
 19 |  * Retrieves the session from the auth token cookie.
 20 |  * Redirects to '/login' if the token is missing or invalid.
 21 |  * This function should be used in Server Components and Server Actions to protect routes.
 22 |  * @returns {Promise<UserSession>} The decoded user session with permissions.
 23 |  */
 24 | export async function getSession(): Promise<UserSession> {
 25 |   const token = (await cookies()).get('authToken')?.value;
 26 | 
 27 |   if (!token) {
 28 |     log.warn('No auth token found, redirecting to login.');
 29 |     redirect('/login');
 30 |   }
 31 | 
 32 |   try {
 33 |     const decodedToken = verify(token, env.JWT_SECRET) as { tenantId: string; userId: number; };
 34 | 
 35 |     const tenantDb = await getTenantDb(decodedToken.tenantId);
 36 | 
 37 |     // Eagerly load the 'person' relation to get the user's name
 38 |     const userWithPermissions = await tenantDb.query.users.findFirst({
 39 |       where: eq(users.id, decodedToken.userId),
 40 |       with: {
 41 |         person: true, // Load associated person data
 42 |         usersToRoles: {
 43 |           with: {
 44 |             role: {
 45 |               with: {
 46 |                 rolesToPermissions: {
 47 |                   with: {
 48 |                     permission: true,
 49 |                   },
 50 |                 },
 51 |               },
 52 |             },
 53 |           },
 54 |         },
 55 |       },
 56 |     });
 57 | 
 58 |     if (!userWithPermissions) {
 59 |       log.error({ userId: decodedToken.userId, tenantId: decodedToken.tenantId }, 'User not found in tenant DB during session retrieval.');
 60 |       redirect('/login');
 61 |     }
 62 | 
 63 |     const userPermissions = new Set<string>();
 64 |     userWithPermissions.usersToRoles.forEach(userRole => {
 65 |       userRole.role.rolesToPermissions.forEach(rolePermission => {
 66 |         userPermissions.add(rolePermission.permission.name);
 67 |       });
 68 |     });
 69 | 
 70 |     const session: UserSession = {
 71 |       tenantId: decodedToken.tenantId,
 72 |       userId: userWithPermissions.id,
 73 |       email: userWithPermissions.email,
 74 |       // Derive name from person's first and last name, fallback to email if person data is missing
 75 |       name: userWithPermissions.person
 76 |             ? `${userWithPermissions.person.firstName} ${userWithPermissions.person.lastName}`
 77 |             : userWithPermissions.email,
 78 |       permissions: Array.from(userPermissions),
 79 |     };
 80 | 
 81 |     return session;
 82 |   } catch (e) {
 83 |     log.error({ error: e }, 'Invalid session token or failed to retrieve user permissions. Redirecting to login.');
 84 |     redirect('/login');
 85 |   }
 86 | }
 87 | 
 88 | /**
 89 |  * Checks if the current user session has the required permission(s).
 90 |  * This function should be used in Server Components and Server Actions.
 91 |  * @param requiredPermissions A single permission string or an array of permission strings.
 92 |  * @returns {Promise<boolean>} True if the user has all required permissions, false otherwise.
 93 |  */
 94 | export async function hasPermission(requiredPermissions: string | string[]): Promise<boolean> {
 95 |   try {
 96 |     const session = await getSession();
 97 |     const permissionsToCheck = Array.isArray(requiredPermissions) ? requiredPermissions : [requiredPermissions];
 98 | 
 99 |     const hasAllPermissions = permissionsToCheck.every(perm => session.permissions.includes(perm));
100 | 
101 |     if (!hasAllPermissions) {
102 |       log.warn({ userId: session.userId, tenantId: session.tenantId, missingPermissions: permissionsToCheck.filter(p => !session.permissions.includes(p)) }, 'User does not have required permissions.');
103 |     }
104 |     return hasAllPermissions;
105 |   } catch (error) {
106 |     log.error({ error }, 'Error checking permissions. Denying access.');
107 |     return false;
108 |   }
109 | }
110 | 
111 | /**
112 |  * Enforces a permission check. If the user does not have the required permission,
113 |  * it throws an error or redirects.
114 |  * @param requiredPermissions A single permission string or an array of permission strings.
115 |  * @param redirectTo Optional URL to redirect to if permission is denied. Defaults to '/dashboard'.
116 |  */
117 | export async function enforcePermission(requiredPermissions: string | string[], redirectTo: string = '/dashboard') {
118 |   const authorized = await hasPermission(requiredPermissions);
119 |   if (!authorized) {
120 |     log.warn({ requiredPermissions }, `Permission denied. Redirecting to ${redirectTo}`);
121 |     redirect(redirectTo);
122 |   }
123 | }
124 | 


--------------------------------------------------------------------------------
/lib/utils.ts:
--------------------------------------------------------------------------------
1 | import { clsx, type ClassValue } from "clsx"
2 | import { twMerge } from "tailwind-merge"
3 | 
4 | export function cn(...inputs: ClassValue[]) {
5 |   return twMerge(clsx(inputs))
6 | }
7 | 
8 | export const protocol = process.env.NODE_ENV === "production" ? "https" : "http";
9 | export const rootDomain = process.env.NEXT_PUBLIC_ROOT_DOMAIN || "localhost:3000";


--------------------------------------------------------------------------------
/middleware.ts:
--------------------------------------------------------------------------------
 1 | import { NextRequest, NextResponse } from 'next/server';
 2 | import log from './lib/logger';
 3 | 
 4 | export function middleware(request: NextRequest) {
 5 |   const { pathname } = request.nextUrl;
 6 | 
 7 | 
 8 |   log.info('Middleware processing request');  
 9 |   // For dashboard access, check for an auth token.
10 |   const token = request.cookies.get('authToken');
11 |   if (pathname.startsWith('/dashboard') && !token) {
12 |     log.warn('Access to dashboard denied without token, redirecting to login.');
13 |     const loginUrl = new URL('/login', request.url);
14 |     return NextResponse.redirect(loginUrl);
15 |   }
16 | 
17 |   return NextResponse.next();
18 | }
19 | 
20 | export const config = {
21 |   matcher: [
22 |     /*
23 |      * Match all request paths except for the ones starting with:
24 |      * - _next/static (static files)
25 |      * - _next/image (image optimization files)
26 |      * - favicon.ico (favicon file)
27 |      */
28 |     '/((?!_next/static|_next/image|favicon.ico).*)',
29 |   ],
30 | };
31 | 


--------------------------------------------------------------------------------
/next.config.mjs:
--------------------------------------------------------------------------------
1 | /** @type {import('next').NextConfig} */
2 | const nextConfig = {
3 |   reactStrictMode: true,
4 |   transpilePackages: ['geist'], // Required for Geist font to work correctly
5 | };
6 | 
7 | export default nextConfig;


--------------------------------------------------------------------------------
/package-lock.json:
--------------------------------------------------------------------------------
   1 | {
   2 |   "name": "edux",
   3 |   "version": "0.1.0",
   4 |   "lockfileVersion": 3,
   5 |   "requires": true,
   6 |   "packages": {
   7 |     "": {
   8 |       "name": "edux",
   9 |       "version": "0.1.0",
  10 |       "dependencies": {
  11 |         "@fullcalendar/daygrid": "^6.1.19",
  12 |         "@fullcalendar/interaction": "^6.1.19",
  13 |         "@fullcalendar/react": "^6.1.19",
  14 |         "@fullcalendar/timegrid": "^6.1.19",
  15 |         "@hookform/resolvers": "^5.1.1",
  16 |         "@neondatabase/serverless": "^1.0.1",
  17 |         "@radix-ui/react-accordion": "^1.2.11",
  18 |         "@radix-ui/react-avatar": "^1.1.10",
  19 |         "@radix-ui/react-checkbox": "^1.3.2",
  20 |         "@radix-ui/react-collapsible": "^1.1.11",
  21 |         "@radix-ui/react-dialog": "^1.1.14",
  22 |         "@radix-ui/react-dropdown-menu": "^2.1.15",
  23 |         "@radix-ui/react-label": "^2.1.7",
  24 |         "@radix-ui/react-progress": "^1.1.7",
  25 |         "@radix-ui/react-select": "^2.2.5",
  26 |         "@radix-ui/react-separator": "^1.1.7",
  27 |         "@radix-ui/react-slot": "^1.2.3",
  28 |         "@radix-ui/react-switch": "^1.2.5",
  29 |         "@radix-ui/react-tabs": "^1.1.12",
  30 |         "@radix-ui/react-tooltip": "^1.2.7",
  31 |         "@t3-oss/env-nextjs": "^0.13.8",
  32 |         "@tanstack/react-table": "^8.21.3",
  33 |         "@vercel/speed-insights": "^1.2.0",
  34 |         "bcrypt": "^6.0.0",
  35 |         "class-variance-authority": "^0.7.1",
  36 |         "clsx": "^2.1.1",
  37 |         "cmdk": "^1.1.1",
  38 |         "drizzle-orm": "^0.44.3",
  39 |         "geist": "^1.4.2",
  40 |         "jsonwebtoken": "^9.0.2",
  41 |         "lucide-react": "^0.525.0",
  42 |         "next": "15.4.2",
  43 |         "next-themes": "^0.4.6",
  44 |         "pino": "^9.7.0",
  45 |         "postcss": "^8.5.6",
  46 |         "postgres": "^3.4.7",
  47 |         "react": "19.1.0",
  48 |         "react-dom": "19.1.0",
  49 |         "react-hook-form": "^7.60.0",
  50 |         "sonner": "^2.0.6",
  51 |         "tailwind-merge": "^3.3.1",
  52 |         "zod": "^4.0.5"
  53 |       },
  54 |       "devDependencies": {
  55 |         "@eslint/eslintrc": "^3",
  56 |         "@tailwindcss/postcss": "^4.0.5",
  57 |         "@types/bcrypt": "^6.0.0",
  58 |         "@types/jsonwebtoken": "^9.0.10",
  59 |         "@types/node": "^20",
  60 |         "@types/pg": "^8.15.4",
  61 |         "@types/react": "^19",
  62 |         "@types/react-dom": "^19",
  63 |         "dotenv-cli": "^8.0.0",
  64 |         "drizzle-kit": "^0.31.4",
  65 |         "eslint": "^9",
  66 |         "eslint-config-next": "15.4.2",
  67 |         "pg": "^8.16.3",
  68 |         "tailwindcss": "^4.1.11",
  69 |         "tsx": "^4.20.3",
  70 |         "tw-animate-css": "^1.3.5",
  71 |         "typescript": "^5"
  72 |       }
  73 |     },
  74 |     "node_modules/@alloc/quick-lru": {
  75 |       "version": "5.2.0",
  76 |       "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
  77 |       "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
  78 |       "dev": true,
  79 |       "license": "MIT",
  80 |       "engines": {
  81 |         "node": ">=10"
  82 |       },
  83 |       "funding": {
  84 |         "url": "https://github.com/sponsors/sindresorhus"
  85 |       }
  86 |     },
  87 |     "node_modules/@ampproject/remapping": {
  88 |       "version": "2.3.0",
  89 |       "resolved": "https://registry.npmjs.org/@ampproject/remapping/-/remapping-2.3.0.tgz",
  90 |       "integrity": "sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==",
  91 |       "dev": true,
  92 |       "license": "Apache-2.0",
  93 |       "dependencies": {
  94 |         "@jridgewell/gen-mapping": "^0.3.5",
  95 |         "@jridgewell/trace-mapping": "^0.3.24"
  96 |       },
  97 |       "engines": {
  98 |         "node": ">=6.0.0"
  99 |       }
 100 |     },
 101 |     "node_modules/@drizzle-team/brocli": {
 102 |       "version": "0.10.2",
 103 |       "resolved": "https://registry.npmjs.org/@drizzle-team/brocli/-/brocli-0.10.2.tgz",
 104 |       "integrity": "sha512-z33Il7l5dKjUgGULTqBsQBQwckHh5AbIuxhdsIxDDiZAzBOrZO6q9ogcWC65kU382AfynTfgNumVcNIjuIua6w==",
 105 |       "dev": true,
 106 |       "license": "Apache-2.0"
 107 |     },
 108 |     "node_modules/@emnapi/core": {
 109 |       "version": "1.4.5",
 110 |       "resolved": "https://registry.npmjs.org/@emnapi/core/-/core-1.4.5.tgz",
 111 |       "integrity": "sha512-XsLw1dEOpkSX/WucdqUhPWP7hDxSvZiY+fsUC14h+FtQ2Ifni4znbBt8punRX+Uj2JG/uDb8nEHVKvrVlvdZ5Q==",
 112 |       "dev": true,
 113 |       "license": "MIT",
 114 |       "optional": true,
 115 |       "dependencies": {
 116 |         "@emnapi/wasi-threads": "1.0.4",
 117 |         "tslib": "^2.4.0"
 118 |       }
 119 |     },
 120 |     "node_modules/@emnapi/runtime": {
 121 |       "version": "1.4.5",
 122 |       "resolved": "https://registry.npmjs.org/@emnapi/runtime/-/runtime-1.4.5.tgz",
 123 |       "integrity": "sha512-++LApOtY0pEEz1zrd9vy1/zXVaVJJ/EbAF3u0fXIzPJEDtnITsBGbbK0EkM72amhl/R5b+5xx0Y/QhcVOpuulg==",
 124 |       "license": "MIT",
 125 |       "optional": true,
 126 |       "dependencies": {
 127 |         "tslib": "^2.4.0"
 128 |       }
 129 |     },
 130 |     "node_modules/@emnapi/wasi-threads": {
 131 |       "version": "1.0.4",
 132 |       "resolved": "https://registry.npmjs.org/@emnapi/wasi-threads/-/wasi-threads-1.0.4.tgz",
 133 |       "integrity": "sha512-PJR+bOmMOPH8AtcTGAyYNiuJ3/Fcoj2XN/gBEWzDIKh254XO+mM9XoXHk5GNEhodxeMznbg7BlRojVbKN+gC6g==",
 134 |       "dev": true,
 135 |       "license": "MIT",
 136 |       "optional": true,
 137 |       "dependencies": {
 138 |         "tslib": "^2.4.0"
 139 |       }
 140 |     },
 141 |     "node_modules/@esbuild-kit/core-utils": {
 142 |       "version": "3.3.2",
 143 |       "resolved": "https://registry.npmjs.org/@esbuild-kit/core-utils/-/core-utils-3.3.2.tgz",
 144 |       "integrity": "sha512-sPRAnw9CdSsRmEtnsl2WXWdyquogVpB3yZ3dgwJfe8zrOzTsV7cJvmwrKVa+0ma5BoiGJ+BoqkMvawbayKUsqQ==",
 145 |       "deprecated": "Merged into tsx: https://tsx.is",
 146 |       "dev": true,
 147 |       "license": "MIT",
 148 |       "dependencies": {
 149 |         "esbuild": "~0.18.20",
 150 |         "source-map-support": "^0.5.21"
 151 |       }
 152 |     },
 153 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/android-arm": {
 154 |       "version": "0.18.20",
 155 |       "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.18.20.tgz",
 156 |       "integrity": "sha512-fyi7TDI/ijKKNZTUJAQqiG5T7YjJXgnzkURqmGj13C6dCqckZBLdl4h7bkhHt/t0WP+zO9/zwroDvANaOqO5Sw==",
 157 |       "cpu": [
 158 |         "arm"
 159 |       ],
 160 |       "dev": true,
 161 |       "license": "MIT",
 162 |       "optional": true,
 163 |       "os": [
 164 |         "android"
 165 |       ],
 166 |       "engines": {
 167 |         "node": ">=12"
 168 |       }
 169 |     },
 170 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/android-arm64": {
 171 |       "version": "0.18.20",
 172 |       "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.18.20.tgz",
 173 |       "integrity": "sha512-Nz4rJcchGDtENV0eMKUNa6L12zz2zBDXuhj/Vjh18zGqB44Bi7MBMSXjgunJgjRhCmKOjnPuZp4Mb6OKqtMHLQ==",
 174 |       "cpu": [
 175 |         "arm64"
 176 |       ],
 177 |       "dev": true,
 178 |       "license": "MIT",
 179 |       "optional": true,
 180 |       "os": [
 181 |         "android"
 182 |       ],
 183 |       "engines": {
 184 |         "node": ">=12"
 185 |       }
 186 |     },
 187 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/android-x64": {
 188 |       "version": "0.18.20",
 189 |       "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.18.20.tgz",
 190 |       "integrity": "sha512-8GDdlePJA8D6zlZYJV/jnrRAi6rOiNaCC/JclcXpB+KIuvfBN4owLtgzY2bsxnx666XjJx2kDPUmnTtR8qKQUg==",
 191 |       "cpu": [
 192 |         "x64"
 193 |       ],
 194 |       "dev": true,
 195 |       "license": "MIT",
 196 |       "optional": true,
 197 |       "os": [
 198 |         "android"
 199 |       ],
 200 |       "engines": {
 201 |         "node": ">=12"
 202 |       }
 203 |     },
 204 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/darwin-arm64": {
 205 |       "version": "0.18.20",
 206 |       "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.18.20.tgz",
 207 |       "integrity": "sha512-bxRHW5kHU38zS2lPTPOyuyTm+S+eobPUnTNkdJEfAddYgEcll4xkT8DB9d2008DtTbl7uJag2HuE5NZAZgnNEA==",
 208 |       "cpu": [
 209 |         "arm64"
 210 |       ],
 211 |       "dev": true,
 212 |       "license": "MIT",
 213 |       "optional": true,
 214 |       "os": [
 215 |         "darwin"
 216 |       ],
 217 |       "engines": {
 218 |         "node": ">=12"
 219 |       }
 220 |     },
 221 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/darwin-x64": {
 222 |       "version": "0.18.20",
 223 |       "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.18.20.tgz",
 224 |       "integrity": "sha512-pc5gxlMDxzm513qPGbCbDukOdsGtKhfxD1zJKXjCCcU7ju50O7MeAZ8c4krSJcOIJGFR+qx21yMMVYwiQvyTyQ==",
 225 |       "cpu": [
 226 |         "x64"
 227 |       ],
 228 |       "dev": true,
 229 |       "license": "MIT",
 230 |       "optional": true,
 231 |       "os": [
 232 |         "darwin"
 233 |       ],
 234 |       "engines": {
 235 |         "node": ">=12"
 236 |       }
 237 |     },
 238 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/freebsd-arm64": {
 239 |       "version": "0.18.20",
 240 |       "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.18.20.tgz",
 241 |       "integrity": "sha512-yqDQHy4QHevpMAaxhhIwYPMv1NECwOvIpGCZkECn8w2WFHXjEwrBn3CeNIYsibZ/iZEUemj++M26W3cNR5h+Tw==",
 242 |       "cpu": [
 243 |         "arm64"
 244 |       ],
 245 |       "dev": true,
 246 |       "license": "MIT",
 247 |       "optional": true,
 248 |       "os": [
 249 |         "freebsd"
 250 |       ],
 251 |       "engines": {
 252 |         "node": ">=12"
 253 |       }
 254 |     },
 255 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/freebsd-x64": {
 256 |       "version": "0.18.20",
 257 |       "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.18.20.tgz",
 258 |       "integrity": "sha512-tgWRPPuQsd3RmBZwarGVHZQvtzfEBOreNuxEMKFcd5DaDn2PbBxfwLcj4+aenoh7ctXcbXmOQIn8HI6mCSw5MQ==",
 259 |       "cpu": [
 260 |         "x64"
 261 |       ],
 262 |       "dev": true,
 263 |       "license": "MIT",
 264 |       "optional": true,
 265 |       "os": [
 266 |         "freebsd"
 267 |       ],
 268 |       "engines": {
 269 |         "node": ">=12"
 270 |       }
 271 |     },
 272 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-arm": {
 273 |       "version": "0.18.20",
 274 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.18.20.tgz",
 275 |       "integrity": "sha512-/5bHkMWnq1EgKr1V+Ybz3s1hWXok7mDFUMQ4cG10AfW3wL02PSZi5kFpYKrptDsgb2WAJIvRcDm+qIvXf/apvg==",
 276 |       "cpu": [
 277 |         "arm"
 278 |       ],
 279 |       "dev": true,
 280 |       "license": "MIT",
 281 |       "optional": true,
 282 |       "os": [
 283 |         "linux"
 284 |       ],
 285 |       "engines": {
 286 |         "node": ">=12"
 287 |       }
 288 |     },
 289 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-arm64": {
 290 |       "version": "0.18.20",
 291 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.18.20.tgz",
 292 |       "integrity": "sha512-2YbscF+UL7SQAVIpnWvYwM+3LskyDmPhe31pE7/aoTMFKKzIc9lLbyGUpmmb8a8AixOL61sQ/mFh3jEjHYFvdA==",
 293 |       "cpu": [
 294 |         "arm64"
 295 |       ],
 296 |       "dev": true,
 297 |       "license": "MIT",
 298 |       "optional": true,
 299 |       "os": [
 300 |         "linux"
 301 |       ],
 302 |       "engines": {
 303 |         "node": ">=12"
 304 |       }
 305 |     },
 306 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-ia32": {
 307 |       "version": "0.18.20",
 308 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.18.20.tgz",
 309 |       "integrity": "sha512-P4etWwq6IsReT0E1KHU40bOnzMHoH73aXp96Fs8TIT6z9Hu8G6+0SHSw9i2isWrD2nbx2qo5yUqACgdfVGx7TA==",
 310 |       "cpu": [
 311 |         "ia32"
 312 |       ],
 313 |       "dev": true,
 314 |       "license": "MIT",
 315 |       "optional": true,
 316 |       "os": [
 317 |         "linux"
 318 |       ],
 319 |       "engines": {
 320 |         "node": ">=12"
 321 |       }
 322 |     },
 323 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-loong64": {
 324 |       "version": "0.18.20",
 325 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.18.20.tgz",
 326 |       "integrity": "sha512-nXW8nqBTrOpDLPgPY9uV+/1DjxoQ7DoB2N8eocyq8I9XuqJ7BiAMDMf9n1xZM9TgW0J8zrquIb/A7s3BJv7rjg==",
 327 |       "cpu": [
 328 |         "loong64"
 329 |       ],
 330 |       "dev": true,
 331 |       "license": "MIT",
 332 |       "optional": true,
 333 |       "os": [
 334 |         "linux"
 335 |       ],
 336 |       "engines": {
 337 |         "node": ">=12"
 338 |       }
 339 |     },
 340 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-mips64el": {
 341 |       "version": "0.18.20",
 342 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.18.20.tgz",
 343 |       "integrity": "sha512-d5NeaXZcHp8PzYy5VnXV3VSd2D328Zb+9dEq5HE6bw6+N86JVPExrA6O68OPwobntbNJ0pzCpUFZTo3w0GyetQ==",
 344 |       "cpu": [
 345 |         "mips64el"
 346 |       ],
 347 |       "dev": true,
 348 |       "license": "MIT",
 349 |       "optional": true,
 350 |       "os": [
 351 |         "linux"
 352 |       ],
 353 |       "engines": {
 354 |         "node": ">=12"
 355 |       }
 356 |     },
 357 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-ppc64": {
 358 |       "version": "0.18.20",
 359 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.18.20.tgz",
 360 |       "integrity": "sha512-WHPyeScRNcmANnLQkq6AfyXRFr5D6N2sKgkFo2FqguP44Nw2eyDlbTdZwd9GYk98DZG9QItIiTlFLHJHjxP3FA==",
 361 |       "cpu": [
 362 |         "ppc64"
 363 |       ],
 364 |       "dev": true,
 365 |       "license": "MIT",
 366 |       "optional": true,
 367 |       "os": [
 368 |         "linux"
 369 |       ],
 370 |       "engines": {
 371 |         "node": ">=12"
 372 |       }
 373 |     },
 374 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-riscv64": {
 375 |       "version": "0.18.20",
 376 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.18.20.tgz",
 377 |       "integrity": "sha512-WSxo6h5ecI5XH34KC7w5veNnKkju3zBRLEQNY7mv5mtBmrP/MjNBCAlsM2u5hDBlS3NGcTQpoBvRzqBcRtpq1A==",
 378 |       "cpu": [
 379 |         "riscv64"
 380 |       ],
 381 |       "dev": true,
 382 |       "license": "MIT",
 383 |       "optional": true,
 384 |       "os": [
 385 |         "linux"
 386 |       ],
 387 |       "engines": {
 388 |         "node": ">=12"
 389 |       }
 390 |     },
 391 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-s390x": {
 392 |       "version": "0.18.20",
 393 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.18.20.tgz",
 394 |       "integrity": "sha512-+8231GMs3mAEth6Ja1iK0a1sQ3ohfcpzpRLH8uuc5/KVDFneH6jtAJLFGafpzpMRO6DzJ6AvXKze9LfFMrIHVQ==",
 395 |       "cpu": [
 396 |         "s390x"
 397 |       ],
 398 |       "dev": true,
 399 |       "license": "MIT",
 400 |       "optional": true,
 401 |       "os": [
 402 |         "linux"
 403 |       ],
 404 |       "engines": {
 405 |         "node": ">=12"
 406 |       }
 407 |     },
 408 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/linux-x64": {
 409 |       "version": "0.18.20",
 410 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.18.20.tgz",
 411 |       "integrity": "sha512-UYqiqemphJcNsFEskc73jQ7B9jgwjWrSayxawS6UVFZGWrAAtkzjxSqnoclCXxWtfwLdzU+vTpcNYhpn43uP1w==",
 412 |       "cpu": [
 413 |         "x64"
 414 |       ],
 415 |       "dev": true,
 416 |       "license": "MIT",
 417 |       "optional": true,
 418 |       "os": [
 419 |         "linux"
 420 |       ],
 421 |       "engines": {
 422 |         "node": ">=12"
 423 |       }
 424 |     },
 425 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/netbsd-x64": {
 426 |       "version": "0.18.20",
 427 |       "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.18.20.tgz",
 428 |       "integrity": "sha512-iO1c++VP6xUBUmltHZoMtCUdPlnPGdBom6IrO4gyKPFFVBKioIImVooR5I83nTew5UOYrk3gIJhbZh8X44y06A==",
 429 |       "cpu": [
 430 |         "x64"
 431 |       ],
 432 |       "dev": true,
 433 |       "license": "MIT",
 434 |       "optional": true,
 435 |       "os": [
 436 |         "netbsd"
 437 |       ],
 438 |       "engines": {
 439 |         "node": ">=12"
 440 |       }
 441 |     },
 442 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/openbsd-x64": {
 443 |       "version": "0.18.20",
 444 |       "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.18.20.tgz",
 445 |       "integrity": "sha512-e5e4YSsuQfX4cxcygw/UCPIEP6wbIL+se3sxPdCiMbFLBWu0eiZOJ7WoD+ptCLrmjZBK1Wk7I6D/I3NglUGOxg==",
 446 |       "cpu": [
 447 |         "x64"
 448 |       ],
 449 |       "dev": true,
 450 |       "license": "MIT",
 451 |       "optional": true,
 452 |       "os": [
 453 |         "openbsd"
 454 |       ],
 455 |       "engines": {
 456 |         "node": ">=12"
 457 |       }
 458 |     },
 459 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/sunos-x64": {
 460 |       "version": "0.18.20",
 461 |       "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.18.20.tgz",
 462 |       "integrity": "sha512-kDbFRFp0YpTQVVrqUd5FTYmWo45zGaXe0X8E1G/LKFC0v8x0vWrhOWSLITcCn63lmZIxfOMXtCfti/RxN/0wnQ==",
 463 |       "cpu": [
 464 |         "x64"
 465 |       ],
 466 |       "dev": true,
 467 |       "license": "MIT",
 468 |       "optional": true,
 469 |       "os": [
 470 |         "sunos"
 471 |       ],
 472 |       "engines": {
 473 |         "node": ">=12"
 474 |       }
 475 |     },
 476 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/win32-arm64": {
 477 |       "version": "0.18.20",
 478 |       "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.18.20.tgz",
 479 |       "integrity": "sha512-ddYFR6ItYgoaq4v4JmQQaAI5s7npztfV4Ag6NrhiaW0RrnOXqBkgwZLofVTlq1daVTQNhtI5oieTvkRPfZrePg==",
 480 |       "cpu": [
 481 |         "arm64"
 482 |       ],
 483 |       "dev": true,
 484 |       "license": "MIT",
 485 |       "optional": true,
 486 |       "os": [
 487 |         "win32"
 488 |       ],
 489 |       "engines": {
 490 |         "node": ">=12"
 491 |       }
 492 |     },
 493 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/win32-ia32": {
 494 |       "version": "0.18.20",
 495 |       "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.18.20.tgz",
 496 |       "integrity": "sha512-Wv7QBi3ID/rROT08SABTS7eV4hX26sVduqDOTe1MvGMjNd3EjOz4b7zeexIR62GTIEKrfJXKL9LFxTYgkyeu7g==",
 497 |       "cpu": [
 498 |         "ia32"
 499 |       ],
 500 |       "dev": true,
 501 |       "license": "MIT",
 502 |       "optional": true,
 503 |       "os": [
 504 |         "win32"
 505 |       ],
 506 |       "engines": {
 507 |         "node": ">=12"
 508 |       }
 509 |     },
 510 |     "node_modules/@esbuild-kit/core-utils/node_modules/@esbuild/win32-x64": {
 511 |       "version": "0.18.20",
 512 |       "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.18.20.tgz",
 513 |       "integrity": "sha512-kTdfRcSiDfQca/y9QIkng02avJ+NCaQvrMejlsB3RRv5sE9rRoeBPISaZpKxHELzRxZyLvNts1P27W3wV+8geQ==",
 514 |       "cpu": [
 515 |         "x64"
 516 |       ],
 517 |       "dev": true,
 518 |       "license": "MIT",
 519 |       "optional": true,
 520 |       "os": [
 521 |         "win32"
 522 |       ],
 523 |       "engines": {
 524 |         "node": ">=12"
 525 |       }
 526 |     },
 527 |     "node_modules/@esbuild-kit/core-utils/node_modules/esbuild": {
 528 |       "version": "0.18.20",
 529 |       "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.18.20.tgz",
 530 |       "integrity": "sha512-ceqxoedUrcayh7Y7ZX6NdbbDzGROiyVBgC4PriJThBKSVPWnnFHZAkfI1lJT8QFkOwH4qOS2SJkS4wvpGl8BpA==",
 531 |       "dev": true,
 532 |       "hasInstallScript": true,
 533 |       "license": "MIT",
 534 |       "bin": {
 535 |         "esbuild": "bin/esbuild"
 536 |       },
 537 |       "engines": {
 538 |         "node": ">=12"
 539 |       },
 540 |       "optionalDependencies": {
 541 |         "@esbuild/android-arm": "0.18.20",
 542 |         "@esbuild/android-arm64": "0.18.20",
 543 |         "@esbuild/android-x64": "0.18.20",
 544 |         "@esbuild/darwin-arm64": "0.18.20",
 545 |         "@esbuild/darwin-x64": "0.18.20",
 546 |         "@esbuild/freebsd-arm64": "0.18.20",
 547 |         "@esbuild/freebsd-x64": "0.18.20",
 548 |         "@esbuild/linux-arm": "0.18.20",
 549 |         "@esbuild/linux-arm64": "0.18.20",
 550 |         "@esbuild/linux-ia32": "0.18.20",
 551 |         "@esbuild/linux-loong64": "0.18.20",
 552 |         "@esbuild/linux-mips64el": "0.18.20",
 553 |         "@esbuild/linux-ppc64": "0.18.20",
 554 |         "@esbuild/linux-riscv64": "0.18.20",
 555 |         "@esbuild/linux-s390x": "0.18.20",
 556 |         "@esbuild/linux-x64": "0.18.20",
 557 |         "@esbuild/netbsd-x64": "0.18.20",
 558 |         "@esbuild/openbsd-x64": "0.18.20",
 559 |         "@esbuild/sunos-x64": "0.18.20",
 560 |         "@esbuild/win32-arm64": "0.18.20",
 561 |         "@esbuild/win32-ia32": "0.18.20",
 562 |         "@esbuild/win32-x64": "0.18.20"
 563 |       }
 564 |     },
 565 |     "node_modules/@esbuild-kit/esm-loader": {
 566 |       "version": "2.6.5",
 567 |       "resolved": "https://registry.npmjs.org/@esbuild-kit/esm-loader/-/esm-loader-2.6.5.tgz",
 568 |       "integrity": "sha512-FxEMIkJKnodyA1OaCUoEvbYRkoZlLZ4d/eXFu9Fh8CbBBgP5EmZxrfTRyN0qpXZ4vOvqnE5YdRdcrmUUXuU+dA==",
 569 |       "deprecated": "Merged into tsx: https://tsx.is",
 570 |       "dev": true,
 571 |       "license": "MIT",
 572 |       "dependencies": {
 573 |         "@esbuild-kit/core-utils": "^3.3.2",
 574 |         "get-tsconfig": "^4.7.0"
 575 |       }
 576 |     },
 577 |     "node_modules/@esbuild/aix-ppc64": {
 578 |       "version": "0.25.8",
 579 |       "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.8.tgz",
 580 |       "integrity": "sha512-urAvrUedIqEiFR3FYSLTWQgLu5tb+m0qZw0NBEasUeo6wuqatkMDaRT+1uABiGXEu5vqgPd7FGE1BhsAIy9QVA==",
 581 |       "cpu": [
 582 |         "ppc64"
 583 |       ],
 584 |       "dev": true,
 585 |       "license": "MIT",
 586 |       "optional": true,
 587 |       "os": [
 588 |         "aix"
 589 |       ],
 590 |       "engines": {
 591 |         "node": ">=18"
 592 |       }
 593 |     },
 594 |     "node_modules/@esbuild/android-arm": {
 595 |       "version": "0.25.8",
 596 |       "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.8.tgz",
 597 |       "integrity": "sha512-RONsAvGCz5oWyePVnLdZY/HHwA++nxYWIX1atInlaW6SEkwq6XkP3+cb825EUcRs5Vss/lGh/2YxAb5xqc07Uw==",
 598 |       "cpu": [
 599 |         "arm"
 600 |       ],
 601 |       "dev": true,
 602 |       "license": "MIT",
 603 |       "optional": true,
 604 |       "os": [
 605 |         "android"
 606 |       ],
 607 |       "engines": {
 608 |         "node": ">=18"
 609 |       }
 610 |     },
 611 |     "node_modules/@esbuild/android-arm64": {
 612 |       "version": "0.25.8",
 613 |       "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.8.tgz",
 614 |       "integrity": "sha512-OD3p7LYzWpLhZEyATcTSJ67qB5D+20vbtr6vHlHWSQYhKtzUYrETuWThmzFpZtFsBIxRvhO07+UgVA9m0i/O1w==",
 615 |       "cpu": [
 616 |         "arm64"
 617 |       ],
 618 |       "dev": true,
 619 |       "license": "MIT",
 620 |       "optional": true,
 621 |       "os": [
 622 |         "android"
 623 |       ],
 624 |       "engines": {
 625 |         "node": ">=18"
 626 |       }
 627 |     },
 628 |     "node_modules/@esbuild/android-x64": {
 629 |       "version": "0.25.8",
 630 |       "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.8.tgz",
 631 |       "integrity": "sha512-yJAVPklM5+4+9dTeKwHOaA+LQkmrKFX96BM0A/2zQrbS6ENCmxc4OVoBs5dPkCCak2roAD+jKCdnmOqKszPkjA==",
 632 |       "cpu": [
 633 |         "x64"
 634 |       ],
 635 |       "dev": true,
 636 |       "license": "MIT",
 637 |       "optional": true,
 638 |       "os": [
 639 |         "android"
 640 |       ],
 641 |       "engines": {
 642 |         "node": ">=18"
 643 |       }
 644 |     },
 645 |     "node_modules/@esbuild/darwin-arm64": {
 646 |       "version": "0.25.8",
 647 |       "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.8.tgz",
 648 |       "integrity": "sha512-Jw0mxgIaYX6R8ODrdkLLPwBqHTtYHJSmzzd+QeytSugzQ0Vg4c5rDky5VgkoowbZQahCbsv1rT1KW72MPIkevw==",
 649 |       "cpu": [
 650 |         "arm64"
 651 |       ],
 652 |       "dev": true,
 653 |       "license": "MIT",
 654 |       "optional": true,
 655 |       "os": [
 656 |         "darwin"
 657 |       ],
 658 |       "engines": {
 659 |         "node": ">=18"
 660 |       }
 661 |     },
 662 |     "node_modules/@esbuild/darwin-x64": {
 663 |       "version": "0.25.8",
 664 |       "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.8.tgz",
 665 |       "integrity": "sha512-Vh2gLxxHnuoQ+GjPNvDSDRpoBCUzY4Pu0kBqMBDlK4fuWbKgGtmDIeEC081xi26PPjn+1tct+Bh8FjyLlw1Zlg==",
 666 |       "cpu": [
 667 |         "x64"
 668 |       ],
 669 |       "dev": true,
 670 |       "license": "MIT",
 671 |       "optional": true,
 672 |       "os": [
 673 |         "darwin"
 674 |       ],
 675 |       "engines": {
 676 |         "node": ">=18"
 677 |       }
 678 |     },
 679 |     "node_modules/@esbuild/freebsd-arm64": {
 680 |       "version": "0.25.8",
 681 |       "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.8.tgz",
 682 |       "integrity": "sha512-YPJ7hDQ9DnNe5vxOm6jaie9QsTwcKedPvizTVlqWG9GBSq+BuyWEDazlGaDTC5NGU4QJd666V0yqCBL2oWKPfA==",
 683 |       "cpu": [
 684 |         "arm64"
 685 |       ],
 686 |       "dev": true,
 687 |       "license": "MIT",
 688 |       "optional": true,
 689 |       "os": [
 690 |         "freebsd"
 691 |       ],
 692 |       "engines": {
 693 |         "node": ">=18"
 694 |       }
 695 |     },
 696 |     "node_modules/@esbuild/freebsd-x64": {
 697 |       "version": "0.25.8",
 698 |       "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.8.tgz",
 699 |       "integrity": "sha512-MmaEXxQRdXNFsRN/KcIimLnSJrk2r5H8v+WVafRWz5xdSVmWLoITZQXcgehI2ZE6gioE6HirAEToM/RvFBeuhw==",
 700 |       "cpu": [
 701 |         "x64"
 702 |       ],
 703 |       "dev": true,
 704 |       "license": "MIT",
 705 |       "optional": true,
 706 |       "os": [
 707 |         "freebsd"
 708 |       ],
 709 |       "engines": {
 710 |         "node": ">=18"
 711 |       }
 712 |     },
 713 |     "node_modules/@esbuild/linux-arm": {
 714 |       "version": "0.25.8",
 715 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.8.tgz",
 716 |       "integrity": "sha512-FuzEP9BixzZohl1kLf76KEVOsxtIBFwCaLupVuk4eFVnOZfU+Wsn+x5Ryam7nILV2pkq2TqQM9EZPsOBuMC+kg==",
 717 |       "cpu": [
 718 |         "arm"
 719 |       ],
 720 |       "dev": true,
 721 |       "license": "MIT",
 722 |       "optional": true,
 723 |       "os": [
 724 |         "linux"
 725 |       ],
 726 |       "engines": {
 727 |         "node": ">=18"
 728 |       }
 729 |     },
 730 |     "node_modules/@esbuild/linux-arm64": {
 731 |       "version": "0.25.8",
 732 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.8.tgz",
 733 |       "integrity": "sha512-WIgg00ARWv/uYLU7lsuDK00d/hHSfES5BzdWAdAig1ioV5kaFNrtK8EqGcUBJhYqotlUByUKz5Qo6u8tt7iD/w==",
 734 |       "cpu": [
 735 |         "arm64"
 736 |       ],
 737 |       "dev": true,
 738 |       "license": "MIT",
 739 |       "optional": true,
 740 |       "os": [
 741 |         "linux"
 742 |       ],
 743 |       "engines": {
 744 |         "node": ">=18"
 745 |       }
 746 |     },
 747 |     "node_modules/@esbuild/linux-ia32": {
 748 |       "version": "0.25.8",
 749 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.8.tgz",
 750 |       "integrity": "sha512-A1D9YzRX1i+1AJZuFFUMP1E9fMaYY+GnSQil9Tlw05utlE86EKTUA7RjwHDkEitmLYiFsRd9HwKBPEftNdBfjg==",
 751 |       "cpu": [
 752 |         "ia32"
 753 |       ],
 754 |       "dev": true,
 755 |       "license": "MIT",
 756 |       "optional": true,
 757 |       "os": [
 758 |         "linux"
 759 |       ],
 760 |       "engines": {
 761 |         "node": ">=18"
 762 |       }
 763 |     },
 764 |     "node_modules/@esbuild/linux-loong64": {
 765 |       "version": "0.25.8",
 766 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.8.tgz",
 767 |       "integrity": "sha512-O7k1J/dwHkY1RMVvglFHl1HzutGEFFZ3kNiDMSOyUrB7WcoHGf96Sh+64nTRT26l3GMbCW01Ekh/ThKM5iI7hQ==",
 768 |       "cpu": [
 769 |         "loong64"
 770 |       ],
 771 |       "dev": true,
 772 |       "license": "MIT",
 773 |       "optional": true,
 774 |       "os": [
 775 |         "linux"
 776 |       ],
 777 |       "engines": {
 778 |         "node": ">=18"
 779 |       }
 780 |     },
 781 |     "node_modules/@esbuild/linux-mips64el": {
 782 |       "version": "0.25.8",
 783 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.8.tgz",
 784 |       "integrity": "sha512-uv+dqfRazte3BzfMp8PAQXmdGHQt2oC/y2ovwpTteqrMx2lwaksiFZ/bdkXJC19ttTvNXBuWH53zy/aTj1FgGw==",
 785 |       "cpu": [
 786 |         "mips64el"
 787 |       ],
 788 |       "dev": true,
 789 |       "license": "MIT",
 790 |       "optional": true,
 791 |       "os": [
 792 |         "linux"
 793 |       ],
 794 |       "engines": {
 795 |         "node": ">=18"
 796 |       }
 797 |     },
 798 |     "node_modules/@esbuild/linux-ppc64": {
 799 |       "version": "0.25.8",
 800 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.8.tgz",
 801 |       "integrity": "sha512-GyG0KcMi1GBavP5JgAkkstMGyMholMDybAf8wF5A70CALlDM2p/f7YFE7H92eDeH/VBtFJA5MT4nRPDGg4JuzQ==",
 802 |       "cpu": [
 803 |         "ppc64"
 804 |       ],
 805 |       "dev": true,
 806 |       "license": "MIT",
 807 |       "optional": true,
 808 |       "os": [
 809 |         "linux"
 810 |       ],
 811 |       "engines": {
 812 |         "node": ">=18"
 813 |       }
 814 |     },
 815 |     "node_modules/@esbuild/linux-riscv64": {
 816 |       "version": "0.25.8",
 817 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.8.tgz",
 818 |       "integrity": "sha512-rAqDYFv3yzMrq7GIcen3XP7TUEG/4LK86LUPMIz6RT8A6pRIDn0sDcvjudVZBiiTcZCY9y2SgYX2lgK3AF+1eg==",
 819 |       "cpu": [
 820 |         "riscv64"
 821 |       ],
 822 |       "dev": true,
 823 |       "license": "MIT",
 824 |       "optional": true,
 825 |       "os": [
 826 |         "linux"
 827 |       ],
 828 |       "engines": {
 829 |         "node": ">=18"
 830 |       }
 831 |     },
 832 |     "node_modules/@esbuild/linux-s390x": {
 833 |       "version": "0.25.8",
 834 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.8.tgz",
 835 |       "integrity": "sha512-Xutvh6VjlbcHpsIIbwY8GVRbwoviWT19tFhgdA7DlenLGC/mbc3lBoVb7jxj9Z+eyGqvcnSyIltYUrkKzWqSvg==",
 836 |       "cpu": [
 837 |         "s390x"
 838 |       ],
 839 |       "dev": true,
 840 |       "license": "MIT",
 841 |       "optional": true,
 842 |       "os": [
 843 |         "linux"
 844 |       ],
 845 |       "engines": {
 846 |         "node": ">=18"
 847 |       }
 848 |     },
 849 |     "node_modules/@esbuild/linux-x64": {
 850 |       "version": "0.25.8",
 851 |       "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.8.tgz",
 852 |       "integrity": "sha512-ASFQhgY4ElXh3nDcOMTkQero4b1lgubskNlhIfJrsH5OKZXDpUAKBlNS0Kx81jwOBp+HCeZqmoJuihTv57/jvQ==",
 853 |       "cpu": [
 854 |         "x64"
 855 |       ],
 856 |       "dev": true,
 857 |       "license": "MIT",
 858 |       "optional": true,
 859 |       "os": [
 860 |         "linux"
 861 |       ],
 862 |       "engines": {
 863 |         "node": ">=18"
 864 |       }
 865 |     },
 866 |     "node_modules/@esbuild/netbsd-arm64": {
 867 |       "version": "0.25.8",
 868 |       "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.8.tgz",
 869 |       "integrity": "sha512-d1KfruIeohqAi6SA+gENMuObDbEjn22olAR7egqnkCD9DGBG0wsEARotkLgXDu6c4ncgWTZJtN5vcgxzWRMzcw==",
 870 |       "cpu": [
 871 |         "arm64"
 872 |       ],
 873 |       "dev": true,
 874 |       "license": "MIT",
 875 |       "optional": true,
 876 |       "os": [
 877 |         "netbsd"
 878 |       ],
 879 |       "engines": {
 880 |         "node": ">=18"
 881 |       }
 882 |     },
 883 |     "node_modules/@esbuild/netbsd-x64": {
 884 |       "version": "0.25.8",
 885 |       "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.8.tgz",
 886 |       "integrity": "sha512-nVDCkrvx2ua+XQNyfrujIG38+YGyuy2Ru9kKVNyh5jAys6n+l44tTtToqHjino2My8VAY6Lw9H7RI73XFi66Cg==",
 887 |       "cpu": [
 888 |         "x64"
 889 |       ],
 890 |       "dev": true,
 891 |       "license": "MIT",
 892 |       "optional": true,
 893 |       "os": [
 894 |         "netbsd"
 895 |       ],
 896 |       "engines": {
 897 |         "node": ">=18"
 898 |       }
 899 |     },
 900 |     "node_modules/@esbuild/openbsd-arm64": {
 901 |       "version": "0.25.8",
 902 |       "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.8.tgz",
 903 |       "integrity": "sha512-j8HgrDuSJFAujkivSMSfPQSAa5Fxbvk4rgNAS5i3K+r8s1X0p1uOO2Hl2xNsGFppOeHOLAVgYwDVlmxhq5h+SQ==",
 904 |       "cpu": [
 905 |         "arm64"
 906 |       ],
 907 |       "dev": true,
 908 |       "license": "MIT",
 909 |       "optional": true,
 910 |       "os": [
 911 |         "openbsd"
 912 |       ],
 913 |       "engines": {
 914 |         "node": ">=18"
 915 |       }
 916 |     },
 917 |     "node_modules/@esbuild/openbsd-x64": {
 918 |       "version": "0.25.8",
 919 |       "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.8.tgz",
 920 |       "integrity": "sha512-1h8MUAwa0VhNCDp6Af0HToI2TJFAn1uqT9Al6DJVzdIBAd21m/G0Yfc77KDM3uF3T/YaOgQq3qTJHPbTOInaIQ==",
 921 |       "cpu": [
 922 |         "x64"
 923 |       ],
 924 |       "dev": true,
 925 |       "license": "MIT",
 926 |       "optional": true,
 927 |       "os": [
 928 |         "openbsd"
 929 |       ],
 930 |       "engines": {
 931 |         "node": ">=18"
 932 |       }
 933 |     },
 934 |     "node_modules/@esbuild/openharmony-arm64": {
 935 |       "version": "0.25.8",
 936 |       "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.8.tgz",
 937 |       "integrity": "sha512-r2nVa5SIK9tSWd0kJd9HCffnDHKchTGikb//9c7HX+r+wHYCpQrSgxhlY6KWV1nFo1l4KFbsMlHk+L6fekLsUg==",
 938 |       "cpu": [
 939 |         "arm64"
 940 |       ],
 941 |       "dev": true,
 942 |       "license": "MIT",
 943 |       "optional": true,
 944 |       "os": [
 945 |         "openharmony"
 946 |       ],
 947 |       "engines": {
 948 |         "node": ">=18"
 949 |       }
 950 |     },
 951 |     "node_modules/@esbuild/sunos-x64": {
 952 |       "version": "0.25.8",
 953 |       "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.8.tgz",
 954 |       "integrity": "sha512-zUlaP2S12YhQ2UzUfcCuMDHQFJyKABkAjvO5YSndMiIkMimPmxA+BYSBikWgsRpvyxuRnow4nS5NPnf9fpv41w==",
 955 |       "cpu": [
 956 |         "x64"
 957 |       ],
 958 |       "dev": true,
 959 |       "license": "MIT",
 960 |       "optional": true,
 961 |       "os": [
 962 |         "sunos"
 963 |       ],
 964 |       "engines": {
 965 |         "node": ">=18"
 966 |       }
 967 |     },
 968 |     "node_modules/@esbuild/win32-arm64": {
 969 |       "version": "0.25.8",
 970 |       "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.8.tgz",
 971 |       "integrity": "sha512-YEGFFWESlPva8hGL+zvj2z/SaK+pH0SwOM0Nc/d+rVnW7GSTFlLBGzZkuSU9kFIGIo8q9X3ucpZhu8PDN5A2sQ==",
 972 |       "cpu": [
 973 |         "arm64"
 974 |       ],
 975 |       "dev": true,
 976 |       "license": "MIT",
 977 |       "optional": true,
 978 |       "os": [
 979 |         "win32"
 980 |       ],
 981 |       "engines": {
 982 |         "node": ">=18"
 983 |       }
 984 |     },
 985 |     "node_modules/@esbuild/win32-ia32": {
 986 |       "version": "0.25.8",
 987 |       "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.8.tgz",
 988 |       "integrity": "sha512-hiGgGC6KZ5LZz58OL/+qVVoZiuZlUYlYHNAmczOm7bs2oE1XriPFi5ZHHrS8ACpV5EjySrnoCKmcbQMN+ojnHg==",
 989 |       "cpu": [
 990 |         "ia32"
 991 |       ],
 992 |       "dev": true,
 993 |       "license": "MIT",
 994 |       "optional": true,
 995 |       "os": [
 996 |         "win32"
 997 |       ],
 998 |       "engines": {
 999 |         "node": ">=18"
1000 |       }
1001 |     },
1002 |     "node_modules/@esbuild/win32-x64": {
1003 |       "version": "0.25.8",
1004 |       "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.8.tgz",
1005 |       "integrity": "sha512-cn3Yr7+OaaZq1c+2pe+8yxC8E144SReCQjN6/2ynubzYjvyqZjTXfQJpAcQpsdJq3My7XADANiYGHoFC69pLQw==",
1006 |       "cpu": [
1007 |         "x64"
1008 |       ],
1009 |       "dev": true,
1010 |       "license": "MIT",
1011 |       "optional": true,
1012 |       "os": [
1013 |         "win32"
1014 |       ],
1015 |       "engines": {
1016 |         "node": ">=18"
1017 |       }
1018 |     },
1019 |     "node_modules/@eslint-community/eslint-utils": {
1020 |       "version": "4.7.0",
1021 |       "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.7.0.tgz",
1022 |       "integrity": "sha512-dyybb3AcajC7uha6CvhdVRJqaKyn7w2YKqKyAN37NKYgZT36w+iRb0Dymmc5qEJ549c/S31cMMSFd75bteCpCw==",
1023 |       "dev": true,
1024 |       "license": "MIT",
1025 |       "dependencies": {
1026 |         "eslint-visitor-keys": "^3.4.3"
1027 |       },
1028 |       "engines": {
1029 |         "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
1030 |       },
1031 |       "funding": {
1032 |         "url": "https://opencollective.com/eslint"
1033 |       },
1034 |       "peerDependencies": {
1035 |         "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
1036 |       }
1037 |     },
1038 |     "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
1039 |       "version": "3.4.3",
1040 |       "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
1041 |       "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
1042 |       "dev": true,
1043 |       "license": "Apache-2.0",
1044 |       "engines": {
1045 |         "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
1046 |       },
1047 |       "funding": {
1048 |         "url": "https://opencollective.com/eslint"
1049 |       }
1050 |     },
1051 |     "node_modules/@eslint-community/regexpp": {
1052 |       "version": "4.12.1",
1053 |       "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
1054 |       "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
1055 |       "dev": true,
1056 |       "license": "MIT",
1057 |       "engines": {
1058 |         "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
1059 |       }
1060 |     },
1061 |     "node_modules/@eslint/config-array": {
1062 |       "version": "0.21.0",
1063 |       "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.0.tgz",
1064 |       "integrity": "sha512-ENIdc4iLu0d93HeYirvKmrzshzofPw6VkZRKQGe9Nv46ZnWUzcF1xV01dcvEg/1wXUR61OmmlSfyeyO7EvjLxQ==",
1065 |       "dev": true,
1066 |       "license": "Apache-2.0",
1067 |       "dependencies": {
1068 |         "@eslint/object-schema": "^2.1.6",
1069 |         "debug": "^4.3.1",
1070 |         "minimatch": "^3.1.2"
1071 |       },
1072 |       "engines": {
1073 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1074 |       }
1075 |     },
1076 |     "node_modules/@eslint/config-helpers": {
1077 |       "version": "0.3.0",
1078 |       "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.3.0.tgz",
1079 |       "integrity": "sha512-ViuymvFmcJi04qdZeDc2whTHryouGcDlaxPqarTD0ZE10ISpxGUVZGZDx4w01upyIynL3iu6IXH2bS1NhclQMw==",
1080 |       "dev": true,
1081 |       "license": "Apache-2.0",
1082 |       "engines": {
1083 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1084 |       }
1085 |     },
1086 |     "node_modules/@eslint/core": {
1087 |       "version": "0.15.1",
1088 |       "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.15.1.tgz",
1089 |       "integrity": "sha512-bkOp+iumZCCbt1K1CmWf0R9pM5yKpDv+ZXtvSyQpudrI9kuFLp+bM2WOPXImuD/ceQuaa8f5pj93Y7zyECIGNA==",
1090 |       "dev": true,
1091 |       "license": "Apache-2.0",
1092 |       "dependencies": {
1093 |         "@types/json-schema": "^7.0.15"
1094 |       },
1095 |       "engines": {
1096 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1097 |       }
1098 |     },
1099 |     "node_modules/@eslint/eslintrc": {
1100 |       "version": "3.3.1",
1101 |       "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
1102 |       "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
1103 |       "dev": true,
1104 |       "license": "MIT",
1105 |       "dependencies": {
1106 |         "ajv": "^6.12.4",
1107 |         "debug": "^4.3.2",
1108 |         "espree": "^10.0.1",
1109 |         "globals": "^14.0.0",
1110 |         "ignore": "^5.2.0",
1111 |         "import-fresh": "^3.2.1",
1112 |         "js-yaml": "^4.1.0",
1113 |         "minimatch": "^3.1.2",
1114 |         "strip-json-comments": "^3.1.1"
1115 |       },
1116 |       "engines": {
1117 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1118 |       },
1119 |       "funding": {
1120 |         "url": "https://opencollective.com/eslint"
1121 |       }
1122 |     },
1123 |     "node_modules/@eslint/js": {
1124 |       "version": "9.31.0",
1125 |       "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.31.0.tgz",
1126 |       "integrity": "sha512-LOm5OVt7D4qiKCqoiPbA7LWmI+tbw1VbTUowBcUMgQSuM6poJufkFkYDcQpo5KfgD39TnNySV26QjOh7VFpSyw==",
1127 |       "dev": true,
1128 |       "license": "MIT",
1129 |       "engines": {
1130 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1131 |       },
1132 |       "funding": {
1133 |         "url": "https://eslint.org/donate"
1134 |       }
1135 |     },
1136 |     "node_modules/@eslint/object-schema": {
1137 |       "version": "2.1.6",
1138 |       "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.6.tgz",
1139 |       "integrity": "sha512-RBMg5FRL0I0gs51M/guSAj5/e14VQ4tpZnQNWwuDT66P14I43ItmPfIZRhO9fUVIPOAQXU47atlywZ/czoqFPA==",
1140 |       "dev": true,
1141 |       "license": "Apache-2.0",
1142 |       "engines": {
1143 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1144 |       }
1145 |     },
1146 |     "node_modules/@eslint/plugin-kit": {
1147 |       "version": "0.3.4",
1148 |       "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.3.4.tgz",
1149 |       "integrity": "sha512-Ul5l+lHEcw3L5+k8POx6r74mxEYKG5kOb6Xpy2gCRW6zweT6TEhAf8vhxGgjhqrd/VO/Dirhsb+1hNpD1ue9hw==",
1150 |       "dev": true,
1151 |       "license": "Apache-2.0",
1152 |       "dependencies": {
1153 |         "@eslint/core": "^0.15.1",
1154 |         "levn": "^0.4.1"
1155 |       },
1156 |       "engines": {
1157 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
1158 |       }
1159 |     },
1160 |     "node_modules/@floating-ui/core": {
1161 |       "version": "1.7.2",
1162 |       "resolved": "https://registry.npmjs.org/@floating-ui/core/-/core-1.7.2.tgz",
1163 |       "integrity": "sha512-wNB5ooIKHQc+Kui96jE/n69rHFWAVoxn5CAzL1Xdd8FG03cgY3MLO+GF9U3W737fYDSgPWA6MReKhBQBop6Pcw==",
1164 |       "license": "MIT",
1165 |       "dependencies": {
1166 |         "@floating-ui/utils": "^0.2.10"
1167 |       }
1168 |     },
1169 |     "node_modules/@floating-ui/dom": {
1170 |       "version": "1.7.2",
1171 |       "resolved": "https://registry.npmjs.org/@floating-ui/dom/-/dom-1.7.2.tgz",
1172 |       "integrity": "sha512-7cfaOQuCS27HD7DX+6ib2OrnW+b4ZBwDNnCcT0uTyidcmyWb03FnQqJybDBoCnpdxwBSfA94UAYlRCt7mV+TbA==",
1173 |       "license": "MIT",
1174 |       "dependencies": {
1175 |         "@floating-ui/core": "^1.7.2",
1176 |         "@floating-ui/utils": "^0.2.10"
1177 |       }
1178 |     },
1179 |     "node_modules/@floating-ui/react-dom": {
1180 |       "version": "2.1.4",
1181 |       "resolved": "https://registry.npmjs.org/@floating-ui/react-dom/-/react-dom-2.1.4.tgz",
1182 |       "integrity": "sha512-JbbpPhp38UmXDDAu60RJmbeme37Jbgsm7NrHGgzYYFKmblzRUh6Pa641dII6LsjwF4XlScDrde2UAzDo/b9KPw==",
1183 |       "license": "MIT",
1184 |       "dependencies": {
1185 |         "@floating-ui/dom": "^1.7.2"
1186 |       },
1187 |       "peerDependencies": {
1188 |         "react": ">=16.8.0",
1189 |         "react-dom": ">=16.8.0"
1190 |       }
1191 |     },
1192 |     "node_modules/@floating-ui/utils": {
1193 |       "version": "0.2.10",
1194 |       "resolved": "https://registry.npmjs.org/@floating-ui/utils/-/utils-0.2.10.tgz",
1195 |       "integrity": "sha512-aGTxbpbg8/b5JfU1HXSrbH3wXZuLPJcNEcZQFMxLs3oSzgtVu6nFPkbbGGUvBcUjKV2YyB9Wxxabo+HEH9tcRQ==",
1196 |       "license": "MIT"
1197 |     },
1198 |     "node_modules/@fullcalendar/core": {
1199 |       "version": "6.1.19",
1200 |       "resolved": "https://registry.npmjs.org/@fullcalendar/core/-/core-6.1.19.tgz",
1201 |       "integrity": "sha512-z0aVlO5e4Wah6p6mouM0UEqtRf1MZZPt4mwzEyU6kusaNL+dlWQgAasF2cK23hwT4cmxkEmr4inULXgpyeExdQ==",
1202 |       "license": "MIT",
1203 |       "peer": true,
1204 |       "dependencies": {
1205 |         "preact": "~10.12.1"
1206 |       }
1207 |     },
1208 |     "node_modules/@fullcalendar/daygrid": {
1209 |       "version": "6.1.19",
1210 |       "resolved": "https://registry.npmjs.org/@fullcalendar/daygrid/-/daygrid-6.1.19.tgz",
1211 |       "integrity": "sha512-IAAfnMICnVWPjpT4zi87i3FEw0xxSza0avqY/HedKEz+l5MTBYvCDPOWDATpzXoLut3aACsjktIyw9thvIcRYQ==",
1212 |       "license": "MIT",
1213 |       "peerDependencies": {
1214 |         "@fullcalendar/core": "~6.1.19"
1215 |       }
1216 |     },
1217 |     "node_modules/@fullcalendar/interaction": {
1218 |       "version": "6.1.19",
1219 |       "resolved": "https://registry.npmjs.org/@fullcalendar/interaction/-/interaction-6.1.19.tgz",
1220 |       "integrity": "sha512-GOciy79xe8JMVp+1evAU3ytdwN/7tv35t5i1vFkifiuWcQMLC/JnLg/RA2s4sYmQwoYhTw/p4GLcP0gO5B3X5w==",
1221 |       "license": "MIT",
1222 |       "peerDependencies": {
1223 |         "@fullcalendar/core": "~6.1.19"
1224 |       }
1225 |     },
1226 |     "node_modules/@fullcalendar/react": {
1227 |       "version": "6.1.19",
1228 |       "resolved": "https://registry.npmjs.org/@fullcalendar/react/-/react-6.1.19.tgz",
1229 |       "integrity": "sha512-FP78vnyylaL/btZeHig8LQgfHgfwxLaIG6sKbNkzkPkKEACv11UyyBoTSkaavPsHtXvAkcTED1l7TOunAyPEnA==",
1230 |       "license": "MIT",
1231 |       "peerDependencies": {
1232 |         "@fullcalendar/core": "~6.1.19",
1233 |         "react": "^16.7.0 || ^17 || ^18 || ^19",
1234 |         "react-dom": "^16.7.0 || ^17 || ^18 || ^19"
1235 |       }
1236 |     },
1237 |     "node_modules/@fullcalendar/timegrid": {
1238 |       "version": "6.1.19",
1239 |       "resolved": "https://registry.npmjs.org/@fullcalendar/timegrid/-/timegrid-6.1.19.tgz",
1240 |       "integrity": "sha512-OuzpUueyO9wB5OZ8rs7TWIoqvu4v3yEqdDxZ2VcsMldCpYJRiOe7yHWKr4ap5Tb0fs7Rjbserc/b6Nt7ol6BRg==",
1241 |       "license": "MIT",
1242 |       "dependencies": {
1243 |         "@fullcalendar/daygrid": "~6.1.19"
1244 |       },
1245 |       "peerDependencies": {
1246 |         "@fullcalendar/core": "~6.1.19"
1247 |       }
1248 |     },
1249 |     "node_modules/@hookform/resolvers": {
1250 |       "version": "5.1.1",
1251 |       "resolved": "https://registry.npmjs.org/@hookform/resolvers/-/resolvers-5.1.1.tgz",
1252 |       "integrity": "sha512-J/NVING3LMAEvexJkyTLjruSm7aOFx7QX21pzkiJfMoNG0wl5aFEjLTl7ay7IQb9EWY6AkrBy7tHL2Alijpdcg==",
1253 |       "license": "MIT",
1254 |       "dependencies": {
1255 |         "@standard-schema/utils": "^0.3.0"
1256 |       },
1257 |       "peerDependencies": {
1258 |         "react-hook-form": "^7.55.0"
1259 |       }
1260 |     },
1261 |     "node_modules/@humanfs/core": {
1262 |       "version": "0.19.1",
1263 |       "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
1264 |       "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
1265 |       "dev": true,
1266 |       "license": "Apache-2.0",
1267 |       "engines": {
1268 |         "node": ">=18.18.0"
1269 |       }
1270 |     },
1271 |     "node_modules/@humanfs/node": {
1272 |       "version": "0.16.6",
1273 |       "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.6.tgz",
1274 |       "integrity": "sha512-YuI2ZHQL78Q5HbhDiBA1X4LmYdXCKCMQIfw0pw7piHJwyREFebJUvrQN4cMssyES6x+vfUbx1CIpaQUKYdQZOw==",
1275 |       "dev": true,
1276 |       "license": "Apache-2.0",
1277 |       "dependencies": {
1278 |         "@humanfs/core": "^0.19.1",
1279 |         "@humanwhocodes/retry": "^0.3.0"
1280 |       },
1281 |       "engines": {
1282 |         "node": ">=18.18.0"
1283 |       }
1284 |     },
1285 |     "node_modules/@humanfs/node/node_modules/@humanwhocodes/retry": {
1286 |       "version": "0.3.1",
1287 |       "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.3.1.tgz",
1288 |       "integrity": "sha512-JBxkERygn7Bv/GbN5Rv8Ul6LVknS+5Bp6RgDC/O8gEBU/yeH5Ui5C/OlWrTb6qct7LjjfT6Re2NxB0ln0yYybA==",
1289 |       "dev": true,
1290 |       "license": "Apache-2.0",
1291 |       "engines": {
1292 |         "node": ">=18.18"
1293 |       },
1294 |       "funding": {
1295 |         "type": "github",
1296 |         "url": "https://github.com/sponsors/nzakas"
1297 |       }
1298 |     },
1299 |     "node_modules/@humanwhocodes/module-importer": {
1300 |       "version": "1.0.1",
1301 |       "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
1302 |       "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
1303 |       "dev": true,
1304 |       "license": "Apache-2.0",
1305 |       "engines": {
1306 |         "node": ">=12.22"
1307 |       },
1308 |       "funding": {
1309 |         "type": "github",
1310 |         "url": "https://github.com/sponsors/nzakas"
1311 |       }
1312 |     },
1313 |     "node_modules/@humanwhocodes/retry": {
1314 |       "version": "0.4.3",
1315 |       "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
1316 |       "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
1317 |       "dev": true,
1318 |       "license": "Apache-2.0",
1319 |       "engines": {
1320 |         "node": ">=18.18"
1321 |       },
1322 |       "funding": {
1323 |         "type": "github",
1324 |         "url": "https://github.com/sponsors/nzakas"
1325 |       }
1326 |     },
1327 |     "node_modules/@img/sharp-darwin-arm64": {
1328 |       "version": "0.34.3",
1329 |       "resolved": "https://registry.npmjs.org/@img/sharp-darwin-arm64/-/sharp-darwin-arm64-0.34.3.tgz",
1330 |       "integrity": "sha512-ryFMfvxxpQRsgZJqBd4wsttYQbCxsJksrv9Lw/v798JcQ8+w84mBWuXwl+TT0WJ/WrYOLaYpwQXi3sA9nTIaIg==",
1331 |       "cpu": [
1332 |         "arm64"
1333 |       ],
1334 |       "license": "Apache-2.0",
1335 |       "optional": true,
1336 |       "os": [
1337 |         "darwin"
1338 |       ],
1339 |       "engines": {
1340 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1341 |       },
1342 |       "funding": {
1343 |         "url": "https://opencollective.com/libvips"
1344 |       },
1345 |       "optionalDependencies": {
1346 |         "@img/sharp-libvips-darwin-arm64": "1.2.0"
1347 |       }
1348 |     },
1349 |     "node_modules/@img/sharp-darwin-x64": {
1350 |       "version": "0.34.3",
1351 |       "resolved": "https://registry.npmjs.org/@img/sharp-darwin-x64/-/sharp-darwin-x64-0.34.3.tgz",
1352 |       "integrity": "sha512-yHpJYynROAj12TA6qil58hmPmAwxKKC7reUqtGLzsOHfP7/rniNGTL8tjWX6L3CTV4+5P4ypcS7Pp+7OB+8ihA==",
1353 |       "cpu": [
1354 |         "x64"
1355 |       ],
1356 |       "license": "Apache-2.0",
1357 |       "optional": true,
1358 |       "os": [
1359 |         "darwin"
1360 |       ],
1361 |       "engines": {
1362 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1363 |       },
1364 |       "funding": {
1365 |         "url": "https://opencollective.com/libvips"
1366 |       },
1367 |       "optionalDependencies": {
1368 |         "@img/sharp-libvips-darwin-x64": "1.2.0"
1369 |       }
1370 |     },
1371 |     "node_modules/@img/sharp-libvips-darwin-arm64": {
1372 |       "version": "1.2.0",
1373 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-arm64/-/sharp-libvips-darwin-arm64-1.2.0.tgz",
1374 |       "integrity": "sha512-sBZmpwmxqwlqG9ueWFXtockhsxefaV6O84BMOrhtg/YqbTaRdqDE7hxraVE3y6gVM4eExmfzW4a8el9ArLeEiQ==",
1375 |       "cpu": [
1376 |         "arm64"
1377 |       ],
1378 |       "license": "LGPL-3.0-or-later",
1379 |       "optional": true,
1380 |       "os": [
1381 |         "darwin"
1382 |       ],
1383 |       "funding": {
1384 |         "url": "https://opencollective.com/libvips"
1385 |       }
1386 |     },
1387 |     "node_modules/@img/sharp-libvips-darwin-x64": {
1388 |       "version": "1.2.0",
1389 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-x64/-/sharp-libvips-darwin-x64-1.2.0.tgz",
1390 |       "integrity": "sha512-M64XVuL94OgiNHa5/m2YvEQI5q2cl9d/wk0qFTDVXcYzi43lxuiFTftMR1tOnFQovVXNZJ5TURSDK2pNe9Yzqg==",
1391 |       "cpu": [
1392 |         "x64"
1393 |       ],
1394 |       "license": "LGPL-3.0-or-later",
1395 |       "optional": true,
1396 |       "os": [
1397 |         "darwin"
1398 |       ],
1399 |       "funding": {
1400 |         "url": "https://opencollective.com/libvips"
1401 |       }
1402 |     },
1403 |     "node_modules/@img/sharp-libvips-linux-arm": {
1404 |       "version": "1.2.0",
1405 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm/-/sharp-libvips-linux-arm-1.2.0.tgz",
1406 |       "integrity": "sha512-mWd2uWvDtL/nvIzThLq3fr2nnGfyr/XMXlq8ZJ9WMR6PXijHlC3ksp0IpuhK6bougvQrchUAfzRLnbsen0Cqvw==",
1407 |       "cpu": [
1408 |         "arm"
1409 |       ],
1410 |       "license": "LGPL-3.0-or-later",
1411 |       "optional": true,
1412 |       "os": [
1413 |         "linux"
1414 |       ],
1415 |       "funding": {
1416 |         "url": "https://opencollective.com/libvips"
1417 |       }
1418 |     },
1419 |     "node_modules/@img/sharp-libvips-linux-arm64": {
1420 |       "version": "1.2.0",
1421 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm64/-/sharp-libvips-linux-arm64-1.2.0.tgz",
1422 |       "integrity": "sha512-RXwd0CgG+uPRX5YYrkzKyalt2OJYRiJQ8ED/fi1tq9WQW2jsQIn0tqrlR5l5dr/rjqq6AHAxURhj2DVjyQWSOA==",
1423 |       "cpu": [
1424 |         "arm64"
1425 |       ],
1426 |       "license": "LGPL-3.0-or-later",
1427 |       "optional": true,
1428 |       "os": [
1429 |         "linux"
1430 |       ],
1431 |       "funding": {
1432 |         "url": "https://opencollective.com/libvips"
1433 |       }
1434 |     },
1435 |     "node_modules/@img/sharp-libvips-linux-ppc64": {
1436 |       "version": "1.2.0",
1437 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-ppc64/-/sharp-libvips-linux-ppc64-1.2.0.tgz",
1438 |       "integrity": "sha512-Xod/7KaDDHkYu2phxxfeEPXfVXFKx70EAFZ0qyUdOjCcxbjqyJOEUpDe6RIyaunGxT34Anf9ue/wuWOqBW2WcQ==",
1439 |       "cpu": [
1440 |         "ppc64"
1441 |       ],
1442 |       "license": "LGPL-3.0-or-later",
1443 |       "optional": true,
1444 |       "os": [
1445 |         "linux"
1446 |       ],
1447 |       "funding": {
1448 |         "url": "https://opencollective.com/libvips"
1449 |       }
1450 |     },
1451 |     "node_modules/@img/sharp-libvips-linux-s390x": {
1452 |       "version": "1.2.0",
1453 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-s390x/-/sharp-libvips-linux-s390x-1.2.0.tgz",
1454 |       "integrity": "sha512-eMKfzDxLGT8mnmPJTNMcjfO33fLiTDsrMlUVcp6b96ETbnJmd4uvZxVJSKPQfS+odwfVaGifhsB07J1LynFehw==",
1455 |       "cpu": [
1456 |         "s390x"
1457 |       ],
1458 |       "license": "LGPL-3.0-or-later",
1459 |       "optional": true,
1460 |       "os": [
1461 |         "linux"
1462 |       ],
1463 |       "funding": {
1464 |         "url": "https://opencollective.com/libvips"
1465 |       }
1466 |     },
1467 |     "node_modules/@img/sharp-libvips-linux-x64": {
1468 |       "version": "1.2.0",
1469 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-x64/-/sharp-libvips-linux-x64-1.2.0.tgz",
1470 |       "integrity": "sha512-ZW3FPWIc7K1sH9E3nxIGB3y3dZkpJlMnkk7z5tu1nSkBoCgw2nSRTFHI5pB/3CQaJM0pdzMF3paf9ckKMSE9Tg==",
1471 |       "cpu": [
1472 |         "x64"
1473 |       ],
1474 |       "license": "LGPL-3.0-or-later",
1475 |       "optional": true,
1476 |       "os": [
1477 |         "linux"
1478 |       ],
1479 |       "funding": {
1480 |         "url": "https://opencollective.com/libvips"
1481 |       }
1482 |     },
1483 |     "node_modules/@img/sharp-libvips-linuxmusl-arm64": {
1484 |       "version": "1.2.0",
1485 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-arm64/-/sharp-libvips-linuxmusl-arm64-1.2.0.tgz",
1486 |       "integrity": "sha512-UG+LqQJbf5VJ8NWJ5Z3tdIe/HXjuIdo4JeVNADXBFuG7z9zjoegpzzGIyV5zQKi4zaJjnAd2+g2nna8TZvuW9Q==",
1487 |       "cpu": [
1488 |         "arm64"
1489 |       ],
1490 |       "license": "LGPL-3.0-or-later",
1491 |       "optional": true,
1492 |       "os": [
1493 |         "linux"
1494 |       ],
1495 |       "funding": {
1496 |         "url": "https://opencollective.com/libvips"
1497 |       }
1498 |     },
1499 |     "node_modules/@img/sharp-libvips-linuxmusl-x64": {
1500 |       "version": "1.2.0",
1501 |       "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-x64/-/sharp-libvips-linuxmusl-x64-1.2.0.tgz",
1502 |       "integrity": "sha512-SRYOLR7CXPgNze8akZwjoGBoN1ThNZoqpOgfnOxmWsklTGVfJiGJoC/Lod7aNMGA1jSsKWM1+HRX43OP6p9+6Q==",
1503 |       "cpu": [
1504 |         "x64"
1505 |       ],
1506 |       "license": "LGPL-3.0-or-later",
1507 |       "optional": true,
1508 |       "os": [
1509 |         "linux"
1510 |       ],
1511 |       "funding": {
1512 |         "url": "https://opencollective.com/libvips"
1513 |       }
1514 |     },
1515 |     "node_modules/@img/sharp-linux-arm": {
1516 |       "version": "0.34.3",
1517 |       "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm/-/sharp-linux-arm-0.34.3.tgz",
1518 |       "integrity": "sha512-oBK9l+h6KBN0i3dC8rYntLiVfW8D8wH+NPNT3O/WBHeW0OQWCjfWksLUaPidsrDKpJgXp3G3/hkmhptAW0I3+A==",
1519 |       "cpu": [
1520 |         "arm"
1521 |       ],
1522 |       "license": "Apache-2.0",
1523 |       "optional": true,
1524 |       "os": [
1525 |         "linux"
1526 |       ],
1527 |       "engines": {
1528 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1529 |       },
1530 |       "funding": {
1531 |         "url": "https://opencollective.com/libvips"
1532 |       },
1533 |       "optionalDependencies": {
1534 |         "@img/sharp-libvips-linux-arm": "1.2.0"
1535 |       }
1536 |     },
1537 |     "node_modules/@img/sharp-linux-arm64": {
1538 |       "version": "0.34.3",
1539 |       "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm64/-/sharp-linux-arm64-0.34.3.tgz",
1540 |       "integrity": "sha512-QdrKe3EvQrqwkDrtuTIjI0bu6YEJHTgEeqdzI3uWJOH6G1O8Nl1iEeVYRGdj1h5I21CqxSvQp1Yv7xeU3ZewbA==",
1541 |       "cpu": [
1542 |         "arm64"
1543 |       ],
1544 |       "license": "Apache-2.0",
1545 |       "optional": true,
1546 |       "os": [
1547 |         "linux"
1548 |       ],
1549 |       "engines": {
1550 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1551 |       },
1552 |       "funding": {
1553 |         "url": "https://opencollective.com/libvips"
1554 |       },
1555 |       "optionalDependencies": {
1556 |         "@img/sharp-libvips-linux-arm64": "1.2.0"
1557 |       }
1558 |     },
1559 |     "node_modules/@img/sharp-linux-ppc64": {
1560 |       "version": "0.34.3",
1561 |       "resolved": "https://registry.npmjs.org/@img/sharp-linux-ppc64/-/sharp-linux-ppc64-0.34.3.tgz",
1562 |       "integrity": "sha512-GLtbLQMCNC5nxuImPR2+RgrviwKwVql28FWZIW1zWruy6zLgA5/x2ZXk3mxj58X/tszVF69KK0Is83V8YgWhLA==",
1563 |       "cpu": [
1564 |         "ppc64"
1565 |       ],
1566 |       "license": "Apache-2.0",
1567 |       "optional": true,
1568 |       "os": [
1569 |         "linux"
1570 |       ],
1571 |       "engines": {
1572 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1573 |       },
1574 |       "funding": {
1575 |         "url": "https://opencollective.com/libvips"
1576 |       },
1577 |       "optionalDependencies": {
1578 |         "@img/sharp-libvips-linux-ppc64": "1.2.0"
1579 |       }
1580 |     },
1581 |     "node_modules/@img/sharp-linux-s390x": {
1582 |       "version": "0.34.3",
1583 |       "resolved": "https://registry.npmjs.org/@img/sharp-linux-s390x/-/sharp-linux-s390x-0.34.3.tgz",
1584 |       "integrity": "sha512-3gahT+A6c4cdc2edhsLHmIOXMb17ltffJlxR0aC2VPZfwKoTGZec6u5GrFgdR7ciJSsHT27BD3TIuGcuRT0KmQ==",
1585 |       "cpu": [
1586 |         "s390x"
1587 |       ],
1588 |       "license": "Apache-2.0",
1589 |       "optional": true,
1590 |       "os": [
1591 |         "linux"
1592 |       ],
1593 |       "engines": {
1594 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1595 |       },
1596 |       "funding": {
1597 |         "url": "https://opencollective.com/libvips"
1598 |       },
1599 |       "optionalDependencies": {
1600 |         "@img/sharp-libvips-linux-s390x": "1.2.0"
1601 |       }
1602 |     },
1603 |     "node_modules/@img/sharp-linux-x64": {
1604 |       "version": "0.34.3",
1605 |       "resolved": "https://registry.npmjs.org/@img/sharp-linux-x64/-/sharp-linux-x64-0.34.3.tgz",
1606 |       "integrity": "sha512-8kYso8d806ypnSq3/Ly0QEw90V5ZoHh10yH0HnrzOCr6DKAPI6QVHvwleqMkVQ0m+fc7EH8ah0BB0QPuWY6zJQ==",
1607 |       "cpu": [
1608 |         "x64"
1609 |       ],
1610 |       "license": "Apache-2.0",
1611 |       "optional": true,
1612 |       "os": [
1613 |         "linux"
1614 |       ],
1615 |       "engines": {
1616 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1617 |       },
1618 |       "funding": {
1619 |         "url": "https://opencollective.com/libvips"
1620 |       },
1621 |       "optionalDependencies": {
1622 |         "@img/sharp-libvips-linux-x64": "1.2.0"
1623 |       }
1624 |     },
1625 |     "node_modules/@img/sharp-linuxmusl-arm64": {
1626 |       "version": "0.34.3",
1627 |       "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-arm64/-/sharp-linuxmusl-arm64-0.34.3.tgz",
1628 |       "integrity": "sha512-vAjbHDlr4izEiXM1OTggpCcPg9tn4YriK5vAjowJsHwdBIdx0fYRsURkxLG2RLm9gyBq66gwtWI8Gx0/ov+JKQ==",
1629 |       "cpu": [
1630 |         "arm64"
1631 |       ],
1632 |       "license": "Apache-2.0",
1633 |       "optional": true,
1634 |       "os": [
1635 |         "linux"
1636 |       ],
1637 |       "engines": {
1638 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1639 |       },
1640 |       "funding": {
1641 |         "url": "https://opencollective.com/libvips"
1642 |       },
1643 |       "optionalDependencies": {
1644 |         "@img/sharp-libvips-linuxmusl-arm64": "1.2.0"
1645 |       }
1646 |     },
1647 |     "node_modules/@img/sharp-linuxmusl-x64": {
1648 |       "version": "0.34.3",
1649 |       "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-x64/-/sharp-linuxmusl-x64-0.34.3.tgz",
1650 |       "integrity": "sha512-gCWUn9547K5bwvOn9l5XGAEjVTTRji4aPTqLzGXHvIr6bIDZKNTA34seMPgM0WmSf+RYBH411VavCejp3PkOeQ==",
1651 |       "cpu": [
1652 |         "x64"
1653 |       ],
1654 |       "license": "Apache-2.0",
1655 |       "optional": true,
1656 |       "os": [
1657 |         "linux"
1658 |       ],
1659 |       "engines": {
1660 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1661 |       },
1662 |       "funding": {
1663 |         "url": "https://opencollective.com/libvips"
1664 |       },
1665 |       "optionalDependencies": {
1666 |         "@img/sharp-libvips-linuxmusl-x64": "1.2.0"
1667 |       }
1668 |     },
1669 |     "node_modules/@img/sharp-wasm32": {
1670 |       "version": "0.34.3",
1671 |       "resolved": "https://registry.npmjs.org/@img/sharp-wasm32/-/sharp-wasm32-0.34.3.tgz",
1672 |       "integrity": "sha512-+CyRcpagHMGteySaWos8IbnXcHgfDn7pO2fiC2slJxvNq9gDipYBN42/RagzctVRKgxATmfqOSulgZv5e1RdMg==",
1673 |       "cpu": [
1674 |         "wasm32"
1675 |       ],
1676 |       "license": "Apache-2.0 AND LGPL-3.0-or-later AND MIT",
1677 |       "optional": true,
1678 |       "dependencies": {
1679 |         "@emnapi/runtime": "^1.4.4"
1680 |       },
1681 |       "engines": {
1682 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1683 |       },
1684 |       "funding": {
1685 |         "url": "https://opencollective.com/libvips"
1686 |       }
1687 |     },
1688 |     "node_modules/@img/sharp-win32-arm64": {
1689 |       "version": "0.34.3",
1690 |       "resolved": "https://registry.npmjs.org/@img/sharp-win32-arm64/-/sharp-win32-arm64-0.34.3.tgz",
1691 |       "integrity": "sha512-MjnHPnbqMXNC2UgeLJtX4XqoVHHlZNd+nPt1kRPmj63wURegwBhZlApELdtxM2OIZDRv/DFtLcNhVbd1z8GYXQ==",
1692 |       "cpu": [
1693 |         "arm64"
1694 |       ],
1695 |       "license": "Apache-2.0 AND LGPL-3.0-or-later",
1696 |       "optional": true,
1697 |       "os": [
1698 |         "win32"
1699 |       ],
1700 |       "engines": {
1701 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1702 |       },
1703 |       "funding": {
1704 |         "url": "https://opencollective.com/libvips"
1705 |       }
1706 |     },
1707 |     "node_modules/@img/sharp-win32-ia32": {
1708 |       "version": "0.34.3",
1709 |       "resolved": "https://registry.npmjs.org/@img/sharp-win32-ia32/-/sharp-win32-ia32-0.34.3.tgz",
1710 |       "integrity": "sha512-xuCdhH44WxuXgOM714hn4amodJMZl3OEvf0GVTm0BEyMeA2to+8HEdRPShH0SLYptJY1uBw+SCFP9WVQi1Q/cw==",
1711 |       "cpu": [
1712 |         "ia32"
1713 |       ],
1714 |       "license": "Apache-2.0 AND LGPL-3.0-or-later",
1715 |       "optional": true,
1716 |       "os": [
1717 |         "win32"
1718 |       ],
1719 |       "engines": {
1720 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1721 |       },
1722 |       "funding": {
1723 |         "url": "https://opencollective.com/libvips"
1724 |       }
1725 |     },
1726 |     "node_modules/@img/sharp-win32-x64": {
1727 |       "version": "0.34.3",
1728 |       "resolved": "https://registry.npmjs.org/@img/sharp-win32-x64/-/sharp-win32-x64-0.34.3.tgz",
1729 |       "integrity": "sha512-OWwz05d++TxzLEv4VnsTz5CmZ6mI6S05sfQGEMrNrQcOEERbX46332IvE7pO/EUiw7jUrrS40z/M7kPyjfl04g==",
1730 |       "cpu": [
1731 |         "x64"
1732 |       ],
1733 |       "license": "Apache-2.0 AND LGPL-3.0-or-later",
1734 |       "optional": true,
1735 |       "os": [
1736 |         "win32"
1737 |       ],
1738 |       "engines": {
1739 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
1740 |       },
1741 |       "funding": {
1742 |         "url": "https://opencollective.com/libvips"
1743 |       }
1744 |     },
1745 |     "node_modules/@isaacs/fs-minipass": {
1746 |       "version": "4.0.1",
1747 |       "resolved": "https://registry.npmjs.org/@isaacs/fs-minipass/-/fs-minipass-4.0.1.tgz",
1748 |       "integrity": "sha512-wgm9Ehl2jpeqP3zw/7mo3kRHFp5MEDhqAdwy1fTGkHAwnkGOVsgpvQhL8B5n1qlb01jV3n/bI0ZfZp5lWA1k4w==",
1749 |       "dev": true,
1750 |       "license": "ISC",
1751 |       "dependencies": {
1752 |         "minipass": "^7.0.4"
1753 |       },
1754 |       "engines": {
1755 |         "node": ">=18.0.0"
1756 |       }
1757 |     },
1758 |     "node_modules/@jridgewell/gen-mapping": {
1759 |       "version": "0.3.12",
1760 |       "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.12.tgz",
1761 |       "integrity": "sha512-OuLGC46TjB5BbN1dH8JULVVZY4WTdkF7tV9Ys6wLL1rubZnCMstOhNHueU5bLCrnRuDhKPDM4g6sw4Bel5Gzqg==",
1762 |       "dev": true,
1763 |       "license": "MIT",
1764 |       "dependencies": {
1765 |         "@jridgewell/sourcemap-codec": "^1.5.0",
1766 |         "@jridgewell/trace-mapping": "^0.3.24"
1767 |       }
1768 |     },
1769 |     "node_modules/@jridgewell/resolve-uri": {
1770 |       "version": "3.1.2",
1771 |       "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
1772 |       "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
1773 |       "dev": true,
1774 |       "license": "MIT",
1775 |       "engines": {
1776 |         "node": ">=6.0.0"
1777 |       }
1778 |     },
1779 |     "node_modules/@jridgewell/sourcemap-codec": {
1780 |       "version": "1.5.4",
1781 |       "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.4.tgz",
1782 |       "integrity": "sha512-VT2+G1VQs/9oz078bLrYbecdZKs912zQlkelYpuf+SXF+QvZDYJlbx/LSx+meSAwdDFnF8FVXW92AVjjkVmgFw==",
1783 |       "dev": true,
1784 |       "license": "MIT"
1785 |     },
1786 |     "node_modules/@jridgewell/trace-mapping": {
1787 |       "version": "0.3.29",
1788 |       "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.29.tgz",
1789 |       "integrity": "sha512-uw6guiW/gcAGPDhLmd77/6lW8QLeiV5RUTsAX46Db6oLhGaVj4lhnPwb184s1bkc8kdVg/+h988dro8GRDpmYQ==",
1790 |       "dev": true,
1791 |       "license": "MIT",
1792 |       "dependencies": {
1793 |         "@jridgewell/resolve-uri": "^3.1.0",
1794 |         "@jridgewell/sourcemap-codec": "^1.4.14"
1795 |       }
1796 |     },
1797 |     "node_modules/@napi-rs/wasm-runtime": {
1798 |       "version": "0.2.12",
1799 |       "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-0.2.12.tgz",
1800 |       "integrity": "sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==",
1801 |       "dev": true,
1802 |       "license": "MIT",
1803 |       "optional": true,
1804 |       "dependencies": {
1805 |         "@emnapi/core": "^1.4.3",
1806 |         "@emnapi/runtime": "^1.4.3",
1807 |         "@tybys/wasm-util": "^0.10.0"
1808 |       }
1809 |     },
1810 |     "node_modules/@neondatabase/serverless": {
1811 |       "version": "1.0.1",
1812 |       "resolved": "https://registry.npmjs.org/@neondatabase/serverless/-/serverless-1.0.1.tgz",
1813 |       "integrity": "sha512-O6yC5TT0jbw86VZVkmnzCZJB0hfxBl0JJz6f+3KHoZabjb/X08r9eFA+vuY06z1/qaovykvdkrXYq3SPUuvogA==",
1814 |       "license": "MIT",
1815 |       "dependencies": {
1816 |         "@types/node": "^22.15.30",
1817 |         "@types/pg": "^8.8.0"
1818 |       },
1819 |       "engines": {
1820 |         "node": ">=19.0.0"
1821 |       }
1822 |     },
1823 |     "node_modules/@neondatabase/serverless/node_modules/@types/node": {
1824 |       "version": "22.16.5",
1825 |       "resolved": "https://registry.npmjs.org/@types/node/-/node-22.16.5.tgz",
1826 |       "integrity": "sha512-bJFoMATwIGaxxx8VJPeM8TonI8t579oRvgAuT8zFugJsJZgzqv0Fu8Mhp68iecjzG7cnN3mO2dJQ5uUM2EFrgQ==",
1827 |       "license": "MIT",
1828 |       "dependencies": {
1829 |         "undici-types": "~6.21.0"
1830 |       }
1831 |     },
1832 |     "node_modules/@next/env": {
1833 |       "version": "15.4.2",
1834 |       "resolved": "https://registry.npmjs.org/@next/env/-/env-15.4.2.tgz",
1835 |       "integrity": "sha512-kd7MvW3pAP7tmk1NaiX4yG15xb2l4gNhteKQxt3f+NGR22qwPymn9RBuv26QKfIKmfo6z2NpgU8W2RT0s0jlvg==",
1836 |       "license": "MIT"
1837 |     },
1838 |     "node_modules/@next/eslint-plugin-next": {
1839 |       "version": "15.4.2",
1840 |       "resolved": "https://registry.npmjs.org/@next/eslint-plugin-next/-/eslint-plugin-next-15.4.2.tgz",
1841 |       "integrity": "sha512-k0rjdWjXBY6tAOty1ckrMETE6Mx66d85NsgcAIdDp7/cXOsTJ93ywmbg3uUcpxX5TUHFEcCWI5mb8nPhwCe9jg==",
1842 |       "dev": true,
1843 |       "license": "MIT",
1844 |       "dependencies": {
1845 |         "fast-glob": "3.3.1"
1846 |       }
1847 |     },
1848 |     "node_modules/@next/swc-darwin-arm64": {
1849 |       "version": "15.4.2",
1850 |       "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-15.4.2.tgz",
1851 |       "integrity": "sha512-ovqjR8NjCBdBf1U+R/Gvn0RazTtXS9n6wqs84iFaCS1NHbw9ksVE4dfmsYcLoyUVd9BWE0bjkphOWrrz8uz/uw==",
1852 |       "cpu": [
1853 |         "arm64"
1854 |       ],
1855 |       "license": "MIT",
1856 |       "optional": true,
1857 |       "os": [
1858 |         "darwin"
1859 |       ],
1860 |       "engines": {
1861 |         "node": ">= 10"
1862 |       }
1863 |     },
1864 |     "node_modules/@next/swc-darwin-x64": {
1865 |       "version": "15.4.2",
1866 |       "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-15.4.2.tgz",
1867 |       "integrity": "sha512-I8d4W7tPqbdbHRI4z1iBfaoJIBrEG4fnWKIe+Rj1vIucNZ5cEinfwkBt3RcDF00bFRZRDpvKuDjgMFD3OyRBnw==",
1868 |       "cpu": [
1869 |         "x64"
1870 |       ],
1871 |       "license": "MIT",
1872 |       "optional": true,
1873 |       "os": [
1874 |         "darwin"
1875 |       ],
1876 |       "engines": {
1877 |         "node": ">= 10"
1878 |       }
1879 |     },
1880 |     "node_modules/@next/swc-linux-arm64-gnu": {
1881 |       "version": "15.4.2",
1882 |       "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-15.4.2.tgz",
1883 |       "integrity": "sha512-lvhz02dU3Ec5thzfQ2RCUeOFADjNkS/px1W7MBt7HMhf0/amMfT8Z/aXOwEA+cVWN7HSDRSUc8hHILoHmvajsg==",
1884 |       "cpu": [
1885 |         "arm64"
1886 |       ],
1887 |       "license": "MIT",
1888 |       "optional": true,
1889 |       "os": [
1890 |         "linux"
1891 |       ],
1892 |       "engines": {
1893 |         "node": ">= 10"
1894 |       }
1895 |     },
1896 |     "node_modules/@next/swc-linux-arm64-musl": {
1897 |       "version": "15.4.2",
1898 |       "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-15.4.2.tgz",
1899 |       "integrity": "sha512-v+5PPfL8UP+KKHS3Mox7QMoeFdMlaV0zeNMIF7eLC4qTiVSO0RPNnK0nkBZSD5BEkkf//c+vI9s/iHxddCZchA==",
1900 |       "cpu": [
1901 |         "arm64"
1902 |       ],
1903 |       "license": "MIT",
1904 |       "optional": true,
1905 |       "os": [
1906 |         "linux"
1907 |       ],
1908 |       "engines": {
1909 |         "node": ">= 10"
1910 |       }
1911 |     },
1912 |     "node_modules/@next/swc-linux-x64-gnu": {
1913 |       "version": "15.4.2",
1914 |       "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-15.4.2.tgz",
1915 |       "integrity": "sha512-PHLYOC9W2cu6I/JEKo77+LW4uPNvyEQiSkVRUQPsOIsf01PRr8PtPhwtz3XNnC9At8CrzPkzqQ9/kYDg4R4Inw==",
1916 |       "cpu": [
1917 |         "x64"
1918 |       ],
1919 |       "license": "MIT",
1920 |       "optional": true,
1921 |       "os": [
1922 |         "linux"
1923 |       ],
1924 |       "engines": {
1925 |         "node": ">= 10"
1926 |       }
1927 |     },
1928 |     "node_modules/@next/swc-linux-x64-musl": {
1929 |       "version": "15.4.2",
1930 |       "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-15.4.2.tgz",
1931 |       "integrity": "sha512-lpmUF9FfLFns4JbTu+5aJGA8aR9dXaA12eoNe9CJbVkGib0FDiPa4kBGTwy0xDxKNGlv3bLDViyx1U+qafmuJQ==",
1932 |       "cpu": [
1933 |         "x64"
1934 |       ],
1935 |       "license": "MIT",
1936 |       "optional": true,
1937 |       "os": [
1938 |         "linux"
1939 |       ],
1940 |       "engines": {
1941 |         "node": ">= 10"
1942 |       }
1943 |     },
1944 |     "node_modules/@next/swc-win32-arm64-msvc": {
1945 |       "version": "15.4.2",
1946 |       "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-15.4.2.tgz",
1947 |       "integrity": "sha512-aMjogoGnRepas0LQ/PBPsvvUzj+IoXw2IoDSEShEtrsu2toBiaxEWzOQuPZ8nie8+1iF7TA63S7rlp3YWAjNEg==",
1948 |       "cpu": [
1949 |         "arm64"
1950 |       ],
1951 |       "license": "MIT",
1952 |       "optional": true,
1953 |       "os": [
1954 |         "win32"
1955 |       ],
1956 |       "engines": {
1957 |         "node": ">= 10"
1958 |       }
1959 |     },
1960 |     "node_modules/@next/swc-win32-x64-msvc": {
1961 |       "version": "15.4.2",
1962 |       "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-15.4.2.tgz",
1963 |       "integrity": "sha512-FxwauyexSFu78wEqR/+NB9MnqXVj6SxJKwcVs2CRjeSX/jBagDCgtR2W36PZUYm0WPgY1pQ3C1+nn7zSnwROuw==",
1964 |       "cpu": [
1965 |         "x64"
1966 |       ],
1967 |       "license": "MIT",
1968 |       "optional": true,
1969 |       "os": [
1970 |         "win32"
1971 |       ],
1972 |       "engines": {
1973 |         "node": ">= 10"
1974 |       }
1975 |     },
1976 |     "node_modules/@nodelib/fs.scandir": {
1977 |       "version": "2.1.5",
1978 |       "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
1979 |       "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
1980 |       "dev": true,
1981 |       "license": "MIT",
1982 |       "dependencies": {
1983 |         "@nodelib/fs.stat": "2.0.5",
1984 |         "run-parallel": "^1.1.9"
1985 |       },
1986 |       "engines": {
1987 |         "node": ">= 8"
1988 |       }
1989 |     },
1990 |     "node_modules/@nodelib/fs.stat": {
1991 |       "version": "2.0.5",
1992 |       "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
1993 |       "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
1994 |       "dev": true,
1995 |       "license": "MIT",
1996 |       "engines": {
1997 |         "node": ">= 8"
1998 |       }
1999 |     },
2000 |     "node_modules/@nodelib/fs.walk": {
2001 |       "version": "1.2.8",
2002 |       "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
2003 |       "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
2004 |       "dev": true,
2005 |       "license": "MIT",
2006 |       "dependencies": {
2007 |         "@nodelib/fs.scandir": "2.1.5",
2008 |         "fastq": "^1.6.0"
2009 |       },
2010 |       "engines": {
2011 |         "node": ">= 8"
2012 |       }
2013 |     },
2014 |     "node_modules/@nolyfill/is-core-module": {
2015 |       "version": "1.0.39",
2016 |       "resolved": "https://registry.npmjs.org/@nolyfill/is-core-module/-/is-core-module-1.0.39.tgz",
2017 |       "integrity": "sha512-nn5ozdjYQpUCZlWGuxcJY/KpxkWQs4DcbMCmKojjyrYDEAGy4Ce19NN4v5MduafTwJlbKc99UA8YhSVqq9yPZA==",
2018 |       "dev": true,
2019 |       "license": "MIT",
2020 |       "engines": {
2021 |         "node": ">=12.4.0"
2022 |       }
2023 |     },
2024 |     "node_modules/@radix-ui/number": {
2025 |       "version": "1.1.1",
2026 |       "resolved": "https://registry.npmjs.org/@radix-ui/number/-/number-1.1.1.tgz",
2027 |       "integrity": "sha512-MkKCwxlXTgz6CFoJx3pCwn07GKp36+aZyu/u2Ln2VrA5DcdyCZkASEDBTd8x5whTQQL5CiYf4prXKLcgQdv29g==",
2028 |       "license": "MIT"
2029 |     },
2030 |     "node_modules/@radix-ui/primitive": {
2031 |       "version": "1.1.2",
2032 |       "resolved": "https://registry.npmjs.org/@radix-ui/primitive/-/primitive-1.1.2.tgz",
2033 |       "integrity": "sha512-XnbHrrprsNqZKQhStrSwgRUQzoCI1glLzdw79xiZPoofhGICeZRSQ3dIxAKH1gb3OHfNf4d6f+vAv3kil2eggA==",
2034 |       "license": "MIT"
2035 |     },
2036 |     "node_modules/@radix-ui/react-accordion": {
2037 |       "version": "1.2.11",
2038 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-accordion/-/react-accordion-1.2.11.tgz",
2039 |       "integrity": "sha512-l3W5D54emV2ues7jjeG1xcyN7S3jnK3zE2zHqgn0CmMsy9lNJwmgcrmaxS+7ipw15FAivzKNzH3d5EcGoFKw0A==",
2040 |       "license": "MIT",
2041 |       "dependencies": {
2042 |         "@radix-ui/primitive": "1.1.2",
2043 |         "@radix-ui/react-collapsible": "1.1.11",
2044 |         "@radix-ui/react-collection": "1.1.7",
2045 |         "@radix-ui/react-compose-refs": "1.1.2",
2046 |         "@radix-ui/react-context": "1.1.2",
2047 |         "@radix-ui/react-direction": "1.1.1",
2048 |         "@radix-ui/react-id": "1.1.1",
2049 |         "@radix-ui/react-primitive": "2.1.3",
2050 |         "@radix-ui/react-use-controllable-state": "1.2.2"
2051 |       },
2052 |       "peerDependencies": {
2053 |         "@types/react": "*",
2054 |         "@types/react-dom": "*",
2055 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2056 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2057 |       },
2058 |       "peerDependenciesMeta": {
2059 |         "@types/react": {
2060 |           "optional": true
2061 |         },
2062 |         "@types/react-dom": {
2063 |           "optional": true
2064 |         }
2065 |       }
2066 |     },
2067 |     "node_modules/@radix-ui/react-arrow": {
2068 |       "version": "1.1.7",
2069 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-arrow/-/react-arrow-1.1.7.tgz",
2070 |       "integrity": "sha512-F+M1tLhO+mlQaOWspE8Wstg+z6PwxwRd8oQ8IXceWz92kfAmalTRf0EjrouQeo7QssEPfCn05B4Ihs1K9WQ/7w==",
2071 |       "license": "MIT",
2072 |       "dependencies": {
2073 |         "@radix-ui/react-primitive": "2.1.3"
2074 |       },
2075 |       "peerDependencies": {
2076 |         "@types/react": "*",
2077 |         "@types/react-dom": "*",
2078 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2079 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2080 |       },
2081 |       "peerDependenciesMeta": {
2082 |         "@types/react": {
2083 |           "optional": true
2084 |         },
2085 |         "@types/react-dom": {
2086 |           "optional": true
2087 |         }
2088 |       }
2089 |     },
2090 |     "node_modules/@radix-ui/react-avatar": {
2091 |       "version": "1.1.10",
2092 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-avatar/-/react-avatar-1.1.10.tgz",
2093 |       "integrity": "sha512-V8piFfWapM5OmNCXTzVQY+E1rDa53zY+MQ4Y7356v4fFz6vqCyUtIz2rUD44ZEdwg78/jKmMJHj07+C/Z/rcog==",
2094 |       "license": "MIT",
2095 |       "dependencies": {
2096 |         "@radix-ui/react-context": "1.1.2",
2097 |         "@radix-ui/react-primitive": "2.1.3",
2098 |         "@radix-ui/react-use-callback-ref": "1.1.1",
2099 |         "@radix-ui/react-use-is-hydrated": "0.1.0",
2100 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2101 |       },
2102 |       "peerDependencies": {
2103 |         "@types/react": "*",
2104 |         "@types/react-dom": "*",
2105 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2106 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2107 |       },
2108 |       "peerDependenciesMeta": {
2109 |         "@types/react": {
2110 |           "optional": true
2111 |         },
2112 |         "@types/react-dom": {
2113 |           "optional": true
2114 |         }
2115 |       }
2116 |     },
2117 |     "node_modules/@radix-ui/react-checkbox": {
2118 |       "version": "1.3.2",
2119 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-checkbox/-/react-checkbox-1.3.2.tgz",
2120 |       "integrity": "sha512-yd+dI56KZqawxKZrJ31eENUwqc1QSqg4OZ15rybGjF2ZNwMO+wCyHzAVLRp9qoYJf7kYy0YpZ2b0JCzJ42HZpA==",
2121 |       "license": "MIT",
2122 |       "dependencies": {
2123 |         "@radix-ui/primitive": "1.1.2",
2124 |         "@radix-ui/react-compose-refs": "1.1.2",
2125 |         "@radix-ui/react-context": "1.1.2",
2126 |         "@radix-ui/react-presence": "1.1.4",
2127 |         "@radix-ui/react-primitive": "2.1.3",
2128 |         "@radix-ui/react-use-controllable-state": "1.2.2",
2129 |         "@radix-ui/react-use-previous": "1.1.1",
2130 |         "@radix-ui/react-use-size": "1.1.1"
2131 |       },
2132 |       "peerDependencies": {
2133 |         "@types/react": "*",
2134 |         "@types/react-dom": "*",
2135 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2136 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2137 |       },
2138 |       "peerDependenciesMeta": {
2139 |         "@types/react": {
2140 |           "optional": true
2141 |         },
2142 |         "@types/react-dom": {
2143 |           "optional": true
2144 |         }
2145 |       }
2146 |     },
2147 |     "node_modules/@radix-ui/react-collapsible": {
2148 |       "version": "1.1.11",
2149 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-collapsible/-/react-collapsible-1.1.11.tgz",
2150 |       "integrity": "sha512-2qrRsVGSCYasSz1RFOorXwl0H7g7J1frQtgpQgYrt+MOidtPAINHn9CPovQXb83r8ahapdx3Tu0fa/pdFFSdPg==",
2151 |       "license": "MIT",
2152 |       "dependencies": {
2153 |         "@radix-ui/primitive": "1.1.2",
2154 |         "@radix-ui/react-compose-refs": "1.1.2",
2155 |         "@radix-ui/react-context": "1.1.2",
2156 |         "@radix-ui/react-id": "1.1.1",
2157 |         "@radix-ui/react-presence": "1.1.4",
2158 |         "@radix-ui/react-primitive": "2.1.3",
2159 |         "@radix-ui/react-use-controllable-state": "1.2.2",
2160 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2161 |       },
2162 |       "peerDependencies": {
2163 |         "@types/react": "*",
2164 |         "@types/react-dom": "*",
2165 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2166 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2167 |       },
2168 |       "peerDependenciesMeta": {
2169 |         "@types/react": {
2170 |           "optional": true
2171 |         },
2172 |         "@types/react-dom": {
2173 |           "optional": true
2174 |         }
2175 |       }
2176 |     },
2177 |     "node_modules/@radix-ui/react-collection": {
2178 |       "version": "1.1.7",
2179 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-collection/-/react-collection-1.1.7.tgz",
2180 |       "integrity": "sha512-Fh9rGN0MoI4ZFUNyfFVNU4y9LUz93u9/0K+yLgA2bwRojxM8JU1DyvvMBabnZPBgMWREAJvU2jjVzq+LrFUglw==",
2181 |       "license": "MIT",
2182 |       "dependencies": {
2183 |         "@radix-ui/react-compose-refs": "1.1.2",
2184 |         "@radix-ui/react-context": "1.1.2",
2185 |         "@radix-ui/react-primitive": "2.1.3",
2186 |         "@radix-ui/react-slot": "1.2.3"
2187 |       },
2188 |       "peerDependencies": {
2189 |         "@types/react": "*",
2190 |         "@types/react-dom": "*",
2191 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2192 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2193 |       },
2194 |       "peerDependenciesMeta": {
2195 |         "@types/react": {
2196 |           "optional": true
2197 |         },
2198 |         "@types/react-dom": {
2199 |           "optional": true
2200 |         }
2201 |       }
2202 |     },
2203 |     "node_modules/@radix-ui/react-compose-refs": {
2204 |       "version": "1.1.2",
2205 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-compose-refs/-/react-compose-refs-1.1.2.tgz",
2206 |       "integrity": "sha512-z4eqJvfiNnFMHIIvXP3CY57y2WJs5g2v3X0zm9mEJkrkNv4rDxu+sg9Jh8EkXyeqBkB7SOcboo9dMVqhyrACIg==",
2207 |       "license": "MIT",
2208 |       "peerDependencies": {
2209 |         "@types/react": "*",
2210 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2211 |       },
2212 |       "peerDependenciesMeta": {
2213 |         "@types/react": {
2214 |           "optional": true
2215 |         }
2216 |       }
2217 |     },
2218 |     "node_modules/@radix-ui/react-context": {
2219 |       "version": "1.1.2",
2220 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-context/-/react-context-1.1.2.tgz",
2221 |       "integrity": "sha512-jCi/QKUM2r1Ju5a3J64TH2A5SpKAgh0LpknyqdQ4m6DCV0xJ2HG1xARRwNGPQfi1SLdLWZ1OJz6F4OMBBNiGJA==",
2222 |       "license": "MIT",
2223 |       "peerDependencies": {
2224 |         "@types/react": "*",
2225 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2226 |       },
2227 |       "peerDependenciesMeta": {
2228 |         "@types/react": {
2229 |           "optional": true
2230 |         }
2231 |       }
2232 |     },
2233 |     "node_modules/@radix-ui/react-dialog": {
2234 |       "version": "1.1.14",
2235 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-dialog/-/react-dialog-1.1.14.tgz",
2236 |       "integrity": "sha512-+CpweKjqpzTmwRwcYECQcNYbI8V9VSQt0SNFKeEBLgfucbsLssU6Ppq7wUdNXEGb573bMjFhVjKVll8rmV6zMw==",
2237 |       "license": "MIT",
2238 |       "dependencies": {
2239 |         "@radix-ui/primitive": "1.1.2",
2240 |         "@radix-ui/react-compose-refs": "1.1.2",
2241 |         "@radix-ui/react-context": "1.1.2",
2242 |         "@radix-ui/react-dismissable-layer": "1.1.10",
2243 |         "@radix-ui/react-focus-guards": "1.1.2",
2244 |         "@radix-ui/react-focus-scope": "1.1.7",
2245 |         "@radix-ui/react-id": "1.1.1",
2246 |         "@radix-ui/react-portal": "1.1.9",
2247 |         "@radix-ui/react-presence": "1.1.4",
2248 |         "@radix-ui/react-primitive": "2.1.3",
2249 |         "@radix-ui/react-slot": "1.2.3",
2250 |         "@radix-ui/react-use-controllable-state": "1.2.2",
2251 |         "aria-hidden": "^1.2.4",
2252 |         "react-remove-scroll": "^2.6.3"
2253 |       },
2254 |       "peerDependencies": {
2255 |         "@types/react": "*",
2256 |         "@types/react-dom": "*",
2257 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2258 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2259 |       },
2260 |       "peerDependenciesMeta": {
2261 |         "@types/react": {
2262 |           "optional": true
2263 |         },
2264 |         "@types/react-dom": {
2265 |           "optional": true
2266 |         }
2267 |       }
2268 |     },
2269 |     "node_modules/@radix-ui/react-direction": {
2270 |       "version": "1.1.1",
2271 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-direction/-/react-direction-1.1.1.tgz",
2272 |       "integrity": "sha512-1UEWRX6jnOA2y4H5WczZ44gOOjTEmlqv1uNW4GAJEO5+bauCBhv8snY65Iw5/VOS/ghKN9gr2KjnLKxrsvoMVw==",
2273 |       "license": "MIT",
2274 |       "peerDependencies": {
2275 |         "@types/react": "*",
2276 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2277 |       },
2278 |       "peerDependenciesMeta": {
2279 |         "@types/react": {
2280 |           "optional": true
2281 |         }
2282 |       }
2283 |     },
2284 |     "node_modules/@radix-ui/react-dismissable-layer": {
2285 |       "version": "1.1.10",
2286 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-dismissable-layer/-/react-dismissable-layer-1.1.10.tgz",
2287 |       "integrity": "sha512-IM1zzRV4W3HtVgftdQiiOmA0AdJlCtMLe00FXaHwgt3rAnNsIyDqshvkIW3hj/iu5hu8ERP7KIYki6NkqDxAwQ==",
2288 |       "license": "MIT",
2289 |       "dependencies": {
2290 |         "@radix-ui/primitive": "1.1.2",
2291 |         "@radix-ui/react-compose-refs": "1.1.2",
2292 |         "@radix-ui/react-primitive": "2.1.3",
2293 |         "@radix-ui/react-use-callback-ref": "1.1.1",
2294 |         "@radix-ui/react-use-escape-keydown": "1.1.1"
2295 |       },
2296 |       "peerDependencies": {
2297 |         "@types/react": "*",
2298 |         "@types/react-dom": "*",
2299 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2300 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2301 |       },
2302 |       "peerDependenciesMeta": {
2303 |         "@types/react": {
2304 |           "optional": true
2305 |         },
2306 |         "@types/react-dom": {
2307 |           "optional": true
2308 |         }
2309 |       }
2310 |     },
2311 |     "node_modules/@radix-ui/react-dropdown-menu": {
2312 |       "version": "2.1.15",
2313 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-dropdown-menu/-/react-dropdown-menu-2.1.15.tgz",
2314 |       "integrity": "sha512-mIBnOjgwo9AH3FyKaSWoSu/dYj6VdhJ7frEPiGTeXCdUFHjl9h3mFh2wwhEtINOmYXWhdpf1rY2minFsmaNgVQ==",
2315 |       "license": "MIT",
2316 |       "dependencies": {
2317 |         "@radix-ui/primitive": "1.1.2",
2318 |         "@radix-ui/react-compose-refs": "1.1.2",
2319 |         "@radix-ui/react-context": "1.1.2",
2320 |         "@radix-ui/react-id": "1.1.1",
2321 |         "@radix-ui/react-menu": "2.1.15",
2322 |         "@radix-ui/react-primitive": "2.1.3",
2323 |         "@radix-ui/react-use-controllable-state": "1.2.2"
2324 |       },
2325 |       "peerDependencies": {
2326 |         "@types/react": "*",
2327 |         "@types/react-dom": "*",
2328 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2329 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2330 |       },
2331 |       "peerDependenciesMeta": {
2332 |         "@types/react": {
2333 |           "optional": true
2334 |         },
2335 |         "@types/react-dom": {
2336 |           "optional": true
2337 |         }
2338 |       }
2339 |     },
2340 |     "node_modules/@radix-ui/react-focus-guards": {
2341 |       "version": "1.1.2",
2342 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-focus-guards/-/react-focus-guards-1.1.2.tgz",
2343 |       "integrity": "sha512-fyjAACV62oPV925xFCrH8DR5xWhg9KYtJT4s3u54jxp+L/hbpTY2kIeEFFbFe+a/HCE94zGQMZLIpVTPVZDhaA==",
2344 |       "license": "MIT",
2345 |       "peerDependencies": {
2346 |         "@types/react": "*",
2347 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2348 |       },
2349 |       "peerDependenciesMeta": {
2350 |         "@types/react": {
2351 |           "optional": true
2352 |         }
2353 |       }
2354 |     },
2355 |     "node_modules/@radix-ui/react-focus-scope": {
2356 |       "version": "1.1.7",
2357 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-focus-scope/-/react-focus-scope-1.1.7.tgz",
2358 |       "integrity": "sha512-t2ODlkXBQyn7jkl6TNaw/MtVEVvIGelJDCG41Okq/KwUsJBwQ4XVZsHAVUkK4mBv3ewiAS3PGuUWuY2BoK4ZUw==",
2359 |       "license": "MIT",
2360 |       "dependencies": {
2361 |         "@radix-ui/react-compose-refs": "1.1.2",
2362 |         "@radix-ui/react-primitive": "2.1.3",
2363 |         "@radix-ui/react-use-callback-ref": "1.1.1"
2364 |       },
2365 |       "peerDependencies": {
2366 |         "@types/react": "*",
2367 |         "@types/react-dom": "*",
2368 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2369 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2370 |       },
2371 |       "peerDependenciesMeta": {
2372 |         "@types/react": {
2373 |           "optional": true
2374 |         },
2375 |         "@types/react-dom": {
2376 |           "optional": true
2377 |         }
2378 |       }
2379 |     },
2380 |     "node_modules/@radix-ui/react-id": {
2381 |       "version": "1.1.1",
2382 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-id/-/react-id-1.1.1.tgz",
2383 |       "integrity": "sha512-kGkGegYIdQsOb4XjsfM97rXsiHaBwco+hFI66oO4s9LU+PLAC5oJ7khdOVFxkhsmlbpUqDAvXw11CluXP+jkHg==",
2384 |       "license": "MIT",
2385 |       "dependencies": {
2386 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2387 |       },
2388 |       "peerDependencies": {
2389 |         "@types/react": "*",
2390 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2391 |       },
2392 |       "peerDependenciesMeta": {
2393 |         "@types/react": {
2394 |           "optional": true
2395 |         }
2396 |       }
2397 |     },
2398 |     "node_modules/@radix-ui/react-label": {
2399 |       "version": "2.1.7",
2400 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-label/-/react-label-2.1.7.tgz",
2401 |       "integrity": "sha512-YT1GqPSL8kJn20djelMX7/cTRp/Y9w5IZHvfxQTVHrOqa2yMl7i/UfMqKRU5V7mEyKTrUVgJXhNQPVCG8PBLoQ==",
2402 |       "license": "MIT",
2403 |       "dependencies": {
2404 |         "@radix-ui/react-primitive": "2.1.3"
2405 |       },
2406 |       "peerDependencies": {
2407 |         "@types/react": "*",
2408 |         "@types/react-dom": "*",
2409 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2410 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2411 |       },
2412 |       "peerDependenciesMeta": {
2413 |         "@types/react": {
2414 |           "optional": true
2415 |         },
2416 |         "@types/react-dom": {
2417 |           "optional": true
2418 |         }
2419 |       }
2420 |     },
2421 |     "node_modules/@radix-ui/react-menu": {
2422 |       "version": "2.1.15",
2423 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-menu/-/react-menu-2.1.15.tgz",
2424 |       "integrity": "sha512-tVlmA3Vb9n8SZSd+YSbuFR66l87Wiy4du+YE+0hzKQEANA+7cWKH1WgqcEX4pXqxUFQKrWQGHdvEfw00TjFiew==",
2425 |       "license": "MIT",
2426 |       "dependencies": {
2427 |         "@radix-ui/primitive": "1.1.2",
2428 |         "@radix-ui/react-collection": "1.1.7",
2429 |         "@radix-ui/react-compose-refs": "1.1.2",
2430 |         "@radix-ui/react-context": "1.1.2",
2431 |         "@radix-ui/react-direction": "1.1.1",
2432 |         "@radix-ui/react-dismissable-layer": "1.1.10",
2433 |         "@radix-ui/react-focus-guards": "1.1.2",
2434 |         "@radix-ui/react-focus-scope": "1.1.7",
2435 |         "@radix-ui/react-id": "1.1.1",
2436 |         "@radix-ui/react-popper": "1.2.7",
2437 |         "@radix-ui/react-portal": "1.1.9",
2438 |         "@radix-ui/react-presence": "1.1.4",
2439 |         "@radix-ui/react-primitive": "2.1.3",
2440 |         "@radix-ui/react-roving-focus": "1.1.10",
2441 |         "@radix-ui/react-slot": "1.2.3",
2442 |         "@radix-ui/react-use-callback-ref": "1.1.1",
2443 |         "aria-hidden": "^1.2.4",
2444 |         "react-remove-scroll": "^2.6.3"
2445 |       },
2446 |       "peerDependencies": {
2447 |         "@types/react": "*",
2448 |         "@types/react-dom": "*",
2449 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2450 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2451 |       },
2452 |       "peerDependenciesMeta": {
2453 |         "@types/react": {
2454 |           "optional": true
2455 |         },
2456 |         "@types/react-dom": {
2457 |           "optional": true
2458 |         }
2459 |       }
2460 |     },
2461 |     "node_modules/@radix-ui/react-popper": {
2462 |       "version": "1.2.7",
2463 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-popper/-/react-popper-1.2.7.tgz",
2464 |       "integrity": "sha512-IUFAccz1JyKcf/RjB552PlWwxjeCJB8/4KxT7EhBHOJM+mN7LdW+B3kacJXILm32xawcMMjb2i0cIZpo+f9kiQ==",
2465 |       "license": "MIT",
2466 |       "dependencies": {
2467 |         "@floating-ui/react-dom": "^2.0.0",
2468 |         "@radix-ui/react-arrow": "1.1.7",
2469 |         "@radix-ui/react-compose-refs": "1.1.2",
2470 |         "@radix-ui/react-context": "1.1.2",
2471 |         "@radix-ui/react-primitive": "2.1.3",
2472 |         "@radix-ui/react-use-callback-ref": "1.1.1",
2473 |         "@radix-ui/react-use-layout-effect": "1.1.1",
2474 |         "@radix-ui/react-use-rect": "1.1.1",
2475 |         "@radix-ui/react-use-size": "1.1.1",
2476 |         "@radix-ui/rect": "1.1.1"
2477 |       },
2478 |       "peerDependencies": {
2479 |         "@types/react": "*",
2480 |         "@types/react-dom": "*",
2481 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2482 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2483 |       },
2484 |       "peerDependenciesMeta": {
2485 |         "@types/react": {
2486 |           "optional": true
2487 |         },
2488 |         "@types/react-dom": {
2489 |           "optional": true
2490 |         }
2491 |       }
2492 |     },
2493 |     "node_modules/@radix-ui/react-portal": {
2494 |       "version": "1.1.9",
2495 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-portal/-/react-portal-1.1.9.tgz",
2496 |       "integrity": "sha512-bpIxvq03if6UNwXZ+HTK71JLh4APvnXntDc6XOX8UVq4XQOVl7lwok0AvIl+b8zgCw3fSaVTZMpAPPagXbKmHQ==",
2497 |       "license": "MIT",
2498 |       "dependencies": {
2499 |         "@radix-ui/react-primitive": "2.1.3",
2500 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2501 |       },
2502 |       "peerDependencies": {
2503 |         "@types/react": "*",
2504 |         "@types/react-dom": "*",
2505 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2506 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2507 |       },
2508 |       "peerDependenciesMeta": {
2509 |         "@types/react": {
2510 |           "optional": true
2511 |         },
2512 |         "@types/react-dom": {
2513 |           "optional": true
2514 |         }
2515 |       }
2516 |     },
2517 |     "node_modules/@radix-ui/react-presence": {
2518 |       "version": "1.1.4",
2519 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-presence/-/react-presence-1.1.4.tgz",
2520 |       "integrity": "sha512-ueDqRbdc4/bkaQT3GIpLQssRlFgWaL/U2z/S31qRwwLWoxHLgry3SIfCwhxeQNbirEUXFa+lq3RL3oBYXtcmIA==",
2521 |       "license": "MIT",
2522 |       "dependencies": {
2523 |         "@radix-ui/react-compose-refs": "1.1.2",
2524 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2525 |       },
2526 |       "peerDependencies": {
2527 |         "@types/react": "*",
2528 |         "@types/react-dom": "*",
2529 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2530 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2531 |       },
2532 |       "peerDependenciesMeta": {
2533 |         "@types/react": {
2534 |           "optional": true
2535 |         },
2536 |         "@types/react-dom": {
2537 |           "optional": true
2538 |         }
2539 |       }
2540 |     },
2541 |     "node_modules/@radix-ui/react-primitive": {
2542 |       "version": "2.1.3",
2543 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-primitive/-/react-primitive-2.1.3.tgz",
2544 |       "integrity": "sha512-m9gTwRkhy2lvCPe6QJp4d3G1TYEUHn/FzJUtq9MjH46an1wJU+GdoGC5VLof8RX8Ft/DlpshApkhswDLZzHIcQ==",
2545 |       "license": "MIT",
2546 |       "dependencies": {
2547 |         "@radix-ui/react-slot": "1.2.3"
2548 |       },
2549 |       "peerDependencies": {
2550 |         "@types/react": "*",
2551 |         "@types/react-dom": "*",
2552 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2553 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2554 |       },
2555 |       "peerDependenciesMeta": {
2556 |         "@types/react": {
2557 |           "optional": true
2558 |         },
2559 |         "@types/react-dom": {
2560 |           "optional": true
2561 |         }
2562 |       }
2563 |     },
2564 |     "node_modules/@radix-ui/react-progress": {
2565 |       "version": "1.1.7",
2566 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-progress/-/react-progress-1.1.7.tgz",
2567 |       "integrity": "sha512-vPdg/tF6YC/ynuBIJlk1mm7Le0VgW6ub6J2UWnTQ7/D23KXcPI1qy+0vBkgKgd38RCMJavBXpB83HPNFMTb0Fg==",
2568 |       "license": "MIT",
2569 |       "dependencies": {
2570 |         "@radix-ui/react-context": "1.1.2",
2571 |         "@radix-ui/react-primitive": "2.1.3"
2572 |       },
2573 |       "peerDependencies": {
2574 |         "@types/react": "*",
2575 |         "@types/react-dom": "*",
2576 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2577 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2578 |       },
2579 |       "peerDependenciesMeta": {
2580 |         "@types/react": {
2581 |           "optional": true
2582 |         },
2583 |         "@types/react-dom": {
2584 |           "optional": true
2585 |         }
2586 |       }
2587 |     },
2588 |     "node_modules/@radix-ui/react-roving-focus": {
2589 |       "version": "1.1.10",
2590 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-roving-focus/-/react-roving-focus-1.1.10.tgz",
2591 |       "integrity": "sha512-dT9aOXUen9JSsxnMPv/0VqySQf5eDQ6LCk5Sw28kamz8wSOW2bJdlX2Bg5VUIIcV+6XlHpWTIuTPCf/UNIyq8Q==",
2592 |       "license": "MIT",
2593 |       "dependencies": {
2594 |         "@radix-ui/primitive": "1.1.2",
2595 |         "@radix-ui/react-collection": "1.1.7",
2596 |         "@radix-ui/react-compose-refs": "1.1.2",
2597 |         "@radix-ui/react-context": "1.1.2",
2598 |         "@radix-ui/react-direction": "1.1.1",
2599 |         "@radix-ui/react-id": "1.1.1",
2600 |         "@radix-ui/react-primitive": "2.1.3",
2601 |         "@radix-ui/react-use-callback-ref": "1.1.1",
2602 |         "@radix-ui/react-use-controllable-state": "1.2.2"
2603 |       },
2604 |       "peerDependencies": {
2605 |         "@types/react": "*",
2606 |         "@types/react-dom": "*",
2607 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2608 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2609 |       },
2610 |       "peerDependenciesMeta": {
2611 |         "@types/react": {
2612 |           "optional": true
2613 |         },
2614 |         "@types/react-dom": {
2615 |           "optional": true
2616 |         }
2617 |       }
2618 |     },
2619 |     "node_modules/@radix-ui/react-select": {
2620 |       "version": "2.2.5",
2621 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-select/-/react-select-2.2.5.tgz",
2622 |       "integrity": "sha512-HnMTdXEVuuyzx63ME0ut4+sEMYW6oouHWNGUZc7ddvUWIcfCva/AMoqEW/3wnEllriMWBa0RHspCYnfCWJQYmA==",
2623 |       "license": "MIT",
2624 |       "dependencies": {
2625 |         "@radix-ui/number": "1.1.1",
2626 |         "@radix-ui/primitive": "1.1.2",
2627 |         "@radix-ui/react-collection": "1.1.7",
2628 |         "@radix-ui/react-compose-refs": "1.1.2",
2629 |         "@radix-ui/react-context": "1.1.2",
2630 |         "@radix-ui/react-direction": "1.1.1",
2631 |         "@radix-ui/react-dismissable-layer": "1.1.10",
2632 |         "@radix-ui/react-focus-guards": "1.1.2",
2633 |         "@radix-ui/react-focus-scope": "1.1.7",
2634 |         "@radix-ui/react-id": "1.1.1",
2635 |         "@radix-ui/react-popper": "1.2.7",
2636 |         "@radix-ui/react-portal": "1.1.9",
2637 |         "@radix-ui/react-primitive": "2.1.3",
2638 |         "@radix-ui/react-slot": "1.2.3",
2639 |         "@radix-ui/react-use-callback-ref": "1.1.1",
2640 |         "@radix-ui/react-use-controllable-state": "1.2.2",
2641 |         "@radix-ui/react-use-layout-effect": "1.1.1",
2642 |         "@radix-ui/react-use-previous": "1.1.1",
2643 |         "@radix-ui/react-visually-hidden": "1.2.3",
2644 |         "aria-hidden": "^1.2.4",
2645 |         "react-remove-scroll": "^2.6.3"
2646 |       },
2647 |       "peerDependencies": {
2648 |         "@types/react": "*",
2649 |         "@types/react-dom": "*",
2650 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2651 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2652 |       },
2653 |       "peerDependenciesMeta": {
2654 |         "@types/react": {
2655 |           "optional": true
2656 |         },
2657 |         "@types/react-dom": {
2658 |           "optional": true
2659 |         }
2660 |       }
2661 |     },
2662 |     "node_modules/@radix-ui/react-separator": {
2663 |       "version": "1.1.7",
2664 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-separator/-/react-separator-1.1.7.tgz",
2665 |       "integrity": "sha512-0HEb8R9E8A+jZjvmFCy/J4xhbXy3TV+9XSnGJ3KvTtjlIUy/YQ/p6UYZvi7YbeoeXdyU9+Y3scizK6hkY37baA==",
2666 |       "license": "MIT",
2667 |       "dependencies": {
2668 |         "@radix-ui/react-primitive": "2.1.3"
2669 |       },
2670 |       "peerDependencies": {
2671 |         "@types/react": "*",
2672 |         "@types/react-dom": "*",
2673 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2674 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2675 |       },
2676 |       "peerDependenciesMeta": {
2677 |         "@types/react": {
2678 |           "optional": true
2679 |         },
2680 |         "@types/react-dom": {
2681 |           "optional": true
2682 |         }
2683 |       }
2684 |     },
2685 |     "node_modules/@radix-ui/react-slot": {
2686 |       "version": "1.2.3",
2687 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-slot/-/react-slot-1.2.3.tgz",
2688 |       "integrity": "sha512-aeNmHnBxbi2St0au6VBVC7JXFlhLlOnvIIlePNniyUNAClzmtAUEY8/pBiK3iHjufOlwA+c20/8jngo7xcrg8A==",
2689 |       "license": "MIT",
2690 |       "dependencies": {
2691 |         "@radix-ui/react-compose-refs": "1.1.2"
2692 |       },
2693 |       "peerDependencies": {
2694 |         "@types/react": "*",
2695 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2696 |       },
2697 |       "peerDependenciesMeta": {
2698 |         "@types/react": {
2699 |           "optional": true
2700 |         }
2701 |       }
2702 |     },
2703 |     "node_modules/@radix-ui/react-switch": {
2704 |       "version": "1.2.5",
2705 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-switch/-/react-switch-1.2.5.tgz",
2706 |       "integrity": "sha512-5ijLkak6ZMylXsaImpZ8u4Rlf5grRmoc0p0QeX9VJtlrM4f5m3nCTX8tWga/zOA8PZYIR/t0p2Mnvd7InrJ6yQ==",
2707 |       "license": "MIT",
2708 |       "dependencies": {
2709 |         "@radix-ui/primitive": "1.1.2",
2710 |         "@radix-ui/react-compose-refs": "1.1.2",
2711 |         "@radix-ui/react-context": "1.1.2",
2712 |         "@radix-ui/react-primitive": "2.1.3",
2713 |         "@radix-ui/react-use-controllable-state": "1.2.2",
2714 |         "@radix-ui/react-use-previous": "1.1.1",
2715 |         "@radix-ui/react-use-size": "1.1.1"
2716 |       },
2717 |       "peerDependencies": {
2718 |         "@types/react": "*",
2719 |         "@types/react-dom": "*",
2720 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2721 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2722 |       },
2723 |       "peerDependenciesMeta": {
2724 |         "@types/react": {
2725 |           "optional": true
2726 |         },
2727 |         "@types/react-dom": {
2728 |           "optional": true
2729 |         }
2730 |       }
2731 |     },
2732 |     "node_modules/@radix-ui/react-tabs": {
2733 |       "version": "1.1.12",
2734 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-tabs/-/react-tabs-1.1.12.tgz",
2735 |       "integrity": "sha512-GTVAlRVrQrSw3cEARM0nAx73ixrWDPNZAruETn3oHCNP6SbZ/hNxdxp+u7VkIEv3/sFoLq1PfcHrl7Pnp0CDpw==",
2736 |       "license": "MIT",
2737 |       "dependencies": {
2738 |         "@radix-ui/primitive": "1.1.2",
2739 |         "@radix-ui/react-context": "1.1.2",
2740 |         "@radix-ui/react-direction": "1.1.1",
2741 |         "@radix-ui/react-id": "1.1.1",
2742 |         "@radix-ui/react-presence": "1.1.4",
2743 |         "@radix-ui/react-primitive": "2.1.3",
2744 |         "@radix-ui/react-roving-focus": "1.1.10",
2745 |         "@radix-ui/react-use-controllable-state": "1.2.2"
2746 |       },
2747 |       "peerDependencies": {
2748 |         "@types/react": "*",
2749 |         "@types/react-dom": "*",
2750 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2751 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2752 |       },
2753 |       "peerDependenciesMeta": {
2754 |         "@types/react": {
2755 |           "optional": true
2756 |         },
2757 |         "@types/react-dom": {
2758 |           "optional": true
2759 |         }
2760 |       }
2761 |     },
2762 |     "node_modules/@radix-ui/react-tooltip": {
2763 |       "version": "1.2.7",
2764 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-tooltip/-/react-tooltip-1.2.7.tgz",
2765 |       "integrity": "sha512-Ap+fNYwKTYJ9pzqW+Xe2HtMRbQ/EeWkj2qykZ6SuEV4iS/o1bZI5ssJbk4D2r8XuDuOBVz/tIx2JObtuqU+5Zw==",
2766 |       "license": "MIT",
2767 |       "dependencies": {
2768 |         "@radix-ui/primitive": "1.1.2",
2769 |         "@radix-ui/react-compose-refs": "1.1.2",
2770 |         "@radix-ui/react-context": "1.1.2",
2771 |         "@radix-ui/react-dismissable-layer": "1.1.10",
2772 |         "@radix-ui/react-id": "1.1.1",
2773 |         "@radix-ui/react-popper": "1.2.7",
2774 |         "@radix-ui/react-portal": "1.1.9",
2775 |         "@radix-ui/react-presence": "1.1.4",
2776 |         "@radix-ui/react-primitive": "2.1.3",
2777 |         "@radix-ui/react-slot": "1.2.3",
2778 |         "@radix-ui/react-use-controllable-state": "1.2.2",
2779 |         "@radix-ui/react-visually-hidden": "1.2.3"
2780 |       },
2781 |       "peerDependencies": {
2782 |         "@types/react": "*",
2783 |         "@types/react-dom": "*",
2784 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2785 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2786 |       },
2787 |       "peerDependenciesMeta": {
2788 |         "@types/react": {
2789 |           "optional": true
2790 |         },
2791 |         "@types/react-dom": {
2792 |           "optional": true
2793 |         }
2794 |       }
2795 |     },
2796 |     "node_modules/@radix-ui/react-use-callback-ref": {
2797 |       "version": "1.1.1",
2798 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-callback-ref/-/react-use-callback-ref-1.1.1.tgz",
2799 |       "integrity": "sha512-FkBMwD+qbGQeMu1cOHnuGB6x4yzPjho8ap5WtbEJ26umhgqVXbhekKUQO+hZEL1vU92a3wHwdp0HAcqAUF5iDg==",
2800 |       "license": "MIT",
2801 |       "peerDependencies": {
2802 |         "@types/react": "*",
2803 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2804 |       },
2805 |       "peerDependenciesMeta": {
2806 |         "@types/react": {
2807 |           "optional": true
2808 |         }
2809 |       }
2810 |     },
2811 |     "node_modules/@radix-ui/react-use-controllable-state": {
2812 |       "version": "1.2.2",
2813 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-controllable-state/-/react-use-controllable-state-1.2.2.tgz",
2814 |       "integrity": "sha512-BjasUjixPFdS+NKkypcyyN5Pmg83Olst0+c6vGov0diwTEo6mgdqVR6hxcEgFuh4QrAs7Rc+9KuGJ9TVCj0Zzg==",
2815 |       "license": "MIT",
2816 |       "dependencies": {
2817 |         "@radix-ui/react-use-effect-event": "0.0.2",
2818 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2819 |       },
2820 |       "peerDependencies": {
2821 |         "@types/react": "*",
2822 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2823 |       },
2824 |       "peerDependenciesMeta": {
2825 |         "@types/react": {
2826 |           "optional": true
2827 |         }
2828 |       }
2829 |     },
2830 |     "node_modules/@radix-ui/react-use-effect-event": {
2831 |       "version": "0.0.2",
2832 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-effect-event/-/react-use-effect-event-0.0.2.tgz",
2833 |       "integrity": "sha512-Qp8WbZOBe+blgpuUT+lw2xheLP8q0oatc9UpmiemEICxGvFLYmHm9QowVZGHtJlGbS6A6yJ3iViad/2cVjnOiA==",
2834 |       "license": "MIT",
2835 |       "dependencies": {
2836 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2837 |       },
2838 |       "peerDependencies": {
2839 |         "@types/react": "*",
2840 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2841 |       },
2842 |       "peerDependenciesMeta": {
2843 |         "@types/react": {
2844 |           "optional": true
2845 |         }
2846 |       }
2847 |     },
2848 |     "node_modules/@radix-ui/react-use-escape-keydown": {
2849 |       "version": "1.1.1",
2850 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-escape-keydown/-/react-use-escape-keydown-1.1.1.tgz",
2851 |       "integrity": "sha512-Il0+boE7w/XebUHyBjroE+DbByORGR9KKmITzbR7MyQ4akpORYP/ZmbhAr0DG7RmmBqoOnZdy2QlvajJ2QA59g==",
2852 |       "license": "MIT",
2853 |       "dependencies": {
2854 |         "@radix-ui/react-use-callback-ref": "1.1.1"
2855 |       },
2856 |       "peerDependencies": {
2857 |         "@types/react": "*",
2858 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2859 |       },
2860 |       "peerDependenciesMeta": {
2861 |         "@types/react": {
2862 |           "optional": true
2863 |         }
2864 |       }
2865 |     },
2866 |     "node_modules/@radix-ui/react-use-is-hydrated": {
2867 |       "version": "0.1.0",
2868 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-is-hydrated/-/react-use-is-hydrated-0.1.0.tgz",
2869 |       "integrity": "sha512-U+UORVEq+cTnRIaostJv9AGdV3G6Y+zbVd+12e18jQ5A3c0xL03IhnHuiU4UV69wolOQp5GfR58NW/EgdQhwOA==",
2870 |       "license": "MIT",
2871 |       "dependencies": {
2872 |         "use-sync-external-store": "^1.5.0"
2873 |       },
2874 |       "peerDependencies": {
2875 |         "@types/react": "*",
2876 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2877 |       },
2878 |       "peerDependenciesMeta": {
2879 |         "@types/react": {
2880 |           "optional": true
2881 |         }
2882 |       }
2883 |     },
2884 |     "node_modules/@radix-ui/react-use-layout-effect": {
2885 |       "version": "1.1.1",
2886 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-layout-effect/-/react-use-layout-effect-1.1.1.tgz",
2887 |       "integrity": "sha512-RbJRS4UWQFkzHTTwVymMTUv8EqYhOp8dOOviLj2ugtTiXRaRQS7GLGxZTLL1jWhMeoSCf5zmcZkqTl9IiYfXcQ==",
2888 |       "license": "MIT",
2889 |       "peerDependencies": {
2890 |         "@types/react": "*",
2891 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2892 |       },
2893 |       "peerDependenciesMeta": {
2894 |         "@types/react": {
2895 |           "optional": true
2896 |         }
2897 |       }
2898 |     },
2899 |     "node_modules/@radix-ui/react-use-previous": {
2900 |       "version": "1.1.1",
2901 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-previous/-/react-use-previous-1.1.1.tgz",
2902 |       "integrity": "sha512-2dHfToCj/pzca2Ck724OZ5L0EVrr3eHRNsG/b3xQJLA2hZpVCS99bLAX+hm1IHXDEnzU6by5z/5MIY794/a8NQ==",
2903 |       "license": "MIT",
2904 |       "peerDependencies": {
2905 |         "@types/react": "*",
2906 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2907 |       },
2908 |       "peerDependenciesMeta": {
2909 |         "@types/react": {
2910 |           "optional": true
2911 |         }
2912 |       }
2913 |     },
2914 |     "node_modules/@radix-ui/react-use-rect": {
2915 |       "version": "1.1.1",
2916 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-rect/-/react-use-rect-1.1.1.tgz",
2917 |       "integrity": "sha512-QTYuDesS0VtuHNNvMh+CjlKJ4LJickCMUAqjlE3+j8w+RlRpwyX3apEQKGFzbZGdo7XNG1tXa+bQqIE7HIXT2w==",
2918 |       "license": "MIT",
2919 |       "dependencies": {
2920 |         "@radix-ui/rect": "1.1.1"
2921 |       },
2922 |       "peerDependencies": {
2923 |         "@types/react": "*",
2924 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2925 |       },
2926 |       "peerDependenciesMeta": {
2927 |         "@types/react": {
2928 |           "optional": true
2929 |         }
2930 |       }
2931 |     },
2932 |     "node_modules/@radix-ui/react-use-size": {
2933 |       "version": "1.1.1",
2934 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-use-size/-/react-use-size-1.1.1.tgz",
2935 |       "integrity": "sha512-ewrXRDTAqAXlkl6t/fkXWNAhFX9I+CkKlw6zjEwk86RSPKwZr3xpBRso655aqYafwtnbpHLj6toFzmd6xdVptQ==",
2936 |       "license": "MIT",
2937 |       "dependencies": {
2938 |         "@radix-ui/react-use-layout-effect": "1.1.1"
2939 |       },
2940 |       "peerDependencies": {
2941 |         "@types/react": "*",
2942 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2943 |       },
2944 |       "peerDependenciesMeta": {
2945 |         "@types/react": {
2946 |           "optional": true
2947 |         }
2948 |       }
2949 |     },
2950 |     "node_modules/@radix-ui/react-visually-hidden": {
2951 |       "version": "1.2.3",
2952 |       "resolved": "https://registry.npmjs.org/@radix-ui/react-visually-hidden/-/react-visually-hidden-1.2.3.tgz",
2953 |       "integrity": "sha512-pzJq12tEaaIhqjbzpCuv/OypJY/BPavOofm+dbab+MHLajy277+1lLm6JFcGgF5eskJ6mquGirhXY2GD/8u8Ug==",
2954 |       "license": "MIT",
2955 |       "dependencies": {
2956 |         "@radix-ui/react-primitive": "2.1.3"
2957 |       },
2958 |       "peerDependencies": {
2959 |         "@types/react": "*",
2960 |         "@types/react-dom": "*",
2961 |         "react": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc",
2962 |         "react-dom": "^16.8 || ^17.0 || ^18.0 || ^19.0 || ^19.0.0-rc"
2963 |       },
2964 |       "peerDependenciesMeta": {
2965 |         "@types/react": {
2966 |           "optional": true
2967 |         },
2968 |         "@types/react-dom": {
2969 |           "optional": true
2970 |         }
2971 |       }
2972 |     },
2973 |     "node_modules/@radix-ui/rect": {
2974 |       "version": "1.1.1",
2975 |       "resolved": "https://registry.npmjs.org/@radix-ui/rect/-/rect-1.1.1.tgz",
2976 |       "integrity": "sha512-HPwpGIzkl28mWyZqG52jiqDJ12waP11Pa1lGoiyUkIEuMLBP0oeK/C89esbXrxsky5we7dfd8U58nm0SgAWpVw==",
2977 |       "license": "MIT"
2978 |     },
2979 |     "node_modules/@rtsao/scc": {
2980 |       "version": "1.1.0",
2981 |       "resolved": "https://registry.npmjs.org/@rtsao/scc/-/scc-1.1.0.tgz",
2982 |       "integrity": "sha512-zt6OdqaDoOnJ1ZYsCYGt9YmWzDXl4vQdKTyJev62gFhRGKdx7mcT54V9KIjg+d2wi9EXsPvAPKe7i7WjfVWB8g==",
2983 |       "dev": true,
2984 |       "license": "MIT"
2985 |     },
2986 |     "node_modules/@rushstack/eslint-patch": {
2987 |       "version": "1.12.0",
2988 |       "resolved": "https://registry.npmjs.org/@rushstack/eslint-patch/-/eslint-patch-1.12.0.tgz",
2989 |       "integrity": "sha512-5EwMtOqvJMMa3HbmxLlF74e+3/HhwBTMcvt3nqVJgGCozO6hzIPOBlwm8mGVNR9SN2IJpxSnlxczyDjcn7qIyw==",
2990 |       "dev": true,
2991 |       "license": "MIT"
2992 |     },
2993 |     "node_modules/@standard-schema/utils": {
2994 |       "version": "0.3.0",
2995 |       "resolved": "https://registry.npmjs.org/@standard-schema/utils/-/utils-0.3.0.tgz",
2996 |       "integrity": "sha512-e7Mew686owMaPJVNNLs55PUvgz371nKgwsc4vxE49zsODpJEnxgxRo2y/OKrqueavXgZNMDVj3DdHFlaSAeU8g==",
2997 |       "license": "MIT"
2998 |     },
2999 |     "node_modules/@swc/helpers": {
3000 |       "version": "0.5.15",
3001 |       "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.5.15.tgz",
3002 |       "integrity": "sha512-JQ5TuMi45Owi4/BIMAJBoSQoOJu12oOk/gADqlcUL9JEdHB8vyjUSsxqeNXnmXHjYKMi2WcYtezGEEhqUI/E2g==",
3003 |       "license": "Apache-2.0",
3004 |       "dependencies": {
3005 |         "tslib": "^2.8.0"
3006 |       }
3007 |     },
3008 |     "node_modules/@t3-oss/env-core": {
3009 |       "version": "0.13.8",
3010 |       "resolved": "https://registry.npmjs.org/@t3-oss/env-core/-/env-core-0.13.8.tgz",
3011 |       "integrity": "sha512-L1inmpzLQyYu4+Q1DyrXsGJYCXbtXjC4cICw1uAKv0ppYPQv656lhZPU91Qd1VS6SO/bou1/q5ufVzBGbNsUpw==",
3012 |       "license": "MIT",
3013 |       "peerDependencies": {
3014 |         "arktype": "^2.1.0",
3015 |         "typescript": ">=5.0.0",
3016 |         "valibot": "^1.0.0-beta.7 || ^1.0.0",
3017 |         "zod": "^3.24.0 || ^4.0.0-beta.0"
3018 |       },
3019 |       "peerDependenciesMeta": {
3020 |         "arktype": {
3021 |           "optional": true
3022 |         },
3023 |         "typescript": {
3024 |           "optional": true
3025 |         },
3026 |         "valibot": {
3027 |           "optional": true
3028 |         },
3029 |         "zod": {
3030 |           "optional": true
3031 |         }
3032 |       }
3033 |     },
3034 |     "node_modules/@t3-oss/env-nextjs": {
3035 |       "version": "0.13.8",
3036 |       "resolved": "https://registry.npmjs.org/@t3-oss/env-nextjs/-/env-nextjs-0.13.8.tgz",
3037 |       "integrity": "sha512-QmTLnsdQJ8BiQad2W2nvV6oUpH4oMZMqnFEjhVpzU0h3sI9hn8zb8crjWJ1Amq453mGZs6A4v4ihIeBFDOrLeQ==",
3038 |       "license": "MIT",
3039 |       "dependencies": {
3040 |         "@t3-oss/env-core": "0.13.8"
3041 |       },
3042 |       "peerDependencies": {
3043 |         "arktype": "^2.1.0",
3044 |         "typescript": ">=5.0.0",
3045 |         "valibot": "^1.0.0-beta.7 || ^1.0.0",
3046 |         "zod": "^3.24.0 || ^4.0.0-beta.0"
3047 |       },
3048 |       "peerDependenciesMeta": {
3049 |         "arktype": {
3050 |           "optional": true
3051 |         },
3052 |         "typescript": {
3053 |           "optional": true
3054 |         },
3055 |         "valibot": {
3056 |           "optional": true
3057 |         },
3058 |         "zod": {
3059 |           "optional": true
3060 |         }
3061 |       }
3062 |     },
3063 |     "node_modules/@tailwindcss/node": {
3064 |       "version": "4.1.11",
3065 |       "resolved": "https://registry.npmjs.org/@tailwindcss/node/-/node-4.1.11.tgz",
3066 |       "integrity": "sha512-yzhzuGRmv5QyU9qLNg4GTlYI6STedBWRE7NjxP45CsFYYq9taI0zJXZBMqIC/c8fViNLhmrbpSFS57EoxUmD6Q==",
3067 |       "dev": true,
3068 |       "license": "MIT",
3069 |       "dependencies": {
3070 |         "@ampproject/remapping": "^2.3.0",
3071 |         "enhanced-resolve": "^5.18.1",
3072 |         "jiti": "^2.4.2",
3073 |         "lightningcss": "1.30.1",
3074 |         "magic-string": "^0.30.17",
3075 |         "source-map-js": "^1.2.1",
3076 |         "tailwindcss": "4.1.11"
3077 |       }
3078 |     },
3079 |     "node_modules/@tailwindcss/oxide": {
3080 |       "version": "4.1.11",
3081 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide/-/oxide-4.1.11.tgz",
3082 |       "integrity": "sha512-Q69XzrtAhuyfHo+5/HMgr1lAiPP/G40OMFAnws7xcFEYqcypZmdW8eGXaOUIeOl1dzPJBPENXgbjsOyhg2nkrg==",
3083 |       "dev": true,
3084 |       "hasInstallScript": true,
3085 |       "license": "MIT",
3086 |       "dependencies": {
3087 |         "detect-libc": "^2.0.4",
3088 |         "tar": "^7.4.3"
3089 |       },
3090 |       "engines": {
3091 |         "node": ">= 10"
3092 |       },
3093 |       "optionalDependencies": {
3094 |         "@tailwindcss/oxide-android-arm64": "4.1.11",
3095 |         "@tailwindcss/oxide-darwin-arm64": "4.1.11",
3096 |         "@tailwindcss/oxide-darwin-x64": "4.1.11",
3097 |         "@tailwindcss/oxide-freebsd-x64": "4.1.11",
3098 |         "@tailwindcss/oxide-linux-arm-gnueabihf": "4.1.11",
3099 |         "@tailwindcss/oxide-linux-arm64-gnu": "4.1.11",
3100 |         "@tailwindcss/oxide-linux-arm64-musl": "4.1.11",
3101 |         "@tailwindcss/oxide-linux-x64-gnu": "4.1.11",
3102 |         "@tailwindcss/oxide-linux-x64-musl": "4.1.11",
3103 |         "@tailwindcss/oxide-wasm32-wasi": "4.1.11",
3104 |         "@tailwindcss/oxide-win32-arm64-msvc": "4.1.11",
3105 |         "@tailwindcss/oxide-win32-x64-msvc": "4.1.11"
3106 |       }
3107 |     },
3108 |     "node_modules/@tailwindcss/oxide-android-arm64": {
3109 |       "version": "4.1.11",
3110 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-android-arm64/-/oxide-android-arm64-4.1.11.tgz",
3111 |       "integrity": "sha512-3IfFuATVRUMZZprEIx9OGDjG3Ou3jG4xQzNTvjDoKmU9JdmoCohQJ83MYd0GPnQIu89YoJqvMM0G3uqLRFtetg==",
3112 |       "cpu": [
3113 |         "arm64"
3114 |       ],
3115 |       "dev": true,
3116 |       "license": "MIT",
3117 |       "optional": true,
3118 |       "os": [
3119 |         "android"
3120 |       ],
3121 |       "engines": {
3122 |         "node": ">= 10"
3123 |       }
3124 |     },
3125 |     "node_modules/@tailwindcss/oxide-darwin-arm64": {
3126 |       "version": "4.1.11",
3127 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-darwin-arm64/-/oxide-darwin-arm64-4.1.11.tgz",
3128 |       "integrity": "sha512-ESgStEOEsyg8J5YcMb1xl8WFOXfeBmrhAwGsFxxB2CxY9evy63+AtpbDLAyRkJnxLy2WsD1qF13E97uQyP1lfQ==",
3129 |       "cpu": [
3130 |         "arm64"
3131 |       ],
3132 |       "dev": true,
3133 |       "license": "MIT",
3134 |       "optional": true,
3135 |       "os": [
3136 |         "darwin"
3137 |       ],
3138 |       "engines": {
3139 |         "node": ">= 10"
3140 |       }
3141 |     },
3142 |     "node_modules/@tailwindcss/oxide-darwin-x64": {
3143 |       "version": "4.1.11",
3144 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-darwin-x64/-/oxide-darwin-x64-4.1.11.tgz",
3145 |       "integrity": "sha512-EgnK8kRchgmgzG6jE10UQNaH9Mwi2n+yw1jWmof9Vyg2lpKNX2ioe7CJdf9M5f8V9uaQxInenZkOxnTVL3fhAw==",
3146 |       "cpu": [
3147 |         "x64"
3148 |       ],
3149 |       "dev": true,
3150 |       "license": "MIT",
3151 |       "optional": true,
3152 |       "os": [
3153 |         "darwin"
3154 |       ],
3155 |       "engines": {
3156 |         "node": ">= 10"
3157 |       }
3158 |     },
3159 |     "node_modules/@tailwindcss/oxide-freebsd-x64": {
3160 |       "version": "4.1.11",
3161 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-freebsd-x64/-/oxide-freebsd-x64-4.1.11.tgz",
3162 |       "integrity": "sha512-xdqKtbpHs7pQhIKmqVpxStnY1skuNh4CtbcyOHeX1YBE0hArj2romsFGb6yUmzkq/6M24nkxDqU8GYrKrz+UcA==",
3163 |       "cpu": [
3164 |         "x64"
3165 |       ],
3166 |       "dev": true,
3167 |       "license": "MIT",
3168 |       "optional": true,
3169 |       "os": [
3170 |         "freebsd"
3171 |       ],
3172 |       "engines": {
3173 |         "node": ">= 10"
3174 |       }
3175 |     },
3176 |     "node_modules/@tailwindcss/oxide-linux-arm-gnueabihf": {
3177 |       "version": "4.1.11",
3178 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-arm-gnueabihf/-/oxide-linux-arm-gnueabihf-4.1.11.tgz",
3179 |       "integrity": "sha512-ryHQK2eyDYYMwB5wZL46uoxz2zzDZsFBwfjssgB7pzytAeCCa6glsiJGjhTEddq/4OsIjsLNMAiMlHNYnkEEeg==",
3180 |       "cpu": [
3181 |         "arm"
3182 |       ],
3183 |       "dev": true,
3184 |       "license": "MIT",
3185 |       "optional": true,
3186 |       "os": [
3187 |         "linux"
3188 |       ],
3189 |       "engines": {
3190 |         "node": ">= 10"
3191 |       }
3192 |     },
3193 |     "node_modules/@tailwindcss/oxide-linux-arm64-gnu": {
3194 |       "version": "4.1.11",
3195 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-arm64-gnu/-/oxide-linux-arm64-gnu-4.1.11.tgz",
3196 |       "integrity": "sha512-mYwqheq4BXF83j/w75ewkPJmPZIqqP1nhoghS9D57CLjsh3Nfq0m4ftTotRYtGnZd3eCztgbSPJ9QhfC91gDZQ==",
3197 |       "cpu": [
3198 |         "arm64"
3199 |       ],
3200 |       "dev": true,
3201 |       "license": "MIT",
3202 |       "optional": true,
3203 |       "os": [
3204 |         "linux"
3205 |       ],
3206 |       "engines": {
3207 |         "node": ">= 10"
3208 |       }
3209 |     },
3210 |     "node_modules/@tailwindcss/oxide-linux-arm64-musl": {
3211 |       "version": "4.1.11",
3212 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-arm64-musl/-/oxide-linux-arm64-musl-4.1.11.tgz",
3213 |       "integrity": "sha512-m/NVRFNGlEHJrNVk3O6I9ggVuNjXHIPoD6bqay/pubtYC9QIdAMpS+cswZQPBLvVvEF6GtSNONbDkZrjWZXYNQ==",
3214 |       "cpu": [
3215 |         "arm64"
3216 |       ],
3217 |       "dev": true,
3218 |       "license": "MIT",
3219 |       "optional": true,
3220 |       "os": [
3221 |         "linux"
3222 |       ],
3223 |       "engines": {
3224 |         "node": ">= 10"
3225 |       }
3226 |     },
3227 |     "node_modules/@tailwindcss/oxide-linux-x64-gnu": {
3228 |       "version": "4.1.11",
3229 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-x64-gnu/-/oxide-linux-x64-gnu-4.1.11.tgz",
3230 |       "integrity": "sha512-YW6sblI7xukSD2TdbbaeQVDysIm/UPJtObHJHKxDEcW2exAtY47j52f8jZXkqE1krdnkhCMGqP3dbniu1Te2Fg==",
3231 |       "cpu": [
3232 |         "x64"
3233 |       ],
3234 |       "dev": true,
3235 |       "license": "MIT",
3236 |       "optional": true,
3237 |       "os": [
3238 |         "linux"
3239 |       ],
3240 |       "engines": {
3241 |         "node": ">= 10"
3242 |       }
3243 |     },
3244 |     "node_modules/@tailwindcss/oxide-linux-x64-musl": {
3245 |       "version": "4.1.11",
3246 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-linux-x64-musl/-/oxide-linux-x64-musl-4.1.11.tgz",
3247 |       "integrity": "sha512-e3C/RRhGunWYNC3aSF7exsQkdXzQ/M+aYuZHKnw4U7KQwTJotnWsGOIVih0s2qQzmEzOFIJ3+xt7iq67K/p56Q==",
3248 |       "cpu": [
3249 |         "x64"
3250 |       ],
3251 |       "dev": true,
3252 |       "license": "MIT",
3253 |       "optional": true,
3254 |       "os": [
3255 |         "linux"
3256 |       ],
3257 |       "engines": {
3258 |         "node": ">= 10"
3259 |       }
3260 |     },
3261 |     "node_modules/@tailwindcss/oxide-wasm32-wasi": {
3262 |       "version": "4.1.11",
3263 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-wasm32-wasi/-/oxide-wasm32-wasi-4.1.11.tgz",
3264 |       "integrity": "sha512-Xo1+/GU0JEN/C/dvcammKHzeM6NqKovG+6921MR6oadee5XPBaKOumrJCXvopJ/Qb5TH7LX/UAywbqrP4lax0g==",
3265 |       "bundleDependencies": [
3266 |         "@napi-rs/wasm-runtime",
3267 |         "@emnapi/core",
3268 |         "@emnapi/runtime",
3269 |         "@tybys/wasm-util",
3270 |         "@emnapi/wasi-threads",
3271 |         "tslib"
3272 |       ],
3273 |       "cpu": [
3274 |         "wasm32"
3275 |       ],
3276 |       "dev": true,
3277 |       "license": "MIT",
3278 |       "optional": true,
3279 |       "dependencies": {
3280 |         "@emnapi/core": "^1.4.3",
3281 |         "@emnapi/runtime": "^1.4.3",
3282 |         "@emnapi/wasi-threads": "^1.0.2",
3283 |         "@napi-rs/wasm-runtime": "^0.2.11",
3284 |         "@tybys/wasm-util": "^0.9.0",
3285 |         "tslib": "^2.8.0"
3286 |       },
3287 |       "engines": {
3288 |         "node": ">=14.0.0"
3289 |       }
3290 |     },
3291 |     "node_modules/@tailwindcss/oxide-win32-arm64-msvc": {
3292 |       "version": "4.1.11",
3293 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-win32-arm64-msvc/-/oxide-win32-arm64-msvc-4.1.11.tgz",
3294 |       "integrity": "sha512-UgKYx5PwEKrac3GPNPf6HVMNhUIGuUh4wlDFR2jYYdkX6pL/rn73zTq/4pzUm8fOjAn5L8zDeHp9iXmUGOXZ+w==",
3295 |       "cpu": [
3296 |         "arm64"
3297 |       ],
3298 |       "dev": true,
3299 |       "license": "MIT",
3300 |       "optional": true,
3301 |       "os": [
3302 |         "win32"
3303 |       ],
3304 |       "engines": {
3305 |         "node": ">= 10"
3306 |       }
3307 |     },
3308 |     "node_modules/@tailwindcss/oxide-win32-x64-msvc": {
3309 |       "version": "4.1.11",
3310 |       "resolved": "https://registry.npmjs.org/@tailwindcss/oxide-win32-x64-msvc/-/oxide-win32-x64-msvc-4.1.11.tgz",
3311 |       "integrity": "sha512-YfHoggn1j0LK7wR82TOucWc5LDCguHnoS879idHekmmiR7g9HUtMw9MI0NHatS28u/Xlkfi9w5RJWgz2Dl+5Qg==",
3312 |       "cpu": [
3313 |         "x64"
3314 |       ],
3315 |       "dev": true,
3316 |       "license": "MIT",
3317 |       "optional": true,
3318 |       "os": [
3319 |         "win32"
3320 |       ],
3321 |       "engines": {
3322 |         "node": ">= 10"
3323 |       }
3324 |     },
3325 |     "node_modules/@tailwindcss/postcss": {
3326 |       "version": "4.1.11",
3327 |       "resolved": "https://registry.npmjs.org/@tailwindcss/postcss/-/postcss-4.1.11.tgz",
3328 |       "integrity": "sha512-q/EAIIpF6WpLhKEuQSEVMZNMIY8KhWoAemZ9eylNAih9jxMGAYPPWBn3I9QL/2jZ+e7OEz/tZkX5HwbBR4HohA==",
3329 |       "dev": true,
3330 |       "license": "MIT",
3331 |       "dependencies": {
3332 |         "@alloc/quick-lru": "^5.2.0",
3333 |         "@tailwindcss/node": "4.1.11",
3334 |         "@tailwindcss/oxide": "4.1.11",
3335 |         "postcss": "^8.4.41",
3336 |         "tailwindcss": "4.1.11"
3337 |       }
3338 |     },
3339 |     "node_modules/@tanstack/react-table": {
3340 |       "version": "8.21.3",
3341 |       "resolved": "https://registry.npmjs.org/@tanstack/react-table/-/react-table-8.21.3.tgz",
3342 |       "integrity": "sha512-5nNMTSETP4ykGegmVkhjcS8tTLW6Vl4axfEGQN3v0zdHYbK4UfoqfPChclTrJ4EoK9QynqAu9oUf8VEmrpZ5Ww==",
3343 |       "license": "MIT",
3344 |       "dependencies": {
3345 |         "@tanstack/table-core": "8.21.3"
3346 |       },
3347 |       "engines": {
3348 |         "node": ">=12"
3349 |       },
3350 |       "funding": {
3351 |         "type": "github",
3352 |         "url": "https://github.com/sponsors/tannerlinsley"
3353 |       },
3354 |       "peerDependencies": {
3355 |         "react": ">=16.8",
3356 |         "react-dom": ">=16.8"
3357 |       }
3358 |     },
3359 |     "node_modules/@tanstack/table-core": {
3360 |       "version": "8.21.3",
3361 |       "resolved": "https://registry.npmjs.org/@tanstack/table-core/-/table-core-8.21.3.tgz",
3362 |       "integrity": "sha512-ldZXEhOBb8Is7xLs01fR3YEc3DERiz5silj8tnGkFZytt1abEvl/GhUmCE0PMLaMPTa3Jk4HbKmRlHmu+gCftg==",
3363 |       "license": "MIT",
3364 |       "engines": {
3365 |         "node": ">=12"
3366 |       },
3367 |       "funding": {
3368 |         "type": "github",
3369 |         "url": "https://github.com/sponsors/tannerlinsley"
3370 |       }
3371 |     },
3372 |     "node_modules/@tybys/wasm-util": {
3373 |       "version": "0.10.0",
3374 |       "resolved": "https://registry.npmjs.org/@tybys/wasm-util/-/wasm-util-0.10.0.tgz",
3375 |       "integrity": "sha512-VyyPYFlOMNylG45GoAe0xDoLwWuowvf92F9kySqzYh8vmYm7D2u4iUJKa1tOUpS70Ku13ASrOkS4ScXFsTaCNQ==",
3376 |       "dev": true,
3377 |       "license": "MIT",
3378 |       "optional": true,
3379 |       "dependencies": {
3380 |         "tslib": "^2.4.0"
3381 |       }
3382 |     },
3383 |     "node_modules/@types/bcrypt": {
3384 |       "version": "6.0.0",
3385 |       "resolved": "https://registry.npmjs.org/@types/bcrypt/-/bcrypt-6.0.0.tgz",
3386 |       "integrity": "sha512-/oJGukuH3D2+D+3H4JWLaAsJ/ji86dhRidzZ/Od7H/i8g+aCmvkeCc6Ni/f9uxGLSQVCRZkX2/lqEFG2BvWtlQ==",
3387 |       "dev": true,
3388 |       "license": "MIT",
3389 |       "dependencies": {
3390 |         "@types/node": "*"
3391 |       }
3392 |     },
3393 |     "node_modules/@types/estree": {
3394 |       "version": "1.0.8",
3395 |       "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
3396 |       "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
3397 |       "dev": true,
3398 |       "license": "MIT"
3399 |     },
3400 |     "node_modules/@types/json-schema": {
3401 |       "version": "7.0.15",
3402 |       "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
3403 |       "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
3404 |       "dev": true,
3405 |       "license": "MIT"
3406 |     },
3407 |     "node_modules/@types/json5": {
3408 |       "version": "0.0.29",
3409 |       "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
3410 |       "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
3411 |       "dev": true,
3412 |       "license": "MIT"
3413 |     },
3414 |     "node_modules/@types/jsonwebtoken": {
3415 |       "version": "9.0.10",
3416 |       "resolved": "https://registry.npmjs.org/@types/jsonwebtoken/-/jsonwebtoken-9.0.10.tgz",
3417 |       "integrity": "sha512-asx5hIG9Qmf/1oStypjanR7iKTv0gXQ1Ov/jfrX6kS/EO0OFni8orbmGCn0672NHR3kXHwpAwR+B368ZGN/2rA==",
3418 |       "dev": true,
3419 |       "license": "MIT",
3420 |       "dependencies": {
3421 |         "@types/ms": "*",
3422 |         "@types/node": "*"
3423 |       }
3424 |     },
3425 |     "node_modules/@types/ms": {
3426 |       "version": "2.1.0",
3427 |       "resolved": "https://registry.npmjs.org/@types/ms/-/ms-2.1.0.tgz",
3428 |       "integrity": "sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==",
3429 |       "dev": true,
3430 |       "license": "MIT"
3431 |     },
3432 |     "node_modules/@types/node": {
3433 |       "version": "20.19.9",
3434 |       "resolved": "https://registry.npmjs.org/@types/node/-/node-20.19.9.tgz",
3435 |       "integrity": "sha512-cuVNgarYWZqxRJDQHEB58GEONhOK79QVR/qYx4S7kcUObQvUwvFnYxJuuHUKm2aieN9X3yZB4LZsuYNU1Qphsw==",
3436 |       "license": "MIT",
3437 |       "dependencies": {
3438 |         "undici-types": "~6.21.0"
3439 |       }
3440 |     },
3441 |     "node_modules/@types/pg": {
3442 |       "version": "8.15.4",
3443 |       "resolved": "https://registry.npmjs.org/@types/pg/-/pg-8.15.4.tgz",
3444 |       "integrity": "sha512-I6UNVBAoYbvuWkkU3oosC8yxqH21f4/Jc4DK71JLG3dT2mdlGe1z+ep/LQGXaKaOgcvUrsQoPRqfgtMcvZiJhg==",
3445 |       "license": "MIT",
3446 |       "dependencies": {
3447 |         "@types/node": "*",
3448 |         "pg-protocol": "*",
3449 |         "pg-types": "^2.2.0"
3450 |       }
3451 |     },
3452 |     "node_modules/@types/react": {
3453 |       "version": "19.1.8",
3454 |       "resolved": "https://registry.npmjs.org/@types/react/-/react-19.1.8.tgz",
3455 |       "integrity": "sha512-AwAfQ2Wa5bCx9WP8nZL2uMZWod7J7/JSplxbTmBQ5ms6QpqNYm672H0Vu9ZVKVngQ+ii4R/byguVEUZQyeg44g==",
3456 |       "devOptional": true,
3457 |       "license": "MIT",
3458 |       "dependencies": {
3459 |         "csstype": "^3.0.2"
3460 |       }
3461 |     },
3462 |     "node_modules/@types/react-dom": {
3463 |       "version": "19.1.6",
3464 |       "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.1.6.tgz",
3465 |       "integrity": "sha512-4hOiT/dwO8Ko0gV1m/TJZYk3y0KBnY9vzDh7W+DH17b2HFSOGgdj33dhihPeuy3l0q23+4e+hoXHV6hCC4dCXw==",
3466 |       "devOptional": true,
3467 |       "license": "MIT",
3468 |       "peerDependencies": {
3469 |         "@types/react": "^19.0.0"
3470 |       }
3471 |     },
3472 |     "node_modules/@typescript-eslint/eslint-plugin": {
3473 |       "version": "8.38.0",
3474 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.38.0.tgz",
3475 |       "integrity": "sha512-CPoznzpuAnIOl4nhj4tRr4gIPj5AfKgkiJmGQDaq+fQnRJTYlcBjbX3wbciGmpoPf8DREufuPRe1tNMZnGdanA==",
3476 |       "dev": true,
3477 |       "license": "MIT",
3478 |       "dependencies": {
3479 |         "@eslint-community/regexpp": "^4.10.0",
3480 |         "@typescript-eslint/scope-manager": "8.38.0",
3481 |         "@typescript-eslint/type-utils": "8.38.0",
3482 |         "@typescript-eslint/utils": "8.38.0",
3483 |         "@typescript-eslint/visitor-keys": "8.38.0",
3484 |         "graphemer": "^1.4.0",
3485 |         "ignore": "^7.0.0",
3486 |         "natural-compare": "^1.4.0",
3487 |         "ts-api-utils": "^2.1.0"
3488 |       },
3489 |       "engines": {
3490 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3491 |       },
3492 |       "funding": {
3493 |         "type": "opencollective",
3494 |         "url": "https://opencollective.com/typescript-eslint"
3495 |       },
3496 |       "peerDependencies": {
3497 |         "@typescript-eslint/parser": "^8.38.0",
3498 |         "eslint": "^8.57.0 || ^9.0.0",
3499 |         "typescript": ">=4.8.4 <5.9.0"
3500 |       }
3501 |     },
3502 |     "node_modules/@typescript-eslint/eslint-plugin/node_modules/ignore": {
3503 |       "version": "7.0.5",
3504 |       "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
3505 |       "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
3506 |       "dev": true,
3507 |       "license": "MIT",
3508 |       "engines": {
3509 |         "node": ">= 4"
3510 |       }
3511 |     },
3512 |     "node_modules/@typescript-eslint/parser": {
3513 |       "version": "8.38.0",
3514 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.38.0.tgz",
3515 |       "integrity": "sha512-Zhy8HCvBUEfBECzIl1PKqF4p11+d0aUJS1GeUiuqK9WmOug8YCmC4h4bjyBvMyAMI9sbRczmrYL5lKg/YMbrcQ==",
3516 |       "dev": true,
3517 |       "license": "MIT",
3518 |       "dependencies": {
3519 |         "@typescript-eslint/scope-manager": "8.38.0",
3520 |         "@typescript-eslint/types": "8.38.0",
3521 |         "@typescript-eslint/typescript-estree": "8.38.0",
3522 |         "@typescript-eslint/visitor-keys": "8.38.0",
3523 |         "debug": "^4.3.4"
3524 |       },
3525 |       "engines": {
3526 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3527 |       },
3528 |       "funding": {
3529 |         "type": "opencollective",
3530 |         "url": "https://opencollective.com/typescript-eslint"
3531 |       },
3532 |       "peerDependencies": {
3533 |         "eslint": "^8.57.0 || ^9.0.0",
3534 |         "typescript": ">=4.8.4 <5.9.0"
3535 |       }
3536 |     },
3537 |     "node_modules/@typescript-eslint/project-service": {
3538 |       "version": "8.38.0",
3539 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.38.0.tgz",
3540 |       "integrity": "sha512-dbK7Jvqcb8c9QfH01YB6pORpqX1mn5gDZc9n63Ak/+jD67oWXn3Gs0M6vddAN+eDXBCS5EmNWzbSxsn9SzFWWg==",
3541 |       "dev": true,
3542 |       "license": "MIT",
3543 |       "dependencies": {
3544 |         "@typescript-eslint/tsconfig-utils": "^8.38.0",
3545 |         "@typescript-eslint/types": "^8.38.0",
3546 |         "debug": "^4.3.4"
3547 |       },
3548 |       "engines": {
3549 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3550 |       },
3551 |       "funding": {
3552 |         "type": "opencollective",
3553 |         "url": "https://opencollective.com/typescript-eslint"
3554 |       },
3555 |       "peerDependencies": {
3556 |         "typescript": ">=4.8.4 <5.9.0"
3557 |       }
3558 |     },
3559 |     "node_modules/@typescript-eslint/scope-manager": {
3560 |       "version": "8.38.0",
3561 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.38.0.tgz",
3562 |       "integrity": "sha512-WJw3AVlFFcdT9Ri1xs/lg8LwDqgekWXWhH3iAF+1ZM+QPd7oxQ6jvtW/JPwzAScxitILUIFs0/AnQ/UWHzbATQ==",
3563 |       "dev": true,
3564 |       "license": "MIT",
3565 |       "dependencies": {
3566 |         "@typescript-eslint/types": "8.38.0",
3567 |         "@typescript-eslint/visitor-keys": "8.38.0"
3568 |       },
3569 |       "engines": {
3570 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3571 |       },
3572 |       "funding": {
3573 |         "type": "opencollective",
3574 |         "url": "https://opencollective.com/typescript-eslint"
3575 |       }
3576 |     },
3577 |     "node_modules/@typescript-eslint/tsconfig-utils": {
3578 |       "version": "8.38.0",
3579 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.38.0.tgz",
3580 |       "integrity": "sha512-Lum9RtSE3EroKk/bYns+sPOodqb2Fv50XOl/gMviMKNvanETUuUcC9ObRbzrJ4VSd2JalPqgSAavwrPiPvnAiQ==",
3581 |       "dev": true,
3582 |       "license": "MIT",
3583 |       "engines": {
3584 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3585 |       },
3586 |       "funding": {
3587 |         "type": "opencollective",
3588 |         "url": "https://opencollective.com/typescript-eslint"
3589 |       },
3590 |       "peerDependencies": {
3591 |         "typescript": ">=4.8.4 <5.9.0"
3592 |       }
3593 |     },
3594 |     "node_modules/@typescript-eslint/type-utils": {
3595 |       "version": "8.38.0",
3596 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.38.0.tgz",
3597 |       "integrity": "sha512-c7jAvGEZVf0ao2z+nnz8BUaHZD09Agbh+DY7qvBQqLiz8uJzRgVPj5YvOh8I8uEiH8oIUGIfHzMwUcGVco/SJg==",
3598 |       "dev": true,
3599 |       "license": "MIT",
3600 |       "dependencies": {
3601 |         "@typescript-eslint/types": "8.38.0",
3602 |         "@typescript-eslint/typescript-estree": "8.38.0",
3603 |         "@typescript-eslint/utils": "8.38.0",
3604 |         "debug": "^4.3.4",
3605 |         "ts-api-utils": "^2.1.0"
3606 |       },
3607 |       "engines": {
3608 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3609 |       },
3610 |       "funding": {
3611 |         "type": "opencollective",
3612 |         "url": "https://opencollective.com/typescript-eslint"
3613 |       },
3614 |       "peerDependencies": {
3615 |         "eslint": "^8.57.0 || ^9.0.0",
3616 |         "typescript": ">=4.8.4 <5.9.0"
3617 |       }
3618 |     },
3619 |     "node_modules/@typescript-eslint/types": {
3620 |       "version": "8.38.0",
3621 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.38.0.tgz",
3622 |       "integrity": "sha512-wzkUfX3plUqij4YwWaJyqhiPE5UCRVlFpKn1oCRn2O1bJ592XxWJj8ROQ3JD5MYXLORW84063z3tZTb/cs4Tyw==",
3623 |       "dev": true,
3624 |       "license": "MIT",
3625 |       "engines": {
3626 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3627 |       },
3628 |       "funding": {
3629 |         "type": "opencollective",
3630 |         "url": "https://opencollective.com/typescript-eslint"
3631 |       }
3632 |     },
3633 |     "node_modules/@typescript-eslint/typescript-estree": {
3634 |       "version": "8.38.0",
3635 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.38.0.tgz",
3636 |       "integrity": "sha512-fooELKcAKzxux6fA6pxOflpNS0jc+nOQEEOipXFNjSlBS6fqrJOVY/whSn70SScHrcJ2LDsxWrneFoWYSVfqhQ==",
3637 |       "dev": true,
3638 |       "license": "MIT",
3639 |       "dependencies": {
3640 |         "@typescript-eslint/project-service": "8.38.0",
3641 |         "@typescript-eslint/tsconfig-utils": "8.38.0",
3642 |         "@typescript-eslint/types": "8.38.0",
3643 |         "@typescript-eslint/visitor-keys": "8.38.0",
3644 |         "debug": "^4.3.4",
3645 |         "fast-glob": "^3.3.2",
3646 |         "is-glob": "^4.0.3",
3647 |         "minimatch": "^9.0.4",
3648 |         "semver": "^7.6.0",
3649 |         "ts-api-utils": "^2.1.0"
3650 |       },
3651 |       "engines": {
3652 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3653 |       },
3654 |       "funding": {
3655 |         "type": "opencollective",
3656 |         "url": "https://opencollective.com/typescript-eslint"
3657 |       },
3658 |       "peerDependencies": {
3659 |         "typescript": ">=4.8.4 <5.9.0"
3660 |       }
3661 |     },
3662 |     "node_modules/@typescript-eslint/typescript-estree/node_modules/brace-expansion": {
3663 |       "version": "2.0.2",
3664 |       "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
3665 |       "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
3666 |       "dev": true,
3667 |       "license": "MIT",
3668 |       "dependencies": {
3669 |         "balanced-match": "^1.0.0"
3670 |       }
3671 |     },
3672 |     "node_modules/@typescript-eslint/typescript-estree/node_modules/fast-glob": {
3673 |       "version": "3.3.3",
3674 |       "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
3675 |       "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
3676 |       "dev": true,
3677 |       "license": "MIT",
3678 |       "dependencies": {
3679 |         "@nodelib/fs.stat": "^2.0.2",
3680 |         "@nodelib/fs.walk": "^1.2.3",
3681 |         "glob-parent": "^5.1.2",
3682 |         "merge2": "^1.3.0",
3683 |         "micromatch": "^4.0.8"
3684 |       },
3685 |       "engines": {
3686 |         "node": ">=8.6.0"
3687 |       }
3688 |     },
3689 |     "node_modules/@typescript-eslint/typescript-estree/node_modules/glob-parent": {
3690 |       "version": "5.1.2",
3691 |       "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
3692 |       "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
3693 |       "dev": true,
3694 |       "license": "ISC",
3695 |       "dependencies": {
3696 |         "is-glob": "^4.0.1"
3697 |       },
3698 |       "engines": {
3699 |         "node": ">= 6"
3700 |       }
3701 |     },
3702 |     "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
3703 |       "version": "9.0.5",
3704 |       "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
3705 |       "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
3706 |       "dev": true,
3707 |       "license": "ISC",
3708 |       "dependencies": {
3709 |         "brace-expansion": "^2.0.1"
3710 |       },
3711 |       "engines": {
3712 |         "node": ">=16 || 14 >=14.17"
3713 |       },
3714 |       "funding": {
3715 |         "url": "https://github.com/sponsors/isaacs"
3716 |       }
3717 |     },
3718 |     "node_modules/@typescript-eslint/utils": {
3719 |       "version": "8.38.0",
3720 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.38.0.tgz",
3721 |       "integrity": "sha512-hHcMA86Hgt+ijJlrD8fX0j1j8w4C92zue/8LOPAFioIno+W0+L7KqE8QZKCcPGc/92Vs9x36w/4MPTJhqXdyvg==",
3722 |       "dev": true,
3723 |       "license": "MIT",
3724 |       "dependencies": {
3725 |         "@eslint-community/eslint-utils": "^4.7.0",
3726 |         "@typescript-eslint/scope-manager": "8.38.0",
3727 |         "@typescript-eslint/types": "8.38.0",
3728 |         "@typescript-eslint/typescript-estree": "8.38.0"
3729 |       },
3730 |       "engines": {
3731 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3732 |       },
3733 |       "funding": {
3734 |         "type": "opencollective",
3735 |         "url": "https://opencollective.com/typescript-eslint"
3736 |       },
3737 |       "peerDependencies": {
3738 |         "eslint": "^8.57.0 || ^9.0.0",
3739 |         "typescript": ">=4.8.4 <5.9.0"
3740 |       }
3741 |     },
3742 |     "node_modules/@typescript-eslint/visitor-keys": {
3743 |       "version": "8.38.0",
3744 |       "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.38.0.tgz",
3745 |       "integrity": "sha512-pWrTcoFNWuwHlA9CvlfSsGWs14JxfN1TH25zM5L7o0pRLhsoZkDnTsXfQRJBEWJoV5DL0jf+Z+sxiud+K0mq1g==",
3746 |       "dev": true,
3747 |       "license": "MIT",
3748 |       "dependencies": {
3749 |         "@typescript-eslint/types": "8.38.0",
3750 |         "eslint-visitor-keys": "^4.2.1"
3751 |       },
3752 |       "engines": {
3753 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
3754 |       },
3755 |       "funding": {
3756 |         "type": "opencollective",
3757 |         "url": "https://opencollective.com/typescript-eslint"
3758 |       }
3759 |     },
3760 |     "node_modules/@unrs/resolver-binding-android-arm-eabi": {
3761 |       "version": "1.11.1",
3762 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm-eabi/-/resolver-binding-android-arm-eabi-1.11.1.tgz",
3763 |       "integrity": "sha512-ppLRUgHVaGRWUx0R0Ut06Mjo9gBaBkg3v/8AxusGLhsIotbBLuRk51rAzqLC8gq6NyyAojEXglNjzf6R948DNw==",
3764 |       "cpu": [
3765 |         "arm"
3766 |       ],
3767 |       "dev": true,
3768 |       "license": "MIT",
3769 |       "optional": true,
3770 |       "os": [
3771 |         "android"
3772 |       ]
3773 |     },
3774 |     "node_modules/@unrs/resolver-binding-android-arm64": {
3775 |       "version": "1.11.1",
3776 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm64/-/resolver-binding-android-arm64-1.11.1.tgz",
3777 |       "integrity": "sha512-lCxkVtb4wp1v+EoN+HjIG9cIIzPkX5OtM03pQYkG+U5O/wL53LC4QbIeazgiKqluGeVEeBlZahHalCaBvU1a2g==",
3778 |       "cpu": [
3779 |         "arm64"
3780 |       ],
3781 |       "dev": true,
3782 |       "license": "MIT",
3783 |       "optional": true,
3784 |       "os": [
3785 |         "android"
3786 |       ]
3787 |     },
3788 |     "node_modules/@unrs/resolver-binding-darwin-arm64": {
3789 |       "version": "1.11.1",
3790 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-arm64/-/resolver-binding-darwin-arm64-1.11.1.tgz",
3791 |       "integrity": "sha512-gPVA1UjRu1Y/IsB/dQEsp2V1pm44Of6+LWvbLc9SDk1c2KhhDRDBUkQCYVWe6f26uJb3fOK8saWMgtX8IrMk3g==",
3792 |       "cpu": [
3793 |         "arm64"
3794 |       ],
3795 |       "dev": true,
3796 |       "license": "MIT",
3797 |       "optional": true,
3798 |       "os": [
3799 |         "darwin"
3800 |       ]
3801 |     },
3802 |     "node_modules/@unrs/resolver-binding-darwin-x64": {
3803 |       "version": "1.11.1",
3804 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-x64/-/resolver-binding-darwin-x64-1.11.1.tgz",
3805 |       "integrity": "sha512-cFzP7rWKd3lZaCsDze07QX1SC24lO8mPty9vdP+YVa3MGdVgPmFc59317b2ioXtgCMKGiCLxJ4HQs62oz6GfRQ==",
3806 |       "cpu": [
3807 |         "x64"
3808 |       ],
3809 |       "dev": true,
3810 |       "license": "MIT",
3811 |       "optional": true,
3812 |       "os": [
3813 |         "darwin"
3814 |       ]
3815 |     },
3816 |     "node_modules/@unrs/resolver-binding-freebsd-x64": {
3817 |       "version": "1.11.1",
3818 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-freebsd-x64/-/resolver-binding-freebsd-x64-1.11.1.tgz",
3819 |       "integrity": "sha512-fqtGgak3zX4DCB6PFpsH5+Kmt/8CIi4Bry4rb1ho6Av2QHTREM+47y282Uqiu3ZRF5IQioJQ5qWRV6jduA+iGw==",
3820 |       "cpu": [
3821 |         "x64"
3822 |       ],
3823 |       "dev": true,
3824 |       "license": "MIT",
3825 |       "optional": true,
3826 |       "os": [
3827 |         "freebsd"
3828 |       ]
3829 |     },
3830 |     "node_modules/@unrs/resolver-binding-linux-arm-gnueabihf": {
3831 |       "version": "1.11.1",
3832 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-gnueabihf/-/resolver-binding-linux-arm-gnueabihf-1.11.1.tgz",
3833 |       "integrity": "sha512-u92mvlcYtp9MRKmP+ZvMmtPN34+/3lMHlyMj7wXJDeXxuM0Vgzz0+PPJNsro1m3IZPYChIkn944wW8TYgGKFHw==",
3834 |       "cpu": [
3835 |         "arm"
3836 |       ],
3837 |       "dev": true,
3838 |       "license": "MIT",
3839 |       "optional": true,
3840 |       "os": [
3841 |         "linux"
3842 |       ]
3843 |     },
3844 |     "node_modules/@unrs/resolver-binding-linux-arm-musleabihf": {
3845 |       "version": "1.11.1",
3846 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-musleabihf/-/resolver-binding-linux-arm-musleabihf-1.11.1.tgz",
3847 |       "integrity": "sha512-cINaoY2z7LVCrfHkIcmvj7osTOtm6VVT16b5oQdS4beibX2SYBwgYLmqhBjA1t51CarSaBuX5YNsWLjsqfW5Cw==",
3848 |       "cpu": [
3849 |         "arm"
3850 |       ],
3851 |       "dev": true,
3852 |       "license": "MIT",
3853 |       "optional": true,
3854 |       "os": [
3855 |         "linux"
3856 |       ]
3857 |     },
3858 |     "node_modules/@unrs/resolver-binding-linux-arm64-gnu": {
3859 |       "version": "1.11.1",
3860 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-gnu/-/resolver-binding-linux-arm64-gnu-1.11.1.tgz",
3861 |       "integrity": "sha512-34gw7PjDGB9JgePJEmhEqBhWvCiiWCuXsL9hYphDF7crW7UgI05gyBAi6MF58uGcMOiOqSJ2ybEeCvHcq0BCmQ==",
3862 |       "cpu": [
3863 |         "arm64"
3864 |       ],
3865 |       "dev": true,
3866 |       "license": "MIT",
3867 |       "optional": true,
3868 |       "os": [
3869 |         "linux"
3870 |       ]
3871 |     },
3872 |     "node_modules/@unrs/resolver-binding-linux-arm64-musl": {
3873 |       "version": "1.11.1",
3874 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-musl/-/resolver-binding-linux-arm64-musl-1.11.1.tgz",
3875 |       "integrity": "sha512-RyMIx6Uf53hhOtJDIamSbTskA99sPHS96wxVE/bJtePJJtpdKGXO1wY90oRdXuYOGOTuqjT8ACccMc4K6QmT3w==",
3876 |       "cpu": [
3877 |         "arm64"
3878 |       ],
3879 |       "dev": true,
3880 |       "license": "MIT",
3881 |       "optional": true,
3882 |       "os": [
3883 |         "linux"
3884 |       ]
3885 |     },
3886 |     "node_modules/@unrs/resolver-binding-linux-ppc64-gnu": {
3887 |       "version": "1.11.1",
3888 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-ppc64-gnu/-/resolver-binding-linux-ppc64-gnu-1.11.1.tgz",
3889 |       "integrity": "sha512-D8Vae74A4/a+mZH0FbOkFJL9DSK2R6TFPC9M+jCWYia/q2einCubX10pecpDiTmkJVUH+y8K3BZClycD8nCShA==",
3890 |       "cpu": [
3891 |         "ppc64"
3892 |       ],
3893 |       "dev": true,
3894 |       "license": "MIT",
3895 |       "optional": true,
3896 |       "os": [
3897 |         "linux"
3898 |       ]
3899 |     },
3900 |     "node_modules/@unrs/resolver-binding-linux-riscv64-gnu": {
3901 |       "version": "1.11.1",
3902 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-gnu/-/resolver-binding-linux-riscv64-gnu-1.11.1.tgz",
3903 |       "integrity": "sha512-frxL4OrzOWVVsOc96+V3aqTIQl1O2TjgExV4EKgRY09AJ9leZpEg8Ak9phadbuX0BA4k8U5qtvMSQQGGmaJqcQ==",
3904 |       "cpu": [
3905 |         "riscv64"
3906 |       ],
3907 |       "dev": true,
3908 |       "license": "MIT",
3909 |       "optional": true,
3910 |       "os": [
3911 |         "linux"
3912 |       ]
3913 |     },
3914 |     "node_modules/@unrs/resolver-binding-linux-riscv64-musl": {
3915 |       "version": "1.11.1",
3916 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-musl/-/resolver-binding-linux-riscv64-musl-1.11.1.tgz",
3917 |       "integrity": "sha512-mJ5vuDaIZ+l/acv01sHoXfpnyrNKOk/3aDoEdLO/Xtn9HuZlDD6jKxHlkN8ZhWyLJsRBxfv9GYM2utQ1SChKew==",
3918 |       "cpu": [
3919 |         "riscv64"
3920 |       ],
3921 |       "dev": true,
3922 |       "license": "MIT",
3923 |       "optional": true,
3924 |       "os": [
3925 |         "linux"
3926 |       ]
3927 |     },
3928 |     "node_modules/@unrs/resolver-binding-linux-s390x-gnu": {
3929 |       "version": "1.11.1",
3930 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-s390x-gnu/-/resolver-binding-linux-s390x-gnu-1.11.1.tgz",
3931 |       "integrity": "sha512-kELo8ebBVtb9sA7rMe1Cph4QHreByhaZ2QEADd9NzIQsYNQpt9UkM9iqr2lhGr5afh885d/cB5QeTXSbZHTYPg==",
3932 |       "cpu": [
3933 |         "s390x"
3934 |       ],
3935 |       "dev": true,
3936 |       "license": "MIT",
3937 |       "optional": true,
3938 |       "os": [
3939 |         "linux"
3940 |       ]
3941 |     },
3942 |     "node_modules/@unrs/resolver-binding-linux-x64-gnu": {
3943 |       "version": "1.11.1",
3944 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-gnu/-/resolver-binding-linux-x64-gnu-1.11.1.tgz",
3945 |       "integrity": "sha512-C3ZAHugKgovV5YvAMsxhq0gtXuwESUKc5MhEtjBpLoHPLYM+iuwSj3lflFwK3DPm68660rZ7G8BMcwSro7hD5w==",
3946 |       "cpu": [
3947 |         "x64"
3948 |       ],
3949 |       "dev": true,
3950 |       "license": "MIT",
3951 |       "optional": true,
3952 |       "os": [
3953 |         "linux"
3954 |       ]
3955 |     },
3956 |     "node_modules/@unrs/resolver-binding-linux-x64-musl": {
3957 |       "version": "1.11.1",
3958 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-musl/-/resolver-binding-linux-x64-musl-1.11.1.tgz",
3959 |       "integrity": "sha512-rV0YSoyhK2nZ4vEswT/QwqzqQXw5I6CjoaYMOX0TqBlWhojUf8P94mvI7nuJTeaCkkds3QE4+zS8Ko+GdXuZtA==",
3960 |       "cpu": [
3961 |         "x64"
3962 |       ],
3963 |       "dev": true,
3964 |       "license": "MIT",
3965 |       "optional": true,
3966 |       "os": [
3967 |         "linux"
3968 |       ]
3969 |     },
3970 |     "node_modules/@unrs/resolver-binding-wasm32-wasi": {
3971 |       "version": "1.11.1",
3972 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-wasm32-wasi/-/resolver-binding-wasm32-wasi-1.11.1.tgz",
3973 |       "integrity": "sha512-5u4RkfxJm+Ng7IWgkzi3qrFOvLvQYnPBmjmZQ8+szTK/b31fQCnleNl1GgEt7nIsZRIf5PLhPwT0WM+q45x/UQ==",
3974 |       "cpu": [
3975 |         "wasm32"
3976 |       ],
3977 |       "dev": true,
3978 |       "license": "MIT",
3979 |       "optional": true,
3980 |       "dependencies": {
3981 |         "@napi-rs/wasm-runtime": "^0.2.11"
3982 |       },
3983 |       "engines": {
3984 |         "node": ">=14.0.0"
3985 |       }
3986 |     },
3987 |     "node_modules/@unrs/resolver-binding-win32-arm64-msvc": {
3988 |       "version": "1.11.1",
3989 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-arm64-msvc/-/resolver-binding-win32-arm64-msvc-1.11.1.tgz",
3990 |       "integrity": "sha512-nRcz5Il4ln0kMhfL8S3hLkxI85BXs3o8EYoattsJNdsX4YUU89iOkVn7g0VHSRxFuVMdM4Q1jEpIId1Ihim/Uw==",
3991 |       "cpu": [
3992 |         "arm64"
3993 |       ],
3994 |       "dev": true,
3995 |       "license": "MIT",
3996 |       "optional": true,
3997 |       "os": [
3998 |         "win32"
3999 |       ]
4000 |     },
4001 |     "node_modules/@unrs/resolver-binding-win32-ia32-msvc": {
4002 |       "version": "1.11.1",
4003 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-ia32-msvc/-/resolver-binding-win32-ia32-msvc-1.11.1.tgz",
4004 |       "integrity": "sha512-DCEI6t5i1NmAZp6pFonpD5m7i6aFrpofcp4LA2i8IIq60Jyo28hamKBxNrZcyOwVOZkgsRp9O2sXWBWP8MnvIQ==",
4005 |       "cpu": [
4006 |         "ia32"
4007 |       ],
4008 |       "dev": true,
4009 |       "license": "MIT",
4010 |       "optional": true,
4011 |       "os": [
4012 |         "win32"
4013 |       ]
4014 |     },
4015 |     "node_modules/@unrs/resolver-binding-win32-x64-msvc": {
4016 |       "version": "1.11.1",
4017 |       "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-x64-msvc/-/resolver-binding-win32-x64-msvc-1.11.1.tgz",
4018 |       "integrity": "sha512-lrW200hZdbfRtztbygyaq/6jP6AKE8qQN2KvPcJ+x7wiD038YtnYtZ82IMNJ69GJibV7bwL3y9FgK+5w/pYt6g==",
4019 |       "cpu": [
4020 |         "x64"
4021 |       ],
4022 |       "dev": true,
4023 |       "license": "MIT",
4024 |       "optional": true,
4025 |       "os": [
4026 |         "win32"
4027 |       ]
4028 |     },
4029 |     "node_modules/@vercel/speed-insights": {
4030 |       "version": "1.2.0",
4031 |       "resolved": "https://registry.npmjs.org/@vercel/speed-insights/-/speed-insights-1.2.0.tgz",
4032 |       "integrity": "sha512-y9GVzrUJ2xmgtQlzFP2KhVRoCglwfRQgjyfY607aU0hh0Un6d0OUyrJkjuAlsV18qR4zfoFPs/BiIj9YDS6Wzw==",
4033 |       "hasInstallScript": true,
4034 |       "license": "Apache-2.0",
4035 |       "peerDependencies": {
4036 |         "@sveltejs/kit": "^1 || ^2",
4037 |         "next": ">= 13",
4038 |         "react": "^18 || ^19 || ^19.0.0-rc",
4039 |         "svelte": ">= 4",
4040 |         "vue": "^3",
4041 |         "vue-router": "^4"
4042 |       },
4043 |       "peerDependenciesMeta": {
4044 |         "@sveltejs/kit": {
4045 |           "optional": true
4046 |         },
4047 |         "next": {
4048 |           "optional": true
4049 |         },
4050 |         "react": {
4051 |           "optional": true
4052 |         },
4053 |         "svelte": {
4054 |           "optional": true
4055 |         },
4056 |         "vue": {
4057 |           "optional": true
4058 |         },
4059 |         "vue-router": {
4060 |           "optional": true
4061 |         }
4062 |       }
4063 |     },
4064 |     "node_modules/acorn": {
4065 |       "version": "8.15.0",
4066 |       "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
4067 |       "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
4068 |       "dev": true,
4069 |       "license": "MIT",
4070 |       "bin": {
4071 |         "acorn": "bin/acorn"
4072 |       },
4073 |       "engines": {
4074 |         "node": ">=0.4.0"
4075 |       }
4076 |     },
4077 |     "node_modules/acorn-jsx": {
4078 |       "version": "5.3.2",
4079 |       "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
4080 |       "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
4081 |       "dev": true,
4082 |       "license": "MIT",
4083 |       "peerDependencies": {
4084 |         "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
4085 |       }
4086 |     },
4087 |     "node_modules/ajv": {
4088 |       "version": "6.12.6",
4089 |       "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
4090 |       "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
4091 |       "dev": true,
4092 |       "license": "MIT",
4093 |       "dependencies": {
4094 |         "fast-deep-equal": "^3.1.1",
4095 |         "fast-json-stable-stringify": "^2.0.0",
4096 |         "json-schema-traverse": "^0.4.1",
4097 |         "uri-js": "^4.2.2"
4098 |       },
4099 |       "funding": {
4100 |         "type": "github",
4101 |         "url": "https://github.com/sponsors/epoberezkin"
4102 |       }
4103 |     },
4104 |     "node_modules/ansi-styles": {
4105 |       "version": "4.3.0",
4106 |       "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
4107 |       "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
4108 |       "dev": true,
4109 |       "license": "MIT",
4110 |       "dependencies": {
4111 |         "color-convert": "^2.0.1"
4112 |       },
4113 |       "engines": {
4114 |         "node": ">=8"
4115 |       },
4116 |       "funding": {
4117 |         "url": "https://github.com/chalk/ansi-styles?sponsor=1"
4118 |       }
4119 |     },
4120 |     "node_modules/argparse": {
4121 |       "version": "2.0.1",
4122 |       "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
4123 |       "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
4124 |       "dev": true,
4125 |       "license": "Python-2.0"
4126 |     },
4127 |     "node_modules/aria-hidden": {
4128 |       "version": "1.2.6",
4129 |       "resolved": "https://registry.npmjs.org/aria-hidden/-/aria-hidden-1.2.6.tgz",
4130 |       "integrity": "sha512-ik3ZgC9dY/lYVVM++OISsaYDeg1tb0VtP5uL3ouh1koGOaUMDPpbFIei4JkFimWUFPn90sbMNMXQAIVOlnYKJA==",
4131 |       "license": "MIT",
4132 |       "dependencies": {
4133 |         "tslib": "^2.0.0"
4134 |       },
4135 |       "engines": {
4136 |         "node": ">=10"
4137 |       }
4138 |     },
4139 |     "node_modules/aria-query": {
4140 |       "version": "5.3.2",
4141 |       "resolved": "https://registry.npmjs.org/aria-query/-/aria-query-5.3.2.tgz",
4142 |       "integrity": "sha512-COROpnaoap1E2F000S62r6A60uHZnmlvomhfyT2DlTcrY1OrBKn2UhH7qn5wTC9zMvD0AY7csdPSNwKP+7WiQw==",
4143 |       "dev": true,
4144 |       "license": "Apache-2.0",
4145 |       "engines": {
4146 |         "node": ">= 0.4"
4147 |       }
4148 |     },
4149 |     "node_modules/array-buffer-byte-length": {
4150 |       "version": "1.0.2",
4151 |       "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
4152 |       "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
4153 |       "dev": true,
4154 |       "license": "MIT",
4155 |       "dependencies": {
4156 |         "call-bound": "^1.0.3",
4157 |         "is-array-buffer": "^3.0.5"
4158 |       },
4159 |       "engines": {
4160 |         "node": ">= 0.4"
4161 |       },
4162 |       "funding": {
4163 |         "url": "https://github.com/sponsors/ljharb"
4164 |       }
4165 |     },
4166 |     "node_modules/array-includes": {
4167 |       "version": "3.1.9",
4168 |       "resolved": "https://registry.npmjs.org/array-includes/-/array-includes-3.1.9.tgz",
4169 |       "integrity": "sha512-FmeCCAenzH0KH381SPT5FZmiA/TmpndpcaShhfgEN9eCVjnFBqq3l1xrI42y8+PPLI6hypzou4GXw00WHmPBLQ==",
4170 |       "dev": true,
4171 |       "license": "MIT",
4172 |       "dependencies": {
4173 |         "call-bind": "^1.0.8",
4174 |         "call-bound": "^1.0.4",
4175 |         "define-properties": "^1.2.1",
4176 |         "es-abstract": "^1.24.0",
4177 |         "es-object-atoms": "^1.1.1",
4178 |         "get-intrinsic": "^1.3.0",
4179 |         "is-string": "^1.1.1",
4180 |         "math-intrinsics": "^1.1.0"
4181 |       },
4182 |       "engines": {
4183 |         "node": ">= 0.4"
4184 |       },
4185 |       "funding": {
4186 |         "url": "https://github.com/sponsors/ljharb"
4187 |       }
4188 |     },
4189 |     "node_modules/array.prototype.findlast": {
4190 |       "version": "1.2.5",
4191 |       "resolved": "https://registry.npmjs.org/array.prototype.findlast/-/array.prototype.findlast-1.2.5.tgz",
4192 |       "integrity": "sha512-CVvd6FHg1Z3POpBLxO6E6zr+rSKEQ9L6rZHAaY7lLfhKsWYUBBOuMs0e9o24oopj6H+geRCX0YJ+TJLBK2eHyQ==",
4193 |       "dev": true,
4194 |       "license": "MIT",
4195 |       "dependencies": {
4196 |         "call-bind": "^1.0.7",
4197 |         "define-properties": "^1.2.1",
4198 |         "es-abstract": "^1.23.2",
4199 |         "es-errors": "^1.3.0",
4200 |         "es-object-atoms": "^1.0.0",
4201 |         "es-shim-unscopables": "^1.0.2"
4202 |       },
4203 |       "engines": {
4204 |         "node": ">= 0.4"
4205 |       },
4206 |       "funding": {
4207 |         "url": "https://github.com/sponsors/ljharb"
4208 |       }
4209 |     },
4210 |     "node_modules/array.prototype.findlastindex": {
4211 |       "version": "1.2.6",
4212 |       "resolved": "https://registry.npmjs.org/array.prototype.findlastindex/-/array.prototype.findlastindex-1.2.6.tgz",
4213 |       "integrity": "sha512-F/TKATkzseUExPlfvmwQKGITM3DGTK+vkAsCZoDc5daVygbJBnjEUCbgkAvVFsgfXfX4YIqZ/27G3k3tdXrTxQ==",
4214 |       "dev": true,
4215 |       "license": "MIT",
4216 |       "dependencies": {
4217 |         "call-bind": "^1.0.8",
4218 |         "call-bound": "^1.0.4",
4219 |         "define-properties": "^1.2.1",
4220 |         "es-abstract": "^1.23.9",
4221 |         "es-errors": "^1.3.0",
4222 |         "es-object-atoms": "^1.1.1",
4223 |         "es-shim-unscopables": "^1.1.0"
4224 |       },
4225 |       "engines": {
4226 |         "node": ">= 0.4"
4227 |       },
4228 |       "funding": {
4229 |         "url": "https://github.com/sponsors/ljharb"
4230 |       }
4231 |     },
4232 |     "node_modules/array.prototype.flat": {
4233 |       "version": "1.3.3",
4234 |       "resolved": "https://registry.npmjs.org/array.prototype.flat/-/array.prototype.flat-1.3.3.tgz",
4235 |       "integrity": "sha512-rwG/ja1neyLqCuGZ5YYrznA62D4mZXg0i1cIskIUKSiqF3Cje9/wXAls9B9s1Wa2fomMsIv8czB8jZcPmxCXFg==",
4236 |       "dev": true,
4237 |       "license": "MIT",
4238 |       "dependencies": {
4239 |         "call-bind": "^1.0.8",
4240 |         "define-properties": "^1.2.1",
4241 |         "es-abstract": "^1.23.5",
4242 |         "es-shim-unscopables": "^1.0.2"
4243 |       },
4244 |       "engines": {
4245 |         "node": ">= 0.4"
4246 |       },
4247 |       "funding": {
4248 |         "url": "https://github.com/sponsors/ljharb"
4249 |       }
4250 |     },
4251 |     "node_modules/array.prototype.flatmap": {
4252 |       "version": "1.3.3",
4253 |       "resolved": "https://registry.npmjs.org/array.prototype.flatmap/-/array.prototype.flatmap-1.3.3.tgz",
4254 |       "integrity": "sha512-Y7Wt51eKJSyi80hFrJCePGGNo5ktJCslFuboqJsbf57CCPcm5zztluPlc4/aD8sWsKvlwatezpV4U1efk8kpjg==",
4255 |       "dev": true,
4256 |       "license": "MIT",
4257 |       "dependencies": {
4258 |         "call-bind": "^1.0.8",
4259 |         "define-properties": "^1.2.1",
4260 |         "es-abstract": "^1.23.5",
4261 |         "es-shim-unscopables": "^1.0.2"
4262 |       },
4263 |       "engines": {
4264 |         "node": ">= 0.4"
4265 |       },
4266 |       "funding": {
4267 |         "url": "https://github.com/sponsors/ljharb"
4268 |       }
4269 |     },
4270 |     "node_modules/array.prototype.tosorted": {
4271 |       "version": "1.1.4",
4272 |       "resolved": "https://registry.npmjs.org/array.prototype.tosorted/-/array.prototype.tosorted-1.1.4.tgz",
4273 |       "integrity": "sha512-p6Fx8B7b7ZhL/gmUsAy0D15WhvDccw3mnGNbZpi3pmeJdxtWsj2jEaI4Y6oo3XiHfzuSgPwKc04MYt6KgvC/wA==",
4274 |       "dev": true,
4275 |       "license": "MIT",
4276 |       "dependencies": {
4277 |         "call-bind": "^1.0.7",
4278 |         "define-properties": "^1.2.1",
4279 |         "es-abstract": "^1.23.3",
4280 |         "es-errors": "^1.3.0",
4281 |         "es-shim-unscopables": "^1.0.2"
4282 |       },
4283 |       "engines": {
4284 |         "node": ">= 0.4"
4285 |       }
4286 |     },
4287 |     "node_modules/arraybuffer.prototype.slice": {
4288 |       "version": "1.0.4",
4289 |       "resolved": "https://registry.npmjs.org/arraybuffer.prototype.slice/-/arraybuffer.prototype.slice-1.0.4.tgz",
4290 |       "integrity": "sha512-BNoCY6SXXPQ7gF2opIP4GBE+Xw7U+pHMYKuzjgCN3GwiaIR09UUeKfheyIry77QtrCBlC0KK0q5/TER/tYh3PQ==",
4291 |       "dev": true,
4292 |       "license": "MIT",
4293 |       "dependencies": {
4294 |         "array-buffer-byte-length": "^1.0.1",
4295 |         "call-bind": "^1.0.8",
4296 |         "define-properties": "^1.2.1",
4297 |         "es-abstract": "^1.23.5",
4298 |         "es-errors": "^1.3.0",
4299 |         "get-intrinsic": "^1.2.6",
4300 |         "is-array-buffer": "^3.0.4"
4301 |       },
4302 |       "engines": {
4303 |         "node": ">= 0.4"
4304 |       },
4305 |       "funding": {
4306 |         "url": "https://github.com/sponsors/ljharb"
4307 |       }
4308 |     },
4309 |     "node_modules/ast-types-flow": {
4310 |       "version": "0.0.8",
4311 |       "resolved": "https://registry.npmjs.org/ast-types-flow/-/ast-types-flow-0.0.8.tgz",
4312 |       "integrity": "sha512-OH/2E5Fg20h2aPrbe+QL8JZQFko0YZaF+j4mnQ7BGhfavO7OpSLa8a0y9sBwomHdSbkhTS8TQNayBfnW5DwbvQ==",
4313 |       "dev": true,
4314 |       "license": "MIT"
4315 |     },
4316 |     "node_modules/async-function": {
4317 |       "version": "1.0.0",
4318 |       "resolved": "https://registry.npmjs.org/async-function/-/async-function-1.0.0.tgz",
4319 |       "integrity": "sha512-hsU18Ae8CDTR6Kgu9DYf0EbCr/a5iGL0rytQDobUcdpYOKokk8LEjVphnXkDkgpi0wYVsqrXuP0bZxJaTqdgoA==",
4320 |       "dev": true,
4321 |       "license": "MIT",
4322 |       "engines": {
4323 |         "node": ">= 0.4"
4324 |       }
4325 |     },
4326 |     "node_modules/atomic-sleep": {
4327 |       "version": "1.0.0",
4328 |       "resolved": "https://registry.npmjs.org/atomic-sleep/-/atomic-sleep-1.0.0.tgz",
4329 |       "integrity": "sha512-kNOjDqAh7px0XWNI+4QbzoiR/nTkHAWNud2uvnJquD1/x5a7EQZMJT0AczqK0Qn67oY/TTQ1LbUKajZpp3I9tQ==",
4330 |       "license": "MIT",
4331 |       "engines": {
4332 |         "node": ">=8.0.0"
4333 |       }
4334 |     },
4335 |     "node_modules/available-typed-arrays": {
4336 |       "version": "1.0.7",
4337 |       "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
4338 |       "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
4339 |       "dev": true,
4340 |       "license": "MIT",
4341 |       "dependencies": {
4342 |         "possible-typed-array-names": "^1.0.0"
4343 |       },
4344 |       "engines": {
4345 |         "node": ">= 0.4"
4346 |       },
4347 |       "funding": {
4348 |         "url": "https://github.com/sponsors/ljharb"
4349 |       }
4350 |     },
4351 |     "node_modules/axe-core": {
4352 |       "version": "4.10.3",
4353 |       "resolved": "https://registry.npmjs.org/axe-core/-/axe-core-4.10.3.tgz",
4354 |       "integrity": "sha512-Xm7bpRXnDSX2YE2YFfBk2FnF0ep6tmG7xPh8iHee8MIcrgq762Nkce856dYtJYLkuIoYZvGfTs/PbZhideTcEg==",
4355 |       "dev": true,
4356 |       "license": "MPL-2.0",
4357 |       "engines": {
4358 |         "node": ">=4"
4359 |       }
4360 |     },
4361 |     "node_modules/axobject-query": {
4362 |       "version": "4.1.0",
4363 |       "resolved": "https://registry.npmjs.org/axobject-query/-/axobject-query-4.1.0.tgz",
4364 |       "integrity": "sha512-qIj0G9wZbMGNLjLmg1PT6v2mE9AH2zlnADJD/2tC6E00hgmhUOfEB6greHPAfLRSufHqROIUTkw6E+M3lH0PTQ==",
4365 |       "dev": true,
4366 |       "license": "Apache-2.0",
4367 |       "engines": {
4368 |         "node": ">= 0.4"
4369 |       }
4370 |     },
4371 |     "node_modules/balanced-match": {
4372 |       "version": "1.0.2",
4373 |       "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
4374 |       "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
4375 |       "dev": true,
4376 |       "license": "MIT"
4377 |     },
4378 |     "node_modules/bcrypt": {
4379 |       "version": "6.0.0",
4380 |       "resolved": "https://registry.npmjs.org/bcrypt/-/bcrypt-6.0.0.tgz",
4381 |       "integrity": "sha512-cU8v/EGSrnH+HnxV2z0J7/blxH8gq7Xh2JFT6Aroax7UohdmiJJlxApMxtKfuI7z68NvvVcmR78k2LbT6efhRg==",
4382 |       "hasInstallScript": true,
4383 |       "license": "MIT",
4384 |       "dependencies": {
4385 |         "node-addon-api": "^8.3.0",
4386 |         "node-gyp-build": "^4.8.4"
4387 |       },
4388 |       "engines": {
4389 |         "node": ">= 18"
4390 |       }
4391 |     },
4392 |     "node_modules/brace-expansion": {
4393 |       "version": "1.1.12",
4394 |       "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
4395 |       "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
4396 |       "dev": true,
4397 |       "license": "MIT",
4398 |       "dependencies": {
4399 |         "balanced-match": "^1.0.0",
4400 |         "concat-map": "0.0.1"
4401 |       }
4402 |     },
4403 |     "node_modules/braces": {
4404 |       "version": "3.0.3",
4405 |       "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
4406 |       "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
4407 |       "dev": true,
4408 |       "license": "MIT",
4409 |       "dependencies": {
4410 |         "fill-range": "^7.1.1"
4411 |       },
4412 |       "engines": {
4413 |         "node": ">=8"
4414 |       }
4415 |     },
4416 |     "node_modules/buffer-equal-constant-time": {
4417 |       "version": "1.0.1",
4418 |       "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
4419 |       "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
4420 |       "license": "BSD-3-Clause"
4421 |     },
4422 |     "node_modules/buffer-from": {
4423 |       "version": "1.1.2",
4424 |       "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
4425 |       "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
4426 |       "dev": true,
4427 |       "license": "MIT"
4428 |     },
4429 |     "node_modules/call-bind": {
4430 |       "version": "1.0.8",
4431 |       "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
4432 |       "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
4433 |       "dev": true,
4434 |       "license": "MIT",
4435 |       "dependencies": {
4436 |         "call-bind-apply-helpers": "^1.0.0",
4437 |         "es-define-property": "^1.0.0",
4438 |         "get-intrinsic": "^1.2.4",
4439 |         "set-function-length": "^1.2.2"
4440 |       },
4441 |       "engines": {
4442 |         "node": ">= 0.4"
4443 |       },
4444 |       "funding": {
4445 |         "url": "https://github.com/sponsors/ljharb"
4446 |       }
4447 |     },
4448 |     "node_modules/call-bind-apply-helpers": {
4449 |       "version": "1.0.2",
4450 |       "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
4451 |       "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
4452 |       "dev": true,
4453 |       "license": "MIT",
4454 |       "dependencies": {
4455 |         "es-errors": "^1.3.0",
4456 |         "function-bind": "^1.1.2"
4457 |       },
4458 |       "engines": {
4459 |         "node": ">= 0.4"
4460 |       }
4461 |     },
4462 |     "node_modules/call-bound": {
4463 |       "version": "1.0.4",
4464 |       "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
4465 |       "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
4466 |       "dev": true,
4467 |       "license": "MIT",
4468 |       "dependencies": {
4469 |         "call-bind-apply-helpers": "^1.0.2",
4470 |         "get-intrinsic": "^1.3.0"
4471 |       },
4472 |       "engines": {
4473 |         "node": ">= 0.4"
4474 |       },
4475 |       "funding": {
4476 |         "url": "https://github.com/sponsors/ljharb"
4477 |       }
4478 |     },
4479 |     "node_modules/callsites": {
4480 |       "version": "3.1.0",
4481 |       "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
4482 |       "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
4483 |       "dev": true,
4484 |       "license": "MIT",
4485 |       "engines": {
4486 |         "node": ">=6"
4487 |       }
4488 |     },
4489 |     "node_modules/caniuse-lite": {
4490 |       "version": "1.0.30001727",
4491 |       "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001727.tgz",
4492 |       "integrity": "sha512-pB68nIHmbN6L/4C6MH1DokyR3bYqFwjaSs/sWDHGj4CTcFtQUQMuJftVwWkXq7mNWOybD3KhUv3oWHoGxgP14Q==",
4493 |       "funding": [
4494 |         {
4495 |           "type": "opencollective",
4496 |           "url": "https://opencollective.com/browserslist"
4497 |         },
4498 |         {
4499 |           "type": "tidelift",
4500 |           "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
4501 |         },
4502 |         {
4503 |           "type": "github",
4504 |           "url": "https://github.com/sponsors/ai"
4505 |         }
4506 |       ],
4507 |       "license": "CC-BY-4.0"
4508 |     },
4509 |     "node_modules/chalk": {
4510 |       "version": "4.1.2",
4511 |       "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
4512 |       "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
4513 |       "dev": true,
4514 |       "license": "MIT",
4515 |       "dependencies": {
4516 |         "ansi-styles": "^4.1.0",
4517 |         "supports-color": "^7.1.0"
4518 |       },
4519 |       "engines": {
4520 |         "node": ">=10"
4521 |       },
4522 |       "funding": {
4523 |         "url": "https://github.com/chalk/chalk?sponsor=1"
4524 |       }
4525 |     },
4526 |     "node_modules/chownr": {
4527 |       "version": "3.0.0",
4528 |       "resolved": "https://registry.npmjs.org/chownr/-/chownr-3.0.0.tgz",
4529 |       "integrity": "sha512-+IxzY9BZOQd/XuYPRmrvEVjF/nqj5kgT4kEq7VofrDoM1MxoRjEWkrCC3EtLi59TVawxTAn+orJwFQcrqEN1+g==",
4530 |       "dev": true,
4531 |       "license": "BlueOak-1.0.0",
4532 |       "engines": {
4533 |         "node": ">=18"
4534 |       }
4535 |     },
4536 |     "node_modules/class-variance-authority": {
4537 |       "version": "0.7.1",
4538 |       "resolved": "https://registry.npmjs.org/class-variance-authority/-/class-variance-authority-0.7.1.tgz",
4539 |       "integrity": "sha512-Ka+9Trutv7G8M6WT6SeiRWz792K5qEqIGEGzXKhAE6xOWAY6pPH8U+9IY3oCMv6kqTmLsv7Xh/2w2RigkePMsg==",
4540 |       "license": "Apache-2.0",
4541 |       "dependencies": {
4542 |         "clsx": "^2.1.1"
4543 |       },
4544 |       "funding": {
4545 |         "url": "https://polar.sh/cva"
4546 |       }
4547 |     },
4548 |     "node_modules/client-only": {
4549 |       "version": "0.0.1",
4550 |       "resolved": "https://registry.npmjs.org/client-only/-/client-only-0.0.1.tgz",
4551 |       "integrity": "sha512-IV3Ou0jSMzZrd3pZ48nLkT9DA7Ag1pnPzaiQhpW7c3RbcqqzvzzVu+L8gfqMp/8IM2MQtSiqaCxrrcfu8I8rMA==",
4552 |       "license": "MIT"
4553 |     },
4554 |     "node_modules/clsx": {
4555 |       "version": "2.1.1",
4556 |       "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
4557 |       "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
4558 |       "license": "MIT",
4559 |       "engines": {
4560 |         "node": ">=6"
4561 |       }
4562 |     },
4563 |     "node_modules/cmdk": {
4564 |       "version": "1.1.1",
4565 |       "resolved": "https://registry.npmjs.org/cmdk/-/cmdk-1.1.1.tgz",
4566 |       "integrity": "sha512-Vsv7kFaXm+ptHDMZ7izaRsP70GgrW9NBNGswt9OZaVBLlE0SNpDq8eu/VGXyF9r7M0azK3Wy7OlYXsuyYLFzHg==",
4567 |       "license": "MIT",
4568 |       "dependencies": {
4569 |         "@radix-ui/react-compose-refs": "^1.1.1",
4570 |         "@radix-ui/react-dialog": "^1.1.6",
4571 |         "@radix-ui/react-id": "^1.1.0",
4572 |         "@radix-ui/react-primitive": "^2.0.2"
4573 |       },
4574 |       "peerDependencies": {
4575 |         "react": "^18 || ^19 || ^19.0.0-rc",
4576 |         "react-dom": "^18 || ^19 || ^19.0.0-rc"
4577 |       }
4578 |     },
4579 |     "node_modules/color": {
4580 |       "version": "4.2.3",
4581 |       "resolved": "https://registry.npmjs.org/color/-/color-4.2.3.tgz",
4582 |       "integrity": "sha512-1rXeuUUiGGrykh+CeBdu5Ie7OJwinCgQY0bc7GCRxy5xVHy+moaqkpL/jqQq0MtQOeYcrqEz4abc5f0KtU7W4A==",
4583 |       "license": "MIT",
4584 |       "optional": true,
4585 |       "dependencies": {
4586 |         "color-convert": "^2.0.1",
4587 |         "color-string": "^1.9.0"
4588 |       },
4589 |       "engines": {
4590 |         "node": ">=12.5.0"
4591 |       }
4592 |     },
4593 |     "node_modules/color-convert": {
4594 |       "version": "2.0.1",
4595 |       "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
4596 |       "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
4597 |       "devOptional": true,
4598 |       "license": "MIT",
4599 |       "dependencies": {
4600 |         "color-name": "~1.1.4"
4601 |       },
4602 |       "engines": {
4603 |         "node": ">=7.0.0"
4604 |       }
4605 |     },
4606 |     "node_modules/color-name": {
4607 |       "version": "1.1.4",
4608 |       "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
4609 |       "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
4610 |       "devOptional": true,
4611 |       "license": "MIT"
4612 |     },
4613 |     "node_modules/color-string": {
4614 |       "version": "1.9.1",
4615 |       "resolved": "https://registry.npmjs.org/color-string/-/color-string-1.9.1.tgz",
4616 |       "integrity": "sha512-shrVawQFojnZv6xM40anx4CkoDP+fZsw/ZerEMsW/pyzsRbElpsL/DBVW7q3ExxwusdNXI3lXpuhEZkzs8p5Eg==",
4617 |       "license": "MIT",
4618 |       "optional": true,
4619 |       "dependencies": {
4620 |         "color-name": "^1.0.0",
4621 |         "simple-swizzle": "^0.2.2"
4622 |       }
4623 |     },
4624 |     "node_modules/concat-map": {
4625 |       "version": "0.0.1",
4626 |       "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
4627 |       "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
4628 |       "dev": true,
4629 |       "license": "MIT"
4630 |     },
4631 |     "node_modules/cross-spawn": {
4632 |       "version": "7.0.6",
4633 |       "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
4634 |       "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
4635 |       "dev": true,
4636 |       "license": "MIT",
4637 |       "dependencies": {
4638 |         "path-key": "^3.1.0",
4639 |         "shebang-command": "^2.0.0",
4640 |         "which": "^2.0.1"
4641 |       },
4642 |       "engines": {
4643 |         "node": ">= 8"
4644 |       }
4645 |     },
4646 |     "node_modules/csstype": {
4647 |       "version": "3.1.3",
4648 |       "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
4649 |       "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
4650 |       "devOptional": true,
4651 |       "license": "MIT"
4652 |     },
4653 |     "node_modules/damerau-levenshtein": {
4654 |       "version": "1.0.8",
4655 |       "resolved": "https://registry.npmjs.org/damerau-levenshtein/-/damerau-levenshtein-1.0.8.tgz",
4656 |       "integrity": "sha512-sdQSFB7+llfUcQHUQO3+B8ERRj0Oa4w9POWMI/puGtuf7gFywGmkaLCElnudfTiKZV+NvHqL0ifzdrI8Ro7ESA==",
4657 |       "dev": true,
4658 |       "license": "BSD-2-Clause"
4659 |     },
4660 |     "node_modules/data-view-buffer": {
4661 |       "version": "1.0.2",
4662 |       "resolved": "https://registry.npmjs.org/data-view-buffer/-/data-view-buffer-1.0.2.tgz",
4663 |       "integrity": "sha512-EmKO5V3OLXh1rtK2wgXRansaK1/mtVdTUEiEI0W8RkvgT05kfxaH29PliLnpLP73yYO6142Q72QNa8Wx/A5CqQ==",
4664 |       "dev": true,
4665 |       "license": "MIT",
4666 |       "dependencies": {
4667 |         "call-bound": "^1.0.3",
4668 |         "es-errors": "^1.3.0",
4669 |         "is-data-view": "^1.0.2"
4670 |       },
4671 |       "engines": {
4672 |         "node": ">= 0.4"
4673 |       },
4674 |       "funding": {
4675 |         "url": "https://github.com/sponsors/ljharb"
4676 |       }
4677 |     },
4678 |     "node_modules/data-view-byte-length": {
4679 |       "version": "1.0.2",
4680 |       "resolved": "https://registry.npmjs.org/data-view-byte-length/-/data-view-byte-length-1.0.2.tgz",
4681 |       "integrity": "sha512-tuhGbE6CfTM9+5ANGf+oQb72Ky/0+s3xKUpHvShfiz2RxMFgFPjsXuRLBVMtvMs15awe45SRb83D6wH4ew6wlQ==",
4682 |       "dev": true,
4683 |       "license": "MIT",
4684 |       "dependencies": {
4685 |         "call-bound": "^1.0.3",
4686 |         "es-errors": "^1.3.0",
4687 |         "is-data-view": "^1.0.2"
4688 |       },
4689 |       "engines": {
4690 |         "node": ">= 0.4"
4691 |       },
4692 |       "funding": {
4693 |         "url": "https://github.com/sponsors/inspect-js"
4694 |       }
4695 |     },
4696 |     "node_modules/data-view-byte-offset": {
4697 |       "version": "1.0.1",
4698 |       "resolved": "https://registry.npmjs.org/data-view-byte-offset/-/data-view-byte-offset-1.0.1.tgz",
4699 |       "integrity": "sha512-BS8PfmtDGnrgYdOonGZQdLZslWIeCGFP9tpan0hi1Co2Zr2NKADsvGYA8XxuG/4UWgJ6Cjtv+YJnB6MM69QGlQ==",
4700 |       "dev": true,
4701 |       "license": "MIT",
4702 |       "dependencies": {
4703 |         "call-bound": "^1.0.2",
4704 |         "es-errors": "^1.3.0",
4705 |         "is-data-view": "^1.0.1"
4706 |       },
4707 |       "engines": {
4708 |         "node": ">= 0.4"
4709 |       },
4710 |       "funding": {
4711 |         "url": "https://github.com/sponsors/ljharb"
4712 |       }
4713 |     },
4714 |     "node_modules/debug": {
4715 |       "version": "4.4.1",
4716 |       "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.1.tgz",
4717 |       "integrity": "sha512-KcKCqiftBJcZr++7ykoDIEwSa3XWowTfNPo92BYxjXiyYEVrUQh2aLyhxBCwww+heortUFxEJYcRzosstTEBYQ==",
4718 |       "dev": true,
4719 |       "license": "MIT",
4720 |       "dependencies": {
4721 |         "ms": "^2.1.3"
4722 |       },
4723 |       "engines": {
4724 |         "node": ">=6.0"
4725 |       },
4726 |       "peerDependenciesMeta": {
4727 |         "supports-color": {
4728 |           "optional": true
4729 |         }
4730 |       }
4731 |     },
4732 |     "node_modules/deep-is": {
4733 |       "version": "0.1.4",
4734 |       "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
4735 |       "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
4736 |       "dev": true,
4737 |       "license": "MIT"
4738 |     },
4739 |     "node_modules/define-data-property": {
4740 |       "version": "1.1.4",
4741 |       "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
4742 |       "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
4743 |       "dev": true,
4744 |       "license": "MIT",
4745 |       "dependencies": {
4746 |         "es-define-property": "^1.0.0",
4747 |         "es-errors": "^1.3.0",
4748 |         "gopd": "^1.0.1"
4749 |       },
4750 |       "engines": {
4751 |         "node": ">= 0.4"
4752 |       },
4753 |       "funding": {
4754 |         "url": "https://github.com/sponsors/ljharb"
4755 |       }
4756 |     },
4757 |     "node_modules/define-properties": {
4758 |       "version": "1.2.1",
4759 |       "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
4760 |       "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
4761 |       "dev": true,
4762 |       "license": "MIT",
4763 |       "dependencies": {
4764 |         "define-data-property": "^1.0.1",
4765 |         "has-property-descriptors": "^1.0.0",
4766 |         "object-keys": "^1.1.1"
4767 |       },
4768 |       "engines": {
4769 |         "node": ">= 0.4"
4770 |       },
4771 |       "funding": {
4772 |         "url": "https://github.com/sponsors/ljharb"
4773 |       }
4774 |     },
4775 |     "node_modules/detect-libc": {
4776 |       "version": "2.0.4",
4777 |       "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.4.tgz",
4778 |       "integrity": "sha512-3UDv+G9CsCKO1WKMGw9fwq/SWJYbI0c5Y7LU1AXYoDdbhE2AHQ6N6Nb34sG8Fj7T5APy8qXDCKuuIHd1BR0tVA==",
4779 |       "devOptional": true,
4780 |       "license": "Apache-2.0",
4781 |       "engines": {
4782 |         "node": ">=8"
4783 |       }
4784 |     },
4785 |     "node_modules/detect-node-es": {
4786 |       "version": "1.1.0",
4787 |       "resolved": "https://registry.npmjs.org/detect-node-es/-/detect-node-es-1.1.0.tgz",
4788 |       "integrity": "sha512-ypdmJU/TbBby2Dxibuv7ZLW3Bs1QEmM7nHjEANfohJLvE0XVujisn1qPJcZxg+qDucsr+bP6fLD1rPS3AhJ7EQ==",
4789 |       "license": "MIT"
4790 |     },
4791 |     "node_modules/doctrine": {
4792 |       "version": "2.1.0",
4793 |       "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-2.1.0.tgz",
4794 |       "integrity": "sha512-35mSku4ZXK0vfCuHEDAwt55dg2jNajHZ1odvF+8SSr82EsZY4QmXfuWso8oEd8zRhVObSN18aM0CjSdoBX7zIw==",
4795 |       "dev": true,
4796 |       "license": "Apache-2.0",
4797 |       "dependencies": {
4798 |         "esutils": "^2.0.2"
4799 |       },
4800 |       "engines": {
4801 |         "node": ">=0.10.0"
4802 |       }
4803 |     },
4804 |     "node_modules/dotenv": {
4805 |       "version": "16.6.1",
4806 |       "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.6.1.tgz",
4807 |       "integrity": "sha512-uBq4egWHTcTt33a72vpSG0z3HnPuIl6NqYcTrKEg2azoEyl2hpW0zqlxysq2pK9HlDIHyHyakeYaYnSAwd8bow==",
4808 |       "dev": true,
4809 |       "license": "BSD-2-Clause",
4810 |       "engines": {
4811 |         "node": ">=12"
4812 |       },
4813 |       "funding": {
4814 |         "url": "https://dotenvx.com"
4815 |       }
4816 |     },
4817 |     "node_modules/dotenv-cli": {
4818 |       "version": "8.0.0",
4819 |       "resolved": "https://registry.npmjs.org/dotenv-cli/-/dotenv-cli-8.0.0.tgz",
4820 |       "integrity": "sha512-aLqYbK7xKOiTMIRf1lDPbI+Y+Ip/wo5k3eyp6ePysVaSqbyxjyK3dK35BTxG+rmd7djf5q2UPs4noPNH+cj0Qw==",
4821 |       "dev": true,
4822 |       "license": "MIT",
4823 |       "dependencies": {
4824 |         "cross-spawn": "^7.0.6",
4825 |         "dotenv": "^16.3.0",
4826 |         "dotenv-expand": "^10.0.0",
4827 |         "minimist": "^1.2.6"
4828 |       },
4829 |       "bin": {
4830 |         "dotenv": "cli.js"
4831 |       }
4832 |     },
4833 |     "node_modules/dotenv-expand": {
4834 |       "version": "10.0.0",
4835 |       "resolved": "https://registry.npmjs.org/dotenv-expand/-/dotenv-expand-10.0.0.tgz",
4836 |       "integrity": "sha512-GopVGCpVS1UKH75VKHGuQFqS1Gusej0z4FyQkPdwjil2gNIv+LNsqBlboOzpJFZKVT95GkCyWJbBSdFEFUWI2A==",
4837 |       "dev": true,
4838 |       "license": "BSD-2-Clause",
4839 |       "engines": {
4840 |         "node": ">=12"
4841 |       }
4842 |     },
4843 |     "node_modules/drizzle-kit": {
4844 |       "version": "0.31.4",
4845 |       "resolved": "https://registry.npmjs.org/drizzle-kit/-/drizzle-kit-0.31.4.tgz",
4846 |       "integrity": "sha512-tCPWVZWZqWVx2XUsVpJRnH9Mx0ClVOf5YUHerZ5so1OKSlqww4zy1R5ksEdGRcO3tM3zj0PYN6V48TbQCL1RfA==",
4847 |       "dev": true,
4848 |       "license": "MIT",
4849 |       "dependencies": {
4850 |         "@drizzle-team/brocli": "^0.10.2",
4851 |         "@esbuild-kit/esm-loader": "^2.5.5",
4852 |         "esbuild": "^0.25.4",
4853 |         "esbuild-register": "^3.5.0"
4854 |       },
4855 |       "bin": {
4856 |         "drizzle-kit": "bin.cjs"
4857 |       }
4858 |     },
4859 |     "node_modules/drizzle-orm": {
4860 |       "version": "0.44.3",
4861 |       "resolved": "https://registry.npmjs.org/drizzle-orm/-/drizzle-orm-0.44.3.tgz",
4862 |       "integrity": "sha512-8nIiYQxOpgUicEL04YFojJmvC4DNO4KoyXsEIqN44+g6gNBr6hmVpWk3uyAt4CaTiRGDwoU+alfqNNeonLAFOQ==",
4863 |       "license": "Apache-2.0",
4864 |       "peerDependencies": {
4865 |         "@aws-sdk/client-rds-data": ">=3",
4866 |         "@cloudflare/workers-types": ">=4",
4867 |         "@electric-sql/pglite": ">=0.2.0",
4868 |         "@libsql/client": ">=0.10.0",
4869 |         "@libsql/client-wasm": ">=0.10.0",
4870 |         "@neondatabase/serverless": ">=0.10.0",
4871 |         "@op-engineering/op-sqlite": ">=2",
4872 |         "@opentelemetry/api": "^1.4.1",
4873 |         "@planetscale/database": ">=1.13",
4874 |         "@prisma/client": "*",
4875 |         "@tidbcloud/serverless": "*",
4876 |         "@types/better-sqlite3": "*",
4877 |         "@types/pg": "*",
4878 |         "@types/sql.js": "*",
4879 |         "@upstash/redis": ">=1.34.7",
4880 |         "@vercel/postgres": ">=0.8.0",
4881 |         "@xata.io/client": "*",
4882 |         "better-sqlite3": ">=7",
4883 |         "bun-types": "*",
4884 |         "expo-sqlite": ">=14.0.0",
4885 |         "gel": ">=2",
4886 |         "knex": "*",
4887 |         "kysely": "*",
4888 |         "mysql2": ">=2",
4889 |         "pg": ">=8",
4890 |         "postgres": ">=3",
4891 |         "sql.js": ">=1",
4892 |         "sqlite3": ">=5"
4893 |       },
4894 |       "peerDependenciesMeta": {
4895 |         "@aws-sdk/client-rds-data": {
4896 |           "optional": true
4897 |         },
4898 |         "@cloudflare/workers-types": {
4899 |           "optional": true
4900 |         },
4901 |         "@electric-sql/pglite": {
4902 |           "optional": true
4903 |         },
4904 |         "@libsql/client": {
4905 |           "optional": true
4906 |         },
4907 |         "@libsql/client-wasm": {
4908 |           "optional": true
4909 |         },
4910 |         "@neondatabase/serverless": {
4911 |           "optional": true
4912 |         },
4913 |         "@op-engineering/op-sqlite": {
4914 |           "optional": true
4915 |         },
4916 |         "@opentelemetry/api": {
4917 |           "optional": true
4918 |         },
4919 |         "@planetscale/database": {
4920 |           "optional": true
4921 |         },
4922 |         "@prisma/client": {
4923 |           "optional": true
4924 |         },
4925 |         "@tidbcloud/serverless": {
4926 |           "optional": true
4927 |         },
4928 |         "@types/better-sqlite3": {
4929 |           "optional": true
4930 |         },
4931 |         "@types/pg": {
4932 |           "optional": true
4933 |         },
4934 |         "@types/sql.js": {
4935 |           "optional": true
4936 |         },
4937 |         "@upstash/redis": {
4938 |           "optional": true
4939 |         },
4940 |         "@vercel/postgres": {
4941 |           "optional": true
4942 |         },
4943 |         "@xata.io/client": {
4944 |           "optional": true
4945 |         },
4946 |         "better-sqlite3": {
4947 |           "optional": true
4948 |         },
4949 |         "bun-types": {
4950 |           "optional": true
4951 |         },
4952 |         "expo-sqlite": {
4953 |           "optional": true
4954 |         },
4955 |         "gel": {
4956 |           "optional": true
4957 |         },
4958 |         "knex": {
4959 |           "optional": true
4960 |         },
4961 |         "kysely": {
4962 |           "optional": true
4963 |         },
4964 |         "mysql2": {
4965 |           "optional": true
4966 |         },
4967 |         "pg": {
4968 |           "optional": true
4969 |         },
4970 |         "postgres": {
4971 |           "optional": true
4972 |         },
4973 |         "prisma": {
4974 |           "optional": true
4975 |         },
4976 |         "sql.js": {
4977 |           "optional": true
4978 |         },
4979 |         "sqlite3": {
4980 |           "optional": true
4981 |         }
4982 |       }
4983 |     },
4984 |     "node_modules/dunder-proto": {
4985 |       "version": "1.0.1",
4986 |       "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
4987 |       "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
4988 |       "dev": true,
4989 |       "license": "MIT",
4990 |       "dependencies": {
4991 |         "call-bind-apply-helpers": "^1.0.1",
4992 |         "es-errors": "^1.3.0",
4993 |         "gopd": "^1.2.0"
4994 |       },
4995 |       "engines": {
4996 |         "node": ">= 0.4"
4997 |       }
4998 |     },
4999 |     "node_modules/ecdsa-sig-formatter": {
5000 |       "version": "1.0.11",
5001 |       "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
5002 |       "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
5003 |       "license": "Apache-2.0",
5004 |       "dependencies": {
5005 |         "safe-buffer": "^5.0.1"
5006 |       }
5007 |     },
5008 |     "node_modules/emoji-regex": {
5009 |       "version": "9.2.2",
5010 |       "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
5011 |       "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
5012 |       "dev": true,
5013 |       "license": "MIT"
5014 |     },
5015 |     "node_modules/enhanced-resolve": {
5016 |       "version": "5.18.2",
5017 |       "resolved": "https://registry.npmjs.org/enhanced-resolve/-/enhanced-resolve-5.18.2.tgz",
5018 |       "integrity": "sha512-6Jw4sE1maoRJo3q8MsSIn2onJFbLTOjY9hlx4DZXmOKvLRd1Ok2kXmAGXaafL2+ijsJZ1ClYbl/pmqr9+k4iUQ==",
5019 |       "dev": true,
5020 |       "license": "MIT",
5021 |       "dependencies": {
5022 |         "graceful-fs": "^4.2.4",
5023 |         "tapable": "^2.2.0"
5024 |       },
5025 |       "engines": {
5026 |         "node": ">=10.13.0"
5027 |       }
5028 |     },
5029 |     "node_modules/es-abstract": {
5030 |       "version": "1.24.0",
5031 |       "resolved": "https://registry.npmjs.org/es-abstract/-/es-abstract-1.24.0.tgz",
5032 |       "integrity": "sha512-WSzPgsdLtTcQwm4CROfS5ju2Wa1QQcVeT37jFjYzdFz1r9ahadC8B8/a4qxJxM+09F18iumCdRmlr96ZYkQvEg==",
5033 |       "dev": true,
5034 |       "license": "MIT",
5035 |       "dependencies": {
5036 |         "array-buffer-byte-length": "^1.0.2",
5037 |         "arraybuffer.prototype.slice": "^1.0.4",
5038 |         "available-typed-arrays": "^1.0.7",
5039 |         "call-bind": "^1.0.8",
5040 |         "call-bound": "^1.0.4",
5041 |         "data-view-buffer": "^1.0.2",
5042 |         "data-view-byte-length": "^1.0.2",
5043 |         "data-view-byte-offset": "^1.0.1",
5044 |         "es-define-property": "^1.0.1",
5045 |         "es-errors": "^1.3.0",
5046 |         "es-object-atoms": "^1.1.1",
5047 |         "es-set-tostringtag": "^2.1.0",
5048 |         "es-to-primitive": "^1.3.0",
5049 |         "function.prototype.name": "^1.1.8",
5050 |         "get-intrinsic": "^1.3.0",
5051 |         "get-proto": "^1.0.1",
5052 |         "get-symbol-description": "^1.1.0",
5053 |         "globalthis": "^1.0.4",
5054 |         "gopd": "^1.2.0",
5055 |         "has-property-descriptors": "^1.0.2",
5056 |         "has-proto": "^1.2.0",
5057 |         "has-symbols": "^1.1.0",
5058 |         "hasown": "^2.0.2",
5059 |         "internal-slot": "^1.1.0",
5060 |         "is-array-buffer": "^3.0.5",
5061 |         "is-callable": "^1.2.7",
5062 |         "is-data-view": "^1.0.2",
5063 |         "is-negative-zero": "^2.0.3",
5064 |         "is-regex": "^1.2.1",
5065 |         "is-set": "^2.0.3",
5066 |         "is-shared-array-buffer": "^1.0.4",
5067 |         "is-string": "^1.1.1",
5068 |         "is-typed-array": "^1.1.15",
5069 |         "is-weakref": "^1.1.1",
5070 |         "math-intrinsics": "^1.1.0",
5071 |         "object-inspect": "^1.13.4",
5072 |         "object-keys": "^1.1.1",
5073 |         "object.assign": "^4.1.7",
5074 |         "own-keys": "^1.0.1",
5075 |         "regexp.prototype.flags": "^1.5.4",
5076 |         "safe-array-concat": "^1.1.3",
5077 |         "safe-push-apply": "^1.0.0",
5078 |         "safe-regex-test": "^1.1.0",
5079 |         "set-proto": "^1.0.0",
5080 |         "stop-iteration-iterator": "^1.1.0",
5081 |         "string.prototype.trim": "^1.2.10",
5082 |         "string.prototype.trimend": "^1.0.9",
5083 |         "string.prototype.trimstart": "^1.0.8",
5084 |         "typed-array-buffer": "^1.0.3",
5085 |         "typed-array-byte-length": "^1.0.3",
5086 |         "typed-array-byte-offset": "^1.0.4",
5087 |         "typed-array-length": "^1.0.7",
5088 |         "unbox-primitive": "^1.1.0",
5089 |         "which-typed-array": "^1.1.19"
5090 |       },
5091 |       "engines": {
5092 |         "node": ">= 0.4"
5093 |       },
5094 |       "funding": {
5095 |         "url": "https://github.com/sponsors/ljharb"
5096 |       }
5097 |     },
5098 |     "node_modules/es-define-property": {
5099 |       "version": "1.0.1",
5100 |       "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
5101 |       "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
5102 |       "dev": true,
5103 |       "license": "MIT",
5104 |       "engines": {
5105 |         "node": ">= 0.4"
5106 |       }
5107 |     },
5108 |     "node_modules/es-errors": {
5109 |       "version": "1.3.0",
5110 |       "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
5111 |       "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
5112 |       "dev": true,
5113 |       "license": "MIT",
5114 |       "engines": {
5115 |         "node": ">= 0.4"
5116 |       }
5117 |     },
5118 |     "node_modules/es-iterator-helpers": {
5119 |       "version": "1.2.1",
5120 |       "resolved": "https://registry.npmjs.org/es-iterator-helpers/-/es-iterator-helpers-1.2.1.tgz",
5121 |       "integrity": "sha512-uDn+FE1yrDzyC0pCo961B2IHbdM8y/ACZsKD4dG6WqrjV53BADjwa7D+1aom2rsNVfLyDgU/eigvlJGJ08OQ4w==",
5122 |       "dev": true,
5123 |       "license": "MIT",
5124 |       "dependencies": {
5125 |         "call-bind": "^1.0.8",
5126 |         "call-bound": "^1.0.3",
5127 |         "define-properties": "^1.2.1",
5128 |         "es-abstract": "^1.23.6",
5129 |         "es-errors": "^1.3.0",
5130 |         "es-set-tostringtag": "^2.0.3",
5131 |         "function-bind": "^1.1.2",
5132 |         "get-intrinsic": "^1.2.6",
5133 |         "globalthis": "^1.0.4",
5134 |         "gopd": "^1.2.0",
5135 |         "has-property-descriptors": "^1.0.2",
5136 |         "has-proto": "^1.2.0",
5137 |         "has-symbols": "^1.1.0",
5138 |         "internal-slot": "^1.1.0",
5139 |         "iterator.prototype": "^1.1.4",
5140 |         "safe-array-concat": "^1.1.3"
5141 |       },
5142 |       "engines": {
5143 |         "node": ">= 0.4"
5144 |       }
5145 |     },
5146 |     "node_modules/es-object-atoms": {
5147 |       "version": "1.1.1",
5148 |       "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
5149 |       "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
5150 |       "dev": true,
5151 |       "license": "MIT",
5152 |       "dependencies": {
5153 |         "es-errors": "^1.3.0"
5154 |       },
5155 |       "engines": {
5156 |         "node": ">= 0.4"
5157 |       }
5158 |     },
5159 |     "node_modules/es-set-tostringtag": {
5160 |       "version": "2.1.0",
5161 |       "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
5162 |       "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
5163 |       "dev": true,
5164 |       "license": "MIT",
5165 |       "dependencies": {
5166 |         "es-errors": "^1.3.0",
5167 |         "get-intrinsic": "^1.2.6",
5168 |         "has-tostringtag": "^1.0.2",
5169 |         "hasown": "^2.0.2"
5170 |       },
5171 |       "engines": {
5172 |         "node": ">= 0.4"
5173 |       }
5174 |     },
5175 |     "node_modules/es-shim-unscopables": {
5176 |       "version": "1.1.0",
5177 |       "resolved": "https://registry.npmjs.org/es-shim-unscopables/-/es-shim-unscopables-1.1.0.tgz",
5178 |       "integrity": "sha512-d9T8ucsEhh8Bi1woXCf+TIKDIROLG5WCkxg8geBCbvk22kzwC5G2OnXVMO6FUsvQlgUUXQ2itephWDLqDzbeCw==",
5179 |       "dev": true,
5180 |       "license": "MIT",
5181 |       "dependencies": {
5182 |         "hasown": "^2.0.2"
5183 |       },
5184 |       "engines": {
5185 |         "node": ">= 0.4"
5186 |       }
5187 |     },
5188 |     "node_modules/es-to-primitive": {
5189 |       "version": "1.3.0",
5190 |       "resolved": "https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.3.0.tgz",
5191 |       "integrity": "sha512-w+5mJ3GuFL+NjVtJlvydShqE1eN3h3PbI7/5LAsYJP/2qtuMXjfL2LpHSRqo4b4eSF5K/DH1JXKUAHSB2UW50g==",
5192 |       "dev": true,
5193 |       "license": "MIT",
5194 |       "dependencies": {
5195 |         "is-callable": "^1.2.7",
5196 |         "is-date-object": "^1.0.5",
5197 |         "is-symbol": "^1.0.4"
5198 |       },
5199 |       "engines": {
5200 |         "node": ">= 0.4"
5201 |       },
5202 |       "funding": {
5203 |         "url": "https://github.com/sponsors/ljharb"
5204 |       }
5205 |     },
5206 |     "node_modules/esbuild": {
5207 |       "version": "0.25.8",
5208 |       "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.8.tgz",
5209 |       "integrity": "sha512-vVC0USHGtMi8+R4Kz8rt6JhEWLxsv9Rnu/lGYbPR8u47B+DCBksq9JarW0zOO7bs37hyOK1l2/oqtbciutL5+Q==",
5210 |       "dev": true,
5211 |       "hasInstallScript": true,
5212 |       "license": "MIT",
5213 |       "bin": {
5214 |         "esbuild": "bin/esbuild"
5215 |       },
5216 |       "engines": {
5217 |         "node": ">=18"
5218 |       },
5219 |       "optionalDependencies": {
5220 |         "@esbuild/aix-ppc64": "0.25.8",
5221 |         "@esbuild/android-arm": "0.25.8",
5222 |         "@esbuild/android-arm64": "0.25.8",
5223 |         "@esbuild/android-x64": "0.25.8",
5224 |         "@esbuild/darwin-arm64": "0.25.8",
5225 |         "@esbuild/darwin-x64": "0.25.8",
5226 |         "@esbuild/freebsd-arm64": "0.25.8",
5227 |         "@esbuild/freebsd-x64": "0.25.8",
5228 |         "@esbuild/linux-arm": "0.25.8",
5229 |         "@esbuild/linux-arm64": "0.25.8",
5230 |         "@esbuild/linux-ia32": "0.25.8",
5231 |         "@esbuild/linux-loong64": "0.25.8",
5232 |         "@esbuild/linux-mips64el": "0.25.8",
5233 |         "@esbuild/linux-ppc64": "0.25.8",
5234 |         "@esbuild/linux-riscv64": "0.25.8",
5235 |         "@esbuild/linux-s390x": "0.25.8",
5236 |         "@esbuild/linux-x64": "0.25.8",
5237 |         "@esbuild/netbsd-arm64": "0.25.8",
5238 |         "@esbuild/netbsd-x64": "0.25.8",
5239 |         "@esbuild/openbsd-arm64": "0.25.8",
5240 |         "@esbuild/openbsd-x64": "0.25.8",
5241 |         "@esbuild/openharmony-arm64": "0.25.8",
5242 |         "@esbuild/sunos-x64": "0.25.8",
5243 |         "@esbuild/win32-arm64": "0.25.8",
5244 |         "@esbuild/win32-ia32": "0.25.8",
5245 |         "@esbuild/win32-x64": "0.25.8"
5246 |       }
5247 |     },
5248 |     "node_modules/esbuild-register": {
5249 |       "version": "3.6.0",
5250 |       "resolved": "https://registry.npmjs.org/esbuild-register/-/esbuild-register-3.6.0.tgz",
5251 |       "integrity": "sha512-H2/S7Pm8a9CL1uhp9OvjwrBh5Pvx0H8qVOxNu8Wed9Y7qv56MPtq+GGM8RJpq6glYJn9Wspr8uw7l55uyinNeg==",
5252 |       "dev": true,
5253 |       "license": "MIT",
5254 |       "dependencies": {
5255 |         "debug": "^4.3.4"
5256 |       },
5257 |       "peerDependencies": {
5258 |         "esbuild": ">=0.12 <1"
5259 |       }
5260 |     },
5261 |     "node_modules/escape-string-regexp": {
5262 |       "version": "4.0.0",
5263 |       "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
5264 |       "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
5265 |       "dev": true,
5266 |       "license": "MIT",
5267 |       "engines": {
5268 |         "node": ">=10"
5269 |       },
5270 |       "funding": {
5271 |         "url": "https://github.com/sponsors/sindresorhus"
5272 |       }
5273 |     },
5274 |     "node_modules/eslint": {
5275 |       "version": "9.31.0",
5276 |       "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.31.0.tgz",
5277 |       "integrity": "sha512-QldCVh/ztyKJJZLr4jXNUByx3gR+TDYZCRXEktiZoUR3PGy4qCmSbkxcIle8GEwGpb5JBZazlaJ/CxLidXdEbQ==",
5278 |       "dev": true,
5279 |       "license": "MIT",
5280 |       "dependencies": {
5281 |         "@eslint-community/eslint-utils": "^4.2.0",
5282 |         "@eslint-community/regexpp": "^4.12.1",
5283 |         "@eslint/config-array": "^0.21.0",
5284 |         "@eslint/config-helpers": "^0.3.0",
5285 |         "@eslint/core": "^0.15.0",
5286 |         "@eslint/eslintrc": "^3.3.1",
5287 |         "@eslint/js": "9.31.0",
5288 |         "@eslint/plugin-kit": "^0.3.1",
5289 |         "@humanfs/node": "^0.16.6",
5290 |         "@humanwhocodes/module-importer": "^1.0.1",
5291 |         "@humanwhocodes/retry": "^0.4.2",
5292 |         "@types/estree": "^1.0.6",
5293 |         "@types/json-schema": "^7.0.15",
5294 |         "ajv": "^6.12.4",
5295 |         "chalk": "^4.0.0",
5296 |         "cross-spawn": "^7.0.6",
5297 |         "debug": "^4.3.2",
5298 |         "escape-string-regexp": "^4.0.0",
5299 |         "eslint-scope": "^8.4.0",
5300 |         "eslint-visitor-keys": "^4.2.1",
5301 |         "espree": "^10.4.0",
5302 |         "esquery": "^1.5.0",
5303 |         "esutils": "^2.0.2",
5304 |         "fast-deep-equal": "^3.1.3",
5305 |         "file-entry-cache": "^8.0.0",
5306 |         "find-up": "^5.0.0",
5307 |         "glob-parent": "^6.0.2",
5308 |         "ignore": "^5.2.0",
5309 |         "imurmurhash": "^0.1.4",
5310 |         "is-glob": "^4.0.0",
5311 |         "json-stable-stringify-without-jsonify": "^1.0.1",
5312 |         "lodash.merge": "^4.6.2",
5313 |         "minimatch": "^3.1.2",
5314 |         "natural-compare": "^1.4.0",
5315 |         "optionator": "^0.9.3"
5316 |       },
5317 |       "bin": {
5318 |         "eslint": "bin/eslint.js"
5319 |       },
5320 |       "engines": {
5321 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
5322 |       },
5323 |       "funding": {
5324 |         "url": "https://eslint.org/donate"
5325 |       },
5326 |       "peerDependencies": {
5327 |         "jiti": "*"
5328 |       },
5329 |       "peerDependenciesMeta": {
5330 |         "jiti": {
5331 |           "optional": true
5332 |         }
5333 |       }
5334 |     },
5335 |     "node_modules/eslint-config-next": {
5336 |       "version": "15.4.2",
5337 |       "resolved": "https://registry.npmjs.org/eslint-config-next/-/eslint-config-next-15.4.2.tgz",
5338 |       "integrity": "sha512-rAeZyTWn1/36Y+S+KpJ/W+RAUmM6fpBWsON4Uci+5l9DIKrhkMK0rgAZQ45ktx+xFk5tyYwkTBGit/9jalsHrw==",
5339 |       "dev": true,
5340 |       "license": "MIT",
5341 |       "dependencies": {
5342 |         "@next/eslint-plugin-next": "15.4.2",
5343 |         "@rushstack/eslint-patch": "^1.10.3",
5344 |         "@typescript-eslint/eslint-plugin": "^5.4.2 || ^6.0.0 || ^7.0.0 || ^8.0.0",
5345 |         "@typescript-eslint/parser": "^5.4.2 || ^6.0.0 || ^7.0.0 || ^8.0.0",
5346 |         "eslint-import-resolver-node": "^0.3.6",
5347 |         "eslint-import-resolver-typescript": "^3.5.2",
5348 |         "eslint-plugin-import": "^2.31.0",
5349 |         "eslint-plugin-jsx-a11y": "^6.10.0",
5350 |         "eslint-plugin-react": "^7.37.0",
5351 |         "eslint-plugin-react-hooks": "^5.0.0"
5352 |       },
5353 |       "peerDependencies": {
5354 |         "eslint": "^7.23.0 || ^8.0.0 || ^9.0.0",
5355 |         "typescript": ">=3.3.1"
5356 |       },
5357 |       "peerDependenciesMeta": {
5358 |         "typescript": {
5359 |           "optional": true
5360 |         }
5361 |       }
5362 |     },
5363 |     "node_modules/eslint-import-resolver-node": {
5364 |       "version": "0.3.9",
5365 |       "resolved": "https://registry.npmjs.org/eslint-import-resolver-node/-/eslint-import-resolver-node-0.3.9.tgz",
5366 |       "integrity": "sha512-WFj2isz22JahUv+B788TlO3N6zL3nNJGU8CcZbPZvVEkBPaJdCV4vy5wyghty5ROFbCRnm132v8BScu5/1BQ8g==",
5367 |       "dev": true,
5368 |       "license": "MIT",
5369 |       "dependencies": {
5370 |         "debug": "^3.2.7",
5371 |         "is-core-module": "^2.13.0",
5372 |         "resolve": "^1.22.4"
5373 |       }
5374 |     },
5375 |     "node_modules/eslint-import-resolver-node/node_modules/debug": {
5376 |       "version": "3.2.7",
5377 |       "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
5378 |       "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
5379 |       "dev": true,
5380 |       "license": "MIT",
5381 |       "dependencies": {
5382 |         "ms": "^2.1.1"
5383 |       }
5384 |     },
5385 |     "node_modules/eslint-import-resolver-typescript": {
5386 |       "version": "3.10.1",
5387 |       "resolved": "https://registry.npmjs.org/eslint-import-resolver-typescript/-/eslint-import-resolver-typescript-3.10.1.tgz",
5388 |       "integrity": "sha512-A1rHYb06zjMGAxdLSkN2fXPBwuSaQ0iO5M/hdyS0Ajj1VBaRp0sPD3dn1FhME3c/JluGFbwSxyCfqdSbtQLAHQ==",
5389 |       "dev": true,
5390 |       "license": "ISC",
5391 |       "dependencies": {
5392 |         "@nolyfill/is-core-module": "1.0.39",
5393 |         "debug": "^4.4.0",
5394 |         "get-tsconfig": "^4.10.0",
5395 |         "is-bun-module": "^2.0.0",
5396 |         "stable-hash": "^0.0.5",
5397 |         "tinyglobby": "^0.2.13",
5398 |         "unrs-resolver": "^1.6.2"
5399 |       },
5400 |       "engines": {
5401 |         "node": "^14.18.0 || >=16.0.0"
5402 |       },
5403 |       "funding": {
5404 |         "url": "https://opencollective.com/eslint-import-resolver-typescript"
5405 |       },
5406 |       "peerDependencies": {
5407 |         "eslint": "*",
5408 |         "eslint-plugin-import": "*",
5409 |         "eslint-plugin-import-x": "*"
5410 |       },
5411 |       "peerDependenciesMeta": {
5412 |         "eslint-plugin-import": {
5413 |           "optional": true
5414 |         },
5415 |         "eslint-plugin-import-x": {
5416 |           "optional": true
5417 |         }
5418 |       }
5419 |     },
5420 |     "node_modules/eslint-module-utils": {
5421 |       "version": "2.12.1",
5422 |       "resolved": "https://registry.npmjs.org/eslint-module-utils/-/eslint-module-utils-2.12.1.tgz",
5423 |       "integrity": "sha512-L8jSWTze7K2mTg0vos/RuLRS5soomksDPoJLXIslC7c8Wmut3bx7CPpJijDcBZtxQ5lrbUdM+s0OlNbz0DCDNw==",
5424 |       "dev": true,
5425 |       "license": "MIT",
5426 |       "dependencies": {
5427 |         "debug": "^3.2.7"
5428 |       },
5429 |       "engines": {
5430 |         "node": ">=4"
5431 |       },
5432 |       "peerDependenciesMeta": {
5433 |         "eslint": {
5434 |           "optional": true
5435 |         }
5436 |       }
5437 |     },
5438 |     "node_modules/eslint-module-utils/node_modules/debug": {
5439 |       "version": "3.2.7",
5440 |       "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
5441 |       "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
5442 |       "dev": true,
5443 |       "license": "MIT",
5444 |       "dependencies": {
5445 |         "ms": "^2.1.1"
5446 |       }
5447 |     },
5448 |     "node_modules/eslint-plugin-import": {
5449 |       "version": "2.32.0",
5450 |       "resolved": "https://registry.npmjs.org/eslint-plugin-import/-/eslint-plugin-import-2.32.0.tgz",
5451 |       "integrity": "sha512-whOE1HFo/qJDyX4SnXzP4N6zOWn79WhnCUY/iDR0mPfQZO8wcYE4JClzI2oZrhBnnMUCBCHZhO6VQyoBU95mZA==",
5452 |       "dev": true,
5453 |       "license": "MIT",
5454 |       "dependencies": {
5455 |         "@rtsao/scc": "^1.1.0",
5456 |         "array-includes": "^3.1.9",
5457 |         "array.prototype.findlastindex": "^1.2.6",
5458 |         "array.prototype.flat": "^1.3.3",
5459 |         "array.prototype.flatmap": "^1.3.3",
5460 |         "debug": "^3.2.7",
5461 |         "doctrine": "^2.1.0",
5462 |         "eslint-import-resolver-node": "^0.3.9",
5463 |         "eslint-module-utils": "^2.12.1",
5464 |         "hasown": "^2.0.2",
5465 |         "is-core-module": "^2.16.1",
5466 |         "is-glob": "^4.0.3",
5467 |         "minimatch": "^3.1.2",
5468 |         "object.fromentries": "^2.0.8",
5469 |         "object.groupby": "^1.0.3",
5470 |         "object.values": "^1.2.1",
5471 |         "semver": "^6.3.1",
5472 |         "string.prototype.trimend": "^1.0.9",
5473 |         "tsconfig-paths": "^3.15.0"
5474 |       },
5475 |       "engines": {
5476 |         "node": ">=4"
5477 |       },
5478 |       "peerDependencies": {
5479 |         "eslint": "^2 || ^3 || ^4 || ^5 || ^6 || ^7.2.0 || ^8 || ^9"
5480 |       }
5481 |     },
5482 |     "node_modules/eslint-plugin-import/node_modules/debug": {
5483 |       "version": "3.2.7",
5484 |       "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
5485 |       "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
5486 |       "dev": true,
5487 |       "license": "MIT",
5488 |       "dependencies": {
5489 |         "ms": "^2.1.1"
5490 |       }
5491 |     },
5492 |     "node_modules/eslint-plugin-import/node_modules/semver": {
5493 |       "version": "6.3.1",
5494 |       "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
5495 |       "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
5496 |       "dev": true,
5497 |       "license": "ISC",
5498 |       "bin": {
5499 |         "semver": "bin/semver.js"
5500 |       }
5501 |     },
5502 |     "node_modules/eslint-plugin-jsx-a11y": {
5503 |       "version": "6.10.2",
5504 |       "resolved": "https://registry.npmjs.org/eslint-plugin-jsx-a11y/-/eslint-plugin-jsx-a11y-6.10.2.tgz",
5505 |       "integrity": "sha512-scB3nz4WmG75pV8+3eRUQOHZlNSUhFNq37xnpgRkCCELU3XMvXAxLk1eqWWyE22Ki4Q01Fnsw9BA3cJHDPgn2Q==",
5506 |       "dev": true,
5507 |       "license": "MIT",
5508 |       "dependencies": {
5509 |         "aria-query": "^5.3.2",
5510 |         "array-includes": "^3.1.8",
5511 |         "array.prototype.flatmap": "^1.3.2",
5512 |         "ast-types-flow": "^0.0.8",
5513 |         "axe-core": "^4.10.0",
5514 |         "axobject-query": "^4.1.0",
5515 |         "damerau-levenshtein": "^1.0.8",
5516 |         "emoji-regex": "^9.2.2",
5517 |         "hasown": "^2.0.2",
5518 |         "jsx-ast-utils": "^3.3.5",
5519 |         "language-tags": "^1.0.9",
5520 |         "minimatch": "^3.1.2",
5521 |         "object.fromentries": "^2.0.8",
5522 |         "safe-regex-test": "^1.0.3",
5523 |         "string.prototype.includes": "^2.0.1"
5524 |       },
5525 |       "engines": {
5526 |         "node": ">=4.0"
5527 |       },
5528 |       "peerDependencies": {
5529 |         "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9"
5530 |       }
5531 |     },
5532 |     "node_modules/eslint-plugin-react": {
5533 |       "version": "7.37.5",
5534 |       "resolved": "https://registry.npmjs.org/eslint-plugin-react/-/eslint-plugin-react-7.37.5.tgz",
5535 |       "integrity": "sha512-Qteup0SqU15kdocexFNAJMvCJEfa2xUKNV4CC1xsVMrIIqEy3SQ/rqyxCWNzfrd3/ldy6HMlD2e0JDVpDg2qIA==",
5536 |       "dev": true,
5537 |       "license": "MIT",
5538 |       "dependencies": {
5539 |         "array-includes": "^3.1.8",
5540 |         "array.prototype.findlast": "^1.2.5",
5541 |         "array.prototype.flatmap": "^1.3.3",
5542 |         "array.prototype.tosorted": "^1.1.4",
5543 |         "doctrine": "^2.1.0",
5544 |         "es-iterator-helpers": "^1.2.1",
5545 |         "estraverse": "^5.3.0",
5546 |         "hasown": "^2.0.2",
5547 |         "jsx-ast-utils": "^2.4.1 || ^3.0.0",
5548 |         "minimatch": "^3.1.2",
5549 |         "object.entries": "^1.1.9",
5550 |         "object.fromentries": "^2.0.8",
5551 |         "object.values": "^1.2.1",
5552 |         "prop-types": "^15.8.1",
5553 |         "resolve": "^2.0.0-next.5",
5554 |         "semver": "^6.3.1",
5555 |         "string.prototype.matchall": "^4.0.12",
5556 |         "string.prototype.repeat": "^1.0.0"
5557 |       },
5558 |       "engines": {
5559 |         "node": ">=4"
5560 |       },
5561 |       "peerDependencies": {
5562 |         "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9.7"
5563 |       }
5564 |     },
5565 |     "node_modules/eslint-plugin-react-hooks": {
5566 |       "version": "5.2.0",
5567 |       "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-5.2.0.tgz",
5568 |       "integrity": "sha512-+f15FfK64YQwZdJNELETdn5ibXEUQmW1DZL6KXhNnc2heoy/sg9VJJeT7n8TlMWouzWqSWavFkIhHyIbIAEapg==",
5569 |       "dev": true,
5570 |       "license": "MIT",
5571 |       "engines": {
5572 |         "node": ">=10"
5573 |       },
5574 |       "peerDependencies": {
5575 |         "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
5576 |       }
5577 |     },
5578 |     "node_modules/eslint-plugin-react/node_modules/resolve": {
5579 |       "version": "2.0.0-next.5",
5580 |       "resolved": "https://registry.npmjs.org/resolve/-/resolve-2.0.0-next.5.tgz",
5581 |       "integrity": "sha512-U7WjGVG9sH8tvjW5SmGbQuui75FiyjAX72HX15DwBBwF9dNiQZRQAg9nnPhYy+TUnE0+VcrttuvNI8oSxZcocA==",
5582 |       "dev": true,
5583 |       "license": "MIT",
5584 |       "dependencies": {
5585 |         "is-core-module": "^2.13.0",
5586 |         "path-parse": "^1.0.7",
5587 |         "supports-preserve-symlinks-flag": "^1.0.0"
5588 |       },
5589 |       "bin": {
5590 |         "resolve": "bin/resolve"
5591 |       },
5592 |       "funding": {
5593 |         "url": "https://github.com/sponsors/ljharb"
5594 |       }
5595 |     },
5596 |     "node_modules/eslint-plugin-react/node_modules/semver": {
5597 |       "version": "6.3.1",
5598 |       "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
5599 |       "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
5600 |       "dev": true,
5601 |       "license": "ISC",
5602 |       "bin": {
5603 |         "semver": "bin/semver.js"
5604 |       }
5605 |     },
5606 |     "node_modules/eslint-scope": {
5607 |       "version": "8.4.0",
5608 |       "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
5609 |       "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
5610 |       "dev": true,
5611 |       "license": "BSD-2-Clause",
5612 |       "dependencies": {
5613 |         "esrecurse": "^4.3.0",
5614 |         "estraverse": "^5.2.0"
5615 |       },
5616 |       "engines": {
5617 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
5618 |       },
5619 |       "funding": {
5620 |         "url": "https://opencollective.com/eslint"
5621 |       }
5622 |     },
5623 |     "node_modules/eslint-visitor-keys": {
5624 |       "version": "4.2.1",
5625 |       "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
5626 |       "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
5627 |       "dev": true,
5628 |       "license": "Apache-2.0",
5629 |       "engines": {
5630 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
5631 |       },
5632 |       "funding": {
5633 |         "url": "https://opencollective.com/eslint"
5634 |       }
5635 |     },
5636 |     "node_modules/espree": {
5637 |       "version": "10.4.0",
5638 |       "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
5639 |       "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
5640 |       "dev": true,
5641 |       "license": "BSD-2-Clause",
5642 |       "dependencies": {
5643 |         "acorn": "^8.15.0",
5644 |         "acorn-jsx": "^5.3.2",
5645 |         "eslint-visitor-keys": "^4.2.1"
5646 |       },
5647 |       "engines": {
5648 |         "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
5649 |       },
5650 |       "funding": {
5651 |         "url": "https://opencollective.com/eslint"
5652 |       }
5653 |     },
5654 |     "node_modules/esquery": {
5655 |       "version": "1.6.0",
5656 |       "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
5657 |       "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
5658 |       "dev": true,
5659 |       "license": "BSD-3-Clause",
5660 |       "dependencies": {
5661 |         "estraverse": "^5.1.0"
5662 |       },
5663 |       "engines": {
5664 |         "node": ">=0.10"
5665 |       }
5666 |     },
5667 |     "node_modules/esrecurse": {
5668 |       "version": "4.3.0",
5669 |       "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
5670 |       "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
5671 |       "dev": true,
5672 |       "license": "BSD-2-Clause",
5673 |       "dependencies": {
5674 |         "estraverse": "^5.2.0"
5675 |       },
5676 |       "engines": {
5677 |         "node": ">=4.0"
5678 |       }
5679 |     },
5680 |     "node_modules/estraverse": {
5681 |       "version": "5.3.0",
5682 |       "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
5683 |       "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
5684 |       "dev": true,
5685 |       "license": "BSD-2-Clause",
5686 |       "engines": {
5687 |         "node": ">=4.0"
5688 |       }
5689 |     },
5690 |     "node_modules/esutils": {
5691 |       "version": "2.0.3",
5692 |       "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
5693 |       "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
5694 |       "dev": true,
5695 |       "license": "BSD-2-Clause",
5696 |       "engines": {
5697 |         "node": ">=0.10.0"
5698 |       }
5699 |     },
5700 |     "node_modules/fast-deep-equal": {
5701 |       "version": "3.1.3",
5702 |       "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
5703 |       "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
5704 |       "dev": true,
5705 |       "license": "MIT"
5706 |     },
5707 |     "node_modules/fast-glob": {
5708 |       "version": "3.3.1",
5709 |       "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.1.tgz",
5710 |       "integrity": "sha512-kNFPyjhh5cKjrUltxs+wFx+ZkbRaxxmZ+X0ZU31SOsxCEtP9VPgtq2teZw1DebupL5GmDaNQ6yKMMVcM41iqDg==",
5711 |       "dev": true,
5712 |       "license": "MIT",
5713 |       "dependencies": {
5714 |         "@nodelib/fs.stat": "^2.0.2",
5715 |         "@nodelib/fs.walk": "^1.2.3",
5716 |         "glob-parent": "^5.1.2",
5717 |         "merge2": "^1.3.0",
5718 |         "micromatch": "^4.0.4"
5719 |       },
5720 |       "engines": {
5721 |         "node": ">=8.6.0"
5722 |       }
5723 |     },
5724 |     "node_modules/fast-glob/node_modules/glob-parent": {
5725 |       "version": "5.1.2",
5726 |       "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
5727 |       "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
5728 |       "dev": true,
5729 |       "license": "ISC",
5730 |       "dependencies": {
5731 |         "is-glob": "^4.0.1"
5732 |       },
5733 |       "engines": {
5734 |         "node": ">= 6"
5735 |       }
5736 |     },
5737 |     "node_modules/fast-json-stable-stringify": {
5738 |       "version": "2.1.0",
5739 |       "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
5740 |       "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
5741 |       "dev": true,
5742 |       "license": "MIT"
5743 |     },
5744 |     "node_modules/fast-levenshtein": {
5745 |       "version": "2.0.6",
5746 |       "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
5747 |       "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
5748 |       "dev": true,
5749 |       "license": "MIT"
5750 |     },
5751 |     "node_modules/fast-redact": {
5752 |       "version": "3.5.0",
5753 |       "resolved": "https://registry.npmjs.org/fast-redact/-/fast-redact-3.5.0.tgz",
5754 |       "integrity": "sha512-dwsoQlS7h9hMeYUq1W++23NDcBLV4KqONnITDV9DjfS3q1SgDGVrBdvvTLUotWtPSD7asWDV9/CmsZPy8Hf70A==",
5755 |       "license": "MIT",
5756 |       "engines": {
5757 |         "node": ">=6"
5758 |       }
5759 |     },
5760 |     "node_modules/fastq": {
5761 |       "version": "1.19.1",
5762 |       "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
5763 |       "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
5764 |       "dev": true,
5765 |       "license": "ISC",
5766 |       "dependencies": {
5767 |         "reusify": "^1.0.4"
5768 |       }
5769 |     },
5770 |     "node_modules/file-entry-cache": {
5771 |       "version": "8.0.0",
5772 |       "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
5773 |       "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
5774 |       "dev": true,
5775 |       "license": "MIT",
5776 |       "dependencies": {
5777 |         "flat-cache": "^4.0.0"
5778 |       },
5779 |       "engines": {
5780 |         "node": ">=16.0.0"
5781 |       }
5782 |     },
5783 |     "node_modules/fill-range": {
5784 |       "version": "7.1.1",
5785 |       "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
5786 |       "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
5787 |       "dev": true,
5788 |       "license": "MIT",
5789 |       "dependencies": {
5790 |         "to-regex-range": "^5.0.1"
5791 |       },
5792 |       "engines": {
5793 |         "node": ">=8"
5794 |       }
5795 |     },
5796 |     "node_modules/find-up": {
5797 |       "version": "5.0.0",
5798 |       "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
5799 |       "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
5800 |       "dev": true,
5801 |       "license": "MIT",
5802 |       "dependencies": {
5803 |         "locate-path": "^6.0.0",
5804 |         "path-exists": "^4.0.0"
5805 |       },
5806 |       "engines": {
5807 |         "node": ">=10"
5808 |       },
5809 |       "funding": {
5810 |         "url": "https://github.com/sponsors/sindresorhus"
5811 |       }
5812 |     },
5813 |     "node_modules/flat-cache": {
5814 |       "version": "4.0.1",
5815 |       "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
5816 |       "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
5817 |       "dev": true,
5818 |       "license": "MIT",
5819 |       "dependencies": {
5820 |         "flatted": "^3.2.9",
5821 |         "keyv": "^4.5.4"
5822 |       },
5823 |       "engines": {
5824 |         "node": ">=16"
5825 |       }
5826 |     },
5827 |     "node_modules/flatted": {
5828 |       "version": "3.3.3",
5829 |       "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
5830 |       "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
5831 |       "dev": true,
5832 |       "license": "ISC"
5833 |     },
5834 |     "node_modules/for-each": {
5835 |       "version": "0.3.5",
5836 |       "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
5837 |       "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
5838 |       "dev": true,
5839 |       "license": "MIT",
5840 |       "dependencies": {
5841 |         "is-callable": "^1.2.7"
5842 |       },
5843 |       "engines": {
5844 |         "node": ">= 0.4"
5845 |       },
5846 |       "funding": {
5847 |         "url": "https://github.com/sponsors/ljharb"
5848 |       }
5849 |     },
5850 |     "node_modules/fsevents": {
5851 |       "version": "2.3.3",
5852 |       "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
5853 |       "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
5854 |       "dev": true,
5855 |       "hasInstallScript": true,
5856 |       "license": "MIT",
5857 |       "optional": true,
5858 |       "os": [
5859 |         "darwin"
5860 |       ],
5861 |       "engines": {
5862 |         "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
5863 |       }
5864 |     },
5865 |     "node_modules/function-bind": {
5866 |       "version": "1.1.2",
5867 |       "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
5868 |       "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
5869 |       "dev": true,
5870 |       "license": "MIT",
5871 |       "funding": {
5872 |         "url": "https://github.com/sponsors/ljharb"
5873 |       }
5874 |     },
5875 |     "node_modules/function.prototype.name": {
5876 |       "version": "1.1.8",
5877 |       "resolved": "https://registry.npmjs.org/function.prototype.name/-/function.prototype.name-1.1.8.tgz",
5878 |       "integrity": "sha512-e5iwyodOHhbMr/yNrc7fDYG4qlbIvI5gajyzPnb5TCwyhjApznQh1BMFou9b30SevY43gCJKXycoCBjMbsuW0Q==",
5879 |       "dev": true,
5880 |       "license": "MIT",
5881 |       "dependencies": {
5882 |         "call-bind": "^1.0.8",
5883 |         "call-bound": "^1.0.3",
5884 |         "define-properties": "^1.2.1",
5885 |         "functions-have-names": "^1.2.3",
5886 |         "hasown": "^2.0.2",
5887 |         "is-callable": "^1.2.7"
5888 |       },
5889 |       "engines": {
5890 |         "node": ">= 0.4"
5891 |       },
5892 |       "funding": {
5893 |         "url": "https://github.com/sponsors/ljharb"
5894 |       }
5895 |     },
5896 |     "node_modules/functions-have-names": {
5897 |       "version": "1.2.3",
5898 |       "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
5899 |       "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
5900 |       "dev": true,
5901 |       "license": "MIT",
5902 |       "funding": {
5903 |         "url": "https://github.com/sponsors/ljharb"
5904 |       }
5905 |     },
5906 |     "node_modules/geist": {
5907 |       "version": "1.4.2",
5908 |       "resolved": "https://registry.npmjs.org/geist/-/geist-1.4.2.tgz",
5909 |       "integrity": "sha512-OQUga/KUc8ueijck6EbtT07L4tZ5+TZgjw8PyWfxo16sL5FWk7gNViPNU8hgCFjy6bJi9yuTP+CRpywzaGN8zw==",
5910 |       "license": "SIL OPEN FONT LICENSE",
5911 |       "peerDependencies": {
5912 |         "next": ">=13.2.0"
5913 |       }
5914 |     },
5915 |     "node_modules/get-intrinsic": {
5916 |       "version": "1.3.0",
5917 |       "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
5918 |       "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
5919 |       "dev": true,
5920 |       "license": "MIT",
5921 |       "dependencies": {
5922 |         "call-bind-apply-helpers": "^1.0.2",
5923 |         "es-define-property": "^1.0.1",
5924 |         "es-errors": "^1.3.0",
5925 |         "es-object-atoms": "^1.1.1",
5926 |         "function-bind": "^1.1.2",
5927 |         "get-proto": "^1.0.1",
5928 |         "gopd": "^1.2.0",
5929 |         "has-symbols": "^1.1.0",
5930 |         "hasown": "^2.0.2",
5931 |         "math-intrinsics": "^1.1.0"
5932 |       },
5933 |       "engines": {
5934 |         "node": ">= 0.4"
5935 |       },
5936 |       "funding": {
5937 |         "url": "https://github.com/sponsors/ljharb"
5938 |       }
5939 |     },
5940 |     "node_modules/get-nonce": {
5941 |       "version": "1.0.1",
5942 |       "resolved": "https://registry.npmjs.org/get-nonce/-/get-nonce-1.0.1.tgz",
5943 |       "integrity": "sha512-FJhYRoDaiatfEkUK8HKlicmu/3SGFD51q3itKDGoSTysQJBnfOcxU5GxnhE1E6soB76MbT0MBtnKJuXyAx+96Q==",
5944 |       "license": "MIT",
5945 |       "engines": {
5946 |         "node": ">=6"
5947 |       }
5948 |     },
5949 |     "node_modules/get-proto": {
5950 |       "version": "1.0.1",
5951 |       "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
5952 |       "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
5953 |       "dev": true,
5954 |       "license": "MIT",
5955 |       "dependencies": {
5956 |         "dunder-proto": "^1.0.1",
5957 |         "es-object-atoms": "^1.0.0"
5958 |       },
5959 |       "engines": {
5960 |         "node": ">= 0.4"
5961 |       }
5962 |     },
5963 |     "node_modules/get-symbol-description": {
5964 |       "version": "1.1.0",
5965 |       "resolved": "https://registry.npmjs.org/get-symbol-description/-/get-symbol-description-1.1.0.tgz",
5966 |       "integrity": "sha512-w9UMqWwJxHNOvoNzSJ2oPF5wvYcvP7jUvYzhp67yEhTi17ZDBBC1z9pTdGuzjD+EFIqLSYRweZjqfiPzQ06Ebg==",
5967 |       "dev": true,
5968 |       "license": "MIT",
5969 |       "dependencies": {
5970 |         "call-bound": "^1.0.3",
5971 |         "es-errors": "^1.3.0",
5972 |         "get-intrinsic": "^1.2.6"
5973 |       },
5974 |       "engines": {
5975 |         "node": ">= 0.4"
5976 |       },
5977 |       "funding": {
5978 |         "url": "https://github.com/sponsors/ljharb"
5979 |       }
5980 |     },
5981 |     "node_modules/get-tsconfig": {
5982 |       "version": "4.10.1",
5983 |       "resolved": "https://registry.npmjs.org/get-tsconfig/-/get-tsconfig-4.10.1.tgz",
5984 |       "integrity": "sha512-auHyJ4AgMz7vgS8Hp3N6HXSmlMdUyhSUrfBF16w153rxtLIEOE+HGqaBppczZvnHLqQJfiHotCYpNhl0lUROFQ==",
5985 |       "dev": true,
5986 |       "license": "MIT",
5987 |       "dependencies": {
5988 |         "resolve-pkg-maps": "^1.0.0"
5989 |       },
5990 |       "funding": {
5991 |         "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
5992 |       }
5993 |     },
5994 |     "node_modules/glob-parent": {
5995 |       "version": "6.0.2",
5996 |       "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
5997 |       "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
5998 |       "dev": true,
5999 |       "license": "ISC",
6000 |       "dependencies": {
6001 |         "is-glob": "^4.0.3"
6002 |       },
6003 |       "engines": {
6004 |         "node": ">=10.13.0"
6005 |       }
6006 |     },
6007 |     "node_modules/globals": {
6008 |       "version": "14.0.0",
6009 |       "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
6010 |       "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
6011 |       "dev": true,
6012 |       "license": "MIT",
6013 |       "engines": {
6014 |         "node": ">=18"
6015 |       },
6016 |       "funding": {
6017 |         "url": "https://github.com/sponsors/sindresorhus"
6018 |       }
6019 |     },
6020 |     "node_modules/globalthis": {
6021 |       "version": "1.0.4",
6022 |       "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.4.tgz",
6023 |       "integrity": "sha512-DpLKbNU4WylpxJykQujfCcwYWiV/Jhm50Goo0wrVILAv5jOr9d+H+UR3PhSCD2rCCEIg0uc+G+muBTwD54JhDQ==",
6024 |       "dev": true,
6025 |       "license": "MIT",
6026 |       "dependencies": {
6027 |         "define-properties": "^1.2.1",
6028 |         "gopd": "^1.0.1"
6029 |       },
6030 |       "engines": {
6031 |         "node": ">= 0.4"
6032 |       },
6033 |       "funding": {
6034 |         "url": "https://github.com/sponsors/ljharb"
6035 |       }
6036 |     },
6037 |     "node_modules/gopd": {
6038 |       "version": "1.2.0",
6039 |       "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
6040 |       "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
6041 |       "dev": true,
6042 |       "license": "MIT",
6043 |       "engines": {
6044 |         "node": ">= 0.4"
6045 |       },
6046 |       "funding": {
6047 |         "url": "https://github.com/sponsors/ljharb"
6048 |       }
6049 |     },
6050 |     "node_modules/graceful-fs": {
6051 |       "version": "4.2.11",
6052 |       "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
6053 |       "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
6054 |       "dev": true,
6055 |       "license": "ISC"
6056 |     },
6057 |     "node_modules/graphemer": {
6058 |       "version": "1.4.0",
6059 |       "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
6060 |       "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
6061 |       "dev": true,
6062 |       "license": "MIT"
6063 |     },
6064 |     "node_modules/has-bigints": {
6065 |       "version": "1.1.0",
6066 |       "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
6067 |       "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
6068 |       "dev": true,
6069 |       "license": "MIT",
6070 |       "engines": {
6071 |         "node": ">= 0.4"
6072 |       },
6073 |       "funding": {
6074 |         "url": "https://github.com/sponsors/ljharb"
6075 |       }
6076 |     },
6077 |     "node_modules/has-flag": {
6078 |       "version": "4.0.0",
6079 |       "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
6080 |       "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
6081 |       "dev": true,
6082 |       "license": "MIT",
6083 |       "engines": {
6084 |         "node": ">=8"
6085 |       }
6086 |     },
6087 |     "node_modules/has-property-descriptors": {
6088 |       "version": "1.0.2",
6089 |       "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
6090 |       "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
6091 |       "dev": true,
6092 |       "license": "MIT",
6093 |       "dependencies": {
6094 |         "es-define-property": "^1.0.0"
6095 |       },
6096 |       "funding": {
6097 |         "url": "https://github.com/sponsors/ljharb"
6098 |       }
6099 |     },
6100 |     "node_modules/has-proto": {
6101 |       "version": "1.2.0",
6102 |       "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.2.0.tgz",
6103 |       "integrity": "sha512-KIL7eQPfHQRC8+XluaIw7BHUwwqL19bQn4hzNgdr+1wXoU0KKj6rufu47lhY7KbJR2C6T6+PfyN0Ea7wkSS+qQ==",
6104 |       "dev": true,
6105 |       "license": "MIT",
6106 |       "dependencies": {
6107 |         "dunder-proto": "^1.0.0"
6108 |       },
6109 |       "engines": {
6110 |         "node": ">= 0.4"
6111 |       },
6112 |       "funding": {
6113 |         "url": "https://github.com/sponsors/ljharb"
6114 |       }
6115 |     },
6116 |     "node_modules/has-symbols": {
6117 |       "version": "1.1.0",
6118 |       "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
6119 |       "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
6120 |       "dev": true,
6121 |       "license": "MIT",
6122 |       "engines": {
6123 |         "node": ">= 0.4"
6124 |       },
6125 |       "funding": {
6126 |         "url": "https://github.com/sponsors/ljharb"
6127 |       }
6128 |     },
6129 |     "node_modules/has-tostringtag": {
6130 |       "version": "1.0.2",
6131 |       "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
6132 |       "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
6133 |       "dev": true,
6134 |       "license": "MIT",
6135 |       "dependencies": {
6136 |         "has-symbols": "^1.0.3"
6137 |       },
6138 |       "engines": {
6139 |         "node": ">= 0.4"
6140 |       },
6141 |       "funding": {
6142 |         "url": "https://github.com/sponsors/ljharb"
6143 |       }
6144 |     },
6145 |     "node_modules/hasown": {
6146 |       "version": "2.0.2",
6147 |       "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
6148 |       "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
6149 |       "dev": true,
6150 |       "license": "MIT",
6151 |       "dependencies": {
6152 |         "function-bind": "^1.1.2"
6153 |       },
6154 |       "engines": {
6155 |         "node": ">= 0.4"
6156 |       }
6157 |     },
6158 |     "node_modules/ignore": {
6159 |       "version": "5.3.2",
6160 |       "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
6161 |       "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
6162 |       "dev": true,
6163 |       "license": "MIT",
6164 |       "engines": {
6165 |         "node": ">= 4"
6166 |       }
6167 |     },
6168 |     "node_modules/import-fresh": {
6169 |       "version": "3.3.1",
6170 |       "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
6171 |       "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
6172 |       "dev": true,
6173 |       "license": "MIT",
6174 |       "dependencies": {
6175 |         "parent-module": "^1.0.0",
6176 |         "resolve-from": "^4.0.0"
6177 |       },
6178 |       "engines": {
6179 |         "node": ">=6"
6180 |       },
6181 |       "funding": {
6182 |         "url": "https://github.com/sponsors/sindresorhus"
6183 |       }
6184 |     },
6185 |     "node_modules/imurmurhash": {
6186 |       "version": "0.1.4",
6187 |       "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
6188 |       "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
6189 |       "dev": true,
6190 |       "license": "MIT",
6191 |       "engines": {
6192 |         "node": ">=0.8.19"
6193 |       }
6194 |     },
6195 |     "node_modules/internal-slot": {
6196 |       "version": "1.1.0",
6197 |       "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
6198 |       "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
6199 |       "dev": true,
6200 |       "license": "MIT",
6201 |       "dependencies": {
6202 |         "es-errors": "^1.3.0",
6203 |         "hasown": "^2.0.2",
6204 |         "side-channel": "^1.1.0"
6205 |       },
6206 |       "engines": {
6207 |         "node": ">= 0.4"
6208 |       }
6209 |     },
6210 |     "node_modules/is-array-buffer": {
6211 |       "version": "3.0.5",
6212 |       "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
6213 |       "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
6214 |       "dev": true,
6215 |       "license": "MIT",
6216 |       "dependencies": {
6217 |         "call-bind": "^1.0.8",
6218 |         "call-bound": "^1.0.3",
6219 |         "get-intrinsic": "^1.2.6"
6220 |       },
6221 |       "engines": {
6222 |         "node": ">= 0.4"
6223 |       },
6224 |       "funding": {
6225 |         "url": "https://github.com/sponsors/ljharb"
6226 |       }
6227 |     },
6228 |     "node_modules/is-arrayish": {
6229 |       "version": "0.3.2",
6230 |       "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.3.2.tgz",
6231 |       "integrity": "sha512-eVRqCvVlZbuw3GrM63ovNSNAeA1K16kaR/LRY/92w0zxQ5/1YzwblUX652i4Xs9RwAGjW9d9y6X88t8OaAJfWQ==",
6232 |       "license": "MIT",
6233 |       "optional": true
6234 |     },
6235 |     "node_modules/is-async-function": {
6236 |       "version": "2.1.1",
6237 |       "resolved": "https://registry.npmjs.org/is-async-function/-/is-async-function-2.1.1.tgz",
6238 |       "integrity": "sha512-9dgM/cZBnNvjzaMYHVoxxfPj2QXt22Ev7SuuPrs+xav0ukGB0S6d4ydZdEiM48kLx5kDV+QBPrpVnFyefL8kkQ==",
6239 |       "dev": true,
6240 |       "license": "MIT",
6241 |       "dependencies": {
6242 |         "async-function": "^1.0.0",
6243 |         "call-bound": "^1.0.3",
6244 |         "get-proto": "^1.0.1",
6245 |         "has-tostringtag": "^1.0.2",
6246 |         "safe-regex-test": "^1.1.0"
6247 |       },
6248 |       "engines": {
6249 |         "node": ">= 0.4"
6250 |       },
6251 |       "funding": {
6252 |         "url": "https://github.com/sponsors/ljharb"
6253 |       }
6254 |     },
6255 |     "node_modules/is-bigint": {
6256 |       "version": "1.1.0",
6257 |       "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
6258 |       "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
6259 |       "dev": true,
6260 |       "license": "MIT",
6261 |       "dependencies": {
6262 |         "has-bigints": "^1.0.2"
6263 |       },
6264 |       "engines": {
6265 |         "node": ">= 0.4"
6266 |       },
6267 |       "funding": {
6268 |         "url": "https://github.com/sponsors/ljharb"
6269 |       }
6270 |     },
6271 |     "node_modules/is-boolean-object": {
6272 |       "version": "1.2.2",
6273 |       "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
6274 |       "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
6275 |       "dev": true,
6276 |       "license": "MIT",
6277 |       "dependencies": {
6278 |         "call-bound": "^1.0.3",
6279 |         "has-tostringtag": "^1.0.2"
6280 |       },
6281 |       "engines": {
6282 |         "node": ">= 0.4"
6283 |       },
6284 |       "funding": {
6285 |         "url": "https://github.com/sponsors/ljharb"
6286 |       }
6287 |     },
6288 |     "node_modules/is-bun-module": {
6289 |       "version": "2.0.0",
6290 |       "resolved": "https://registry.npmjs.org/is-bun-module/-/is-bun-module-2.0.0.tgz",
6291 |       "integrity": "sha512-gNCGbnnnnFAUGKeZ9PdbyeGYJqewpmc2aKHUEMO5nQPWU9lOmv7jcmQIv+qHD8fXW6W7qfuCwX4rY9LNRjXrkQ==",
6292 |       "dev": true,
6293 |       "license": "MIT",
6294 |       "dependencies": {
6295 |         "semver": "^7.7.1"
6296 |       }
6297 |     },
6298 |     "node_modules/is-callable": {
6299 |       "version": "1.2.7",
6300 |       "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
6301 |       "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
6302 |       "dev": true,
6303 |       "license": "MIT",
6304 |       "engines": {
6305 |         "node": ">= 0.4"
6306 |       },
6307 |       "funding": {
6308 |         "url": "https://github.com/sponsors/ljharb"
6309 |       }
6310 |     },
6311 |     "node_modules/is-core-module": {
6312 |       "version": "2.16.1",
6313 |       "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
6314 |       "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
6315 |       "dev": true,
6316 |       "license": "MIT",
6317 |       "dependencies": {
6318 |         "hasown": "^2.0.2"
6319 |       },
6320 |       "engines": {
6321 |         "node": ">= 0.4"
6322 |       },
6323 |       "funding": {
6324 |         "url": "https://github.com/sponsors/ljharb"
6325 |       }
6326 |     },
6327 |     "node_modules/is-data-view": {
6328 |       "version": "1.0.2",
6329 |       "resolved": "https://registry.npmjs.org/is-data-view/-/is-data-view-1.0.2.tgz",
6330 |       "integrity": "sha512-RKtWF8pGmS87i2D6gqQu/l7EYRlVdfzemCJN/P3UOs//x1QE7mfhvzHIApBTRf7axvT6DMGwSwBXYCT0nfB9xw==",
6331 |       "dev": true,
6332 |       "license": "MIT",
6333 |       "dependencies": {
6334 |         "call-bound": "^1.0.2",
6335 |         "get-intrinsic": "^1.2.6",
6336 |         "is-typed-array": "^1.1.13"
6337 |       },
6338 |       "engines": {
6339 |         "node": ">= 0.4"
6340 |       },
6341 |       "funding": {
6342 |         "url": "https://github.com/sponsors/ljharb"
6343 |       }
6344 |     },
6345 |     "node_modules/is-date-object": {
6346 |       "version": "1.1.0",
6347 |       "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
6348 |       "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
6349 |       "dev": true,
6350 |       "license": "MIT",
6351 |       "dependencies": {
6352 |         "call-bound": "^1.0.2",
6353 |         "has-tostringtag": "^1.0.2"
6354 |       },
6355 |       "engines": {
6356 |         "node": ">= 0.4"
6357 |       },
6358 |       "funding": {
6359 |         "url": "https://github.com/sponsors/ljharb"
6360 |       }
6361 |     },
6362 |     "node_modules/is-extglob": {
6363 |       "version": "2.1.1",
6364 |       "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
6365 |       "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
6366 |       "dev": true,
6367 |       "license": "MIT",
6368 |       "engines": {
6369 |         "node": ">=0.10.0"
6370 |       }
6371 |     },
6372 |     "node_modules/is-finalizationregistry": {
6373 |       "version": "1.1.1",
6374 |       "resolved": "https://registry.npmjs.org/is-finalizationregistry/-/is-finalizationregistry-1.1.1.tgz",
6375 |       "integrity": "sha512-1pC6N8qWJbWoPtEjgcL2xyhQOP491EQjeUo3qTKcmV8YSDDJrOepfG8pcC7h/QgnQHYSv0mJ3Z/ZWxmatVrysg==",
6376 |       "dev": true,
6377 |       "license": "MIT",
6378 |       "dependencies": {
6379 |         "call-bound": "^1.0.3"
6380 |       },
6381 |       "engines": {
6382 |         "node": ">= 0.4"
6383 |       },
6384 |       "funding": {
6385 |         "url": "https://github.com/sponsors/ljharb"
6386 |       }
6387 |     },
6388 |     "node_modules/is-generator-function": {
6389 |       "version": "1.1.0",
6390 |       "resolved": "https://registry.npmjs.org/is-generator-function/-/is-generator-function-1.1.0.tgz",
6391 |       "integrity": "sha512-nPUB5km40q9e8UfN/Zc24eLlzdSf9OfKByBw9CIdw4H1giPMeA0OIJvbchsCu4npfI2QcMVBsGEBHKZ7wLTWmQ==",
6392 |       "dev": true,
6393 |       "license": "MIT",
6394 |       "dependencies": {
6395 |         "call-bound": "^1.0.3",
6396 |         "get-proto": "^1.0.0",
6397 |         "has-tostringtag": "^1.0.2",
6398 |         "safe-regex-test": "^1.1.0"
6399 |       },
6400 |       "engines": {
6401 |         "node": ">= 0.4"
6402 |       },
6403 |       "funding": {
6404 |         "url": "https://github.com/sponsors/ljharb"
6405 |       }
6406 |     },
6407 |     "node_modules/is-glob": {
6408 |       "version": "4.0.3",
6409 |       "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
6410 |       "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
6411 |       "dev": true,
6412 |       "license": "MIT",
6413 |       "dependencies": {
6414 |         "is-extglob": "^2.1.1"
6415 |       },
6416 |       "engines": {
6417 |         "node": ">=0.10.0"
6418 |       }
6419 |     },
6420 |     "node_modules/is-map": {
6421 |       "version": "2.0.3",
6422 |       "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
6423 |       "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
6424 |       "dev": true,
6425 |       "license": "MIT",
6426 |       "engines": {
6427 |         "node": ">= 0.4"
6428 |       },
6429 |       "funding": {
6430 |         "url": "https://github.com/sponsors/ljharb"
6431 |       }
6432 |     },
6433 |     "node_modules/is-negative-zero": {
6434 |       "version": "2.0.3",
6435 |       "resolved": "https://registry.npmjs.org/is-negative-zero/-/is-negative-zero-2.0.3.tgz",
6436 |       "integrity": "sha512-5KoIu2Ngpyek75jXodFvnafB6DJgr3u8uuK0LEZJjrU19DrMD3EVERaR8sjz8CCGgpZvxPl9SuE1GMVPFHx1mw==",
6437 |       "dev": true,
6438 |       "license": "MIT",
6439 |       "engines": {
6440 |         "node": ">= 0.4"
6441 |       },
6442 |       "funding": {
6443 |         "url": "https://github.com/sponsors/ljharb"
6444 |       }
6445 |     },
6446 |     "node_modules/is-number": {
6447 |       "version": "7.0.0",
6448 |       "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
6449 |       "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
6450 |       "dev": true,
6451 |       "license": "MIT",
6452 |       "engines": {
6453 |         "node": ">=0.12.0"
6454 |       }
6455 |     },
6456 |     "node_modules/is-number-object": {
6457 |       "version": "1.1.1",
6458 |       "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
6459 |       "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
6460 |       "dev": true,
6461 |       "license": "MIT",
6462 |       "dependencies": {
6463 |         "call-bound": "^1.0.3",
6464 |         "has-tostringtag": "^1.0.2"
6465 |       },
6466 |       "engines": {
6467 |         "node": ">= 0.4"
6468 |       },
6469 |       "funding": {
6470 |         "url": "https://github.com/sponsors/ljharb"
6471 |       }
6472 |     },
6473 |     "node_modules/is-regex": {
6474 |       "version": "1.2.1",
6475 |       "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
6476 |       "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
6477 |       "dev": true,
6478 |       "license": "MIT",
6479 |       "dependencies": {
6480 |         "call-bound": "^1.0.2",
6481 |         "gopd": "^1.2.0",
6482 |         "has-tostringtag": "^1.0.2",
6483 |         "hasown": "^2.0.2"
6484 |       },
6485 |       "engines": {
6486 |         "node": ">= 0.4"
6487 |       },
6488 |       "funding": {
6489 |         "url": "https://github.com/sponsors/ljharb"
6490 |       }
6491 |     },
6492 |     "node_modules/is-set": {
6493 |       "version": "2.0.3",
6494 |       "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
6495 |       "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
6496 |       "dev": true,
6497 |       "license": "MIT",
6498 |       "engines": {
6499 |         "node": ">= 0.4"
6500 |       },
6501 |       "funding": {
6502 |         "url": "https://github.com/sponsors/ljharb"
6503 |       }
6504 |     },
6505 |     "node_modules/is-shared-array-buffer": {
6506 |       "version": "1.0.4",
6507 |       "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
6508 |       "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
6509 |       "dev": true,
6510 |       "license": "MIT",
6511 |       "dependencies": {
6512 |         "call-bound": "^1.0.3"
6513 |       },
6514 |       "engines": {
6515 |         "node": ">= 0.4"
6516 |       },
6517 |       "funding": {
6518 |         "url": "https://github.com/sponsors/ljharb"
6519 |       }
6520 |     },
6521 |     "node_modules/is-string": {
6522 |       "version": "1.1.1",
6523 |       "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
6524 |       "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
6525 |       "dev": true,
6526 |       "license": "MIT",
6527 |       "dependencies": {
6528 |         "call-bound": "^1.0.3",
6529 |         "has-tostringtag": "^1.0.2"
6530 |       },
6531 |       "engines": {
6532 |         "node": ">= 0.4"
6533 |       },
6534 |       "funding": {
6535 |         "url": "https://github.com/sponsors/ljharb"
6536 |       }
6537 |     },
6538 |     "node_modules/is-symbol": {
6539 |       "version": "1.1.1",
6540 |       "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
6541 |       "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
6542 |       "dev": true,
6543 |       "license": "MIT",
6544 |       "dependencies": {
6545 |         "call-bound": "^1.0.2",
6546 |         "has-symbols": "^1.1.0",
6547 |         "safe-regex-test": "^1.1.0"
6548 |       },
6549 |       "engines": {
6550 |         "node": ">= 0.4"
6551 |       },
6552 |       "funding": {
6553 |         "url": "https://github.com/sponsors/ljharb"
6554 |       }
6555 |     },
6556 |     "node_modules/is-typed-array": {
6557 |       "version": "1.1.15",
6558 |       "resolved": "https://registry.npmjs.org/is-typed-array/-/is-typed-array-1.1.15.tgz",
6559 |       "integrity": "sha512-p3EcsicXjit7SaskXHs1hA91QxgTw46Fv6EFKKGS5DRFLD8yKnohjF3hxoju94b/OcMZoQukzpPpBE9uLVKzgQ==",
6560 |       "dev": true,
6561 |       "license": "MIT",
6562 |       "dependencies": {
6563 |         "which-typed-array": "^1.1.16"
6564 |       },
6565 |       "engines": {
6566 |         "node": ">= 0.4"
6567 |       },
6568 |       "funding": {
6569 |         "url": "https://github.com/sponsors/ljharb"
6570 |       }
6571 |     },
6572 |     "node_modules/is-weakmap": {
6573 |       "version": "2.0.2",
6574 |       "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
6575 |       "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
6576 |       "dev": true,
6577 |       "license": "MIT",
6578 |       "engines": {
6579 |         "node": ">= 0.4"
6580 |       },
6581 |       "funding": {
6582 |         "url": "https://github.com/sponsors/ljharb"
6583 |       }
6584 |     },
6585 |     "node_modules/is-weakref": {
6586 |       "version": "1.1.1",
6587 |       "resolved": "https://registry.npmjs.org/is-weakref/-/is-weakref-1.1.1.tgz",
6588 |       "integrity": "sha512-6i9mGWSlqzNMEqpCp93KwRS1uUOodk2OJ6b+sq7ZPDSy2WuI5NFIxp/254TytR8ftefexkWn5xNiHUNpPOfSew==",
6589 |       "dev": true,
6590 |       "license": "MIT",
6591 |       "dependencies": {
6592 |         "call-bound": "^1.0.3"
6593 |       },
6594 |       "engines": {
6595 |         "node": ">= 0.4"
6596 |       },
6597 |       "funding": {
6598 |         "url": "https://github.com/sponsors/ljharb"
6599 |       }
6600 |     },
6601 |     "node_modules/is-weakset": {
6602 |       "version": "2.0.4",
6603 |       "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
6604 |       "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
6605 |       "dev": true,
6606 |       "license": "MIT",
6607 |       "dependencies": {
6608 |         "call-bound": "^1.0.3",
6609 |         "get-intrinsic": "^1.2.6"
6610 |       },
6611 |       "engines": {
6612 |         "node": ">= 0.4"
6613 |       },
6614 |       "funding": {
6615 |         "url": "https://github.com/sponsors/ljharb"
6616 |       }
6617 |     },
6618 |     "node_modules/isarray": {
6619 |       "version": "2.0.5",
6620 |       "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
6621 |       "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
6622 |       "dev": true,
6623 |       "license": "MIT"
6624 |     },
6625 |     "node_modules/isexe": {
6626 |       "version": "2.0.0",
6627 |       "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
6628 |       "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
6629 |       "dev": true,
6630 |       "license": "ISC"
6631 |     },
6632 |     "node_modules/iterator.prototype": {
6633 |       "version": "1.1.5",
6634 |       "resolved": "https://registry.npmjs.org/iterator.prototype/-/iterator.prototype-1.1.5.tgz",
6635 |       "integrity": "sha512-H0dkQoCa3b2VEeKQBOxFph+JAbcrQdE7KC0UkqwpLmv2EC4P41QXP+rqo9wYodACiG5/WM5s9oDApTU8utwj9g==",
6636 |       "dev": true,
6637 |       "license": "MIT",
6638 |       "dependencies": {
6639 |         "define-data-property": "^1.1.4",
6640 |         "es-object-atoms": "^1.0.0",
6641 |         "get-intrinsic": "^1.2.6",
6642 |         "get-proto": "^1.0.0",
6643 |         "has-symbols": "^1.1.0",
6644 |         "set-function-name": "^2.0.2"
6645 |       },
6646 |       "engines": {
6647 |         "node": ">= 0.4"
6648 |       }
6649 |     },
6650 |     "node_modules/jiti": {
6651 |       "version": "2.5.1",
6652 |       "resolved": "https://registry.npmjs.org/jiti/-/jiti-2.5.1.tgz",
6653 |       "integrity": "sha512-twQoecYPiVA5K/h6SxtORw/Bs3ar+mLUtoPSc7iMXzQzK8d7eJ/R09wmTwAjiamETn1cXYPGfNnu7DMoHgu12w==",
6654 |       "dev": true,
6655 |       "license": "MIT",
6656 |       "bin": {
6657 |         "jiti": "lib/jiti-cli.mjs"
6658 |       }
6659 |     },
6660 |     "node_modules/js-tokens": {
6661 |       "version": "4.0.0",
6662 |       "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
6663 |       "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
6664 |       "dev": true,
6665 |       "license": "MIT"
6666 |     },
6667 |     "node_modules/js-yaml": {
6668 |       "version": "4.1.0",
6669 |       "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
6670 |       "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
6671 |       "dev": true,
6672 |       "license": "MIT",
6673 |       "dependencies": {
6674 |         "argparse": "^2.0.1"
6675 |       },
6676 |       "bin": {
6677 |         "js-yaml": "bin/js-yaml.js"
6678 |       }
6679 |     },
6680 |     "node_modules/json-buffer": {
6681 |       "version": "3.0.1",
6682 |       "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
6683 |       "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
6684 |       "dev": true,
6685 |       "license": "MIT"
6686 |     },
6687 |     "node_modules/json-schema-traverse": {
6688 |       "version": "0.4.1",
6689 |       "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
6690 |       "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
6691 |       "dev": true,
6692 |       "license": "MIT"
6693 |     },
6694 |     "node_modules/json-stable-stringify-without-jsonify": {
6695 |       "version": "1.0.1",
6696 |       "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
6697 |       "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
6698 |       "dev": true,
6699 |       "license": "MIT"
6700 |     },
6701 |     "node_modules/json5": {
6702 |       "version": "1.0.2",
6703 |       "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
6704 |       "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
6705 |       "dev": true,
6706 |       "license": "MIT",
6707 |       "dependencies": {
6708 |         "minimist": "^1.2.0"
6709 |       },
6710 |       "bin": {
6711 |         "json5": "lib/cli.js"
6712 |       }
6713 |     },
6714 |     "node_modules/jsonwebtoken": {
6715 |       "version": "9.0.2",
6716 |       "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.2.tgz",
6717 |       "integrity": "sha512-PRp66vJ865SSqOlgqS8hujT5U4AOgMfhrwYIuIhfKaoSCZcirrmASQr8CX7cUg+RMih+hgznrjp99o+W4pJLHQ==",
6718 |       "license": "MIT",
6719 |       "dependencies": {
6720 |         "jws": "^3.2.2",
6721 |         "lodash.includes": "^4.3.0",
6722 |         "lodash.isboolean": "^3.0.3",
6723 |         "lodash.isinteger": "^4.0.4",
6724 |         "lodash.isnumber": "^3.0.3",
6725 |         "lodash.isplainobject": "^4.0.6",
6726 |         "lodash.isstring": "^4.0.1",
6727 |         "lodash.once": "^4.0.0",
6728 |         "ms": "^2.1.1",
6729 |         "semver": "^7.5.4"
6730 |       },
6731 |       "engines": {
6732 |         "node": ">=12",
6733 |         "npm": ">=6"
6734 |       }
6735 |     },
6736 |     "node_modules/jsx-ast-utils": {
6737 |       "version": "3.3.5",
6738 |       "resolved": "https://registry.npmjs.org/jsx-ast-utils/-/jsx-ast-utils-3.3.5.tgz",
6739 |       "integrity": "sha512-ZZow9HBI5O6EPgSJLUb8n2NKgmVWTwCvHGwFuJlMjvLFqlGG6pjirPhtdsseaLZjSibD8eegzmYpUZwoIlj2cQ==",
6740 |       "dev": true,
6741 |       "license": "MIT",
6742 |       "dependencies": {
6743 |         "array-includes": "^3.1.6",
6744 |         "array.prototype.flat": "^1.3.1",
6745 |         "object.assign": "^4.1.4",
6746 |         "object.values": "^1.1.6"
6747 |       },
6748 |       "engines": {
6749 |         "node": ">=4.0"
6750 |       }
6751 |     },
6752 |     "node_modules/jwa": {
6753 |       "version": "1.4.2",
6754 |       "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
6755 |       "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
6756 |       "license": "MIT",
6757 |       "dependencies": {
6758 |         "buffer-equal-constant-time": "^1.0.1",
6759 |         "ecdsa-sig-formatter": "1.0.11",
6760 |         "safe-buffer": "^5.0.1"
6761 |       }
6762 |     },
6763 |     "node_modules/jws": {
6764 |       "version": "3.2.2",
6765 |       "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
6766 |       "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
6767 |       "license": "MIT",
6768 |       "dependencies": {
6769 |         "jwa": "^1.4.1",
6770 |         "safe-buffer": "^5.0.1"
6771 |       }
6772 |     },
6773 |     "node_modules/keyv": {
6774 |       "version": "4.5.4",
6775 |       "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
6776 |       "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
6777 |       "dev": true,
6778 |       "license": "MIT",
6779 |       "dependencies": {
6780 |         "json-buffer": "3.0.1"
6781 |       }
6782 |     },
6783 |     "node_modules/language-subtag-registry": {
6784 |       "version": "0.3.23",
6785 |       "resolved": "https://registry.npmjs.org/language-subtag-registry/-/language-subtag-registry-0.3.23.tgz",
6786 |       "integrity": "sha512-0K65Lea881pHotoGEa5gDlMxt3pctLi2RplBb7Ezh4rRdLEOtgi7n4EwK9lamnUCkKBqaeKRVebTq6BAxSkpXQ==",
6787 |       "dev": true,
6788 |       "license": "CC0-1.0"
6789 |     },
6790 |     "node_modules/language-tags": {
6791 |       "version": "1.0.9",
6792 |       "resolved": "https://registry.npmjs.org/language-tags/-/language-tags-1.0.9.tgz",
6793 |       "integrity": "sha512-MbjN408fEndfiQXbFQ1vnd+1NoLDsnQW41410oQBXiyXDMYH5z505juWa4KUE1LqxRC7DgOgZDbKLxHIwm27hA==",
6794 |       "dev": true,
6795 |       "license": "MIT",
6796 |       "dependencies": {
6797 |         "language-subtag-registry": "^0.3.20"
6798 |       },
6799 |       "engines": {
6800 |         "node": ">=0.10"
6801 |       }
6802 |     },
6803 |     "node_modules/levn": {
6804 |       "version": "0.4.1",
6805 |       "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
6806 |       "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
6807 |       "dev": true,
6808 |       "license": "MIT",
6809 |       "dependencies": {
6810 |         "prelude-ls": "^1.2.1",
6811 |         "type-check": "~0.4.0"
6812 |       },
6813 |       "engines": {
6814 |         "node": ">= 0.8.0"
6815 |       }
6816 |     },
6817 |     "node_modules/lightningcss": {
6818 |       "version": "1.30.1",
6819 |       "resolved": "https://registry.npmjs.org/lightningcss/-/lightningcss-1.30.1.tgz",
6820 |       "integrity": "sha512-xi6IyHML+c9+Q3W0S4fCQJOym42pyurFiJUHEcEyHS0CeKzia4yZDEsLlqOFykxOdHpNy0NmvVO31vcSqAxJCg==",
6821 |       "dev": true,
6822 |       "license": "MPL-2.0",
6823 |       "dependencies": {
6824 |         "detect-libc": "^2.0.3"
6825 |       },
6826 |       "engines": {
6827 |         "node": ">= 12.0.0"
6828 |       },
6829 |       "funding": {
6830 |         "type": "opencollective",
6831 |         "url": "https://opencollective.com/parcel"
6832 |       },
6833 |       "optionalDependencies": {
6834 |         "lightningcss-darwin-arm64": "1.30.1",
6835 |         "lightningcss-darwin-x64": "1.30.1",
6836 |         "lightningcss-freebsd-x64": "1.30.1",
6837 |         "lightningcss-linux-arm-gnueabihf": "1.30.1",
6838 |         "lightningcss-linux-arm64-gnu": "1.30.1",
6839 |         "lightningcss-linux-arm64-musl": "1.30.1",
6840 |         "lightningcss-linux-x64-gnu": "1.30.1",
6841 |         "lightningcss-linux-x64-musl": "1.30.1",
6842 |         "lightningcss-win32-arm64-msvc": "1.30.1",
6843 |         "lightningcss-win32-x64-msvc": "1.30.1"
6844 |       }
6845 |     },
6846 |     "node_modules/lightningcss-darwin-arm64": {
6847 |       "version": "1.30.1",
6848 |       "resolved": "https://registry.npmjs.org/lightningcss-darwin-arm64/-/lightningcss-darwin-arm64-1.30.1.tgz",
6849 |       "integrity": "sha512-c8JK7hyE65X1MHMN+Viq9n11RRC7hgin3HhYKhrMyaXflk5GVplZ60IxyoVtzILeKr+xAJwg6zK6sjTBJ0FKYQ==",
6850 |       "cpu": [
6851 |         "arm64"
6852 |       ],
6853 |       "dev": true,
6854 |       "license": "MPL-2.0",
6855 |       "optional": true,
6856 |       "os": [
6857 |         "darwin"
6858 |       ],
6859 |       "engines": {
6860 |         "node": ">= 12.0.0"
6861 |       },
6862 |       "funding": {
6863 |         "type": "opencollective",
6864 |         "url": "https://opencollective.com/parcel"
6865 |       }
6866 |     },
6867 |     "node_modules/lightningcss-darwin-x64": {
6868 |       "version": "1.30.1",
6869 |       "resolved": "https://registry.npmjs.org/lightningcss-darwin-x64/-/lightningcss-darwin-x64-1.30.1.tgz",
6870 |       "integrity": "sha512-k1EvjakfumAQoTfcXUcHQZhSpLlkAuEkdMBsI/ivWw9hL+7FtilQc0Cy3hrx0AAQrVtQAbMI7YjCgYgvn37PzA==",
6871 |       "cpu": [
6872 |         "x64"
6873 |       ],
6874 |       "dev": true,
6875 |       "license": "MPL-2.0",
6876 |       "optional": true,
6877 |       "os": [
6878 |         "darwin"
6879 |       ],
6880 |       "engines": {
6881 |         "node": ">= 12.0.0"
6882 |       },
6883 |       "funding": {
6884 |         "type": "opencollective",
6885 |         "url": "https://opencollective.com/parcel"
6886 |       }
6887 |     },
6888 |     "node_modules/lightningcss-freebsd-x64": {
6889 |       "version": "1.30.1",
6890 |       "resolved": "https://registry.npmjs.org/lightningcss-freebsd-x64/-/lightningcss-freebsd-x64-1.30.1.tgz",
6891 |       "integrity": "sha512-kmW6UGCGg2PcyUE59K5r0kWfKPAVy4SltVeut+umLCFoJ53RdCUWxcRDzO1eTaxf/7Q2H7LTquFHPL5R+Gjyig==",
6892 |       "cpu": [
6893 |         "x64"
6894 |       ],
6895 |       "dev": true,
6896 |       "license": "MPL-2.0",
6897 |       "optional": true,
6898 |       "os": [
6899 |         "freebsd"
6900 |       ],
6901 |       "engines": {
6902 |         "node": ">= 12.0.0"
6903 |       },
6904 |       "funding": {
6905 |         "type": "opencollective",
6906 |         "url": "https://opencollective.com/parcel"
6907 |       }
6908 |     },
6909 |     "node_modules/lightningcss-linux-arm-gnueabihf": {
6910 |       "version": "1.30.1",
6911 |       "resolved": "https://registry.npmjs.org/lightningcss-linux-arm-gnueabihf/-/lightningcss-linux-arm-gnueabihf-1.30.1.tgz",
6912 |       "integrity": "sha512-MjxUShl1v8pit+6D/zSPq9S9dQ2NPFSQwGvxBCYaBYLPlCWuPh9/t1MRS8iUaR8i+a6w7aps+B4N0S1TYP/R+Q==",
6913 |       "cpu": [
6914 |         "arm"
6915 |       ],
6916 |       "dev": true,
6917 |       "license": "MPL-2.0",
6918 |       "optional": true,
6919 |       "os": [
6920 |         "linux"
6921 |       ],
6922 |       "engines": {
6923 |         "node": ">= 12.0.0"
6924 |       },
6925 |       "funding": {
6926 |         "type": "opencollective",
6927 |         "url": "https://opencollective.com/parcel"
6928 |       }
6929 |     },
6930 |     "node_modules/lightningcss-linux-arm64-gnu": {
6931 |       "version": "1.30.1",
6932 |       "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-gnu/-/lightningcss-linux-arm64-gnu-1.30.1.tgz",
6933 |       "integrity": "sha512-gB72maP8rmrKsnKYy8XUuXi/4OctJiuQjcuqWNlJQ6jZiWqtPvqFziskH3hnajfvKB27ynbVCucKSm2rkQp4Bw==",
6934 |       "cpu": [
6935 |         "arm64"
6936 |       ],
6937 |       "dev": true,
6938 |       "license": "MPL-2.0",
6939 |       "optional": true,
6940 |       "os": [
6941 |         "linux"
6942 |       ],
6943 |       "engines": {
6944 |         "node": ">= 12.0.0"
6945 |       },
6946 |       "funding": {
6947 |         "type": "opencollective",
6948 |         "url": "https://opencollective.com/parcel"
6949 |       }
6950 |     },
6951 |     "node_modules/lightningcss-linux-arm64-musl": {
6952 |       "version": "1.30.1",
6953 |       "resolved": "https://registry.npmjs.org/lightningcss-linux-arm64-musl/-/lightningcss-linux-arm64-musl-1.30.1.tgz",
6954 |       "integrity": "sha512-jmUQVx4331m6LIX+0wUhBbmMX7TCfjF5FoOH6SD1CttzuYlGNVpA7QnrmLxrsub43ClTINfGSYyHe2HWeLl5CQ==",
6955 |       "cpu": [
6956 |         "arm64"
6957 |       ],
6958 |       "dev": true,
6959 |       "license": "MPL-2.0",
6960 |       "optional": true,
6961 |       "os": [
6962 |         "linux"
6963 |       ],
6964 |       "engines": {
6965 |         "node": ">= 12.0.0"
6966 |       },
6967 |       "funding": {
6968 |         "type": "opencollective",
6969 |         "url": "https://opencollective.com/parcel"
6970 |       }
6971 |     },
6972 |     "node_modules/lightningcss-linux-x64-gnu": {
6973 |       "version": "1.30.1",
6974 |       "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-gnu/-/lightningcss-linux-x64-gnu-1.30.1.tgz",
6975 |       "integrity": "sha512-piWx3z4wN8J8z3+O5kO74+yr6ze/dKmPnI7vLqfSqI8bccaTGY5xiSGVIJBDd5K5BHlvVLpUB3S2YCfelyJ1bw==",
6976 |       "cpu": [
6977 |         "x64"
6978 |       ],
6979 |       "dev": true,
6980 |       "license": "MPL-2.0",
6981 |       "optional": true,
6982 |       "os": [
6983 |         "linux"
6984 |       ],
6985 |       "engines": {
6986 |         "node": ">= 12.0.0"
6987 |       },
6988 |       "funding": {
6989 |         "type": "opencollective",
6990 |         "url": "https://opencollective.com/parcel"
6991 |       }
6992 |     },
6993 |     "node_modules/lightningcss-linux-x64-musl": {
6994 |       "version": "1.30.1",
6995 |       "resolved": "https://registry.npmjs.org/lightningcss-linux-x64-musl/-/lightningcss-linux-x64-musl-1.30.1.tgz",
6996 |       "integrity": "sha512-rRomAK7eIkL+tHY0YPxbc5Dra2gXlI63HL+v1Pdi1a3sC+tJTcFrHX+E86sulgAXeI7rSzDYhPSeHHjqFhqfeQ==",
6997 |       "cpu": [
6998 |         "x64"
6999 |       ],
7000 |       "dev": true,
7001 |       "license": "MPL-2.0",
7002 |       "optional": true,
7003 |       "os": [
7004 |         "linux"
7005 |       ],
7006 |       "engines": {
7007 |         "node": ">= 12.0.0"
7008 |       },
7009 |       "funding": {
7010 |         "type": "opencollective",
7011 |         "url": "https://opencollective.com/parcel"
7012 |       }
7013 |     },
7014 |     "node_modules/lightningcss-win32-arm64-msvc": {
7015 |       "version": "1.30.1",
7016 |       "resolved": "https://registry.npmjs.org/lightningcss-win32-arm64-msvc/-/lightningcss-win32-arm64-msvc-1.30.1.tgz",
7017 |       "integrity": "sha512-mSL4rqPi4iXq5YVqzSsJgMVFENoa4nGTT/GjO2c0Yl9OuQfPsIfncvLrEW6RbbB24WtZ3xP/2CCmI3tNkNV4oA==",
7018 |       "cpu": [
7019 |         "arm64"
7020 |       ],
7021 |       "dev": true,
7022 |       "license": "MPL-2.0",
7023 |       "optional": true,
7024 |       "os": [
7025 |         "win32"
7026 |       ],
7027 |       "engines": {
7028 |         "node": ">= 12.0.0"
7029 |       },
7030 |       "funding": {
7031 |         "type": "opencollective",
7032 |         "url": "https://opencollective.com/parcel"
7033 |       }
7034 |     },
7035 |     "node_modules/lightningcss-win32-x64-msvc": {
7036 |       "version": "1.30.1",
7037 |       "resolved": "https://registry.npmjs.org/lightningcss-win32-x64-msvc/-/lightningcss-win32-x64-msvc-1.30.1.tgz",
7038 |       "integrity": "sha512-PVqXh48wh4T53F/1CCu8PIPCxLzWyCnn/9T5W1Jpmdy5h9Cwd+0YQS6/LwhHXSafuc61/xg9Lv5OrCby6a++jg==",
7039 |       "cpu": [
7040 |         "x64"
7041 |       ],
7042 |       "dev": true,
7043 |       "license": "MPL-2.0",
7044 |       "optional": true,
7045 |       "os": [
7046 |         "win32"
7047 |       ],
7048 |       "engines": {
7049 |         "node": ">= 12.0.0"
7050 |       },
7051 |       "funding": {
7052 |         "type": "opencollective",
7053 |         "url": "https://opencollective.com/parcel"
7054 |       }
7055 |     },
7056 |     "node_modules/locate-path": {
7057 |       "version": "6.0.0",
7058 |       "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
7059 |       "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
7060 |       "dev": true,
7061 |       "license": "MIT",
7062 |       "dependencies": {
7063 |         "p-locate": "^5.0.0"
7064 |       },
7065 |       "engines": {
7066 |         "node": ">=10"
7067 |       },
7068 |       "funding": {
7069 |         "url": "https://github.com/sponsors/sindresorhus"
7070 |       }
7071 |     },
7072 |     "node_modules/lodash.includes": {
7073 |       "version": "4.3.0",
7074 |       "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
7075 |       "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
7076 |       "license": "MIT"
7077 |     },
7078 |     "node_modules/lodash.isboolean": {
7079 |       "version": "3.0.3",
7080 |       "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
7081 |       "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
7082 |       "license": "MIT"
7083 |     },
7084 |     "node_modules/lodash.isinteger": {
7085 |       "version": "4.0.4",
7086 |       "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
7087 |       "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
7088 |       "license": "MIT"
7089 |     },
7090 |     "node_modules/lodash.isnumber": {
7091 |       "version": "3.0.3",
7092 |       "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
7093 |       "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
7094 |       "license": "MIT"
7095 |     },
7096 |     "node_modules/lodash.isplainobject": {
7097 |       "version": "4.0.6",
7098 |       "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
7099 |       "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
7100 |       "license": "MIT"
7101 |     },
7102 |     "node_modules/lodash.isstring": {
7103 |       "version": "4.0.1",
7104 |       "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
7105 |       "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
7106 |       "license": "MIT"
7107 |     },
7108 |     "node_modules/lodash.merge": {
7109 |       "version": "4.6.2",
7110 |       "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
7111 |       "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
7112 |       "dev": true,
7113 |       "license": "MIT"
7114 |     },
7115 |     "node_modules/lodash.once": {
7116 |       "version": "4.1.1",
7117 |       "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
7118 |       "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
7119 |       "license": "MIT"
7120 |     },
7121 |     "node_modules/loose-envify": {
7122 |       "version": "1.4.0",
7123 |       "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
7124 |       "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
7125 |       "dev": true,
7126 |       "license": "MIT",
7127 |       "dependencies": {
7128 |         "js-tokens": "^3.0.0 || ^4.0.0"
7129 |       },
7130 |       "bin": {
7131 |         "loose-envify": "cli.js"
7132 |       }
7133 |     },
7134 |     "node_modules/lucide-react": {
7135 |       "version": "0.525.0",
7136 |       "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.525.0.tgz",
7137 |       "integrity": "sha512-Tm1txJ2OkymCGkvwoHt33Y2JpN5xucVq1slHcgE6Lk0WjDfjgKWor5CdVER8U6DvcfMwh4M8XxmpTiyzfmfDYQ==",
7138 |       "license": "ISC",
7139 |       "peerDependencies": {
7140 |         "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0"
7141 |       }
7142 |     },
7143 |     "node_modules/magic-string": {
7144 |       "version": "0.30.17",
7145 |       "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.17.tgz",
7146 |       "integrity": "sha512-sNPKHvyjVf7gyjwS4xGTaW/mCnF8wnjtifKBEhxfZ7E/S8tQ0rssrwGNn6q8JH/ohItJfSQp9mBtQYuTlH5QnA==",
7147 |       "dev": true,
7148 |       "license": "MIT",
7149 |       "dependencies": {
7150 |         "@jridgewell/sourcemap-codec": "^1.5.0"
7151 |       }
7152 |     },
7153 |     "node_modules/math-intrinsics": {
7154 |       "version": "1.1.0",
7155 |       "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
7156 |       "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
7157 |       "dev": true,
7158 |       "license": "MIT",
7159 |       "engines": {
7160 |         "node": ">= 0.4"
7161 |       }
7162 |     },
7163 |     "node_modules/merge2": {
7164 |       "version": "1.4.1",
7165 |       "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
7166 |       "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
7167 |       "dev": true,
7168 |       "license": "MIT",
7169 |       "engines": {
7170 |         "node": ">= 8"
7171 |       }
7172 |     },
7173 |     "node_modules/micromatch": {
7174 |       "version": "4.0.8",
7175 |       "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
7176 |       "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
7177 |       "dev": true,
7178 |       "license": "MIT",
7179 |       "dependencies": {
7180 |         "braces": "^3.0.3",
7181 |         "picomatch": "^2.3.1"
7182 |       },
7183 |       "engines": {
7184 |         "node": ">=8.6"
7185 |       }
7186 |     },
7187 |     "node_modules/minimatch": {
7188 |       "version": "3.1.2",
7189 |       "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
7190 |       "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
7191 |       "dev": true,
7192 |       "license": "ISC",
7193 |       "dependencies": {
7194 |         "brace-expansion": "^1.1.7"
7195 |       },
7196 |       "engines": {
7197 |         "node": "*"
7198 |       }
7199 |     },
7200 |     "node_modules/minimist": {
7201 |       "version": "1.2.8",
7202 |       "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
7203 |       "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
7204 |       "dev": true,
7205 |       "license": "MIT",
7206 |       "funding": {
7207 |         "url": "https://github.com/sponsors/ljharb"
7208 |       }
7209 |     },
7210 |     "node_modules/minipass": {
7211 |       "version": "7.1.2",
7212 |       "resolved": "https://registry.npmjs.org/minipass/-/minipass-7.1.2.tgz",
7213 |       "integrity": "sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==",
7214 |       "dev": true,
7215 |       "license": "ISC",
7216 |       "engines": {
7217 |         "node": ">=16 || 14 >=14.17"
7218 |       }
7219 |     },
7220 |     "node_modules/minizlib": {
7221 |       "version": "3.0.2",
7222 |       "resolved": "https://registry.npmjs.org/minizlib/-/minizlib-3.0.2.tgz",
7223 |       "integrity": "sha512-oG62iEk+CYt5Xj2YqI5Xi9xWUeZhDI8jjQmC5oThVH5JGCTgIjr7ciJDzC7MBzYd//WvR1OTmP5Q38Q8ShQtVA==",
7224 |       "dev": true,
7225 |       "license": "MIT",
7226 |       "dependencies": {
7227 |         "minipass": "^7.1.2"
7228 |       },
7229 |       "engines": {
7230 |         "node": ">= 18"
7231 |       }
7232 |     },
7233 |     "node_modules/mkdirp": {
7234 |       "version": "3.0.1",
7235 |       "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-3.0.1.tgz",
7236 |       "integrity": "sha512-+NsyUUAZDmo6YVHzL/stxSu3t9YS1iljliy3BSDrXJ/dkn1KYdmtZODGGjLcc9XLgVVpH4KshHB8XmZgMhaBXg==",
7237 |       "dev": true,
7238 |       "license": "MIT",
7239 |       "bin": {
7240 |         "mkdirp": "dist/cjs/src/bin.js"
7241 |       },
7242 |       "engines": {
7243 |         "node": ">=10"
7244 |       },
7245 |       "funding": {
7246 |         "url": "https://github.com/sponsors/isaacs"
7247 |       }
7248 |     },
7249 |     "node_modules/ms": {
7250 |       "version": "2.1.3",
7251 |       "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
7252 |       "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
7253 |       "license": "MIT"
7254 |     },
7255 |     "node_modules/nanoid": {
7256 |       "version": "3.3.11",
7257 |       "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
7258 |       "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
7259 |       "funding": [
7260 |         {
7261 |           "type": "github",
7262 |           "url": "https://github.com/sponsors/ai"
7263 |         }
7264 |       ],
7265 |       "license": "MIT",
7266 |       "bin": {
7267 |         "nanoid": "bin/nanoid.cjs"
7268 |       },
7269 |       "engines": {
7270 |         "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
7271 |       }
7272 |     },
7273 |     "node_modules/napi-postinstall": {
7274 |       "version": "0.3.2",
7275 |       "resolved": "https://registry.npmjs.org/napi-postinstall/-/napi-postinstall-0.3.2.tgz",
7276 |       "integrity": "sha512-tWVJxJHmBWLy69PvO96TZMZDrzmw5KeiZBz3RHmiM2XZ9grBJ2WgMAFVVg25nqp3ZjTFUs2Ftw1JhscL3Teliw==",
7277 |       "dev": true,
7278 |       "license": "MIT",
7279 |       "bin": {
7280 |         "napi-postinstall": "lib/cli.js"
7281 |       },
7282 |       "engines": {
7283 |         "node": "^12.20.0 || ^14.18.0 || >=16.0.0"
7284 |       },
7285 |       "funding": {
7286 |         "url": "https://opencollective.com/napi-postinstall"
7287 |       }
7288 |     },
7289 |     "node_modules/natural-compare": {
7290 |       "version": "1.4.0",
7291 |       "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
7292 |       "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
7293 |       "dev": true,
7294 |       "license": "MIT"
7295 |     },
7296 |     "node_modules/next": {
7297 |       "version": "15.4.2",
7298 |       "resolved": "https://registry.npmjs.org/next/-/next-15.4.2.tgz",
7299 |       "integrity": "sha512-oH1rmFso+84NIkocfuxaGKcXIjMUTmnzV2x0m8qsYtB4gD6iflLMESXt5XJ8cFgWMBei4v88rNr/j+peNg72XA==",
7300 |       "license": "MIT",
7301 |       "dependencies": {
7302 |         "@next/env": "15.4.2",
7303 |         "@swc/helpers": "0.5.15",
7304 |         "caniuse-lite": "^1.0.30001579",
7305 |         "postcss": "8.4.31",
7306 |         "styled-jsx": "5.1.6"
7307 |       },
7308 |       "bin": {
7309 |         "next": "dist/bin/next"
7310 |       },
7311 |       "engines": {
7312 |         "node": "^18.18.0 || ^19.8.0 || >= 20.0.0"
7313 |       },
7314 |       "optionalDependencies": {
7315 |         "@next/swc-darwin-arm64": "15.4.2",
7316 |         "@next/swc-darwin-x64": "15.4.2",
7317 |         "@next/swc-linux-arm64-gnu": "15.4.2",
7318 |         "@next/swc-linux-arm64-musl": "15.4.2",
7319 |         "@next/swc-linux-x64-gnu": "15.4.2",
7320 |         "@next/swc-linux-x64-musl": "15.4.2",
7321 |         "@next/swc-win32-arm64-msvc": "15.4.2",
7322 |         "@next/swc-win32-x64-msvc": "15.4.2",
7323 |         "sharp": "^0.34.3"
7324 |       },
7325 |       "peerDependencies": {
7326 |         "@opentelemetry/api": "^1.1.0",
7327 |         "@playwright/test": "^1.51.1",
7328 |         "babel-plugin-react-compiler": "*",
7329 |         "react": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
7330 |         "react-dom": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
7331 |         "sass": "^1.3.0"
7332 |       },
7333 |       "peerDependenciesMeta": {
7334 |         "@opentelemetry/api": {
7335 |           "optional": true
7336 |         },
7337 |         "@playwright/test": {
7338 |           "optional": true
7339 |         },
7340 |         "babel-plugin-react-compiler": {
7341 |           "optional": true
7342 |         },
7343 |         "sass": {
7344 |           "optional": true
7345 |         }
7346 |       }
7347 |     },
7348 |     "node_modules/next-themes": {
7349 |       "version": "0.4.6",
7350 |       "resolved": "https://registry.npmjs.org/next-themes/-/next-themes-0.4.6.tgz",
7351 |       "integrity": "sha512-pZvgD5L0IEvX5/9GWyHMf3m8BKiVQwsCMHfoFosXtXBMnaS0ZnIJ9ST4b4NqLVKDEm8QBxoNNGNaBv2JNF6XNA==",
7352 |       "license": "MIT",
7353 |       "peerDependencies": {
7354 |         "react": "^16.8 || ^17 || ^18 || ^19 || ^19.0.0-rc",
7355 |         "react-dom": "^16.8 || ^17 || ^18 || ^19 || ^19.0.0-rc"
7356 |       }
7357 |     },
7358 |     "node_modules/next/node_modules/postcss": {
7359 |       "version": "8.4.31",
7360 |       "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.31.tgz",
7361 |       "integrity": "sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==",
7362 |       "funding": [
7363 |         {
7364 |           "type": "opencollective",
7365 |           "url": "https://opencollective.com/postcss/"
7366 |         },
7367 |         {
7368 |           "type": "tidelift",
7369 |           "url": "https://tidelift.com/funding/github/npm/postcss"
7370 |         },
7371 |         {
7372 |           "type": "github",
7373 |           "url": "https://github.com/sponsors/ai"
7374 |         }
7375 |       ],
7376 |       "license": "MIT",
7377 |       "dependencies": {
7378 |         "nanoid": "^3.3.6",
7379 |         "picocolors": "^1.0.0",
7380 |         "source-map-js": "^1.0.2"
7381 |       },
7382 |       "engines": {
7383 |         "node": "^10 || ^12 || >=14"
7384 |       }
7385 |     },
7386 |     "node_modules/node-addon-api": {
7387 |       "version": "8.5.0",
7388 |       "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-8.5.0.tgz",
7389 |       "integrity": "sha512-/bRZty2mXUIFY/xU5HLvveNHlswNJej+RnxBjOMkidWfwZzgTbPG1E3K5TOxRLOR+5hX7bSofy8yf1hZevMS8A==",
7390 |       "license": "MIT",
7391 |       "engines": {
7392 |         "node": "^18 || ^20 || >= 21"
7393 |       }
7394 |     },
7395 |     "node_modules/node-gyp-build": {
7396 |       "version": "4.8.4",
7397 |       "resolved": "https://registry.npmjs.org/node-gyp-build/-/node-gyp-build-4.8.4.tgz",
7398 |       "integrity": "sha512-LA4ZjwlnUblHVgq0oBF3Jl/6h/Nvs5fzBLwdEF4nuxnFdsfajde4WfxtJr3CaiH+F6ewcIB/q4jQ4UzPyid+CQ==",
7399 |       "license": "MIT",
7400 |       "bin": {
7401 |         "node-gyp-build": "bin.js",
7402 |         "node-gyp-build-optional": "optional.js",
7403 |         "node-gyp-build-test": "build-test.js"
7404 |       }
7405 |     },
7406 |     "node_modules/object-assign": {
7407 |       "version": "4.1.1",
7408 |       "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
7409 |       "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
7410 |       "dev": true,
7411 |       "license": "MIT",
7412 |       "engines": {
7413 |         "node": ">=0.10.0"
7414 |       }
7415 |     },
7416 |     "node_modules/object-inspect": {
7417 |       "version": "1.13.4",
7418 |       "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
7419 |       "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
7420 |       "dev": true,
7421 |       "license": "MIT",
7422 |       "engines": {
7423 |         "node": ">= 0.4"
7424 |       },
7425 |       "funding": {
7426 |         "url": "https://github.com/sponsors/ljharb"
7427 |       }
7428 |     },
7429 |     "node_modules/object-keys": {
7430 |       "version": "1.1.1",
7431 |       "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
7432 |       "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
7433 |       "dev": true,
7434 |       "license": "MIT",
7435 |       "engines": {
7436 |         "node": ">= 0.4"
7437 |       }
7438 |     },
7439 |     "node_modules/object.assign": {
7440 |       "version": "4.1.7",
7441 |       "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
7442 |       "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
7443 |       "dev": true,
7444 |       "license": "MIT",
7445 |       "dependencies": {
7446 |         "call-bind": "^1.0.8",
7447 |         "call-bound": "^1.0.3",
7448 |         "define-properties": "^1.2.1",
7449 |         "es-object-atoms": "^1.0.0",
7450 |         "has-symbols": "^1.1.0",
7451 |         "object-keys": "^1.1.1"
7452 |       },
7453 |       "engines": {
7454 |         "node": ">= 0.4"
7455 |       },
7456 |       "funding": {
7457 |         "url": "https://github.com/sponsors/ljharb"
7458 |       }
7459 |     },
7460 |     "node_modules/object.entries": {
7461 |       "version": "1.1.9",
7462 |       "resolved": "https://registry.npmjs.org/object.entries/-/object.entries-1.1.9.tgz",
7463 |       "integrity": "sha512-8u/hfXFRBD1O0hPUjioLhoWFHRmt6tKA4/vZPyckBr18l1KE9uHrFaFaUi8MDRTpi4uak2goyPTSNJLXX2k2Hw==",
7464 |       "dev": true,
7465 |       "license": "MIT",
7466 |       "dependencies": {
7467 |         "call-bind": "^1.0.8",
7468 |         "call-bound": "^1.0.4",
7469 |         "define-properties": "^1.2.1",
7470 |         "es-object-atoms": "^1.1.1"
7471 |       },
7472 |       "engines": {
7473 |         "node": ">= 0.4"
7474 |       }
7475 |     },
7476 |     "node_modules/object.fromentries": {
7477 |       "version": "2.0.8",
7478 |       "resolved": "https://registry.npmjs.org/object.fromentries/-/object.fromentries-2.0.8.tgz",
7479 |       "integrity": "sha512-k6E21FzySsSK5a21KRADBd/NGneRegFO5pLHfdQLpRDETUNJueLXs3WCzyQ3tFRDYgbq3KHGXfTbi2bs8WQ6rQ==",
7480 |       "dev": true,
7481 |       "license": "MIT",
7482 |       "dependencies": {
7483 |         "call-bind": "^1.0.7",
7484 |         "define-properties": "^1.2.1",
7485 |         "es-abstract": "^1.23.2",
7486 |         "es-object-atoms": "^1.0.0"
7487 |       },
7488 |       "engines": {
7489 |         "node": ">= 0.4"
7490 |       },
7491 |       "funding": {
7492 |         "url": "https://github.com/sponsors/ljharb"
7493 |       }
7494 |     },
7495 |     "node_modules/object.groupby": {
7496 |       "version": "1.0.3",
7497 |       "resolved": "https://registry.npmjs.org/object.groupby/-/object.groupby-1.0.3.tgz",
7498 |       "integrity": "sha512-+Lhy3TQTuzXI5hevh8sBGqbmurHbbIjAi0Z4S63nthVLmLxfbj4T54a4CfZrXIrt9iP4mVAPYMo/v99taj3wjQ==",
7499 |       "dev": true,
7500 |       "license": "MIT",
7501 |       "dependencies": {
7502 |         "call-bind": "^1.0.7",
7503 |         "define-properties": "^1.2.1",
7504 |         "es-abstract": "^1.23.2"
7505 |       },
7506 |       "engines": {
7507 |         "node": ">= 0.4"
7508 |       }
7509 |     },
7510 |     "node_modules/object.values": {
7511 |       "version": "1.2.1",
7512 |       "resolved": "https://registry.npmjs.org/object.values/-/object.values-1.2.1.tgz",
7513 |       "integrity": "sha512-gXah6aZrcUxjWg2zR2MwouP2eHlCBzdV4pygudehaKXSGW4v2AsRQUK+lwwXhii6KFZcunEnmSUoYp5CXibxtA==",
7514 |       "dev": true,
7515 |       "license": "MIT",
7516 |       "dependencies": {
7517 |         "call-bind": "^1.0.8",
7518 |         "call-bound": "^1.0.3",
7519 |         "define-properties": "^1.2.1",
7520 |         "es-object-atoms": "^1.0.0"
7521 |       },
7522 |       "engines": {
7523 |         "node": ">= 0.4"
7524 |       },
7525 |       "funding": {
7526 |         "url": "https://github.com/sponsors/ljharb"
7527 |       }
7528 |     },
7529 |     "node_modules/on-exit-leak-free": {
7530 |       "version": "2.1.2",
7531 |       "resolved": "https://registry.npmjs.org/on-exit-leak-free/-/on-exit-leak-free-2.1.2.tgz",
7532 |       "integrity": "sha512-0eJJY6hXLGf1udHwfNftBqH+g73EU4B504nZeKpz1sYRKafAghwxEJunB2O7rDZkL4PGfsMVnTXZ2EjibbqcsA==",
7533 |       "license": "MIT",
7534 |       "engines": {
7535 |         "node": ">=14.0.0"
7536 |       }
7537 |     },
7538 |     "node_modules/optionator": {
7539 |       "version": "0.9.4",
7540 |       "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
7541 |       "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
7542 |       "dev": true,
7543 |       "license": "MIT",
7544 |       "dependencies": {
7545 |         "deep-is": "^0.1.3",
7546 |         "fast-levenshtein": "^2.0.6",
7547 |         "levn": "^0.4.1",
7548 |         "prelude-ls": "^1.2.1",
7549 |         "type-check": "^0.4.0",
7550 |         "word-wrap": "^1.2.5"
7551 |       },
7552 |       "engines": {
7553 |         "node": ">= 0.8.0"
7554 |       }
7555 |     },
7556 |     "node_modules/own-keys": {
7557 |       "version": "1.0.1",
7558 |       "resolved": "https://registry.npmjs.org/own-keys/-/own-keys-1.0.1.tgz",
7559 |       "integrity": "sha512-qFOyK5PjiWZd+QQIh+1jhdb9LpxTF0qs7Pm8o5QHYZ0M3vKqSqzsZaEB6oWlxZ+q2sJBMI/Ktgd2N5ZwQoRHfg==",
7560 |       "dev": true,
7561 |       "license": "MIT",
7562 |       "dependencies": {
7563 |         "get-intrinsic": "^1.2.6",
7564 |         "object-keys": "^1.1.1",
7565 |         "safe-push-apply": "^1.0.0"
7566 |       },
7567 |       "engines": {
7568 |         "node": ">= 0.4"
7569 |       },
7570 |       "funding": {
7571 |         "url": "https://github.com/sponsors/ljharb"
7572 |       }
7573 |     },
7574 |     "node_modules/p-limit": {
7575 |       "version": "3.1.0",
7576 |       "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
7577 |       "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
7578 |       "dev": true,
7579 |       "license": "MIT",
7580 |       "dependencies": {
7581 |         "yocto-queue": "^0.1.0"
7582 |       },
7583 |       "engines": {
7584 |         "node": ">=10"
7585 |       },
7586 |       "funding": {
7587 |         "url": "https://github.com/sponsors/sindresorhus"
7588 |       }
7589 |     },
7590 |     "node_modules/p-locate": {
7591 |       "version": "5.0.0",
7592 |       "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
7593 |       "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
7594 |       "dev": true,
7595 |       "license": "MIT",
7596 |       "dependencies": {
7597 |         "p-limit": "^3.0.2"
7598 |       },
7599 |       "engines": {
7600 |         "node": ">=10"
7601 |       },
7602 |       "funding": {
7603 |         "url": "https://github.com/sponsors/sindresorhus"
7604 |       }
7605 |     },
7606 |     "node_modules/parent-module": {
7607 |       "version": "1.0.1",
7608 |       "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
7609 |       "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
7610 |       "dev": true,
7611 |       "license": "MIT",
7612 |       "dependencies": {
7613 |         "callsites": "^3.0.0"
7614 |       },
7615 |       "engines": {
7616 |         "node": ">=6"
7617 |       }
7618 |     },
7619 |     "node_modules/path-exists": {
7620 |       "version": "4.0.0",
7621 |       "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
7622 |       "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
7623 |       "dev": true,
7624 |       "license": "MIT",
7625 |       "engines": {
7626 |         "node": ">=8"
7627 |       }
7628 |     },
7629 |     "node_modules/path-key": {
7630 |       "version": "3.1.1",
7631 |       "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
7632 |       "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
7633 |       "dev": true,
7634 |       "license": "MIT",
7635 |       "engines": {
7636 |         "node": ">=8"
7637 |       }
7638 |     },
7639 |     "node_modules/path-parse": {
7640 |       "version": "1.0.7",
7641 |       "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
7642 |       "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
7643 |       "dev": true,
7644 |       "license": "MIT"
7645 |     },
7646 |     "node_modules/pg": {
7647 |       "version": "8.16.3",
7648 |       "resolved": "https://registry.npmjs.org/pg/-/pg-8.16.3.tgz",
7649 |       "integrity": "sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==",
7650 |       "devOptional": true,
7651 |       "license": "MIT",
7652 |       "dependencies": {
7653 |         "pg-connection-string": "^2.9.1",
7654 |         "pg-pool": "^3.10.1",
7655 |         "pg-protocol": "^1.10.3",
7656 |         "pg-types": "2.2.0",
7657 |         "pgpass": "1.0.5"
7658 |       },
7659 |       "engines": {
7660 |         "node": ">= 16.0.0"
7661 |       },
7662 |       "optionalDependencies": {
7663 |         "pg-cloudflare": "^1.2.7"
7664 |       },
7665 |       "peerDependencies": {
7666 |         "pg-native": ">=3.0.1"
7667 |       },
7668 |       "peerDependenciesMeta": {
7669 |         "pg-native": {
7670 |           "optional": true
7671 |         }
7672 |       }
7673 |     },
7674 |     "node_modules/pg-cloudflare": {
7675 |       "version": "1.2.7",
7676 |       "resolved": "https://registry.npmjs.org/pg-cloudflare/-/pg-cloudflare-1.2.7.tgz",
7677 |       "integrity": "sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==",
7678 |       "dev": true,
7679 |       "license": "MIT",
7680 |       "optional": true
7681 |     },
7682 |     "node_modules/pg-connection-string": {
7683 |       "version": "2.9.1",
7684 |       "resolved": "https://registry.npmjs.org/pg-connection-string/-/pg-connection-string-2.9.1.tgz",
7685 |       "integrity": "sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w==",
7686 |       "devOptional": true,
7687 |       "license": "MIT"
7688 |     },
7689 |     "node_modules/pg-int8": {
7690 |       "version": "1.0.1",
7691 |       "resolved": "https://registry.npmjs.org/pg-int8/-/pg-int8-1.0.1.tgz",
7692 |       "integrity": "sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==",
7693 |       "license": "ISC",
7694 |       "engines": {
7695 |         "node": ">=4.0.0"
7696 |       }
7697 |     },
7698 |     "node_modules/pg-pool": {
7699 |       "version": "3.10.1",
7700 |       "resolved": "https://registry.npmjs.org/pg-pool/-/pg-pool-3.10.1.tgz",
7701 |       "integrity": "sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==",
7702 |       "devOptional": true,
7703 |       "license": "MIT",
7704 |       "peerDependencies": {
7705 |         "pg": ">=8.0"
7706 |       }
7707 |     },
7708 |     "node_modules/pg-protocol": {
7709 |       "version": "1.10.3",
7710 |       "resolved": "https://registry.npmjs.org/pg-protocol/-/pg-protocol-1.10.3.tgz",
7711 |       "integrity": "sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ==",
7712 |       "license": "MIT"
7713 |     },
7714 |     "node_modules/pg-types": {
7715 |       "version": "2.2.0",
7716 |       "resolved": "https://registry.npmjs.org/pg-types/-/pg-types-2.2.0.tgz",
7717 |       "integrity": "sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==",
7718 |       "license": "MIT",
7719 |       "dependencies": {
7720 |         "pg-int8": "1.0.1",
7721 |         "postgres-array": "~2.0.0",
7722 |         "postgres-bytea": "~1.0.0",
7723 |         "postgres-date": "~1.0.4",
7724 |         "postgres-interval": "^1.1.0"
7725 |       },
7726 |       "engines": {
7727 |         "node": ">=4"
7728 |       }
7729 |     },
7730 |     "node_modules/pgpass": {
7731 |       "version": "1.0.5",
7732 |       "resolved": "https://registry.npmjs.org/pgpass/-/pgpass-1.0.5.tgz",
7733 |       "integrity": "sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==",
7734 |       "devOptional": true,
7735 |       "license": "MIT",
7736 |       "dependencies": {
7737 |         "split2": "^4.1.0"
7738 |       }
7739 |     },
7740 |     "node_modules/picocolors": {
7741 |       "version": "1.1.1",
7742 |       "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
7743 |       "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
7744 |       "license": "ISC"
7745 |     },
7746 |     "node_modules/picomatch": {
7747 |       "version": "2.3.1",
7748 |       "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
7749 |       "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
7750 |       "dev": true,
7751 |       "license": "MIT",
7752 |       "engines": {
7753 |         "node": ">=8.6"
7754 |       },
7755 |       "funding": {
7756 |         "url": "https://github.com/sponsors/jonschlinkert"
7757 |       }
7758 |     },
7759 |     "node_modules/pino": {
7760 |       "version": "9.7.0",
7761 |       "resolved": "https://registry.npmjs.org/pino/-/pino-9.7.0.tgz",
7762 |       "integrity": "sha512-vnMCM6xZTb1WDmLvtG2lE/2p+t9hDEIvTWJsu6FejkE62vB7gDhvzrpFR4Cw2to+9JNQxVnkAKVPA1KPB98vWg==",
7763 |       "license": "MIT",
7764 |       "dependencies": {
7765 |         "atomic-sleep": "^1.0.0",
7766 |         "fast-redact": "^3.1.1",
7767 |         "on-exit-leak-free": "^2.1.0",
7768 |         "pino-abstract-transport": "^2.0.0",
7769 |         "pino-std-serializers": "^7.0.0",
7770 |         "process-warning": "^5.0.0",
7771 |         "quick-format-unescaped": "^4.0.3",
7772 |         "real-require": "^0.2.0",
7773 |         "safe-stable-stringify": "^2.3.1",
7774 |         "sonic-boom": "^4.0.1",
7775 |         "thread-stream": "^3.0.0"
7776 |       },
7777 |       "bin": {
7778 |         "pino": "bin.js"
7779 |       }
7780 |     },
7781 |     "node_modules/pino-abstract-transport": {
7782 |       "version": "2.0.0",
7783 |       "resolved": "https://registry.npmjs.org/pino-abstract-transport/-/pino-abstract-transport-2.0.0.tgz",
7784 |       "integrity": "sha512-F63x5tizV6WCh4R6RHyi2Ml+M70DNRXt/+HANowMflpgGFMAym/VKm6G7ZOQRjqN7XbGxK1Lg9t6ZrtzOaivMw==",
7785 |       "license": "MIT",
7786 |       "dependencies": {
7787 |         "split2": "^4.0.0"
7788 |       }
7789 |     },
7790 |     "node_modules/pino-std-serializers": {
7791 |       "version": "7.0.0",
7792 |       "resolved": "https://registry.npmjs.org/pino-std-serializers/-/pino-std-serializers-7.0.0.tgz",
7793 |       "integrity": "sha512-e906FRY0+tV27iq4juKzSYPbUj2do2X2JX4EzSca1631EB2QJQUqGbDuERal7LCtOpxl6x3+nvo9NPZcmjkiFA==",
7794 |       "license": "MIT"
7795 |     },
7796 |     "node_modules/possible-typed-array-names": {
7797 |       "version": "1.1.0",
7798 |       "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
7799 |       "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
7800 |       "dev": true,
7801 |       "license": "MIT",
7802 |       "engines": {
7803 |         "node": ">= 0.4"
7804 |       }
7805 |     },
7806 |     "node_modules/postcss": {
7807 |       "version": "8.5.6",
7808 |       "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
7809 |       "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
7810 |       "funding": [
7811 |         {
7812 |           "type": "opencollective",
7813 |           "url": "https://opencollective.com/postcss/"
7814 |         },
7815 |         {
7816 |           "type": "tidelift",
7817 |           "url": "https://tidelift.com/funding/github/npm/postcss"
7818 |         },
7819 |         {
7820 |           "type": "github",
7821 |           "url": "https://github.com/sponsors/ai"
7822 |         }
7823 |       ],
7824 |       "license": "MIT",
7825 |       "dependencies": {
7826 |         "nanoid": "^3.3.11",
7827 |         "picocolors": "^1.1.1",
7828 |         "source-map-js": "^1.2.1"
7829 |       },
7830 |       "engines": {
7831 |         "node": "^10 || ^12 || >=14"
7832 |       }
7833 |     },
7834 |     "node_modules/postgres": {
7835 |       "version": "3.4.7",
7836 |       "resolved": "https://registry.npmjs.org/postgres/-/postgres-3.4.7.tgz",
7837 |       "integrity": "sha512-Jtc2612XINuBjIl/QTWsV5UvE8UHuNblcO3vVADSrKsrc6RqGX6lOW1cEo3CM2v0XG4Nat8nI+YM7/f26VxXLw==",
7838 |       "license": "Unlicense",
7839 |       "engines": {
7840 |         "node": ">=12"
7841 |       },
7842 |       "funding": {
7843 |         "type": "individual",
7844 |         "url": "https://github.com/sponsors/porsager"
7845 |       }
7846 |     },
7847 |     "node_modules/postgres-array": {
7848 |       "version": "2.0.0",
7849 |       "resolved": "https://registry.npmjs.org/postgres-array/-/postgres-array-2.0.0.tgz",
7850 |       "integrity": "sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==",
7851 |       "license": "MIT",
7852 |       "engines": {
7853 |         "node": ">=4"
7854 |       }
7855 |     },
7856 |     "node_modules/postgres-bytea": {
7857 |       "version": "1.0.0",
7858 |       "resolved": "https://registry.npmjs.org/postgres-bytea/-/postgres-bytea-1.0.0.tgz",
7859 |       "integrity": "sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==",
7860 |       "license": "MIT",
7861 |       "engines": {
7862 |         "node": ">=0.10.0"
7863 |       }
7864 |     },
7865 |     "node_modules/postgres-date": {
7866 |       "version": "1.0.7",
7867 |       "resolved": "https://registry.npmjs.org/postgres-date/-/postgres-date-1.0.7.tgz",
7868 |       "integrity": "sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==",
7869 |       "license": "MIT",
7870 |       "engines": {
7871 |         "node": ">=0.10.0"
7872 |       }
7873 |     },
7874 |     "node_modules/postgres-interval": {
7875 |       "version": "1.2.0",
7876 |       "resolved": "https://registry.npmjs.org/postgres-interval/-/postgres-interval-1.2.0.tgz",
7877 |       "integrity": "sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==",
7878 |       "license": "MIT",
7879 |       "dependencies": {
7880 |         "xtend": "^4.0.0"
7881 |       },
7882 |       "engines": {
7883 |         "node": ">=0.10.0"
7884 |       }
7885 |     },
7886 |     "node_modules/preact": {
7887 |       "version": "10.12.1",
7888 |       "resolved": "https://registry.npmjs.org/preact/-/preact-10.12.1.tgz",
7889 |       "integrity": "sha512-l8386ixSsBdbreOAkqtrwqHwdvR35ID8c3rKPa8lCWuO86dBi32QWHV4vfsZK1utLLFMvw+Z5Ad4XLkZzchscg==",
7890 |       "license": "MIT",
7891 |       "peer": true,
7892 |       "funding": {
7893 |         "type": "opencollective",
7894 |         "url": "https://opencollective.com/preact"
7895 |       }
7896 |     },
7897 |     "node_modules/prelude-ls": {
7898 |       "version": "1.2.1",
7899 |       "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
7900 |       "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
7901 |       "dev": true,
7902 |       "license": "MIT",
7903 |       "engines": {
7904 |         "node": ">= 0.8.0"
7905 |       }
7906 |     },
7907 |     "node_modules/process-warning": {
7908 |       "version": "5.0.0",
7909 |       "resolved": "https://registry.npmjs.org/process-warning/-/process-warning-5.0.0.tgz",
7910 |       "integrity": "sha512-a39t9ApHNx2L4+HBnQKqxxHNs1r7KF+Intd8Q/g1bUh6q0WIp9voPXJ/x0j+ZL45KF1pJd9+q2jLIRMfvEshkA==",
7911 |       "funding": [
7912 |         {
7913 |           "type": "github",
7914 |           "url": "https://github.com/sponsors/fastify"
7915 |         },
7916 |         {
7917 |           "type": "opencollective",
7918 |           "url": "https://opencollective.com/fastify"
7919 |         }
7920 |       ],
7921 |       "license": "MIT"
7922 |     },
7923 |     "node_modules/prop-types": {
7924 |       "version": "15.8.1",
7925 |       "resolved": "https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz",
7926 |       "integrity": "sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==",
7927 |       "dev": true,
7928 |       "license": "MIT",
7929 |       "dependencies": {
7930 |         "loose-envify": "^1.4.0",
7931 |         "object-assign": "^4.1.1",
7932 |         "react-is": "^16.13.1"
7933 |       }
7934 |     },
7935 |     "node_modules/punycode": {
7936 |       "version": "2.3.1",
7937 |       "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
7938 |       "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
7939 |       "dev": true,
7940 |       "license": "MIT",
7941 |       "engines": {
7942 |         "node": ">=6"
7943 |       }
7944 |     },
7945 |     "node_modules/queue-microtask": {
7946 |       "version": "1.2.3",
7947 |       "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
7948 |       "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
7949 |       "dev": true,
7950 |       "funding": [
7951 |         {
7952 |           "type": "github",
7953 |           "url": "https://github.com/sponsors/feross"
7954 |         },
7955 |         {
7956 |           "type": "patreon",
7957 |           "url": "https://www.patreon.com/feross"
7958 |         },
7959 |         {
7960 |           "type": "consulting",
7961 |           "url": "https://feross.org/support"
7962 |         }
7963 |       ],
7964 |       "license": "MIT"
7965 |     },
7966 |     "node_modules/quick-format-unescaped": {
7967 |       "version": "4.0.4",
7968 |       "resolved": "https://registry.npmjs.org/quick-format-unescaped/-/quick-format-unescaped-4.0.4.tgz",
7969 |       "integrity": "sha512-tYC1Q1hgyRuHgloV/YXs2w15unPVh8qfu/qCTfhTYamaw7fyhumKa2yGpdSo87vY32rIclj+4fWYQXUMs9EHvg==",
7970 |       "license": "MIT"
7971 |     },
7972 |     "node_modules/react": {
7973 |       "version": "19.1.0",
7974 |       "resolved": "https://registry.npmjs.org/react/-/react-19.1.0.tgz",
7975 |       "integrity": "sha512-FS+XFBNvn3GTAWq26joslQgWNoFu08F4kl0J4CgdNKADkdSGXQyTCnKteIAJy96Br6YbpEU1LSzV5dYtjMkMDg==",
7976 |       "license": "MIT",
7977 |       "engines": {
7978 |         "node": ">=0.10.0"
7979 |       }
7980 |     },
7981 |     "node_modules/react-dom": {
7982 |       "version": "19.1.0",
7983 |       "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.1.0.tgz",
7984 |       "integrity": "sha512-Xs1hdnE+DyKgeHJeJznQmYMIBG3TKIHJJT95Q58nHLSrElKlGQqDTR2HQ9fx5CN/Gk6Vh/kupBTDLU11/nDk/g==",
7985 |       "license": "MIT",
7986 |       "dependencies": {
7987 |         "scheduler": "^0.26.0"
7988 |       },
7989 |       "peerDependencies": {
7990 |         "react": "^19.1.0"
7991 |       }
7992 |     },
7993 |     "node_modules/react-hook-form": {
7994 |       "version": "7.61.1",
7995 |       "resolved": "https://registry.npmjs.org/react-hook-form/-/react-hook-form-7.61.1.tgz",
7996 |       "integrity": "sha512-2vbXUFDYgqEgM2RcXcAT2PwDW/80QARi+PKmHy5q2KhuKvOlG8iIYgf7eIlIANR5trW9fJbP4r5aub3a4egsew==",
7997 |       "license": "MIT",
7998 |       "engines": {
7999 |         "node": ">=18.0.0"
8000 |       },
8001 |       "funding": {
8002 |         "type": "opencollective",
8003 |         "url": "https://opencollective.com/react-hook-form"
8004 |       },
8005 |       "peerDependencies": {
8006 |         "react": "^16.8.0 || ^17 || ^18 || ^19"
8007 |       }
8008 |     },
8009 |     "node_modules/react-is": {
8010 |       "version": "16.13.1",
8011 |       "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
8012 |       "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
8013 |       "dev": true,
8014 |       "license": "MIT"
8015 |     },
8016 |     "node_modules/react-remove-scroll": {
8017 |       "version": "2.7.1",
8018 |       "resolved": "https://registry.npmjs.org/react-remove-scroll/-/react-remove-scroll-2.7.1.tgz",
8019 |       "integrity": "sha512-HpMh8+oahmIdOuS5aFKKY6Pyog+FNaZV/XyJOq7b4YFwsFHe5yYfdbIalI4k3vU2nSDql7YskmUseHsRrJqIPA==",
8020 |       "license": "MIT",
8021 |       "dependencies": {
8022 |         "react-remove-scroll-bar": "^2.3.7",
8023 |         "react-style-singleton": "^2.2.3",
8024 |         "tslib": "^2.1.0",
8025 |         "use-callback-ref": "^1.3.3",
8026 |         "use-sidecar": "^1.1.3"
8027 |       },
8028 |       "engines": {
8029 |         "node": ">=10"
8030 |       },
8031 |       "peerDependencies": {
8032 |         "@types/react": "*",
8033 |         "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
8034 |       },
8035 |       "peerDependenciesMeta": {
8036 |         "@types/react": {
8037 |           "optional": true
8038 |         }
8039 |       }
8040 |     },
8041 |     "node_modules/react-remove-scroll-bar": {
8042 |       "version": "2.3.8",
8043 |       "resolved": "https://registry.npmjs.org/react-remove-scroll-bar/-/react-remove-scroll-bar-2.3.8.tgz",
8044 |       "integrity": "sha512-9r+yi9+mgU33AKcj6IbT9oRCO78WriSj6t/cF8DWBZJ9aOGPOTEDvdUDz1FwKim7QXWwmHqtdHnRJfhAxEG46Q==",
8045 |       "license": "MIT",
8046 |       "dependencies": {
8047 |         "react-style-singleton": "^2.2.2",
8048 |         "tslib": "^2.0.0"
8049 |       },
8050 |       "engines": {
8051 |         "node": ">=10"
8052 |       },
8053 |       "peerDependencies": {
8054 |         "@types/react": "*",
8055 |         "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
8056 |       },
8057 |       "peerDependenciesMeta": {
8058 |         "@types/react": {
8059 |           "optional": true
8060 |         }
8061 |       }
8062 |     },
8063 |     "node_modules/react-style-singleton": {
8064 |       "version": "2.2.3",
8065 |       "resolved": "https://registry.npmjs.org/react-style-singleton/-/react-style-singleton-2.2.3.tgz",
8066 |       "integrity": "sha512-b6jSvxvVnyptAiLjbkWLE/lOnR4lfTtDAl+eUC7RZy+QQWc6wRzIV2CE6xBuMmDxc2qIihtDCZD5NPOFl7fRBQ==",
8067 |       "license": "MIT",
8068 |       "dependencies": {
8069 |         "get-nonce": "^1.0.0",
8070 |         "tslib": "^2.0.0"
8071 |       },
8072 |       "engines": {
8073 |         "node": ">=10"
8074 |       },
8075 |       "peerDependencies": {
8076 |         "@types/react": "*",
8077 |         "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
8078 |       },
8079 |       "peerDependenciesMeta": {
8080 |         "@types/react": {
8081 |           "optional": true
8082 |         }
8083 |       }
8084 |     },
8085 |     "node_modules/real-require": {
8086 |       "version": "0.2.0",
8087 |       "resolved": "https://registry.npmjs.org/real-require/-/real-require-0.2.0.tgz",
8088 |       "integrity": "sha512-57frrGM/OCTLqLOAh0mhVA9VBMHd+9U7Zb2THMGdBUoZVOtGbJzjxsYGDJ3A9AYYCP4hn6y1TVbaOfzWtm5GFg==",
8089 |       "license": "MIT",
8090 |       "engines": {
8091 |         "node": ">= 12.13.0"
8092 |       }
8093 |     },
8094 |     "node_modules/reflect.getprototypeof": {
8095 |       "version": "1.0.10",
8096 |       "resolved": "https://registry.npmjs.org/reflect.getprototypeof/-/reflect.getprototypeof-1.0.10.tgz",
8097 |       "integrity": "sha512-00o4I+DVrefhv+nX0ulyi3biSHCPDe+yLv5o/p6d/UVlirijB8E16FtfwSAi4g3tcqrQ4lRAqQSoFEZJehYEcw==",
8098 |       "dev": true,
8099 |       "license": "MIT",
8100 |       "dependencies": {
8101 |         "call-bind": "^1.0.8",
8102 |         "define-properties": "^1.2.1",
8103 |         "es-abstract": "^1.23.9",
8104 |         "es-errors": "^1.3.0",
8105 |         "es-object-atoms": "^1.0.0",
8106 |         "get-intrinsic": "^1.2.7",
8107 |         "get-proto": "^1.0.1",
8108 |         "which-builtin-type": "^1.2.1"
8109 |       },
8110 |       "engines": {
8111 |         "node": ">= 0.4"
8112 |       },
8113 |       "funding": {
8114 |         "url": "https://github.com/sponsors/ljharb"
8115 |       }
8116 |     },
8117 |     "node_modules/regexp.prototype.flags": {
8118 |       "version": "1.5.4",
8119 |       "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
8120 |       "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
8121 |       "dev": true,
8122 |       "license": "MIT",
8123 |       "dependencies": {
8124 |         "call-bind": "^1.0.8",
8125 |         "define-properties": "^1.2.1",
8126 |         "es-errors": "^1.3.0",
8127 |         "get-proto": "^1.0.1",
8128 |         "gopd": "^1.2.0",
8129 |         "set-function-name": "^2.0.2"
8130 |       },
8131 |       "engines": {
8132 |         "node": ">= 0.4"
8133 |       },
8134 |       "funding": {
8135 |         "url": "https://github.com/sponsors/ljharb"
8136 |       }
8137 |     },
8138 |     "node_modules/resolve": {
8139 |       "version": "1.22.10",
8140 |       "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
8141 |       "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
8142 |       "dev": true,
8143 |       "license": "MIT",
8144 |       "dependencies": {
8145 |         "is-core-module": "^2.16.0",
8146 |         "path-parse": "^1.0.7",
8147 |         "supports-preserve-symlinks-flag": "^1.0.0"
8148 |       },
8149 |       "bin": {
8150 |         "resolve": "bin/resolve"
8151 |       },
8152 |       "engines": {
8153 |         "node": ">= 0.4"
8154 |       },
8155 |       "funding": {
8156 |         "url": "https://github.com/sponsors/ljharb"
8157 |       }
8158 |     },
8159 |     "node_modules/resolve-from": {
8160 |       "version": "4.0.0",
8161 |       "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
8162 |       "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
8163 |       "dev": true,
8164 |       "license": "MIT",
8165 |       "engines": {
8166 |         "node": ">=4"
8167 |       }
8168 |     },
8169 |     "node_modules/resolve-pkg-maps": {
8170 |       "version": "1.0.0",
8171 |       "resolved": "https://registry.npmjs.org/resolve-pkg-maps/-/resolve-pkg-maps-1.0.0.tgz",
8172 |       "integrity": "sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==",
8173 |       "dev": true,
8174 |       "license": "MIT",
8175 |       "funding": {
8176 |         "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
8177 |       }
8178 |     },
8179 |     "node_modules/reusify": {
8180 |       "version": "1.1.0",
8181 |       "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
8182 |       "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
8183 |       "dev": true,
8184 |       "license": "MIT",
8185 |       "engines": {
8186 |         "iojs": ">=1.0.0",
8187 |         "node": ">=0.10.0"
8188 |       }
8189 |     },
8190 |     "node_modules/run-parallel": {
8191 |       "version": "1.2.0",
8192 |       "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
8193 |       "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
8194 |       "dev": true,
8195 |       "funding": [
8196 |         {
8197 |           "type": "github",
8198 |           "url": "https://github.com/sponsors/feross"
8199 |         },
8200 |         {
8201 |           "type": "patreon",
8202 |           "url": "https://www.patreon.com/feross"
8203 |         },
8204 |         {
8205 |           "type": "consulting",
8206 |           "url": "https://feross.org/support"
8207 |         }
8208 |       ],
8209 |       "license": "MIT",
8210 |       "dependencies": {
8211 |         "queue-microtask": "^1.2.2"
8212 |       }
8213 |     },
8214 |     "node_modules/safe-array-concat": {
8215 |       "version": "1.1.3",
8216 |       "resolved": "https://registry.npmjs.org/safe-array-concat/-/safe-array-concat-1.1.3.tgz",
8217 |       "integrity": "sha512-AURm5f0jYEOydBj7VQlVvDrjeFgthDdEF5H1dP+6mNpoXOMo1quQqJ4wvJDyRZ9+pO3kGWoOdmV08cSv2aJV6Q==",
8218 |       "dev": true,
8219 |       "license": "MIT",
8220 |       "dependencies": {
8221 |         "call-bind": "^1.0.8",
8222 |         "call-bound": "^1.0.2",
8223 |         "get-intrinsic": "^1.2.6",
8224 |         "has-symbols": "^1.1.0",
8225 |         "isarray": "^2.0.5"
8226 |       },
8227 |       "engines": {
8228 |         "node": ">=0.4"
8229 |       },
8230 |       "funding": {
8231 |         "url": "https://github.com/sponsors/ljharb"
8232 |       }
8233 |     },
8234 |     "node_modules/safe-buffer": {
8235 |       "version": "5.2.1",
8236 |       "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
8237 |       "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
8238 |       "funding": [
8239 |         {
8240 |           "type": "github",
8241 |           "url": "https://github.com/sponsors/feross"
8242 |         },
8243 |         {
8244 |           "type": "patreon",
8245 |           "url": "https://www.patreon.com/feross"
8246 |         },
8247 |         {
8248 |           "type": "consulting",
8249 |           "url": "https://feross.org/support"
8250 |         }
8251 |       ],
8252 |       "license": "MIT"
8253 |     },
8254 |     "node_modules/safe-push-apply": {
8255 |       "version": "1.0.0",
8256 |       "resolved": "https://registry.npmjs.org/safe-push-apply/-/safe-push-apply-1.0.0.tgz",
8257 |       "integrity": "sha512-iKE9w/Z7xCzUMIZqdBsp6pEQvwuEebH4vdpjcDWnyzaI6yl6O9FHvVpmGelvEHNsoY6wGblkxR6Zty/h00WiSA==",
8258 |       "dev": true,
8259 |       "license": "MIT",
8260 |       "dependencies": {
8261 |         "es-errors": "^1.3.0",
8262 |         "isarray": "^2.0.5"
8263 |       },
8264 |       "engines": {
8265 |         "node": ">= 0.4"
8266 |       },
8267 |       "funding": {
8268 |         "url": "https://github.com/sponsors/ljharb"
8269 |       }
8270 |     },
8271 |     "node_modules/safe-regex-test": {
8272 |       "version": "1.1.0",
8273 |       "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
8274 |       "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
8275 |       "dev": true,
8276 |       "license": "MIT",
8277 |       "dependencies": {
8278 |         "call-bound": "^1.0.2",
8279 |         "es-errors": "^1.3.0",
8280 |         "is-regex": "^1.2.1"
8281 |       },
8282 |       "engines": {
8283 |         "node": ">= 0.4"
8284 |       },
8285 |       "funding": {
8286 |         "url": "https://github.com/sponsors/ljharb"
8287 |       }
8288 |     },
8289 |     "node_modules/safe-stable-stringify": {
8290 |       "version": "2.5.0",
8291 |       "resolved": "https://registry.npmjs.org/safe-stable-stringify/-/safe-stable-stringify-2.5.0.tgz",
8292 |       "integrity": "sha512-b3rppTKm9T+PsVCBEOUR46GWI7fdOs00VKZ1+9c1EWDaDMvjQc6tUwuFyIprgGgTcWoVHSKrU8H31ZHA2e0RHA==",
8293 |       "license": "MIT",
8294 |       "engines": {
8295 |         "node": ">=10"
8296 |       }
8297 |     },
8298 |     "node_modules/scheduler": {
8299 |       "version": "0.26.0",
8300 |       "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.26.0.tgz",
8301 |       "integrity": "sha512-NlHwttCI/l5gCPR3D1nNXtWABUmBwvZpEQiD4IXSbIDq8BzLIK/7Ir5gTFSGZDUu37K5cMNp0hFtzO38sC7gWA==",
8302 |       "license": "MIT"
8303 |     },
8304 |     "node_modules/semver": {
8305 |       "version": "7.7.2",
8306 |       "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.2.tgz",
8307 |       "integrity": "sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==",
8308 |       "license": "ISC",
8309 |       "bin": {
8310 |         "semver": "bin/semver.js"
8311 |       },
8312 |       "engines": {
8313 |         "node": ">=10"
8314 |       }
8315 |     },
8316 |     "node_modules/set-function-length": {
8317 |       "version": "1.2.2",
8318 |       "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
8319 |       "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
8320 |       "dev": true,
8321 |       "license": "MIT",
8322 |       "dependencies": {
8323 |         "define-data-property": "^1.1.4",
8324 |         "es-errors": "^1.3.0",
8325 |         "function-bind": "^1.1.2",
8326 |         "get-intrinsic": "^1.2.4",
8327 |         "gopd": "^1.0.1",
8328 |         "has-property-descriptors": "^1.0.2"
8329 |       },
8330 |       "engines": {
8331 |         "node": ">= 0.4"
8332 |       }
8333 |     },
8334 |     "node_modules/set-function-name": {
8335 |       "version": "2.0.2",
8336 |       "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
8337 |       "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
8338 |       "dev": true,
8339 |       "license": "MIT",
8340 |       "dependencies": {
8341 |         "define-data-property": "^1.1.4",
8342 |         "es-errors": "^1.3.0",
8343 |         "functions-have-names": "^1.2.3",
8344 |         "has-property-descriptors": "^1.0.2"
8345 |       },
8346 |       "engines": {
8347 |         "node": ">= 0.4"
8348 |       }
8349 |     },
8350 |     "node_modules/set-proto": {
8351 |       "version": "1.0.0",
8352 |       "resolved": "https://registry.npmjs.org/set-proto/-/set-proto-1.0.0.tgz",
8353 |       "integrity": "sha512-RJRdvCo6IAnPdsvP/7m6bsQqNnn1FCBX5ZNtFL98MmFF/4xAIJTIg1YbHW5DC2W5SKZanrC6i4HsJqlajw/dZw==",
8354 |       "dev": true,
8355 |       "license": "MIT",
8356 |       "dependencies": {
8357 |         "dunder-proto": "^1.0.1",
8358 |         "es-errors": "^1.3.0",
8359 |         "es-object-atoms": "^1.0.0"
8360 |       },
8361 |       "engines": {
8362 |         "node": ">= 0.4"
8363 |       }
8364 |     },
8365 |     "node_modules/sharp": {
8366 |       "version": "0.34.3",
8367 |       "resolved": "https://registry.npmjs.org/sharp/-/sharp-0.34.3.tgz",
8368 |       "integrity": "sha512-eX2IQ6nFohW4DbvHIOLRB3MHFpYqaqvXd3Tp5e/T/dSH83fxaNJQRvDMhASmkNTsNTVF2/OOopzRCt7xokgPfg==",
8369 |       "hasInstallScript": true,
8370 |       "license": "Apache-2.0",
8371 |       "optional": true,
8372 |       "dependencies": {
8373 |         "color": "^4.2.3",
8374 |         "detect-libc": "^2.0.4",
8375 |         "semver": "^7.7.2"
8376 |       },
8377 |       "engines": {
8378 |         "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
8379 |       },
8380 |       "funding": {
8381 |         "url": "https://opencollective.com/libvips"
8382 |       },
8383 |       "optionalDependencies": {
8384 |         "@img/sharp-darwin-arm64": "0.34.3",
8385 |         "@img/sharp-darwin-x64": "0.34.3",
8386 |         "@img/sharp-libvips-darwin-arm64": "1.2.0",
8387 |         "@img/sharp-libvips-darwin-x64": "1.2.0",
8388 |         "@img/sharp-libvips-linux-arm": "1.2.0",
8389 |         "@img/sharp-libvips-linux-arm64": "1.2.0",
8390 |         "@img/sharp-libvips-linux-ppc64": "1.2.0",
8391 |         "@img/sharp-libvips-linux-s390x": "1.2.0",
8392 |         "@img/sharp-libvips-linux-x64": "1.2.0",
8393 |         "@img/sharp-libvips-linuxmusl-arm64": "1.2.0",
8394 |         "@img/sharp-libvips-linuxmusl-x64": "1.2.0",
8395 |         "@img/sharp-linux-arm": "0.34.3",
8396 |         "@img/sharp-linux-arm64": "0.34.3",
8397 |         "@img/sharp-linux-ppc64": "0.34.3",
8398 |         "@img/sharp-linux-s390x": "0.34.3",
8399 |         "@img/sharp-linux-x64": "0.34.3",
8400 |         "@img/sharp-linuxmusl-arm64": "0.34.3",
8401 |         "@img/sharp-linuxmusl-x64": "0.34.3",
8402 |         "@img/sharp-wasm32": "0.34.3",
8403 |         "@img/sharp-win32-arm64": "0.34.3",
8404 |         "@img/sharp-win32-ia32": "0.34.3",
8405 |         "@img/sharp-win32-x64": "0.34.3"
8406 |       }
8407 |     },
8408 |     "node_modules/shebang-command": {
8409 |       "version": "2.0.0",
8410 |       "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
8411 |       "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
8412 |       "dev": true,
8413 |       "license": "MIT",
8414 |       "dependencies": {
8415 |         "shebang-regex": "^3.0.0"
8416 |       },
8417 |       "engines": {
8418 |         "node": ">=8"
8419 |       }
8420 |     },
8421 |     "node_modules/shebang-regex": {
8422 |       "version": "3.0.0",
8423 |       "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
8424 |       "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
8425 |       "dev": true,
8426 |       "license": "MIT",
8427 |       "engines": {
8428 |         "node": ">=8"
8429 |       }
8430 |     },
8431 |     "node_modules/side-channel": {
8432 |       "version": "1.1.0",
8433 |       "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
8434 |       "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
8435 |       "dev": true,
8436 |       "license": "MIT",
8437 |       "dependencies": {
8438 |         "es-errors": "^1.3.0",
8439 |         "object-inspect": "^1.13.3",
8440 |         "side-channel-list": "^1.0.0",
8441 |         "side-channel-map": "^1.0.1",
8442 |         "side-channel-weakmap": "^1.0.2"
8443 |       },
8444 |       "engines": {
8445 |         "node": ">= 0.4"
8446 |       },
8447 |       "funding": {
8448 |         "url": "https://github.com/sponsors/ljharb"
8449 |       }
8450 |     },
8451 |     "node_modules/side-channel-list": {
8452 |       "version": "1.0.0",
8453 |       "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
8454 |       "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
8455 |       "dev": true,
8456 |       "license": "MIT",
8457 |       "dependencies": {
8458 |         "es-errors": "^1.3.0",
8459 |         "object-inspect": "^1.13.3"
8460 |       },
8461 |       "engines": {
8462 |         "node": ">= 0.4"
8463 |       },
8464 |       "funding": {
8465 |         "url": "https://github.com/sponsors/ljharb"
8466 |       }
8467 |     },
8468 |     "node_modules/side-channel-map": {
8469 |       "version": "1.0.1",
8470 |       "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
8471 |       "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
8472 |       "dev": true,
8473 |       "license": "MIT",
8474 |       "dependencies": {
8475 |         "call-bound": "^1.0.2",
8476 |         "es-errors": "^1.3.0",
8477 |         "get-intrinsic": "^1.2.5",
8478 |         "object-inspect": "^1.13.3"
8479 |       },
8480 |       "engines": {
8481 |         "node": ">= 0.4"
8482 |       },
8483 |       "funding": {
8484 |         "url": "https://github.com/sponsors/ljharb"
8485 |       }
8486 |     },
8487 |     "node_modules/side-channel-weakmap": {
8488 |       "version": "1.0.2",
8489 |       "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
8490 |       "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
8491 |       "dev": true,
8492 |       "license": "MIT",
8493 |       "dependencies": {
8494 |         "call-bound": "^1.0.2",
8495 |         "es-errors": "^1.3.0",
8496 |         "get-intrinsic": "^1.2.5",
8497 |         "object-inspect": "^1.13.3",
8498 |         "side-channel-map": "^1.0.1"
8499 |       },
8500 |       "engines": {
8501 |         "node": ">= 0.4"
8502 |       },
8503 |       "funding": {
8504 |         "url": "https://github.com/sponsors/ljharb"
8505 |       }
8506 |     },
8507 |     "node_modules/simple-swizzle": {
8508 |       "version": "0.2.2",
8509 |       "resolved": "https://registry.npmjs.org/simple-swizzle/-/simple-swizzle-0.2.2.tgz",
8510 |       "integrity": "sha512-JA//kQgZtbuY83m+xT+tXJkmJncGMTFT+C+g2h2R9uxkYIrE2yy9sgmcLhCnw57/WSD+Eh3J97FPEDFnbXnDUg==",
8511 |       "license": "MIT",
8512 |       "optional": true,
8513 |       "dependencies": {
8514 |         "is-arrayish": "^0.3.1"
8515 |       }
8516 |     },
8517 |     "node_modules/sonic-boom": {
8518 |       "version": "4.2.0",
8519 |       "resolved": "https://registry.npmjs.org/sonic-boom/-/sonic-boom-4.2.0.tgz",
8520 |       "integrity": "sha512-INb7TM37/mAcsGmc9hyyI6+QR3rR1zVRu36B0NeGXKnOOLiZOfER5SA+N7X7k3yUYRzLWafduTDvJAfDswwEww==",
8521 |       "license": "MIT",
8522 |       "dependencies": {
8523 |         "atomic-sleep": "^1.0.0"
8524 |       }
8525 |     },
8526 |     "node_modules/sonner": {
8527 |       "version": "2.0.6",
8528 |       "resolved": "https://registry.npmjs.org/sonner/-/sonner-2.0.6.tgz",
8529 |       "integrity": "sha512-yHFhk8T/DK3YxjFQXIrcHT1rGEeTLliVzWbO0xN8GberVun2RiBnxAjXAYpZrqwEVHBG9asI/Li8TAAhN9m59Q==",
8530 |       "license": "MIT",
8531 |       "peerDependencies": {
8532 |         "react": "^18.0.0 || ^19.0.0 || ^19.0.0-rc",
8533 |         "react-dom": "^18.0.0 || ^19.0.0 || ^19.0.0-rc"
8534 |       }
8535 |     },
8536 |     "node_modules/source-map": {
8537 |       "version": "0.6.1",
8538 |       "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
8539 |       "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
8540 |       "dev": true,
8541 |       "license": "BSD-3-Clause",
8542 |       "engines": {
8543 |         "node": ">=0.10.0"
8544 |       }
8545 |     },
8546 |     "node_modules/source-map-js": {
8547 |       "version": "1.2.1",
8548 |       "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
8549 |       "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
8550 |       "license": "BSD-3-Clause",
8551 |       "engines": {
8552 |         "node": ">=0.10.0"
8553 |       }
8554 |     },
8555 |     "node_modules/source-map-support": {
8556 |       "version": "0.5.21",
8557 |       "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.21.tgz",
8558 |       "integrity": "sha512-uBHU3L3czsIyYXKX88fdrGovxdSCoTGDRZ6SYXtSRxLZUzHg5P/66Ht6uoUlHu9EZod+inXhKo3qQgwXUT/y1w==",
8559 |       "dev": true,
8560 |       "license": "MIT",
8561 |       "dependencies": {
8562 |         "buffer-from": "^1.0.0",
8563 |         "source-map": "^0.6.0"
8564 |       }
8565 |     },
8566 |     "node_modules/split2": {
8567 |       "version": "4.2.0",
8568 |       "resolved": "https://registry.npmjs.org/split2/-/split2-4.2.0.tgz",
8569 |       "integrity": "sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==",
8570 |       "license": "ISC",
8571 |       "engines": {
8572 |         "node": ">= 10.x"
8573 |       }
8574 |     },
8575 |     "node_modules/stable-hash": {
8576 |       "version": "0.0.5",
8577 |       "resolved": "https://registry.npmjs.org/stable-hash/-/stable-hash-0.0.5.tgz",
8578 |       "integrity": "sha512-+L3ccpzibovGXFK+Ap/f8LOS0ahMrHTf3xu7mMLSpEGU0EO9ucaysSylKo9eRDFNhWve/y275iPmIZ4z39a9iA==",
8579 |       "dev": true,
8580 |       "license": "MIT"
8581 |     },
8582 |     "node_modules/stop-iteration-iterator": {
8583 |       "version": "1.1.0",
8584 |       "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
8585 |       "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
8586 |       "dev": true,
8587 |       "license": "MIT",
8588 |       "dependencies": {
8589 |         "es-errors": "^1.3.0",
8590 |         "internal-slot": "^1.1.0"
8591 |       },
8592 |       "engines": {
8593 |         "node": ">= 0.4"
8594 |       }
8595 |     },
8596 |     "node_modules/string.prototype.includes": {
8597 |       "version": "2.0.1",
8598 |       "resolved": "https://registry.npmjs.org/string.prototype.includes/-/string.prototype.includes-2.0.1.tgz",
8599 |       "integrity": "sha512-o7+c9bW6zpAdJHTtujeePODAhkuicdAryFsfVKwA+wGw89wJ4GTY484WTucM9hLtDEOpOvI+aHnzqnC5lHp4Rg==",
8600 |       "dev": true,
8601 |       "license": "MIT",
8602 |       "dependencies": {
8603 |         "call-bind": "^1.0.7",
8604 |         "define-properties": "^1.2.1",
8605 |         "es-abstract": "^1.23.3"
8606 |       },
8607 |       "engines": {
8608 |         "node": ">= 0.4"
8609 |       }
8610 |     },
8611 |     "node_modules/string.prototype.matchall": {
8612 |       "version": "4.0.12",
8613 |       "resolved": "https://registry.npmjs.org/string.prototype.matchall/-/string.prototype.matchall-4.0.12.tgz",
8614 |       "integrity": "sha512-6CC9uyBL+/48dYizRf7H7VAYCMCNTBeM78x/VTUe9bFEaxBepPJDa1Ow99LqI/1yF7kuy7Q3cQsYMrcjGUcskA==",
8615 |       "dev": true,
8616 |       "license": "MIT",
8617 |       "dependencies": {
8618 |         "call-bind": "^1.0.8",
8619 |         "call-bound": "^1.0.3",
8620 |         "define-properties": "^1.2.1",
8621 |         "es-abstract": "^1.23.6",
8622 |         "es-errors": "^1.3.0",
8623 |         "es-object-atoms": "^1.0.0",
8624 |         "get-intrinsic": "^1.2.6",
8625 |         "gopd": "^1.2.0",
8626 |         "has-symbols": "^1.1.0",
8627 |         "internal-slot": "^1.1.0",
8628 |         "regexp.prototype.flags": "^1.5.3",
8629 |         "set-function-name": "^2.0.2",
8630 |         "side-channel": "^1.1.0"
8631 |       },
8632 |       "engines": {
8633 |         "node": ">= 0.4"
8634 |       },
8635 |       "funding": {
8636 |         "url": "https://github.com/sponsors/ljharb"
8637 |       }
8638 |     },
8639 |     "node_modules/string.prototype.repeat": {
8640 |       "version": "1.0.0",
8641 |       "resolved": "https://registry.npmjs.org/string.prototype.repeat/-/string.prototype.repeat-1.0.0.tgz",
8642 |       "integrity": "sha512-0u/TldDbKD8bFCQ/4f5+mNRrXwZ8hg2w7ZR8wa16e8z9XpePWl3eGEcUD0OXpEH/VJH/2G3gjUtR3ZOiBe2S/w==",
8643 |       "dev": true,
8644 |       "license": "MIT",
8645 |       "dependencies": {
8646 |         "define-properties": "^1.1.3",
8647 |         "es-abstract": "^1.17.5"
8648 |       }
8649 |     },
8650 |     "node_modules/string.prototype.trim": {
8651 |       "version": "1.2.10",
8652 |       "resolved": "https://registry.npmjs.org/string.prototype.trim/-/string.prototype.trim-1.2.10.tgz",
8653 |       "integrity": "sha512-Rs66F0P/1kedk5lyYyH9uBzuiI/kNRmwJAR9quK6VOtIpZ2G+hMZd+HQbbv25MgCA6gEffoMZYxlTod4WcdrKA==",
8654 |       "dev": true,
8655 |       "license": "MIT",
8656 |       "dependencies": {
8657 |         "call-bind": "^1.0.8",
8658 |         "call-bound": "^1.0.2",
8659 |         "define-data-property": "^1.1.4",
8660 |         "define-properties": "^1.2.1",
8661 |         "es-abstract": "^1.23.5",
8662 |         "es-object-atoms": "^1.0.0",
8663 |         "has-property-descriptors": "^1.0.2"
8664 |       },
8665 |       "engines": {
8666 |         "node": ">= 0.4"
8667 |       },
8668 |       "funding": {
8669 |         "url": "https://github.com/sponsors/ljharb"
8670 |       }
8671 |     },
8672 |     "node_modules/string.prototype.trimend": {
8673 |       "version": "1.0.9",
8674 |       "resolved": "https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.9.tgz",
8675 |       "integrity": "sha512-G7Ok5C6E/j4SGfyLCloXTrngQIQU3PWtXGst3yM7Bea9FRURf1S42ZHlZZtsNque2FN2PoUhfZXYLNWwEr4dLQ==",
8676 |       "dev": true,
8677 |       "license": "MIT",
8678 |       "dependencies": {
8679 |         "call-bind": "^1.0.8",
8680 |         "call-bound": "^1.0.2",
8681 |         "define-properties": "^1.2.1",
8682 |         "es-object-atoms": "^1.0.0"
8683 |       },
8684 |       "engines": {
8685 |         "node": ">= 0.4"
8686 |       },
8687 |       "funding": {
8688 |         "url": "https://github.com/sponsors/ljharb"
8689 |       }
8690 |     },
8691 |     "node_modules/string.prototype.trimstart": {
8692 |       "version": "1.0.8",
8693 |       "resolved": "https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.8.tgz",
8694 |       "integrity": "sha512-UXSH262CSZY1tfu3G3Secr6uGLCFVPMhIqHjlgCUtCCcgihYc/xKs9djMTMUOb2j1mVSeU8EU6NWc/iQKU6Gfg==",
8695 |       "dev": true,
8696 |       "license": "MIT",
8697 |       "dependencies": {
8698 |         "call-bind": "^1.0.7",
8699 |         "define-properties": "^1.2.1",
8700 |         "es-object-atoms": "^1.0.0"
8701 |       },
8702 |       "engines": {
8703 |         "node": ">= 0.4"
8704 |       },
8705 |       "funding": {
8706 |         "url": "https://github.com/sponsors/ljharb"
8707 |       }
8708 |     },
8709 |     "node_modules/strip-bom": {
8710 |       "version": "3.0.0",
8711 |       "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
8712 |       "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
8713 |       "dev": true,
8714 |       "license": "MIT",
8715 |       "engines": {
8716 |         "node": ">=4"
8717 |       }
8718 |     },
8719 |     "node_modules/strip-json-comments": {
8720 |       "version": "3.1.1",
8721 |       "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
8722 |       "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
8723 |       "dev": true,
8724 |       "license": "MIT",
8725 |       "engines": {
8726 |         "node": ">=8"
8727 |       },
8728 |       "funding": {
8729 |         "url": "https://github.com/sponsors/sindresorhus"
8730 |       }
8731 |     },
8732 |     "node_modules/styled-jsx": {
8733 |       "version": "5.1.6",
8734 |       "resolved": "https://registry.npmjs.org/styled-jsx/-/styled-jsx-5.1.6.tgz",
8735 |       "integrity": "sha512-qSVyDTeMotdvQYoHWLNGwRFJHC+i+ZvdBRYosOFgC+Wg1vx4frN2/RG/NA7SYqqvKNLf39P2LSRA2pu6n0XYZA==",
8736 |       "license": "MIT",
8737 |       "dependencies": {
8738 |         "client-only": "0.0.1"
8739 |       },
8740 |       "engines": {
8741 |         "node": ">= 12.0.0"
8742 |       },
8743 |       "peerDependencies": {
8744 |         "react": ">= 16.8.0 || 17.x.x || ^18.0.0-0 || ^19.0.0-0"
8745 |       },
8746 |       "peerDependenciesMeta": {
8747 |         "@babel/core": {
8748 |           "optional": true
8749 |         },
8750 |         "babel-plugin-macros": {
8751 |           "optional": true
8752 |         }
8753 |       }
8754 |     },
8755 |     "node_modules/supports-color": {
8756 |       "version": "7.2.0",
8757 |       "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
8758 |       "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
8759 |       "dev": true,
8760 |       "license": "MIT",
8761 |       "dependencies": {
8762 |         "has-flag": "^4.0.0"
8763 |       },
8764 |       "engines": {
8765 |         "node": ">=8"
8766 |       }
8767 |     },
8768 |     "node_modules/supports-preserve-symlinks-flag": {
8769 |       "version": "1.0.0",
8770 |       "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
8771 |       "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
8772 |       "dev": true,
8773 |       "license": "MIT",
8774 |       "engines": {
8775 |         "node": ">= 0.4"
8776 |       },
8777 |       "funding": {
8778 |         "url": "https://github.com/sponsors/ljharb"
8779 |       }
8780 |     },
8781 |     "node_modules/tailwind-merge": {
8782 |       "version": "3.3.1",
8783 |       "resolved": "https://registry.npmjs.org/tailwind-merge/-/tailwind-merge-3.3.1.tgz",
8784 |       "integrity": "sha512-gBXpgUm/3rp1lMZZrM/w7D8GKqshif0zAymAhbCyIt8KMe+0v9DQ7cdYLR4FHH/cKpdTXb+A/tKKU3eolfsI+g==",
8785 |       "license": "MIT",
8786 |       "funding": {
8787 |         "type": "github",
8788 |         "url": "https://github.com/sponsors/dcastil"
8789 |       }
8790 |     },
8791 |     "node_modules/tailwindcss": {
8792 |       "version": "4.1.11",
8793 |       "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-4.1.11.tgz",
8794 |       "integrity": "sha512-2E9TBm6MDD/xKYe+dvJZAmg3yxIEDNRc0jwlNyDg/4Fil2QcSLjFKGVff0lAf1jjeaArlG/M75Ey/EYr/OJtBA==",
8795 |       "dev": true,
8796 |       "license": "MIT"
8797 |     },
8798 |     "node_modules/tapable": {
8799 |       "version": "2.2.2",
8800 |       "resolved": "https://registry.npmjs.org/tapable/-/tapable-2.2.2.tgz",
8801 |       "integrity": "sha512-Re10+NauLTMCudc7T5WLFLAwDhQ0JWdrMK+9B2M8zR5hRExKmsRDCBA7/aV/pNJFltmBFO5BAMlQFi/vq3nKOg==",
8802 |       "dev": true,
8803 |       "license": "MIT",
8804 |       "engines": {
8805 |         "node": ">=6"
8806 |       }
8807 |     },
8808 |     "node_modules/tar": {
8809 |       "version": "7.4.3",
8810 |       "resolved": "https://registry.npmjs.org/tar/-/tar-7.4.3.tgz",
8811 |       "integrity": "sha512-5S7Va8hKfV7W5U6g3aYxXmlPoZVAwUMy9AOKyF2fVuZa2UD3qZjg578OrLRt8PcNN1PleVaL/5/yYATNL0ICUw==",
8812 |       "dev": true,
8813 |       "license": "ISC",
8814 |       "dependencies": {
8815 |         "@isaacs/fs-minipass": "^4.0.0",
8816 |         "chownr": "^3.0.0",
8817 |         "minipass": "^7.1.2",
8818 |         "minizlib": "^3.0.1",
8819 |         "mkdirp": "^3.0.1",
8820 |         "yallist": "^5.0.0"
8821 |       },
8822 |       "engines": {
8823 |         "node": ">=18"
8824 |       }
8825 |     },
8826 |     "node_modules/thread-stream": {
8827 |       "version": "3.1.0",
8828 |       "resolved": "https://registry.npmjs.org/thread-stream/-/thread-stream-3.1.0.tgz",
8829 |       "integrity": "sha512-OqyPZ9u96VohAyMfJykzmivOrY2wfMSf3C5TtFJVgN+Hm6aj+voFhlK+kZEIv2FBh1X6Xp3DlnCOfEQ3B2J86A==",
8830 |       "license": "MIT",
8831 |       "dependencies": {
8832 |         "real-require": "^0.2.0"
8833 |       }
8834 |     },
8835 |     "node_modules/tinyglobby": {
8836 |       "version": "0.2.14",
8837 |       "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.14.tgz",
8838 |       "integrity": "sha512-tX5e7OM1HnYr2+a2C/4V0htOcSQcoSTH9KgJnVvNm5zm/cyEWKJ7j7YutsH9CxMdtOkkLFy2AHrMci9IM8IPZQ==",
8839 |       "dev": true,
8840 |       "license": "MIT",
8841 |       "dependencies": {
8842 |         "fdir": "^6.4.4",
8843 |         "picomatch": "^4.0.2"
8844 |       },
8845 |       "engines": {
8846 |         "node": ">=12.0.0"
8847 |       },
8848 |       "funding": {
8849 |         "url": "https://github.com/sponsors/SuperchupuDev"
8850 |       }
8851 |     },
8852 |     "node_modules/tinyglobby/node_modules/fdir": {
8853 |       "version": "6.4.6",
8854 |       "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.4.6.tgz",
8855 |       "integrity": "sha512-hiFoqpyZcfNm1yc4u8oWCf9A2c4D3QjCrks3zmoVKVxpQRzmPNar1hUJcBG2RQHvEVGDN+Jm81ZheVLAQMK6+w==",
8856 |       "dev": true,
8857 |       "license": "MIT",
8858 |       "peerDependencies": {
8859 |         "picomatch": "^3 || ^4"
8860 |       },
8861 |       "peerDependenciesMeta": {
8862 |         "picomatch": {
8863 |           "optional": true
8864 |         }
8865 |       }
8866 |     },
8867 |     "node_modules/tinyglobby/node_modules/picomatch": {
8868 |       "version": "4.0.3",
8869 |       "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
8870 |       "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
8871 |       "dev": true,
8872 |       "license": "MIT",
8873 |       "engines": {
8874 |         "node": ">=12"
8875 |       },
8876 |       "funding": {
8877 |         "url": "https://github.com/sponsors/jonschlinkert"
8878 |       }
8879 |     },
8880 |     "node_modules/to-regex-range": {
8881 |       "version": "5.0.1",
8882 |       "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
8883 |       "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
8884 |       "dev": true,
8885 |       "license": "MIT",
8886 |       "dependencies": {
8887 |         "is-number": "^7.0.0"
8888 |       },
8889 |       "engines": {
8890 |         "node": ">=8.0"
8891 |       }
8892 |     },
8893 |     "node_modules/ts-api-utils": {
8894 |       "version": "2.1.0",
8895 |       "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
8896 |       "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
8897 |       "dev": true,
8898 |       "license": "MIT",
8899 |       "engines": {
8900 |         "node": ">=18.12"
8901 |       },
8902 |       "peerDependencies": {
8903 |         "typescript": ">=4.8.4"
8904 |       }
8905 |     },
8906 |     "node_modules/tsconfig-paths": {
8907 |       "version": "3.15.0",
8908 |       "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-3.15.0.tgz",
8909 |       "integrity": "sha512-2Ac2RgzDe/cn48GvOe3M+o82pEFewD3UPbyoUHHdKasHwJKjds4fLXWf/Ux5kATBKN20oaFGu+jbElp1pos0mg==",
8910 |       "dev": true,
8911 |       "license": "MIT",
8912 |       "dependencies": {
8913 |         "@types/json5": "^0.0.29",
8914 |         "json5": "^1.0.2",
8915 |         "minimist": "^1.2.6",
8916 |         "strip-bom": "^3.0.0"
8917 |       }
8918 |     },
8919 |     "node_modules/tslib": {
8920 |       "version": "2.8.1",
8921 |       "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
8922 |       "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
8923 |       "license": "0BSD"
8924 |     },
8925 |     "node_modules/tsx": {
8926 |       "version": "4.20.3",
8927 |       "resolved": "https://registry.npmjs.org/tsx/-/tsx-4.20.3.tgz",
8928 |       "integrity": "sha512-qjbnuR9Tr+FJOMBqJCW5ehvIo/buZq7vH7qD7JziU98h6l3qGy0a/yPFjwO+y0/T7GFpNgNAvEcPPVfyT8rrPQ==",
8929 |       "dev": true,
8930 |       "license": "MIT",
8931 |       "dependencies": {
8932 |         "esbuild": "~0.25.0",
8933 |         "get-tsconfig": "^4.7.5"
8934 |       },
8935 |       "bin": {
8936 |         "tsx": "dist/cli.mjs"
8937 |       },
8938 |       "engines": {
8939 |         "node": ">=18.0.0"
8940 |       },
8941 |       "optionalDependencies": {
8942 |         "fsevents": "~2.3.3"
8943 |       }
8944 |     },
8945 |     "node_modules/tw-animate-css": {
8946 |       "version": "1.3.5",
8947 |       "resolved": "https://registry.npmjs.org/tw-animate-css/-/tw-animate-css-1.3.5.tgz",
8948 |       "integrity": "sha512-t3u+0YNoloIhj1mMXs779P6MO9q3p3mvGn4k1n3nJPqJw/glZcuijG2qTSN4z4mgNRfW5ZC3aXJFLwDtiipZXA==",
8949 |       "dev": true,
8950 |       "license": "MIT",
8951 |       "funding": {
8952 |         "url": "https://github.com/sponsors/Wombosvideo"
8953 |       }
8954 |     },
8955 |     "node_modules/type-check": {
8956 |       "version": "0.4.0",
8957 |       "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
8958 |       "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
8959 |       "dev": true,
8960 |       "license": "MIT",
8961 |       "dependencies": {
8962 |         "prelude-ls": "^1.2.1"
8963 |       },
8964 |       "engines": {
8965 |         "node": ">= 0.8.0"
8966 |       }
8967 |     },
8968 |     "node_modules/typed-array-buffer": {
8969 |       "version": "1.0.3",
8970 |       "resolved": "https://registry.npmjs.org/typed-array-buffer/-/typed-array-buffer-1.0.3.tgz",
8971 |       "integrity": "sha512-nAYYwfY3qnzX30IkA6AQZjVbtK6duGontcQm1WSG1MD94YLqK0515GNApXkoxKOWMusVssAHWLh9SeaoefYFGw==",
8972 |       "dev": true,
8973 |       "license": "MIT",
8974 |       "dependencies": {
8975 |         "call-bound": "^1.0.3",
8976 |         "es-errors": "^1.3.0",
8977 |         "is-typed-array": "^1.1.14"
8978 |       },
8979 |       "engines": {
8980 |         "node": ">= 0.4"
8981 |       }
8982 |     },
8983 |     "node_modules/typed-array-byte-length": {
8984 |       "version": "1.0.3",
8985 |       "resolved": "https://registry.npmjs.org/typed-array-byte-length/-/typed-array-byte-length-1.0.3.tgz",
8986 |       "integrity": "sha512-BaXgOuIxz8n8pIq3e7Atg/7s+DpiYrxn4vdot3w9KbnBhcRQq6o3xemQdIfynqSeXeDrF32x+WvfzmOjPiY9lg==",
8987 |       "dev": true,
8988 |       "license": "MIT",
8989 |       "dependencies": {
8990 |         "call-bind": "^1.0.8",
8991 |         "for-each": "^0.3.3",
8992 |         "gopd": "^1.2.0",
8993 |         "has-proto": "^1.2.0",
8994 |         "is-typed-array": "^1.1.14"
8995 |       },
8996 |       "engines": {
8997 |         "node": ">= 0.4"
8998 |       },
8999 |       "funding": {
9000 |         "url": "https://github.com/sponsors/ljharb"
9001 |       }
9002 |     },
9003 |     "node_modules/typed-array-byte-offset": {
9004 |       "version": "1.0.4",
9005 |       "resolved": "https://registry.npmjs.org/typed-array-byte-offset/-/typed-array-byte-offset-1.0.4.tgz",
9006 |       "integrity": "sha512-bTlAFB/FBYMcuX81gbL4OcpH5PmlFHqlCCpAl8AlEzMz5k53oNDvN8p1PNOWLEmI2x4orp3raOFB51tv9X+MFQ==",
9007 |       "dev": true,
9008 |       "license": "MIT",
9009 |       "dependencies": {
9010 |         "available-typed-arrays": "^1.0.7",
9011 |         "call-bind": "^1.0.8",
9012 |         "for-each": "^0.3.3",
9013 |         "gopd": "^1.2.0",
9014 |         "has-proto": "^1.2.0",
9015 |         "is-typed-array": "^1.1.15",
9016 |         "reflect.getprototypeof": "^1.0.9"
9017 |       },
9018 |       "engines": {
9019 |         "node": ">= 0.4"
9020 |       },
9021 |       "funding": {
9022 |         "url": "https://github.com/sponsors/ljharb"
9023 |       }
9024 |     },
9025 |     "node_modules/typed-array-length": {
9026 |       "version": "1.0.7",
9027 |       "resolved": "https://registry.npmjs.org/typed-array-length/-/typed-array-length-1.0.7.tgz",
9028 |       "integrity": "sha512-3KS2b+kL7fsuk/eJZ7EQdnEmQoaho/r6KUef7hxvltNA5DR8NAUM+8wJMbJyZ4G9/7i3v5zPBIMN5aybAh2/Jg==",
9029 |       "dev": true,
9030 |       "license": "MIT",
9031 |       "dependencies": {
9032 |         "call-bind": "^1.0.7",
9033 |         "for-each": "^0.3.3",
9034 |         "gopd": "^1.0.1",
9035 |         "is-typed-array": "^1.1.13",
9036 |         "possible-typed-array-names": "^1.0.0",
9037 |         "reflect.getprototypeof": "^1.0.6"
9038 |       },
9039 |       "engines": {
9040 |         "node": ">= 0.4"
9041 |       },
9042 |       "funding": {
9043 |         "url": "https://github.com/sponsors/ljharb"
9044 |       }
9045 |     },
9046 |     "node_modules/typescript": {
9047 |       "version": "5.8.3",
9048 |       "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.8.3.tgz",
9049 |       "integrity": "sha512-p1diW6TqL9L07nNxvRMM7hMMw4c5XOo/1ibL4aAIGmSAt9slTE1Xgw5KWuof2uTOvCg9BY7ZRi+GaF+7sfgPeQ==",
9050 |       "devOptional": true,
9051 |       "license": "Apache-2.0",
9052 |       "bin": {
9053 |         "tsc": "bin/tsc",
9054 |         "tsserver": "bin/tsserver"
9055 |       },
9056 |       "engines": {
9057 |         "node": ">=14.17"
9058 |       }
9059 |     },
9060 |     "node_modules/unbox-primitive": {
9061 |       "version": "1.1.0",
9062 |       "resolved": "https://registry.npmjs.org/unbox-primitive/-/unbox-primitive-1.1.0.tgz",
9063 |       "integrity": "sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==",
9064 |       "dev": true,
9065 |       "license": "MIT",
9066 |       "dependencies": {
9067 |         "call-bound": "^1.0.3",
9068 |         "has-bigints": "^1.0.2",
9069 |         "has-symbols": "^1.1.0",
9070 |         "which-boxed-primitive": "^1.1.1"
9071 |       },
9072 |       "engines": {
9073 |         "node": ">= 0.4"
9074 |       },
9075 |       "funding": {
9076 |         "url": "https://github.com/sponsors/ljharb"
9077 |       }
9078 |     },
9079 |     "node_modules/undici-types": {
9080 |       "version": "6.21.0",
9081 |       "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
9082 |       "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
9083 |       "license": "MIT"
9084 |     },
9085 |     "node_modules/unrs-resolver": {
9086 |       "version": "1.11.1",
9087 |       "resolved": "https://registry.npmjs.org/unrs-resolver/-/unrs-resolver-1.11.1.tgz",
9088 |       "integrity": "sha512-bSjt9pjaEBnNiGgc9rUiHGKv5l4/TGzDmYw3RhnkJGtLhbnnA/5qJj7x3dNDCRx/PJxu774LlH8lCOlB4hEfKg==",
9089 |       "dev": true,
9090 |       "hasInstallScript": true,
9091 |       "license": "MIT",
9092 |       "dependencies": {
9093 |         "napi-postinstall": "^0.3.0"
9094 |       },
9095 |       "funding": {
9096 |         "url": "https://opencollective.com/unrs-resolver"
9097 |       },
9098 |       "optionalDependencies": {
9099 |         "@unrs/resolver-binding-android-arm-eabi": "1.11.1",
9100 |         "@unrs/resolver-binding-android-arm64": "1.11.1",
9101 |         "@unrs/resolver-binding-darwin-arm64": "1.11.1",
9102 |         "@unrs/resolver-binding-darwin-x64": "1.11.1",
9103 |         "@unrs/resolver-binding-freebsd-x64": "1.11.1",
9104 |         "@unrs/resolver-binding-linux-arm-gnueabihf": "1.11.1",
9105 |         "@unrs/resolver-binding-linux-arm-musleabihf": "1.11.1",
9106 |         "@unrs/resolver-binding-linux-arm64-gnu": "1.11.1",
9107 |         "@unrs/resolver-binding-linux-arm64-musl": "1.11.1",
9108 |         "@unrs/resolver-binding-linux-ppc64-gnu": "1.11.1",
9109 |         "@unrs/resolver-binding-linux-riscv64-gnu": "1.11.1",
9110 |         "@unrs/resolver-binding-linux-riscv64-musl": "1.11.1",
9111 |         "@unrs/resolver-binding-linux-s390x-gnu": "1.11.1",
9112 |         "@unrs/resolver-binding-linux-x64-gnu": "1.11.1",
9113 |         "@unrs/resolver-binding-linux-x64-musl": "1.11.1",
9114 |         "@unrs/resolver-binding-wasm32-wasi": "1.11.1",
9115 |         "@unrs/resolver-binding-win32-arm64-msvc": "1.11.1",
9116 |         "@unrs/resolver-binding-win32-ia32-msvc": "1.11.1",
9117 |         "@unrs/resolver-binding-win32-x64-msvc": "1.11.1"
9118 |       }
9119 |     },
9120 |     "node_modules/uri-js": {
9121 |       "version": "4.4.1",
9122 |       "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
9123 |       "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
9124 |       "dev": true,
9125 |       "license": "BSD-2-Clause",
9126 |       "dependencies": {
9127 |         "punycode": "^2.1.0"
9128 |       }
9129 |     },
9130 |     "node_modules/use-callback-ref": {
9131 |       "version": "1.3.3",
9132 |       "resolved": "https://registry.npmjs.org/use-callback-ref/-/use-callback-ref-1.3.3.tgz",
9133 |       "integrity": "sha512-jQL3lRnocaFtu3V00JToYz/4QkNWswxijDaCVNZRiRTO3HQDLsdu1ZtmIUvV4yPp+rvWm5j0y0TG/S61cuijTg==",
9134 |       "license": "MIT",
9135 |       "dependencies": {
9136 |         "tslib": "^2.0.0"
9137 |       },
9138 |       "engines": {
9139 |         "node": ">=10"
9140 |       },
9141 |       "peerDependencies": {
9142 |         "@types/react": "*",
9143 |         "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
9144 |       },
9145 |       "peerDependenciesMeta": {
9146 |         "@types/react": {
9147 |           "optional": true
9148 |         }
9149 |       }
9150 |     },
9151 |     "node_modules/use-sidecar": {
9152 |       "version": "1.1.3",
9153 |       "resolved": "https://registry.npmjs.org/use-sidecar/-/use-sidecar-1.1.3.tgz",
9154 |       "integrity": "sha512-Fedw0aZvkhynoPYlA5WXrMCAMm+nSWdZt6lzJQ7Ok8S6Q+VsHmHpRWndVRJ8Be0ZbkfPc5LRYH+5XrzXcEeLRQ==",
9155 |       "license": "MIT",
9156 |       "dependencies": {
9157 |         "detect-node-es": "^1.1.0",
9158 |         "tslib": "^2.0.0"
9159 |       },
9160 |       "engines": {
9161 |         "node": ">=10"
9162 |       },
9163 |       "peerDependencies": {
9164 |         "@types/react": "*",
9165 |         "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0 || ^19.0.0-rc"
9166 |       },
9167 |       "peerDependenciesMeta": {
9168 |         "@types/react": {
9169 |           "optional": true
9170 |         }
9171 |       }
9172 |     },
9173 |     "node_modules/use-sync-external-store": {
9174 |       "version": "1.5.0",
9175 |       "resolved": "https://registry.npmjs.org/use-sync-external-store/-/use-sync-external-store-1.5.0.tgz",
9176 |       "integrity": "sha512-Rb46I4cGGVBmjamjphe8L/UnvJD+uPPtTkNvX5mZgqdbavhI4EbgIWJiIHXJ8bc/i9EQGPRh4DwEURJ552Do0A==",
9177 |       "license": "MIT",
9178 |       "peerDependencies": {
9179 |         "react": "^16.8.0 || ^17.0.0 || ^18.0.0 || ^19.0.0"
9180 |       }
9181 |     },
9182 |     "node_modules/which": {
9183 |       "version": "2.0.2",
9184 |       "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
9185 |       "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
9186 |       "dev": true,
9187 |       "license": "ISC",
9188 |       "dependencies": {
9189 |         "isexe": "^2.0.0"
9190 |       },
9191 |       "bin": {
9192 |         "node-which": "bin/node-which"
9193 |       },
9194 |       "engines": {
9195 |         "node": ">= 8"
9196 |       }
9197 |     },
9198 |     "node_modules/which-boxed-primitive": {
9199 |       "version": "1.1.1",
9200 |       "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
9201 |       "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
9202 |       "dev": true,
9203 |       "license": "MIT",
9204 |       "dependencies": {
9205 |         "is-bigint": "^1.1.0",
9206 |         "is-boolean-object": "^1.2.1",
9207 |         "is-number-object": "^1.1.1",
9208 |         "is-string": "^1.1.1",
9209 |         "is-symbol": "^1.1.1"
9210 |       },
9211 |       "engines": {
9212 |         "node": ">= 0.4"
9213 |       },
9214 |       "funding": {
9215 |         "url": "https://github.com/sponsors/ljharb"
9216 |       }
9217 |     },
9218 |     "node_modules/which-builtin-type": {
9219 |       "version": "1.2.1",
9220 |       "resolved": "https://registry.npmjs.org/which-builtin-type/-/which-builtin-type-1.2.1.tgz",
9221 |       "integrity": "sha512-6iBczoX+kDQ7a3+YJBnh3T+KZRxM/iYNPXicqk66/Qfm1b93iu+yOImkg0zHbj5LNOcNv1TEADiZ0xa34B4q6Q==",
9222 |       "dev": true,
9223 |       "license": "MIT",
9224 |       "dependencies": {
9225 |         "call-bound": "^1.0.2",
9226 |         "function.prototype.name": "^1.1.6",
9227 |         "has-tostringtag": "^1.0.2",
9228 |         "is-async-function": "^2.0.0",
9229 |         "is-date-object": "^1.1.0",
9230 |         "is-finalizationregistry": "^1.1.0",
9231 |         "is-generator-function": "^1.0.10",
9232 |         "is-regex": "^1.2.1",
9233 |         "is-weakref": "^1.0.2",
9234 |         "isarray": "^2.0.5",
9235 |         "which-boxed-primitive": "^1.1.0",
9236 |         "which-collection": "^1.0.2",
9237 |         "which-typed-array": "^1.1.16"
9238 |       },
9239 |       "engines": {
9240 |         "node": ">= 0.4"
9241 |       },
9242 |       "funding": {
9243 |         "url": "https://github.com/sponsors/ljharb"
9244 |       }
9245 |     },
9246 |     "node_modules/which-collection": {
9247 |       "version": "1.0.2",
9248 |       "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
9249 |       "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
9250 |       "dev": true,
9251 |       "license": "MIT",
9252 |       "dependencies": {
9253 |         "is-map": "^2.0.3",
9254 |         "is-set": "^2.0.3",
9255 |         "is-weakmap": "^2.0.2",
9256 |         "is-weakset": "^2.0.3"
9257 |       },
9258 |       "engines": {
9259 |         "node": ">= 0.4"
9260 |       },
9261 |       "funding": {
9262 |         "url": "https://github.com/sponsors/ljharb"
9263 |       }
9264 |     },
9265 |     "node_modules/which-typed-array": {
9266 |       "version": "1.1.19",
9267 |       "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
9268 |       "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
9269 |       "dev": true,
9270 |       "license": "MIT",
9271 |       "dependencies": {
9272 |         "available-typed-arrays": "^1.0.7",
9273 |         "call-bind": "^1.0.8",
9274 |         "call-bound": "^1.0.4",
9275 |         "for-each": "^0.3.5",
9276 |         "get-proto": "^1.0.1",
9277 |         "gopd": "^1.2.0",
9278 |         "has-tostringtag": "^1.0.2"
9279 |       },
9280 |       "engines": {
9281 |         "node": ">= 0.4"
9282 |       },
9283 |       "funding": {
9284 |         "url": "https://github.com/sponsors/ljharb"
9285 |       }
9286 |     },
9287 |     "node_modules/word-wrap": {
9288 |       "version": "1.2.5",
9289 |       "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
9290 |       "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
9291 |       "dev": true,
9292 |       "license": "MIT",
9293 |       "engines": {
9294 |         "node": ">=0.10.0"
9295 |       }
9296 |     },
9297 |     "node_modules/xtend": {
9298 |       "version": "4.0.2",
9299 |       "resolved": "https://registry.npmjs.org/xtend/-/xtend-4.0.2.tgz",
9300 |       "integrity": "sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==",
9301 |       "license": "MIT",
9302 |       "engines": {
9303 |         "node": ">=0.4"
9304 |       }
9305 |     },
9306 |     "node_modules/yallist": {
9307 |       "version": "5.0.0",
9308 |       "resolved": "https://registry.npmjs.org/yallist/-/yallist-5.0.0.tgz",
9309 |       "integrity": "sha512-YgvUTfwqyc7UXVMrB+SImsVYSmTS8X/tSrtdNZMImM+n7+QTriRXyXim0mBrTXNeqzVF0KWGgHPeiyViFFrNDw==",
9310 |       "dev": true,
9311 |       "license": "BlueOak-1.0.0",
9312 |       "engines": {
9313 |         "node": ">=18"
9314 |       }
9315 |     },
9316 |     "node_modules/yocto-queue": {
9317 |       "version": "0.1.0",
9318 |       "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
9319 |       "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
9320 |       "dev": true,
9321 |       "license": "MIT",
9322 |       "engines": {
9323 |         "node": ">=10"
9324 |       },
9325 |       "funding": {
9326 |         "url": "https://github.com/sponsors/sindresorhus"
9327 |       }
9328 |     },
9329 |     "node_modules/zod": {
9330 |       "version": "4.0.9",
9331 |       "resolved": "https://registry.npmjs.org/zod/-/zod-4.0.9.tgz",
9332 |       "integrity": "sha512-PAqUh1FW4Irxcs6/sWfnhJGV/8F0eLNd1FryydBfbA9Qvz1LaJk0TDrSC+hIKlArS/xVISuX/yjlS1bzg2D3Zw==",
9333 |       "license": "MIT",
9334 |       "funding": {
9335 |         "url": "https://github.com/sponsors/colinhacks"
9336 |       }
9337 |     }
9338 |   }
9339 | }
9340 | 


--------------------------------------------------------------------------------
/package.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "name": "edux",
 3 |   "version": "0.1.0",
 4 |   "private": true,
 5 |   "scripts": {
 6 |     "dev": "next dev --turbopack",
 7 |     "build": "next build",
 8 |     "start": "next start",
 9 |     "lint": "next lint",
10 |     "db:generate-main": "dotenv -e .env.local -- drizzle-kit generate",
11 |     "db:migrate-main": "dotenv -e .env.local -- drizzle-kit migrate",
12 |     "db:generate-tenant": "dotenv -e .env.local -- drizzle-kit generate --config=drizzle.tenant.config.ts",
13 |     "db:migrate-tenant": "dotenv -e .env.local -- tsx ./scripts/migrate-tenant.ts"
14 |   },
15 |   "dependencies": {
16 |     "@fullcalendar/daygrid": "^6.1.19",
17 |     "@fullcalendar/interaction": "^6.1.19",
18 |     "@fullcalendar/react": "^6.1.19",
19 |     "@fullcalendar/timegrid": "^6.1.19",
20 |     "@hookform/resolvers": "^5.1.1",
21 |     "@neondatabase/serverless": "^1.0.1",
22 |     "@radix-ui/react-accordion": "^1.2.11",
23 |     "@radix-ui/react-avatar": "^1.1.10",
24 |     "@radix-ui/react-checkbox": "^1.3.2",
25 |     "@radix-ui/react-collapsible": "^1.1.11",
26 |     "@radix-ui/react-dialog": "^1.1.14",
27 |     "@radix-ui/react-dropdown-menu": "^2.1.15",
28 |     "@radix-ui/react-label": "^2.1.7",
29 |     "@radix-ui/react-progress": "^1.1.7",
30 |     "@radix-ui/react-select": "^2.2.5",
31 |     "@radix-ui/react-separator": "^1.1.7",
32 |     "@radix-ui/react-slot": "^1.2.3",
33 |     "@radix-ui/react-switch": "^1.2.5",
34 |     "@radix-ui/react-tabs": "^1.1.12",
35 |     "@radix-ui/react-tooltip": "^1.2.7",
36 |     "@t3-oss/env-nextjs": "^0.13.8",
37 |     "@tanstack/react-table": "^8.21.3",
38 |     "@vercel/speed-insights": "^1.2.0",
39 |     "bcrypt": "^6.0.0",
40 |     "class-variance-authority": "^0.7.1",
41 |     "clsx": "^2.1.1",
42 |     "cmdk": "^1.1.1",
43 |     "drizzle-orm": "^0.44.3",
44 |     "geist": "^1.4.2",
45 |     "jsonwebtoken": "^9.0.2",
46 |     "lucide-react": "^0.525.0",
47 |     "next": "15.4.2",
48 |     "next-themes": "^0.4.6",
49 |     "pino": "^9.7.0",
50 |     "postcss": "^8.5.6",
51 |     "postgres": "^3.4.7",
52 |     "react": "19.1.0",
53 |     "react-dom": "19.1.0",
54 |     "react-hook-form": "^7.60.0",
55 |     "sonner": "^2.0.6",
56 |     "tailwind-merge": "^3.3.1",
57 |     "zod": "^4.0.5"
58 |   },
59 |   "devDependencies": {
60 |     "@eslint/eslintrc": "^3",
61 |     "@tailwindcss/postcss": "^4.0.5",
62 |     "@types/bcrypt": "^6.0.0",
63 |     "@types/jsonwebtoken": "^9.0.10",
64 |     "@types/node": "^20",
65 |     "@types/pg": "^8.15.4",
66 |     "@types/react": "^19",
67 |     "@types/react-dom": "^19",
68 |     "dotenv-cli": "^8.0.0",
69 |     "drizzle-kit": "^0.31.4",
70 |     "eslint": "^9",
71 |     "eslint-config-next": "15.4.2",
72 |     "pg": "^8.16.3",
73 |     "tailwindcss": "^4.1.11",
74 |     "tsx": "^4.20.3",
75 |     "tw-animate-css": "^1.3.5",
76 |     "typescript": "^5"
77 |   },
78 |   "packageManager": "npm@11.4.2+sha512.f90c1ec8b207b625d6edb6693aef23dacb39c38e4217fe8c46a973f119cab392ac0de23fe3f07e583188dae9fd9108b3845ad6f525b598742bd060ebad60bff3"
79 | }
80 | 


--------------------------------------------------------------------------------
/postcss.config.mjs:
--------------------------------------------------------------------------------
1 | const config = {
2 |   plugins: {
3 |     "@tailwindcss/postcss": {},
4 |   },
5 | };
6 | export default config;
7 | 


--------------------------------------------------------------------------------
/public/file.svg:
--------------------------------------------------------------------------------
1 | <svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>


--------------------------------------------------------------------------------
/public/globe.svg:
--------------------------------------------------------------------------------
1 | <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>


--------------------------------------------------------------------------------
/public/next.svg:
--------------------------------------------------------------------------------
1 | <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>


--------------------------------------------------------------------------------
/public/notion-avatar-1753323104262.png:
--------------------------------------------------------------------------------
https://raw.githubusercontent.com/shoaibrain/edux/Calendar/public/notion-avatar-1753323104262.png


--------------------------------------------------------------------------------
/public/vercel.svg:
--------------------------------------------------------------------------------
1 | <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>


--------------------------------------------------------------------------------
/public/window.svg:
--------------------------------------------------------------------------------
1 | <svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>


--------------------------------------------------------------------------------
/scripts/migrate-tenant.ts:
--------------------------------------------------------------------------------
 1 | import { drizzle } from 'drizzle-orm/postgres-js';
 2 | import { migrate } from 'drizzle-orm/postgres-js/migrator';
 3 | import postgres from 'postgres';
 4 | import 'dotenv/config';
 5 | 
 6 | async function main() {
 7 |   const connectionString = process.env.TENANT_DATABASE_URL;
 8 | 
 9 |   if (!connectionString) {
10 |     throw new Error('TENANT_DATABASE_URL environment variable is not set.');
11 |   }
12 | 
13 |   // Use postgres 'on-the-fly' with max 1 connection for migrations
14 |   const migrationClient = postgres(connectionString, { max: 1 });
15 |   const db = drizzle(migrationClient);
16 | 
17 |   console.log('Running migrations for tenant...');
18 | 
19 |   await migrate(db, { migrationsFolder: './drizzle/tenant' });
20 | 
21 |   console.log('Migrations completed successfully.');
22 | 
23 |   await migrationClient.end();
24 |   process.exit(0);
25 | }
26 | 
27 | main().catch((err) => {
28 |   console.error('Migration failed:', err);
29 |   process.exit(1);
30 | });


--------------------------------------------------------------------------------
/scripts/seed-tenant-data.ts:
--------------------------------------------------------------------------------
 1 | import { NodePgDatabase } from 'drizzle-orm/node-postgres';
 2 | import * as tenantSchema from '@/lib/db/schema/tenant'; 
 3 | import { eq } from 'drizzle-orm';
 4 | import log from '@/lib/logger';
 5 | // Import constants from the new rbac.ts file
 6 | import { defaultRoles, defaultPermissions, rolePermissionsMap } from '@/lib/constants/rbac'; 
 7 | 
 8 | export async function seedTenantData(db: NodePgDatabase<typeof tenantSchema>) {
 9 |   log.info('Starting tenant data seeding...');
10 |   try {
11 |     // Insert permissions
12 |     const insertedPermissions = await Promise.all(
13 |       defaultPermissions.map(async (perm) => {
14 |         const [existingPerm] = await db.select().from(tenantSchema.permissions).where(eq(tenantSchema.permissions.name, perm.name));
15 |         if (existingPerm) {
16 |           log.info(`Permission '${perm.name}' already exists, skipping insertion.`);
17 |           return existingPerm;
18 |         } else {
19 |           const [newPerm] = await db.insert(tenantSchema.permissions).values(perm).returning();
20 |           log.info(`Inserted permission: ${newPerm.name}`);
21 |           return newPerm;
22 |         }
23 |       })
24 |     );
25 | 
26 |     // Insert roles
27 |     const insertedRoles = await Promise.all(
28 |       defaultRoles.map(async (role) => {
29 |         const [existingRole] = await db.select().from(tenantSchema.roles).where(eq(tenantSchema.roles.name, role.name));
30 |         if (existingRole) {
31 |           log.info(`Role '${role.name}' already exists, skipping insertion.`);
32 |           return existingRole;
33 |         } else {
34 |           const [newRole] = await db.insert(tenantSchema.roles).values(role).returning();
35 |           log.info(`Inserted role: ${newRole.name}`);
36 |           return newRole;
37 |         }
38 |       })
39 |     );
40 | 
41 |     // Assign permissions to roles
42 |     for (const role of insertedRoles) {
43 |       const permissionsForRole = rolePermissionsMap[role.name];
44 |       if (permissionsForRole) {
45 |         for (const permName of permissionsForRole) {
46 |           const permission = insertedPermissions.find(p => p.name === permName);
47 |           if (permission) {
48 |             const [existingAssociation] = await db.select()
49 |               .from(tenantSchema.rolesToPermissions)
50 |               .where(
51 |                 eq(tenantSchema.rolesToPermissions.roleId, role.id) &&
52 |                 eq(tenantSchema.rolesToPermissions.permissionId, permission.id)
53 |               );
54 | 
55 |             if (!existingAssociation) {
56 |               await db.insert(tenantSchema.rolesToPermissions).values({
57 |                 roleId: role.id,
58 |                 permissionId: permission.id,
59 |               });
60 |               log.info(`Assigned permission '${permission.name}' to role '${role.name}'.`);
61 |             } else {
62 |               log.info(`Permission '${permission.name}' already assigned to role '${role.name}', skipping.`);
63 |             }
64 |           } else {
65 |             log.warn(`Permission '${permName}' not found for role '${role.name}'.`);
66 |           }
67 |         }
68 |       }
69 |     }
70 | 
71 |     log.info('Tenant data seeding completed successfully.');
72 |   } catch (error) {
73 |     log.error({ error }, 'Tenant data seeding failed.');
74 |     throw error;
75 |   }
76 | }
77 | 


--------------------------------------------------------------------------------
/tsconfig.json:
--------------------------------------------------------------------------------
 1 | {
 2 |   "compilerOptions": {
 3 |     "target": "ES2017",
 4 |     "lib": ["dom", "dom.iterable", "esnext"],
 5 |     "allowJs": true,
 6 |     "skipLibCheck": true,
 7 |     "strict": true,
 8 |     "noEmit": true,
 9 |     "esModuleInterop": true,
10 |     "module": "esnext",
11 |     "moduleResolution": "bundler",
12 |     "resolveJsonModule": true,
13 |     "isolatedModules": true,
14 |     "jsx": "preserve",
15 |     "incremental": true,
16 |     "plugins": [
17 |       {
18 |         "name": "next"
19 |       }
20 |     ],
21 |     "paths": {
22 |       "@/*": ["./*"]
23 |     }
24 |   },
25 |   "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts", "next.config.js", "next.config.js", "middleware.js"],
26 |   "exclude": ["node_modules"]
27 | }
28 | 


--------------------------------------------------------------------------------